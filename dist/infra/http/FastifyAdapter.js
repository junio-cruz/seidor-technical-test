var G1=Object.create;var ya=Object.defineProperty;var K1=Object.getOwnPropertyDescriptor;var Y1=Object.getOwnPropertyNames;var W1=Object.getPrototypeOf,J1=Object.prototype.hasOwnProperty;var E=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),X1=(e,t)=>{for(var r in t)ya(e,r,{get:t[r],enumerable:!0})},Ay=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Y1(t))!J1.call(e,s)&&s!==r&&ya(e,s,{get:()=>t[s],enumerable:!(n=K1(t,s))||n.enumerable});return e};var ec=(e,t,r)=>(r=e!=null?G1(W1(e)):{},Ay(t||!e||!e.__esModule?ya(r,"default",{value:e,enumerable:!0}):r,e)),Q1=e=>Ay(ya({},"__esModule",{value:!0}),e);var Iy=E((hK,tc)=>{"use strict";var Z1=/at\s{1}(?:.*\.)?plugin\s{1}.*\n\s*(.*)/,eA=/(\w*(\.\w*)*)\..*/;tc.exports=function(t){if(t.name.length>0)return t.name;let r=Error.stackTraceLimit;Error.stackTraceLimit=10;try{throw new Error("anonymous function")}catch(n){return Error.stackTraceLimit=r,Cy(n.stack)}};function Cy(e){let t=e.match(Z1);return t?t[1].split(/[/\\]/).slice(-1)[0].match(eA)[1]:"anonymous"}tc.exports.extractPluginName=Cy});var ky=E((pK,Ny)=>{"use strict";Ny.exports=function(t){return t[0]==="@"&&(t=t.slice(1).replace("/","-")),t.replace(/-(.)/g,function(n,s){return s.toUpperCase()})}});var qy=E((mK,ga)=>{"use strict";var tA=Iy(),rA=ky(),nA=0;function rc(e,t={}){let r=!1;if(typeof e.default<"u"&&(e=e.default),typeof e!="function")throw new TypeError(`fastify-plugin expects a function, instead got a '${typeof e}'`);if(typeof t=="string"&&(t={fastify:t}),typeof t!="object"||Array.isArray(t)||t===null)throw new TypeError("The options object should be an object");if(t.fastify!==void 0&&typeof t.fastify!="string")throw new TypeError(`fastify-plugin expects a version string, instead got '${typeof t.fastify}'`);t.name||(r=!0,t.name=tA(e)+"-auto-"+nA++),e[Symbol.for("skip-override")]=t.encapsulate!==!0,e[Symbol.for("fastify.display-name")]=t.name,e[Symbol.for("plugin-meta")]=t,e.default||(e.default=e);let n=rA(t.name);return!r&&!e[n]&&(e[n]=e),e}ga.exports=rc;ga.exports.default=rc;ga.exports.fastifyPlugin=rc});var jy=E((yK,Dy)=>{function br(e){if(typeof e!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=e}typeof Symbol<"u"&&(br.prototype[Symbol.iterator]=function(){return this});br.of=function(){var e=arguments,t=e.length,r=0;return new br(function(){return r>=t?{done:!0}:{done:!1,value:e[r++]}})};br.empty=function(){var e=new br(function(){return{done:!0}});return e};br.fromSequence=function(e){var t=0,r=e.length;return new br(function(){return t>=r?{done:!0}:{done:!1,value:e[t++]}})};br.is=function(e){return e instanceof br?!0:typeof e=="object"&&e!==null&&typeof e.next=="function"};Dy.exports=br});var xy=E(nc=>{nc.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";nc.SYMBOL_SUPPORT=typeof Symbol<"u"});var sc=E((_K,Fy)=>{var Ly=xy(),sA=Ly.ARRAY_BUFFER_SUPPORT,iA=Ly.SYMBOL_SUPPORT;Fy.exports=function(t,r){var n,s,i,o,a;if(!t)throw new Error("obliterator/forEach: invalid iterable.");if(typeof r!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(t)||sA&&ArrayBuffer.isView(t)||typeof t=="string"||t.toString()==="[object Arguments]"){for(i=0,o=t.length;i<o;i++)r(t[i],i);return}if(typeof t.forEach=="function"){t.forEach(r);return}if(iA&&Symbol.iterator in t&&typeof t.next!="function"&&(t=t[Symbol.iterator]()),typeof t.next=="function"){for(n=t,i=0;a=n.next(),a.done!==!0;)r(a.value,i),i++;return}for(s in t)t.hasOwnProperty(s)&&r(t[s],s)}});var ic=E(wr=>{var oA=Math.pow(2,8)-1,aA=Math.pow(2,16)-1,uA=Math.pow(2,32)-1,lA=Math.pow(2,7)-1,cA=Math.pow(2,15)-1,fA=Math.pow(2,31)-1;wr.getPointerArray=function(e){var t=e-1;if(t<=oA)return Uint8Array;if(t<=aA)return Uint16Array;if(t<=uA)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")};wr.getSignedPointerArray=function(e){var t=e-1;return t<=lA?Int8Array:t<=cA?Int16Array:t<=fA?Int32Array:Float64Array};wr.getNumberType=function(e){return e===(e|0)?Math.sign(e)===-1?e<=127&&e>=-128?Int8Array:e<=32767&&e>=-32768?Int16Array:Int32Array:e<=255?Uint8Array:e<=65535?Uint16Array:Uint32Array:Float64Array};var dA={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};wr.getMinimalRepresentation=function(e,t){var r=null,n=0,s,i,o,a,u;for(a=0,u=e.length;a<u;a++)o=t?t(e[a]):e[a],i=wr.getNumberType(o),s=dA[i.name],s>n&&(n=s,r=i);return r};wr.isTypedArray=function(e){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(e)};wr.concat=function(){var e=0,t,r,n;for(t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var s=new arguments[0].constructor(e);for(t=0,r=0;t<n;t++)s.set(arguments[t],r),r+=arguments[t].length;return s};wr.indices=function(e){for(var t=wr.getPointerArray(e),r=new t(e),n=0;n<e;n++)r[n]=n;return r}});var Hy=E(Ii=>{var My=sc(),Vy=ic();function hA(e){return Array.isArray(e)||Vy.isTypedArray(e)}function oc(e){if(typeof e.length=="number")return e.length;if(typeof e.size=="number")return e.size}function pA(e){var t=oc(e),r=typeof t=="number"?new Array(t):[],n=0;return My(e,function(s){r[n++]=s}),r}function mA(e){var t=oc(e),r=typeof t=="number"?Vy.getPointerArray(t):Array,n=typeof t=="number"?new Array(t):[],s=typeof t=="number"?new r(t):[],i=0;return My(e,function(o){n[i]=o,s[i]=i++}),[n,s]}Ii.isArrayLike=hA;Ii.guessLength=oc;Ii.toArray=pA;Ii.toArrayWithIndices=mA});var Uy=E((SK,zy)=>{var ac=jy(),yA=sc(),gA=ic(),_A=Hy();function nt(e,t,r){if(arguments.length<2&&(r=e,e=null,t=null),this.capacity=r,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-cache: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw new Error("mnemonist/lru-cache: capacity should be a finite positive integer.");var n=gA.getPointerArray(r);this.forward=new n(r),this.backward=new n(r),this.K=typeof e=="function"?new e(r):new Array(r),this.V=typeof t=="function"?new t(r):new Array(r),this.size=0,this.head=0,this.tail=0,this.items={}}nt.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items={}};nt.prototype.splayOnTop=function(e){var t=this.head;if(this.head===e)return this;var r=this.backward[e],n=this.forward[e];return this.tail===e?this.tail=r:this.backward[n]=r,this.forward[r]=n,this.backward[t]=e,this.head=e,this.forward[e]=t,this};nt.prototype.set=function(e,t){var r=this.items[e];if(typeof r<"u"){this.splayOnTop(r),this.V[r]=t;return}this.size<this.capacity?r=this.size++:(r=this.tail,this.tail=this.backward[r],delete this.items[this.K[r]]),this.items[e]=r,this.K[r]=e,this.V[r]=t,this.forward[r]=this.head,this.backward[this.head]=r,this.head=r};nt.prototype.setpop=function(e,t){var r=null,n=null,s=this.items[e];return typeof s<"u"?(this.splayOnTop(s),r=this.V[s],this.V[s]=t,{evicted:!1,key:e,value:r}):(this.size<this.capacity?s=this.size++:(s=this.tail,this.tail=this.backward[s],r=this.V[s],n=this.K[s],delete this.items[this.K[s]]),this.items[e]=s,this.K[s]=e,this.V[s]=t,this.forward[s]=this.head,this.backward[this.head]=s,this.head=s,n?{evicted:!0,key:n,value:r}:null)};nt.prototype.has=function(e){return e in this.items};nt.prototype.get=function(e){var t=this.items[e];if(!(typeof t>"u"))return this.splayOnTop(t),this.V[t]};nt.prototype.peek=function(e){var t=this.items[e];if(!(typeof t>"u"))return this.V[t]};nt.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r=0,n=this.size,s=this.head,i=this.K,o=this.V,a=this.forward;r<n;)e.call(t,o[s],i[s],this),s=a[s],r++};nt.prototype.keys=function(){var e=0,t=this.size,r=this.head,n=this.K,s=this.forward;return new ac(function(){if(e>=t)return{done:!0};var i=n[r];return e++,e<t&&(r=s[r]),{done:!1,value:i}})};nt.prototype.values=function(){var e=0,t=this.size,r=this.head,n=this.V,s=this.forward;return new ac(function(){if(e>=t)return{done:!0};var i=n[r];return e++,e<t&&(r=s[r]),{done:!1,value:i}})};nt.prototype.entries=function(){var e=0,t=this.size,r=this.head,n=this.K,s=this.V,i=this.forward;return new ac(function(){if(e>=t)return{done:!0};var o=n[r],a=s[r];return e++,e<t&&(r=i[r]),{done:!1,value:[o,a]}})};typeof Symbol<"u"&&(nt.prototype[Symbol.iterator]=nt.prototype.entries);nt.prototype.inspect=function(){for(var e=new Map,t=this.entries(),r;r=t.next(),!r.done;)e.set(r.value[0],r.value[1]);return Object.defineProperty(e,"constructor",{value:nt,enumerable:!1}),e};typeof Symbol<"u"&&(nt.prototype[Symbol.for("nodejs.util.inspect.custom")]=nt.prototype.inspect);nt.from=function(e,t,r,n){if(arguments.length<2){if(n=_A.guessLength(e),typeof n!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(n=t,t=null,r=null);var s=new nt(t,r,n);return yA(e,function(i,o){s.set(o,i)}),s};zy.exports=nt});var Gy=E((bK,Ni)=>{"use strict";var vA=Uy(),EA=/^[!#$%&'*+\-.^\w`|~]+$/u;function SA(e){if(EA.test(e)===!1)throw new TypeError("Fieldname contains invalid characters.")}function By(e){e=e.trim().toLowerCase();let t=[];if(e.length!==0)if(e.indexOf(",")===-1)t.push(e);else{let r=e.length,n=0,s=0,i;for(n=0;n<r;++n)i=e[n],i===" "?s=n+1:i===","&&(s!==n&&t.push(e.slice(s,n)),s=n+1);s!==n&&t.push(e.slice(s,n))}return t}function uc(e){let t=new vA(1e3);return SA(e),function(r){let n=r.getHeader("Vary");if(!n){r.header("Vary",e);return}if(n==="*")return;if(e==="*"){r.header("Vary","*");return}if(Array.isArray(n)&&(n=n.join(", ")),!t.has(n)){let i=By(n);i.indexOf("*")!==-1?t.set(n,"*"):i.indexOf(e.toLowerCase())===-1?t.set(n,n+", "+e):t.set(n,null)}let s=t.get(n);s!==null&&r.header("Vary",s)}}Ni.exports.createAddFieldnameToVary=uc;Ni.exports.addOriginToVaryHeader=uc("Origin");Ni.exports.addAccessControlRequestHeadersToVaryHeader=uc("Access-Control-Request-Headers");Ni.exports.parse=By});var Xy=E((wK,va)=>{"use strict";var bA=qy(),{addAccessControlRequestHeadersToVaryHeader:wA,addOriginToVaryHeader:RA}=Gy(),cc={origin:"*",methods:"GET,HEAD,PUT,PATCH,POST,DELETE",hook:"onRequest",preflightContinue:!1,optionsSuccessStatus:204,credentials:!1,exposedHeaders:null,allowedHeaders:null,maxAge:null,preflight:!0,strictPreflight:!0},TA=["onRequest","preParsing","preValidation","preHandler","preSerialization","onSend"],lc=["preSerialization","preParsing","onSend"];function Wy(e,t){TA.indexOf(e)===-1&&t(new TypeError("@fastify/cors: Invalid hook option provided."))}function PA(e,t,r){e.decorateRequest("corsPreflightEnabled",!1);let n=!0;if(typeof t=="function")Ky(t,e,{hook:cc.hook},r);else if(t.delegator){let{delegator:s,...i}=t;Ky(s,e,i,r)}else{t.hideOptionsRoute!==void 0&&(n=t.hideOptionsRoute);let s=_a(t);Wy(s.hook,r),lc.indexOf(s.hook)!==-1?e.addHook(s.hook,function(o,a,u,c){ki(e,s,o,a,c)}):e.addHook(s.hook,function(o,a,u){ki(e,s,o,a,u)})}e.options("*",{schema:{hide:n}},(s,i)=>{if(!s.corsPreflightEnabled){i.callNotFound();return}i.send()}),r()}function Ky(e,t,r,n){let s=r&&r.hook||cc.hook;Wy(s,n),e.length===2?lc.indexOf(s)!==-1?t.addHook(s,function(o,a,u,c){Yy(e,t,o,a,c)}):t.addHook(s,function(o,a,u){Yy(e,t,o,a,u)}):lc.indexOf(s)!==-1?t.addHook(s,function(o,a,u,c){let l=e(o);if(l&&typeof l.then=="function"){l.then(f=>ki(t,_a(f),o,a,c)).catch(c);return}c(new Error("Invalid CORS origin option"))}):t.addHook(s,function(o,a,u){let c=e(o);if(c&&typeof c.then=="function"){c.then(l=>ki(t,_a(l),o,a,u)).catch(u);return}u(new Error("Invalid CORS origin option"))})}function Yy(e,t,r,n,s){e(r,(i,o)=>{i?s(i):ki(t,_a(o),r,n,s)})}function _a(e){let t={...cc,...e};return Array.isArray(e.origin)&&e.origin.indexOf("*")!==-1&&(t.origin="*"),Number.isInteger(t.cacheControl)?t.cacheControl=`max-age=${t.cacheControl}`:typeof t.cacheControl!="string"&&(t.cacheControl=null),t}function ki(e,t,r,n,s){RA(n),(typeof t.origin=="function"?AA(e,t.origin):(o,a)=>a(null,t.origin))(r,(o,a)=>{if(o!==null)return s(o);if(a===!1)return s();if(!a)return s(new Error("Invalid CORS origin option"));if($A(r,n,a,t),r.raw.method==="OPTIONS"&&t.preflight===!0){if(t.strictPreflight===!0&&(!r.headers.origin||!r.headers["access-control-request-method"])){n.status(400).type("text/plain").send("Invalid Preflight Request");return}if(r.corsPreflightEnabled=!0,OA(r,n,t),!t.preflightContinue){n.code(t.optionsSuccessStatus).header("Content-Length","0").send();return}}return s()})}function $A(e,t,r,n){let s=CA(e.headers.origin,r);s&&t.header("Access-Control-Allow-Origin",s),n.credentials&&t.header("Access-Control-Allow-Credentials","true"),n.exposedHeaders!==null&&t.header("Access-Control-Expose-Headers",Array.isArray(n.exposedHeaders)?n.exposedHeaders.join(", "):n.exposedHeaders)}function OA(e,t,r){if(t.header("Access-Control-Allow-Methods",Array.isArray(r.methods)?r.methods.join(", "):r.methods),r.allowedHeaders===null){wA(t);let n=e.headers["access-control-request-headers"];n!==void 0&&t.header("Access-Control-Allow-Headers",n)}else t.header("Access-Control-Allow-Headers",Array.isArray(r.allowedHeaders)?r.allowedHeaders.join(", "):r.allowedHeaders);r.maxAge!==null&&t.header("Access-Control-Max-Age",String(r.maxAge)),r.cacheControl&&t.header("Cache-Control",r.cacheControl)}function AA(e,t){return function(r,n){let s=t.call(e,r.headers.origin,n);s&&typeof s.then=="function"&&s.then(i=>n(null,i),n)}}function CA(e,t){return t==="*"?"*":typeof t=="string"?t:Jy(e,t)?e:!1}function Jy(e,t){if(Array.isArray(t)){for(let r=0;r<t.length;++r)if(Jy(e,t[r]))return!0;return!1}else return typeof t=="string"?e===t:t instanceof RegExp?(t.lastIndex=0,t.test(e)):!!t}var fc=bA(PA,{fastify:"4.x",name:"@fastify/cors"});va.exports=fc;va.exports.fastifyCors=fc;va.exports.default=fc});var Zy=E((RK,Qy)=>{"use strict";function IA(e){var t=new e,r=t;function n(){var i=t;return i.next?t=i.next:(t=new e,r=t),i.next=null,i}function s(i){r.next=i,r=i}return{get:n,release:s}}Qy.exports=IA});var hc=E((TK,dc)=>{"use strict";var NA=Zy();function eg(e,t,r){if(typeof e=="function"&&(r=t,t=e,e=null),r<1)throw new Error("fastqueue concurrency must be greater than 1");var n=NA(kA),s=null,i=null,o=0,a=null,u={push:y,drain:Jt,saturated:Jt,pause:l,paused:!1,concurrency:r,running:c,resume:h,idle:p,length:f,getQueue:d,unshift:v,empty:Jt,kill:w,killAndDrain:g,error:m};return u;function c(){return o}function l(){u.paused=!0}function f(){for(var T=s,A=0;T;)T=T.next,A++;return A}function d(){for(var T=s,A=[];T;)A.push(T.value),T=T.next;return A}function h(){if(u.paused){u.paused=!1;for(var T=0;T<u.concurrency;T++)o++,_()}}function p(){return o===0&&u.length()===0}function y(T,A){var b=n.get();b.context=e,b.release=_,b.value=T,b.callback=A||Jt,b.errorHandler=a,o===u.concurrency||u.paused?i?(i.next=b,i=b):(s=b,i=b,u.saturated()):(o++,t.call(e,b.value,b.worked))}function v(T,A){var b=n.get();b.context=e,b.release=_,b.value=T,b.callback=A||Jt,o===u.concurrency||u.paused?s?(b.next=s,s=b):(s=b,i=b,u.saturated()):(o++,t.call(e,b.value,b.worked))}function _(T){T&&n.release(T);var A=s;A?u.paused?o--:(i===s&&(i=null),s=A.next,A.next=null,t.call(e,A.value,A.worked),i===null&&u.empty()):--o===0&&u.drain()}function w(){s=null,i=null,u.drain=Jt}function g(){s=null,i=null,u.drain(),u.drain=Jt}function m(T){a=T}}function Jt(){}function kA(){this.value=null,this.callback=Jt,this.next=null,this.release=Jt,this.context=null,this.errorHandler=null;var e=this;this.worked=function(r,n){var s=e.callback,i=e.errorHandler,o=e.value;e.value=null,e.callback=Jt,e.errorHandler&&i(r,o),s.call(e.context,r,n),e.release(e)}}function qA(e,t,r){typeof e=="function"&&(r=t,t=e,e=null);function n(l,f){t.call(this,l).then(function(d){f(null,d)},f)}var s=eg(e,n,r),i=s.push,o=s.unshift;return s.push=a,s.unshift=u,s.drained=c,s;function a(l){var f=new Promise(function(d,h){i(l,function(p,y){if(p){h(p);return}d(y)})});return f.catch(Jt),f}function u(l){var f=new Promise(function(d,h){o(l,function(p,y){if(p){h(p);return}d(y)})});return f.catch(Jt),f}function c(){if(s.idle())return new Promise(function(d){d()});var l=s.drain,f=new Promise(function(d){s.drain=function(){l(),d()}});return f}}dc.exports=eg;dc.exports.promise=qA});var mc=E((PK,tg)=>{"use strict";var{inherits:DA,format:pc}=require("util");function Vn(e,t,r=Error){if(!e)throw new Error("Avvio error code must not be empty");if(!t)throw new Error("Avvio base error message must not be empty");function n(s,i,o){if(!new.target)return new n(s,i,o);Error.captureStackTrace(this,n),this.code=e,this.message=t,this.name="AvvioError",s&&i&&o?this.message=pc(t,s,i,o):s&&i?this.message=pc(t,s,i):s?this.message=pc(t,s):this.message=t}return n.prototype[Symbol.toStringTag]="Error",n.prototype.toString=function(){return`${this.name} [${this.code}]: ${this.message}`},DA(n,r),n}tg.exports={createError:Vn,AVV_ERR_EXPOSE_ALREADY_DEFINED:Vn("AVV_ERR_EXPOSE_ALREADY_DEFINED","'%s' () is already defined, specify an expose option"),AVV_ERR_CALLBACK_NOT_FN:Vn("AVV_ERR_CALLBACK_NOT_FN","Callback for '%s' hook is not a function. Received: '%s'"),AVV_ERR_PLUGIN_NOT_VALID:Vn("AVV_ERR_PLUGIN_NOT_VALID","Plugin must be a function or a promise. Received: '%s'"),AVV_ERR_ROOT_PLG_BOOTED:Vn("AVV_ERR_PLUGIN_NOT_VALID","Root plugin has already booted"),AVV_ERR_PARENT_PLG_LOADED:Vn("AVV_ERR_PARENT_PLG_LOADED","Impossible to load '%s' plugin because the parent '%s' was already loaded"),AVV_ERR_READY_TIMEOUT:Vn("AVV_ERR_READY_TIMEOUT","Plugin did not start in time: '%s'. You may have forgotten to call 'done' function or to resolve a Promise")}});var ng=E(($K,rg)=>{rg.exports=function e(t,r,n){r===void 0&&(r=""),n||(n={});var s=function(u){var c={"\u2502":"|","\u2514":"`","\u251C":"+","\u2500":"-","\u252C":"-"};return n.unicode===!1?c[u]:u};typeof t=="string"&&(t={label:t});var i=t.nodes||[],o=(t.label||"").split(`
`),a=`
`+r+(i.length?s("\u2502"):" ")+" ";return r+o.join(a)+`
`+i.map(function(u,c){var l=c===i.length-1,f=u.nodes&&u.nodes.length,d=r+(l?" ":s("\u2502"))+" ";return r+s(l?"\u2514":"\u251C")+s("\u2500")+s(f?"\u252C":"\u2500")+" "+e(u,d,n).slice(r.length+2)}).join("")}});var lg=E((OK,ug)=>{"use strict";var jA=ng(),sg=Symbol("avvio.TimeTree.untrackNode"),yc=Symbol("avvio.TimeTree.trackNode"),ig=Symbol("avvio.TimeTree.getParent"),og=Symbol("avvio.TimeTree.getNode"),ag=Symbol("avvio.TimeTree.addNode"),gc=class{constructor(){this.root=null,this.tableId=new Map,this.tableLabel=new Map}[yc](t){this.tableId.set(t.id,t),this.tableLabel.has(t.label)?this.tableLabel.get(t.label).push(t):this.tableLabel.set(t.label,[t])}[sg](t){this.tableId.delete(t.id);let r=this.tableLabel.get(t.label);if(r.id){this.tableLabel.delete(t.label);return}r.pop(),r.length===0&&this.tableLabel.delete(t.label)}[ig](t){if(t===null)return this.root;let r=this.tableLabel.get(t);return r.id?r:r[r.length-1]}[og](t){return this.tableId.get(t)}[ag](t,r,n){if(t===null)return this.root={id:"root",label:r,start:n,nodes:[]},this[yc](this.root),this.root.id;let i=this[ig](t),o=`${r}-${Math.random()}`,a={id:o,parent:t,start:n,label:r,nodes:[]};return i.nodes.push(a),this[yc](a),o}start(t,r,n=Date.now()){return this[ag](t,r,n)}stop(t,r=Date.now()){let n=this[og](t);n&&(n.stop=r,n.diff=n.stop-n.start||0,this[sg](n))}toJSON(){return Object.assign({},this.root)}prittyPrint(){let t=n=>(n.label=`${n.label} ${n.diff} ms`,n.nodes.length>0&&(n.nodes=n.nodes.map(s=>t(s))),n),r=t(this.toJSON());return jA(r)}};ug.exports=gc});var fg=E((AK,cg)=>{var bs=1e3,ws=bs*60,Rs=ws*60,Hn=Rs*24,xA=Hn*7,LA=Hn*365.25;cg.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return FA(e);if(r==="number"&&isFinite(e))return t.long?VA(e):MA(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function FA(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*LA;case"weeks":case"week":case"w":return r*xA;case"days":case"day":case"d":return r*Hn;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Rs;case"minutes":case"minute":case"mins":case"min":case"m":return r*ws;case"seconds":case"second":case"secs":case"sec":case"s":return r*bs;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function MA(e){var t=Math.abs(e);return t>=Hn?Math.round(e/Hn)+"d":t>=Rs?Math.round(e/Rs)+"h":t>=ws?Math.round(e/ws)+"m":t>=bs?Math.round(e/bs)+"s":e+"ms"}function VA(e){var t=Math.abs(e);return t>=Hn?Ea(e,t,Hn,"day"):t>=Rs?Ea(e,t,Rs,"hour"):t>=ws?Ea(e,t,ws,"minute"):t>=bs?Ea(e,t,bs,"second"):e+" ms"}function Ea(e,t,r,n){var s=t>=r*1.5;return Math.round(e/r)+" "+n+(s?"s":"")}});var _c=E((CK,dg)=>{function HA(e){r.debug=r,r.default=r,r.coerce=u,r.disable=i,r.enable=s,r.enabled=o,r.humanize=fg(),r.destroy=c,Object.keys(e).forEach(l=>{r[l]=e[l]}),r.names=[],r.skips=[],r.formatters={};function t(l){let f=0;for(let d=0;d<l.length;d++)f=(f<<5)-f+l.charCodeAt(d),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=t;function r(l){let f,d=null,h,p;function y(...v){if(!y.enabled)return;let _=y,w=Number(new Date),g=w-(f||w);_.diff=g,_.prev=f,_.curr=w,f=w,v[0]=r.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let m=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(A,b)=>{if(A==="%%")return"%";m++;let $=r.formatters[b];if(typeof $=="function"){let k=v[m];A=$.call(_,k),v.splice(m,1),m--}return A}),r.formatArgs.call(_,v),(_.log||r.log).apply(_,v)}return y.namespace=l,y.useColors=r.useColors(),y.color=r.selectColor(l),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(h!==r.namespaces&&(h=r.namespaces,p=r.enabled(l)),p),set:v=>{d=v}}),typeof r.init=="function"&&r.init(y),y}function n(l,f){let d=r(this.namespace+(typeof f>"u"?":":f)+l);return d.log=this.log,d}function s(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let f,d=(typeof l=="string"?l:"").split(/[\s,]+/),h=d.length;for(f=0;f<h;f++)d[f]&&(l=d[f].replace(/\*/g,".*?"),l[0]==="-"?r.skips.push(new RegExp("^"+l.slice(1)+"$")):r.names.push(new RegExp("^"+l+"$")))}function i(){let l=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),l}function o(l){if(l[l.length-1]==="*")return!0;let f,d;for(f=0,d=r.skips.length;f<d;f++)if(r.skips[f].test(l))return!1;for(f=0,d=r.names.length;f<d;f++)if(r.names[f].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function u(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}dg.exports=HA});var hg=E((Ut,Sa)=>{Ut.formatArgs=UA;Ut.save=BA;Ut.load=GA;Ut.useColors=zA;Ut.storage=KA();Ut.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Ut.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function zA(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function UA(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Sa.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,s=>{s!=="%%"&&(r++,s==="%c"&&(n=r))}),e.splice(n,0,t)}Ut.log=console.debug||console.log||(()=>{});function BA(e){try{e?Ut.storage.setItem("debug",e):Ut.storage.removeItem("debug")}catch{}}function GA(){let e;try{e=Ut.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function KA(){try{return localStorage}catch{}}Sa.exports=_c()(Ut);var{formatters:YA}=Sa.exports;YA.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var mg=E((IK,pg)=>{"use strict";pg.exports=(e,t)=>{t=t||process.argv;let r=e.startsWith("-")?"":e.length===1?"-":"--",n=t.indexOf(r+e),s=t.indexOf("--");return n!==-1&&(s===-1?!0:n<s)}});var gg=E((NK,yg)=>{"use strict";var WA=require("os"),lr=mg(),Et=process.env,Ts;lr("no-color")||lr("no-colors")||lr("color=false")?Ts=!1:(lr("color")||lr("colors")||lr("color=true")||lr("color=always"))&&(Ts=!0);"FORCE_COLOR"in Et&&(Ts=Et.FORCE_COLOR.length===0||parseInt(Et.FORCE_COLOR,10)!==0);function JA(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function XA(e){if(Ts===!1)return 0;if(lr("color=16m")||lr("color=full")||lr("color=truecolor"))return 3;if(lr("color=256"))return 2;if(e&&!e.isTTY&&Ts!==!0)return 0;let t=Ts?1:0;if(process.platform==="win32"){let r=WA.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in Et)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(r=>r in Et)||Et.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in Et)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Et.TEAMCITY_VERSION)?1:0;if(Et.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Et){let r=parseInt((Et.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Et.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Et.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Et.TERM)||"COLORTERM"in Et?1:(Et.TERM==="dumb",t)}function vc(e){let t=XA(e);return JA(t)}yg.exports={supportsColor:vc,stdout:vc(process.stdout),stderr:vc(process.stderr)}});var vg=E((pt,wa)=>{var QA=require("tty"),ba=require("util");pt.init=iC;pt.log=rC;pt.formatArgs=eC;pt.save=nC;pt.load=sC;pt.useColors=ZA;pt.destroy=ba.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");pt.colors=[6,2,3,4,5,1];try{let e=gg();e&&(e.stderr||e).level>=2&&(pt.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}pt.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(s,i)=>i.toUpperCase()),n=process.env[t];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[r]=n,e},{});function ZA(){return"colors"in pt.inspectOpts?!!pt.inspectOpts.colors:QA.isatty(process.stderr.fd)}function eC(e){let{namespace:t,useColors:r}=this;if(r){let n=this.color,s="\x1B[3"+(n<8?n:"8;5;"+n),i=`  ${s};1m${t} \x1B[0m`;e[0]=i+e[0].split(`
`).join(`
`+i),e.push(s+"m+"+wa.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=tC()+t+" "+e[0]}function tC(){return pt.inspectOpts.hideDate?"":new Date().toISOString()+" "}function rC(...e){return process.stderr.write(ba.format(...e)+`
`)}function nC(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function sC(){return process.env.DEBUG}function iC(e){e.inspectOpts={};let t=Object.keys(pt.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=pt.inspectOpts[t[r]]}wa.exports=_c()(pt);var{formatters:_g}=wa.exports;_g.o=function(e){return this.inspectOpts.colors=this.useColors,ba.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};_g.O=function(e){return this.inspectOpts.colors=this.useColors,ba.inspect(e,this.inspectOpts)}});var Sc=E((kK,Ec)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Ec.exports=hg():Ec.exports=vg()});var Eg=E((qK,Rc)=>{"use strict";var oC=hc(),aC=require("events").EventEmitter,uC=require("util").inherits,ut=Sc()("avvio"),{AVV_ERR_READY_TIMEOUT:lC}=mc(),bc=Symbol.for("plugin-meta");function cC(e,t){return e[bc]&&e[bc].name?e[bc].name:typeof t<"u"&&typeof t!="function"&&t.name?t.name:e.name?e.name:e.toString().split(`
`).slice(0,2).map(r=>r.trim()).join(" -- ")}function fC(){let e={};return e.promise=new Promise((t,r)=>{e.resolve=t,e.reject=r}),e}function Ps(e,t,r,n,s){this.started=!1,this.func=t,this.opts=r,this.onFinish=null,this.parent=e,this.timeout=s===void 0?e._timeout:s,this.name=cC(t,r),this.isAfter=n,this.q=oC(e,dC,1),this.q.pause(),this._error=null,this.loaded=!1,this._promise=null}uC(Ps,aC);Ps.prototype.exec=function(e,t){let r=this.func,n=!1,s=this.name;if(this.parent._error&&!this.isAfter){ut("skipping loading of plugin as parent errored and it is not an after",s),process.nextTick(t);return}if(this.isAfter)this.server=e;else try{this.server=this.parent.override(e,r,this.opts)}catch(u){return ut("override errored",s),t(u)}this.opts=typeof this.opts=="function"?this.opts(this.server):this.opts,ut("exec",s);let i,o=u=>{if(n){ut("loading complete",s);return}this._error=u,ut(u?"exec errored":"exec completed",s),n=!0,i&&clearTimeout(i),t(u)};this.timeout>0&&(ut("setting up timeout",s,this.timeout),i=setTimeout(function(){ut("timed out",s),i=null;let u=new lC(s);u.fn=r,o(u)},this.timeout)),this.started=!0,this.emit("start",this.server?this.server.name:null,this.name,Date.now());let a=r(this.server,this.opts,o);a&&typeof a.then=="function"&&(ut("exec: resolving promise",s),a.then(()=>process.nextTick(o),u=>process.nextTick(o,u)))};Ps.prototype.loadedSoFar=function(){if(this.loaded)return Promise.resolve();let e=()=>{this.server.after((r,n)=>{this._error=r,this.q.pause(),r?(ut("rejecting promise",this.name,r),this._promise.reject(r)):(ut("resolving promise",this.name),this._promise.resolve()),this._promise=null,process.nextTick(n,r)}),this.q.resume()},t;return this._promise?t=Promise.resolve():(this._promise=fC(),t=this._promise.promise,this.server?e():this.on("start",e)),t};Ps.prototype.enqueue=function(e,t){ut("enqueue",this.name,e.name),this.emit("enqueue",this.server?this.server.name:null,this.name,Date.now()),this.q.push(e,t)};Ps.prototype.finish=function(e,t){ut("finish",this.name,e);let r=()=>{this.loaded||(ut("loaded",this.name),this.emit("loaded",this.server?this.server.name:null,this.name,Date.now()),this.loaded=!0,t(e))};if(e){this._promise&&(this._promise.reject(e),this._promise=null),r();return}let n=()=>{if(ut("check",this.name,this.q.length(),this.q.running(),this._promise),this.q.length()===0&&this.q.running()===0)if(this._promise){let s=()=>{ut("wrap"),queueMicrotask(n)};this._promise.resolve(),this._promise.promise.then(s,s),this._promise=null}else r();else ut("delayed",this.name),this.q.drain=()=>{ut("drain",this.name),this.q.drain=hC,queueMicrotask(n)}};queueMicrotask(n),this.q.resume()};function dC(e,t){let r=this;process.nextTick(wc.bind(r),e,t)}function wc(e,t){if(typeof e.func.then=="function"){e.func.then(n=>{typeof n.default=="function"&&(n=n.default),e.func=n,wc.call(this,e,t)},t);return}let r=this._current[0];this._current.unshift(e),e.exec(r&&r.server||this._server,n=>{e.finish(n,s=>{this._current.shift(),t(s)})})}function hC(){}Rc.exports=Ps;Rc.exports.loadPlugin=wc});var Tg=E((DK,Ac)=>{"use strict";var Sg=hc(),pC=require("events").EventEmitter,mC=require("util").inherits,{AVV_ERR_EXPOSE_ALREADY_DEFINED:Tc,AVV_ERR_CALLBACK_NOT_FN:qi,AVV_ERR_PLUGIN_NOT_VALID:yC,AVV_ERR_ROOT_PLG_BOOTED:gC,AVV_ERR_READY_TIMEOUT:_C}=mc(),vC=lg(),Oc=Eg(),$s=Sc()("avvio"),Ra=Symbol("kAvvio"),Pc=Symbol("kThenifyDoNotWrap");function EC(e,t,r){let n=t.expose||{},s=n.use||"use",i=n.after||"after",o=n.ready||"ready",a=n.onClose||"onClose",u=n.close||"close";if(e[s])throw new Tc(s);if(e[i])throw new Tc(i);if(e[o])throw new Tc(o);e[s]=function(c,l){return r.use(c,l),this},Object.defineProperty(e,"then",{get:wg.bind(r)}),e[Ra]=!0,e[i]=function(c){return typeof c!="function"?r._loadRegistered():(r.after($c(c,this)),this)},e[o]=function(c){if(c&&typeof c!="function")throw new qi(o,typeof c);return r.ready(c?$c(c,this):void 0)},e[a]=function(c){if(typeof c!="function")throw new qi(a,typeof c);return r.onClose(TC(c,this)),this},e[u]=function(c){if(c&&typeof c!="function")throw new qi(u,typeof c);return c?(r.close($c(c,this)),this):r.close()}}function lt(e,t,r){if(typeof e=="function"&&arguments.length===1&&(r=e,t={},e=null),typeof t=="function"&&(r=t,t={}),t=t||{},!(this instanceof lt)){let n=new lt(e,t,r);return e&&EC(e,t,n),n}t.autostart!==!1&&(t.autostart=!0),e=e||this,this._timeout=Number(t.timeout)||0,this._server=e,this._current=[],this._error=null,this._isOnCloseHandlerKey=Symbol("isOnCloseHandler"),this._lastUsed=null,this.setMaxListeners(0),r&&this.once("start",r),this.started=!1,this.booted=!1,this.pluginTree=new vC,this._readyQ=Sg(this,Rg,1),this._readyQ.pause(),this._readyQ.drain=()=>{this.emit("start"),this._readyQ.drain=bg},this._closeQ=Sg(this,RC,1),this._closeQ.pause(),this._closeQ.drain=()=>{this.emit("close"),this._closeQ.drain=bg},this._doStart=null,this._root=new Oc(this,SC.bind(this),t,!1,0),this._root.once("start",(n,s,i)=>{let o=this.pluginTree.start(null,s,i);this._root.once("loaded",(a,u,c)=>{this.pluginTree.stop(o,c)})}),Oc.loadPlugin.call(this,this._root,n=>{$s("root plugin ready");try{this.emit("preReady"),this._root=null}catch(s){n=n||this._error||s}if(n){if(this._error=n,this._readyQ.length()===0)throw n}else this.booted=!0;this._readyQ.resume()})}function SC(e,t,r){this._doStart=r,t.autostart&&this.start()}mC(lt,pC);lt.prototype.start=function(){return this.started=!0,process.nextTick(this._doStart),this};lt.prototype.override=function(e,t,r){return e};function bC(e){if(e&&typeof e=="object"&&typeof e.default=="function"&&(e=e.default),!(e&&(typeof e=="function"||typeof e.then=="function")))throw new yC(typeof e);return e}lt.prototype[Ra]=!0;lt.prototype.use=function(e,t){return this._lastUsed=this._addPlugin(e,t,!1),this};lt.prototype._loadRegistered=function(){let e=this._current[0];return!this.started&&!this.booted&&process.nextTick(()=>this._root.q.resume()),e?e.loadedSoFar():Promise.resolve()};Object.defineProperty(lt.prototype,"then",{get:wg});lt.prototype._addPlugin=function(e,t,r){if(e=bC(e),t=t||{},this.booted)throw new gC;let n=this._current[0],s=new Oc(this,e,t,r);if(s.once("start",(i,o,a)=>{let u=this.pluginTree.start(n.name,o,a);s.once("loaded",(c,l,f)=>{this.pluginTree.stop(u,f)})}),n.loaded)throw new Error(s.name,n.name);return n.enqueue(s,i=>{i&&(this._error=i)}),s};lt.prototype.after=function(e){if(!e)return this._loadRegistered();this._addPlugin(t.bind(this),{},!0);function t(r,n,s){Rg.call(this,e,s)}return this};lt.prototype.onClose=function(e){if(typeof e!="function")throw new Error("not a function");e[this._isOnCloseHandlerKey]=!0,this._closeQ.unshift(e,t.bind(this));function t(r){r&&(this._error=r)}return this};lt.prototype.close=function(e){let t;if(e){if(typeof e!="function")throw new qi("close",typeof e)}else t=new Promise(function(r,n){e=function(s){if(s)return n(s);r()}});return this.ready(()=>{this._error=null,this._closeQ.push(e),process.nextTick(this._closeQ.resume.bind(this._closeQ))}),t};lt.prototype.ready=function(e){if(e){if(typeof e!="function")throw new qi("ready",typeof e);this._readyQ.push(e),queueMicrotask(this.start.bind(this));return}return new Promise((t,r)=>{this._readyQ.push(s),this.start();let n=this._current[0].server;function s(i,o,a){i?r(i):t(n),process.nextTick(a)}})};lt.prototype.prettyPrint=function(){return this.pluginTree.prittyPrint()};lt.prototype.toJSON=function(){return this.pluginTree.toJSON()};function bg(){}function wg(){if(this.booted){$s("thenify returning null because we are already booted");return}if(this[Pc]){this[Pc]=!1;return}return $s("thenify"),(e,t)=>this._loadRegistered().then(()=>(this[Pc]=!0,e(this._server)),t)}function Rg(e,t){let r=this._server,n=this._error,s;if(this._error=null,e.length===0)this._error=n,s=e(),s&&!s[Ra]&&typeof s.then=="function"?s.then(()=>process.nextTick(t),i=>process.nextTick(t,i)):process.nextTick(t);else if(e.length===1)s=e(n),s&&!s[Ra]&&typeof s.then=="function"?s.then(()=>process.nextTick(t),i=>process.nextTick(t,i)):process.nextTick(t);else if(this._timeout===0){let i=o=>{this._error=o,t(this._error)};e.length===2?e(n,i):e(n,r,i)}else wC.call(this,e,n,r,t)}function wC(e,t,r,n){let s=e.name;$s("setting up ready timeout",s,this._timeout);let i=setTimeout(()=>{$s("timed out",s),i=null;let a=new _C(s);a.fn=e,this._error=a,n(a)},this._timeout);e.length===2?e(t,o.bind(this)):e(t,r,o.bind(this));function o(a){i&&(clearTimeout(i),this._error=a,n(this._error))}}function RC(e,t){let r=this._server,n=e[this._isOnCloseHandlerKey];if(e.length===0||e.length===1){let s;n?s=e(r):s=e(this._error),s&&typeof s.then=="function"?($s("resolving close/onClose promise"),s.then(()=>process.nextTick(t),i=>process.nextTick(t,i))):process.nextTick(t)}else e.length===2?e(n?r:this._error,t):n?e(r,t):e(this._error,r,t)}function TC(e,t){return r.bind(t);function r(n,s){let i;e.length===0?(i=e(),i&&i.then?i.then(function(){process.nextTick(s)},s):process.nextTick(s)):e.length===1?(i=e(this),i&&i.then?i.then(function(){process.nextTick(s)},s):process.nextTick(s)):e(this,s)}}function $c(e,t){return r.bind(t);function r(n,s){let i;e?e.length===0?(i=e(),i&&i.then?i.then(function(){process.nextTick(s,n)},s):process.nextTick(s,n)):e.length===1?(i=e(n),i&&i.then?i.then(function(){process.nextTick(s)},s):process.nextTick(s)):e.length===2?e(n,s):e(n,this,s):process.nextTick(s)}}Ac.exports=lt;Ac.exports.express=function(e){return lt(e,{expose:{use:"load"}})}});var ct=E((jK,Pg)=>{"use strict";var PC={kAvvioBoot:Symbol("fastify.avvioBoot"),kChildren:Symbol("fastify.children"),kServerBindings:Symbol("fastify.serverBindings"),kBodyLimit:Symbol("fastify.bodyLimit"),kRoutePrefix:Symbol("fastify.routePrefix"),kLogLevel:Symbol("fastify.logLevel"),kLogSerializers:Symbol("fastify.logSerializers"),kHooks:Symbol("fastify.hooks"),kContentTypeParser:Symbol("fastify.contentTypeParser"),kState:Symbol("fastify.state"),kOptions:Symbol("fastify.options"),kDisableRequestLogging:Symbol("fastify.disableRequestLogging"),kPluginNameChain:Symbol("fastify.pluginNameChain"),kRouteContext:Symbol("fastify.context"),kPublicRouteContext:Symbol("fastify.routeOptions"),kSchemaController:Symbol("fastify.schemaController"),kSchemaHeaders:Symbol("headers-schema"),kSchemaParams:Symbol("params-schema"),kSchemaQuerystring:Symbol("querystring-schema"),kSchemaBody:Symbol("body-schema"),kSchemaResponse:Symbol("response-schema"),kSchemaErrorFormatter:Symbol("fastify.schemaErrorFormatter"),kSchemaVisited:Symbol("fastify.schemas.visited"),kRequest:Symbol("fastify.Request"),kRequestPayloadStream:Symbol("fastify.RequestPayloadStream"),kRequestAcceptVersion:Symbol("fastify.RequestAcceptVersion"),kRequestCacheValidateFns:Symbol("fastify.request.cache.validateFns"),kRequestOriginalUrl:Symbol("fastify.request.originalUrl"),kFourOhFour:Symbol("fastify.404"),kCanSetNotFoundHandler:Symbol("fastify.canSetNotFoundHandler"),kFourOhFourLevelInstance:Symbol("fastify.404LogLevelInstance"),kFourOhFourContext:Symbol("fastify.404ContextKey"),kDefaultJsonParse:Symbol("fastify.defaultJSONParse"),kReply:Symbol("fastify.Reply"),kReplySerializer:Symbol("fastify.reply.serializer"),kReplyIsError:Symbol("fastify.reply.isError"),kReplyHeaders:Symbol("fastify.reply.headers"),kReplyTrailers:Symbol("fastify.reply.trailers"),kReplyHasStatusCode:Symbol("fastify.reply.hasStatusCode"),kReplyHijacked:Symbol("fastify.reply.hijacked"),kReplyStartTime:Symbol("fastify.reply.startTime"),kReplyNextErrorHandler:Symbol("fastify.reply.nextErrorHandler"),kReplyEndTime:Symbol("fastify.reply.endTime"),kReplyErrorHandlerCalled:Symbol("fastify.reply.errorHandlerCalled"),kReplyIsRunningOnErrorHook:Symbol("fastify.reply.isRunningOnErrorHook"),kReplySerializerDefault:Symbol("fastify.replySerializerDefault"),kReplyCacheSerializeFns:Symbol("fastify.reply.cache.serializeFns"),kTestInternals:Symbol("fastify.testInternals"),kErrorHandler:Symbol("fastify.errorHandler"),kChildLoggerFactory:Symbol("fastify.childLoggerFactory"),kHasBeenDecorated:Symbol("fastify.hasBeenDecorated"),kKeepAliveConnections:Symbol("fastify.keepAliveConnections"),kRouteByFastify:Symbol("fastify.routeByFastify")};Pg.exports=PC});var Og=E((xK,Ta)=>{"use strict";var{format:Cc}=require("node:util");function $C(e){return $g({...e,name:"DeprecationWarning"})}function $g({name:e,code:t,message:r,unlimited:n=!1}={}){if(!e)throw new Error("Warning name must not be empty");if(!t)throw new Error("Warning code must not be empty");if(!r)throw new Error("Warning message must not be empty");if(typeof n!="boolean")throw new Error("Warning opts.unlimited must be a boolean");t=t.toUpperCase();let s={[e]:function(o,a,u){i.emitted===!0&&i.unlimited!==!0||(i.emitted=!0,process.emitWarning(i.format(o,a,u),i.name,i.code))}};n&&(s={[e]:function(o,a,u){i.emitted=!0,process.emitWarning(i.format(o,a,u),i.name,i.code)}});let i=s[e];return i.emitted=!1,i.message=r,i.unlimited=n,i.code=t,i.format=function(o,a,u){let c;return o&&a&&u?c=Cc(r,o,a,u):o&&a?c=Cc(r,o,a):o?c=Cc(r,o):c=r,c},i}var Ic={createWarning:$g,createDeprecation:$C};Ta.exports=Ic;Ta.exports.default=Ic;Ta.exports.processWarning=Ic});var zr=E((LK,Cg)=>{"use strict";var{createDeprecation:Pt,createWarning:Ag}=Og(),OC=Pt({code:"FSTDEP005",message:'You are accessing the deprecated "request.connection" property. Use "request.socket" instead.'}),AC=Pt({code:"FSTDEP006",message:"You are decorating Request/Reply with a reference type. This reference is shared amongst all requests. Use onRequest hook instead. Property: %s"}),CC=Pt({code:"FSTDEP007",message:'You are trying to set a HEAD route using "exposeHeadRoute" route flag when a sibling route is already set. See documentation for more info.'}),IC=Pt({code:"FSTDEP008",message:'You are using route constraints via the route { version: "..." } option, use { constraints: { version: "..." } } option instead.'}),NC=Pt({code:"FSTDEP009",message:'You are using a custom route versioning strategy via the server { versioning: "..." } option, use { constraints: { version: "..." } } option instead.'}),kC=Pt({code:"FSTDEP010",message:'Modifying the "reply.sent" property is deprecated. Use the "reply.hijack()" method instead.'}),qC=Pt({code:"FSTDEP011",message:'Variadic listen method is deprecated. Please use ".listen(optionsObject)" instead. The variadic signature will be removed in `fastify@5`.'}),DC=Pt({code:"FSTDEP012",message:'request.context property access is deprecated. Please use "request.routeOptions.config" or "request.routeOptions.schema" instead for accessing Route settings. The "request.context" will be removed in `fastify@5`.'}),jC=Pt({code:"FSTDEP013",message:'Direct return of "trailers" function is deprecated. Please use "callback" or "async-await" for return value. The support of direct return will removed in `fastify@5`.'}),xC=Pt({code:"FSTDEP014",message:"You are trying to set/access the default route. This property is deprecated. Please, use setNotFoundHandler if you want to custom a 404 handler or the wildcard (*) to match all routes."}),LC=Pt({code:"FSTDEP015",message:'You are accessing the deprecated "request.routeSchema" property. Use "request.routeOptions.schema" instead. Property "req.routeSchema" will be removed in `fastify@5`.'}),FC=Pt({code:"FSTDEP016",message:'You are accessing the deprecated "request.routeConfig" property. Use "request.routeOptions.config" instead. Property "req.routeConfig" will be removed in `fastify@5`.'}),MC=Pt({code:"FSTDEP017",message:'You are accessing the deprecated "request.routerPath" property. Use "request.routeOptions.url" instead. Property "req.routerPath" will be removed in `fastify@5`.'}),VC=Pt({code:"FSTDEP018",message:'You are accessing the deprecated "request.routerMethod" property. Use "request.routeOptions.method" instead. Property "req.routerMethod" will be removed in `fastify@5`.'}),HC=Pt({code:"FSTDEP019",message:'reply.context property access is deprecated. Please use "request.routeOptions.config" or "request.routeOptions.schema" instead for accessing Route settings. The "reply.context" will be removed in `fastify@5`.'}),zC=Ag({name:"FastifyWarning",code:"FSTWRN001",message:"The %s schema for %s: %s is missing. This may indicate the schema is not well specified.",unlimited:!0}),UC=Ag({name:"FastifyWarning",code:"FSTWRN002",message:"The %s plugin being registered mixes async and callback styles, which will result in an error in `fastify@5`",unlimited:!0});Cg.exports={FSTDEP005:OC,FSTDEP006:AC,FSTDEP007:CC,FSTDEP008:IC,FSTDEP009:NC,FSTDEP010:kC,FSTDEP011:qC,FSTDEP012:DC,FSTDEP013:jC,FSTDEP014:xC,FSTDEP015:LC,FSTDEP016:FC,FSTDEP017:MC,FSTDEP018:VC,FSTDEP019:HC,FSTWRN001:zC,FSTWRN002:UC}});var Ig=E((FK,Pa)=>{"use strict";var{format:BC}=require("node:util");function GC(){return`${this.name} [${this.code}]: ${this.message}`}function Nc(e,t,r=500,n=Error){if(!e)throw new Error("Fastify error code must not be empty");if(!t)throw new Error("Fastify error message must not be empty");e=e.toUpperCase(),!r&&(r=void 0);function s(...i){if(!new.target)return new s(...i);this.code=e,this.name="FastifyError",this.statusCode=r;let o=i.length-1;o!==-1&&i[o]&&typeof i[o]=="object"&&"cause"in i[o]&&(this.cause=i.pop().cause),this.message=BC(t,...i),Error.stackTraceLimit!==0&&Error.captureStackTrace(this,s)}return s.prototype=Object.create(n.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),s.prototype[Symbol.toStringTag]="Error",s.prototype.toString=GC,s}Pa.exports=Nc;Pa.exports.default=Nc;Pa.exports.createError=Nc});var St=E((MK,$a)=>{"use strict";var M=Ig(),Os={FST_ERR_NOT_FOUND:M("FST_ERR_NOT_FOUND","Not Found",404),FST_ERR_OPTIONS_NOT_OBJ:M("FST_ERR_OPTIONS_NOT_OBJ","Options must be an object",500,TypeError),FST_ERR_QSP_NOT_FN:M("FST_ERR_QSP_NOT_FN","querystringParser option should be a function, instead got '%s'",500,TypeError),FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN:M("FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN","schemaController.bucket option should be a function, instead got '%s'",500,TypeError),FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN:M("FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN","schemaErrorFormatter option should be a non async function. Instead got '%s'.",500,TypeError),FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ:M("FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ","ajv.customOptions option should be an object, instead got '%s'",500,TypeError),FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR:M("FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR","ajv.plugins option should be an array, instead got '%s'",500,TypeError),FST_ERR_VERSION_CONSTRAINT_NOT_STR:M("FST_ERR_VERSION_CONSTRAINT_NOT_STR","Version constraint should be a string.",500,TypeError),FST_ERR_VALIDATION:M("FST_ERR_VALIDATION","%s",400),FST_ERR_LISTEN_OPTIONS_INVALID:M("FST_ERR_LISTEN_OPTIONS_INVALID","Invalid listen options: '%s'",500,TypeError),FST_ERR_CTP_ALREADY_PRESENT:M("FST_ERR_CTP_ALREADY_PRESENT","Content type parser '%s' already present."),FST_ERR_CTP_INVALID_TYPE:M("FST_ERR_CTP_INVALID_TYPE","The content type should be a string or a RegExp",500,TypeError),FST_ERR_CTP_EMPTY_TYPE:M("FST_ERR_CTP_EMPTY_TYPE","The content type cannot be an empty string",500,TypeError),FST_ERR_CTP_INVALID_HANDLER:M("FST_ERR_CTP_INVALID_HANDLER","The content type handler should be a function",500,TypeError),FST_ERR_CTP_INVALID_PARSE_TYPE:M("FST_ERR_CTP_INVALID_PARSE_TYPE","The body parser can only parse your data as 'string' or 'buffer', you asked '%s' which is not supported.",500,TypeError),FST_ERR_CTP_BODY_TOO_LARGE:M("FST_ERR_CTP_BODY_TOO_LARGE","Request body is too large",413,RangeError),FST_ERR_CTP_INVALID_MEDIA_TYPE:M("FST_ERR_CTP_INVALID_MEDIA_TYPE","Unsupported Media Type: %s",415),FST_ERR_CTP_INVALID_CONTENT_LENGTH:M("FST_ERR_CTP_INVALID_CONTENT_LENGTH","Request body size did not match Content-Length",400,RangeError),FST_ERR_CTP_EMPTY_JSON_BODY:M("FST_ERR_CTP_EMPTY_JSON_BODY","Body cannot be empty when content-type is set to 'application/json'",400),FST_ERR_CTP_INSTANCE_ALREADY_STARTED:M("FST_ERR_CTP_INSTANCE_ALREADY_STARTED",'Cannot call "%s" when fastify instance is already started!',400),FST_ERR_DEC_ALREADY_PRESENT:M("FST_ERR_DEC_ALREADY_PRESENT","The decorator '%s' has already been added!"),FST_ERR_DEC_DEPENDENCY_INVALID_TYPE:M("FST_ERR_DEC_DEPENDENCY_INVALID_TYPE","The dependencies of decorator '%s' must be of type Array.",500,TypeError),FST_ERR_DEC_MISSING_DEPENDENCY:M("FST_ERR_DEC_MISSING_DEPENDENCY","The decorator is missing dependency '%s'."),FST_ERR_DEC_AFTER_START:M("FST_ERR_DEC_AFTER_START","The decorator '%s' has been added after start!"),FST_ERR_HOOK_INVALID_TYPE:M("FST_ERR_HOOK_INVALID_TYPE","The hook name must be a string",500,TypeError),FST_ERR_HOOK_INVALID_HANDLER:M("FST_ERR_HOOK_INVALID_HANDLER","%s hook should be a function, instead got %s",500,TypeError),FST_ERR_HOOK_INVALID_ASYNC_HANDLER:M("FST_ERR_HOOK_INVALID_ASYNC_HANDLER","Async function has too many arguments. Async hooks should not use the 'done' argument.",500,TypeError),FST_ERR_HOOK_NOT_SUPPORTED:M("FST_ERR_HOOK_NOT_SUPPORTED","%s hook not supported!",500,TypeError),FST_ERR_MISSING_MIDDLEWARE:M("FST_ERR_MISSING_MIDDLEWARE","You must register a plugin for handling middlewares, visit fastify.dev/docs/latest/Reference/Middleware/ for more info.",500),FST_ERR_HOOK_TIMEOUT:M("FST_ERR_HOOK_TIMEOUT","A callback for '%s' hook timed out. You may have forgotten to call 'done' function or to resolve a Promise"),FST_ERR_LOG_INVALID_DESTINATION:M("FST_ERR_LOG_INVALID_DESTINATION","Cannot specify both logger.stream and logger.file options"),FST_ERR_LOG_INVALID_LOGGER:M("FST_ERR_LOG_INVALID_LOGGER","Invalid logger object provided. The logger instance should have these functions(s): '%s'.",500,TypeError),FST_ERR_REP_INVALID_PAYLOAD_TYPE:M("FST_ERR_REP_INVALID_PAYLOAD_TYPE","Attempted to send payload of invalid type '%s'. Expected a string or Buffer.",500,TypeError),FST_ERR_REP_ALREADY_SENT:M("FST_ERR_REP_ALREADY_SENT",'Reply was already sent, did you forget to "return reply" in "%s" (%s)?'),FST_ERR_REP_SENT_VALUE:M("FST_ERR_REP_SENT_VALUE","The only possible value for reply.sent is true.",500,TypeError),FST_ERR_SEND_INSIDE_ONERR:M("FST_ERR_SEND_INSIDE_ONERR","You cannot use `send` inside the `onError` hook"),FST_ERR_SEND_UNDEFINED_ERR:M("FST_ERR_SEND_UNDEFINED_ERR","Undefined error has occurred"),FST_ERR_BAD_STATUS_CODE:M("FST_ERR_BAD_STATUS_CODE","Called reply with an invalid status code: %s"),FST_ERR_BAD_TRAILER_NAME:M("FST_ERR_BAD_TRAILER_NAME","Called reply.trailer with an invalid header name: %s"),FST_ERR_BAD_TRAILER_VALUE:M("FST_ERR_BAD_TRAILER_VALUE","Called reply.trailer('%s', fn) with an invalid type: %s. Expected a function."),FST_ERR_FAILED_ERROR_SERIALIZATION:M("FST_ERR_FAILED_ERROR_SERIALIZATION","Failed to serialize an error. Error: %s. Original error: %s"),FST_ERR_MISSING_SERIALIZATION_FN:M("FST_ERR_MISSING_SERIALIZATION_FN",'Missing serialization function. Key "%s"'),FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN:M("FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN",'Missing serialization function. Key "%s:%s"'),FST_ERR_REQ_INVALID_VALIDATION_INVOCATION:M("FST_ERR_REQ_INVALID_VALIDATION_INVOCATION",'Invalid validation invocation. Missing validation function for HTTP part "%s" nor schema provided.'),FST_ERR_SCH_MISSING_ID:M("FST_ERR_SCH_MISSING_ID","Missing schema $id property"),FST_ERR_SCH_ALREADY_PRESENT:M("FST_ERR_SCH_ALREADY_PRESENT","Schema with id '%s' already declared!"),FST_ERR_SCH_CONTENT_MISSING_SCHEMA:M("FST_ERR_SCH_CONTENT_MISSING_SCHEMA","Schema is missing for the content type '%s'"),FST_ERR_SCH_DUPLICATE:M("FST_ERR_SCH_DUPLICATE","Schema with '%s' already present!"),FST_ERR_SCH_VALIDATION_BUILD:M("FST_ERR_SCH_VALIDATION_BUILD","Failed building the validation schema for %s: %s, due to error %s"),FST_ERR_SCH_SERIALIZATION_BUILD:M("FST_ERR_SCH_SERIALIZATION_BUILD","Failed building the serialization schema for %s: %s, due to error %s"),FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX:M("FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX",'response schemas should be nested under a valid status code, e.g { 2xx: { type: "object" } }'),FST_ERR_HTTP2_INVALID_VERSION:M("FST_ERR_HTTP2_INVALID_VERSION","HTTP2 is available only from node >= 8.8.1"),FST_ERR_INIT_OPTS_INVALID:M("FST_ERR_INIT_OPTS_INVALID","Invalid initialization options: '%s'"),FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE:M("FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE","Cannot set forceCloseConnections to 'idle' as your HTTP server does not support closeIdleConnections method"),FST_ERR_DUPLICATED_ROUTE:M("FST_ERR_DUPLICATED_ROUTE","Method '%s' already declared for route '%s'"),FST_ERR_BAD_URL:M("FST_ERR_BAD_URL","'%s' is not a valid url component",400,URIError),FST_ERR_ASYNC_CONSTRAINT:M("FST_ERR_ASYNC_CONSTRAINT","Unexpected error from async constraint",500),FST_ERR_DEFAULT_ROUTE_INVALID_TYPE:M("FST_ERR_DEFAULT_ROUTE_INVALID_TYPE","The defaultRoute type should be a function",500,TypeError),FST_ERR_INVALID_URL:M("FST_ERR_INVALID_URL","URL must be a string. Received '%s'",400,TypeError),FST_ERR_ROUTE_OPTIONS_NOT_OBJ:M("FST_ERR_ROUTE_OPTIONS_NOT_OBJ",'Options for "%s:%s" route must be an object',500,TypeError),FST_ERR_ROUTE_DUPLICATED_HANDLER:M("FST_ERR_ROUTE_DUPLICATED_HANDLER",'Duplicate handler for "%s:%s" route is not allowed!',500),FST_ERR_ROUTE_HANDLER_NOT_FN:M("FST_ERR_ROUTE_HANDLER_NOT_FN","Error Handler for %s:%s route, if defined, must be a function",500,TypeError),FST_ERR_ROUTE_MISSING_HANDLER:M("FST_ERR_ROUTE_MISSING_HANDLER",'Missing handler function for "%s:%s" route.',500),FST_ERR_ROUTE_METHOD_INVALID:M("FST_ERR_ROUTE_METHOD_INVALID","Provided method is invalid!",500,TypeError),FST_ERR_ROUTE_METHOD_NOT_SUPPORTED:M("FST_ERR_ROUTE_METHOD_NOT_SUPPORTED","%s method is not supported.",500),FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED:M("FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED","Body validation schema for %s:%s route is not supported!",500),FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT:M("FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT","'bodyLimit' option must be an integer > 0. Got '%s'",500,TypeError),FST_ERR_ROUTE_REWRITE_NOT_STR:M("FST_ERR_ROUTE_REWRITE_NOT_STR",'Rewrite url for "%s" needs to be of type "string" but received "%s"',500,TypeError),FST_ERR_REOPENED_CLOSE_SERVER:M("FST_ERR_REOPENED_CLOSE_SERVER","Fastify has already been closed and cannot be reopened"),FST_ERR_REOPENED_SERVER:M("FST_ERR_REOPENED_SERVER","Fastify is already listening"),FST_ERR_INSTANCE_ALREADY_LISTENING:M("FST_ERR_INSTANCE_ALREADY_LISTENING","Fastify instance is already listening. %s"),FST_ERR_PLUGIN_VERSION_MISMATCH:M("FST_ERR_PLUGIN_VERSION_MISMATCH","fastify-plugin: %s - expected '%s' fastify version, '%s' is installed"),FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE:M("FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE","The decorator '%s'%s is not present in %s"),FST_ERR_PLUGIN_CALLBACK_NOT_FN:M("FST_ERR_PLUGIN_CALLBACK_NOT_FN","fastify-plugin: %s",500,TypeError),FST_ERR_PLUGIN_NOT_VALID:M("FST_ERR_PLUGIN_NOT_VALID","fastify-plugin: %s"),FST_ERR_ROOT_PLG_BOOTED:M("FST_ERR_ROOT_PLG_BOOTED","fastify-plugin: %s"),FST_ERR_PARENT_PLUGIN_BOOTED:M("FST_ERR_PARENT_PLUGIN_BOOTED","fastify-plugin: %s"),FST_ERR_PLUGIN_TIMEOUT:M("FST_ERR_PLUGIN_TIMEOUT","fastify-plugin: %s")};function KC(e,t){return t.cause=e,t}$a.exports=Os;$a.exports.appendStackTrace=KC;$a.exports.AVVIO_ERRORS_MAP={AVV_ERR_CALLBACK_NOT_FN:Os.FST_ERR_PLUGIN_CALLBACK_NOT_FN,AVV_ERR_PLUGIN_NOT_VALID:Os.FST_ERR_PLUGIN_NOT_VALID,AVV_ERR_ROOT_PLG_BOOTED:Os.FST_ERR_ROOT_PLG_BOOTED,AVV_ERR_PARENT_PLG_LOADED:Os.FST_ERR_PARENT_PLUGIN_BOOTED,AVV_ERR_READY_TIMEOUT:Os.FST_ERR_PLUGIN_TIMEOUT}});var dn=E((VK,Mg)=>{"use strict";var YC=["onRoute","onRegister","onReady","onListen","preClose","onClose"],Dg=["onTimeout","onRequest","preParsing","preValidation","preSerialization","preHandler","onSend","onResponse","onError","onRequestAbort"],WC=Dg.concat(YC),{FST_ERR_HOOK_INVALID_TYPE:JC,FST_ERR_HOOK_INVALID_HANDLER:XC,FST_ERR_SEND_UNDEFINED_ERR:Oa,FST_ERR_HOOK_TIMEOUT:QC,FST_ERR_HOOK_NOT_SUPPORTED:ZC,AVVIO_ERRORS_MAP:Ng,appendStackTrace:kg}=St(),{kChildren:Di,kHooks:jg,kRequestPayloadStream:qg}=ct();function ji(){this.onRequest=[],this.preParsing=[],this.preValidation=[],this.preSerialization=[],this.preHandler=[],this.onResponse=[],this.onSend=[],this.onError=[],this.onRoute=[],this.onRegister=[],this.onReady=[],this.onListen=[],this.onTimeout=[],this.onRequestAbort=[],this.preClose=[]}ji.prototype=Object.create(null);ji.prototype.validate=function(e,t){if(typeof e!="string")throw new JC;if(Array.isArray(this[e])===!1)throw new ZC(e);if(typeof t!="function")throw new XC(e,Object.prototype.toString.call(t))};ji.prototype.add=function(e,t){this.validate(e,t),this[e].push(t)};function eI(e){let t=new ji;return t.onRequest=e.onRequest.slice(),t.preParsing=e.preParsing.slice(),t.preValidation=e.preValidation.slice(),t.preSerialization=e.preSerialization.slice(),t.preHandler=e.preHandler.slice(),t.onSend=e.onSend.slice(),t.onResponse=e.onResponse.slice(),t.onError=e.onError.slice(),t.onRoute=e.onRoute.slice(),t.onRegister=e.onRegister.slice(),t.onTimeout=e.onTimeout.slice(),t.onRequestAbort=e.onRequestAbort.slice(),t.onReady=[],t.onListen=[],t.preClose=[],t}function xg(e,t,r,n){let s=r[jg][e],i=0,o=0;u();function a(l){if(l){l.code==="AVV_ERR_READY_TIMEOUT"?l=kg(l,new QC(e)):l=Ng[l.code]!=null?kg(l,new Ng[l.code](l.message)):l,n(l);return}n()}function u(l){if(l){a(l);return}if(i===s.length&&o===r[Di].length){i===0&&o===0?a():t(function(d,h){a(d),h(d)});return}if(i===s.length&&o<r[Di].length){let f=r[Di][o++];xg(e,t,f,u);return}t(c(s[i++],r)),u()}function c(l,f){return function(d,h){if(d){h(d);return}if(l.length===1){try{l.call(f,h)}catch(p){h(p)}return}try{let p=l.call(f);if(p&&typeof p.then=="function"){p.then(h,h);return}}catch(p){d=p}h(d)}}}function Lg(e){let t=e[jg].onListen,r=t.length;if(r===0)return;let n=0,s=0;i();function i(a){if(a&&e.log.error(a),n===r){if(s<e[Di].length){let u=e[Di][s++];Lg(u)}return}o(t[n++],e,i)}async function o(a,u,c){if(a.length===1){try{a.call(u,c)}catch(l){c(l)}return}try{let l=a.call(u);if(l&&typeof l.then=="function"){l.then(c,c);return}c()}catch(l){c(l)}}}function As(e){return function(r,n,s,i){let o=0;function a(l){if(l||o===r.length){i(l,n,s);return}let f;try{f=e(r[o++],n,s,a)}catch(d){i(d,n,s);return}f&&typeof f.then=="function"&&f.then(u,c)}function u(){a()}function c(l){l||(l=new Oa),i(l,n,s)}a()}}function tI(e,t,r,n){return e(t,r,n)}var rI=As(tI),nI=As(xi),sI=As(xi),iI=As(xi),oI=As(xi);function Fg(e,t,r,n,s){let i=0;function o(c,l){if(c){s(c,t,r,n);return}if(l!==void 0&&(n=l),i===e.length){s(null,t,r,n);return}let f;try{f=e[i++](t,r,n,o)}catch(d){s(d,t,r);return}f&&typeof f.then=="function"&&f.then(a,u)}function a(c){o(null,c)}function u(c){c||(c=new Oa),s(c,t,r,n)}o()}var aI=Fg;function uI(e,t,r,n){let s=0;function i(u,c){if(r.sent)return;if(c!==void 0&&(t[qg]=c),u||s===e.length){n(u,t,r);return}let l;try{l=e[s++](t,r,t[qg],i)}catch(f){n(f,t,r);return}l&&typeof l.then=="function"&&l.then(o,a)}function o(u){i(null,u)}function a(u){u||(u=new Oa),n(u,t,r)}i()}function lI(e,t,r){let n=0;function s(a){if(a||n===e.length){r(a,t);return}let u;try{u=e[n++](t,s)}catch(c){r(c,t);return}u&&typeof u.then=="function"&&u.then(i,o)}function i(){s()}function o(a){a||(a=new Oa),r(a,t)}s()}function xi(e,t,r,n){if(r.sent!==!0)return e(t,r,n)}Mg.exports={Hooks:ji,buildHooks:eI,hookRunnerGenerator:As,preParsingHookRunner:uI,onResponseHookRunner:rI,onSendHookRunner:Fg,preSerializationHookRunner:aI,onRequestAbortHookRunner:lI,hookIterator:xi,hookRunnerApplication:xg,onListenHookRunner:Lg,preHandlerHookRunner:sI,preValidationHookRunner:nI,onRequestHookRunner:oI,onTimeoutHookRunner:iI,lifecycleHooks:Dg,supportedHooks:WC}});var Jg=E((HK,qc)=>{"use strict";var cI=require("node:http"),fI=require("node:https"),dI=require("node:dns"),{FSTDEP011:Vg}=zr(),{kState:bt,kOptions:hI,kServerBindings:pI}=ct(),{onListenHookRunner:Aa}=dn(),{FST_ERR_HTTP2_INVALID_VERSION:mI,FST_ERR_REOPENED_CLOSE_SERVER:Ug,FST_ERR_REOPENED_SERVER:Bg,FST_ERR_LISTEN_OPTIONS_INVALID:yI}=St();qc.exports.createServer=gI;qc.exports.compileValidateHTTPVersion=vI;function Gg(e){return`Server listening at ${e}`}function gI(e,t){let r=Yg(e,t);function n(s,...i){let o=i.slice(-1).pop(),a=Object.prototype.toString.call(arguments[0]);if(arguments.length===0)s=kc([]);else if(arguments.length>0&&a!=="[object Object]"&&a!=="[object Function]")Vg(),s=kc(Array.from(arguments)),o=s.cb;else if(i.length>1){Vg();let c=s.path?[s.path]:[s.port??0,s.host??"localhost"];Object.assign(s,kc([...c,...i]))}else s.cb=o;if(s.signal){if(typeof s.signal.on!="function"&&typeof s.signal.addEventListener!="function")throw new yI("Invalid options.signal");if(s.signal.aborted)this.close();else{let c=()=>{this.close()};s.signal.addEventListener("abort",c,{once:!0})}}let u;if(s.path==null?u=s.host??"localhost":u=s.host,Object.prototype.hasOwnProperty.call(s,"host")===!1&&(s.host=u),u==="localhost"?s.cb=(c,l)=>{if(c){o(c,l);return}Hg.call(this,r,t,e,s,()=>{this[bt].listening=!0,o(null,l),Aa(this)})}:s.cb=(c,l)=>{if(c){o(c,l);return}this[bt].listening=!0,o(null,l),Aa(this)},o===void 0)return _I.call(this,r,s).then(l=>new Promise((f,d)=>{u==="localhost"?Hg.call(this,r,t,e,s,()=>{this[bt].listening=!0,f(l),Aa(this)}):(f(l),Aa(this))}));this.ready(Kg.call(this,r,s))}return{server:r,listen:n}}function Hg(e,t,r,n,s){this[bt].listening=!1,dI.lookup(n.host,{all:!0},(i,o)=>{if(i){s();return}let a=e.listening&&r.serverFactory,u=0,c=0;if(!a){let f=e.address();for(let d of o)if(d.address!==f.address){u++;let h=Object.assign({},n,{host:d.address,port:f.port,cb:v=>{c++,v||this[pI].push(p),c===u&&s()}}),p=Yg(r,t),y=()=>{p.close(()=>{}),r.forceCloseConnections==="idle"?p.closeIdleConnections():typeof p.closeAllConnections=="function"&&r.forceCloseConnections&&p.closeAllConnections()};p.on("upgrade",e.emit.bind(e,"upgrade")),e.on("unref",y),e.on("close",y),e.on("error",y),this[bt].listening=!1,Kg.call(this,p,h)()}}if(u===0){s();return}let l=e.unref;e.unref=function(){l.call(e),e.emit("unref")}})}function Kg(e,t){let r=n=>{if(e.removeListener("error",r),n)this[bt].listening=!1,t.cb(n,null);else{let s=Wg.call(this,e,t.listenTextResolver||Gg);t.cb(null,s)}};return n=>{if(n!=null)return t.cb(n);if(this[bt].listening&&this[bt].closing)return t.cb(new Ug,null);if(this[bt].listening)return t.cb(new Bg,null);e.once("error",r),this[bt].closing||(e.listen(t,r),this[bt].listening=!0)}}function _I(e,t){return this[bt].listening&&this[bt].closing?Promise.reject(new Ug):this[bt].listening?Promise.reject(new Bg):this.ready().then(()=>{let r,n=new Promise((i,o)=>{r=a=>{this[bt].listening=!1,o(a)},e.once("error",r)}),s=new Promise((i,o)=>{e.listen(t,()=>{e.removeListener("error",r),i(Wg.call(this,e,t.listenTextResolver||Gg))}),this[bt].listening=!0});return Promise.race([n,s])})}function vI(e){let t=!1,r=new Map;return e.serverFactory&&(t=!0),e.http2?(r.set("2.0",!0),e.https&&e.https.allowHTTP1===!0&&(r.set("1.1",!0),r.set("1.0",!0))):(r.set("1.1",!0),r.set("1.0",!0)),function(s){return t||r.has(s)}}function Yg(e,t){let r=null,n=e.https===!0?{}:e.https;return e.serverFactory?r=e.serverFactory(t,e):e.http2?(typeof n=="object"?r=zg().createSecureServer(n,t):r=zg().createServer(t),r.on("session",SI(e.http2SessionTimeout))):(n?r=fI.createServer(n,t):r=cI.createServer(e.http,t),r.keepAliveTimeout=e.keepAliveTimeout,r.requestTimeout=e.requestTimeout,e.maxRequestsPerSocket>0&&(r.maxRequestsPerSocket=e.maxRequestsPerSocket)),e.serverFactory||r.setTimeout(e.connectionTimeout),r}function kc(e){if(e.length===0)return{port:0,host:"localhost"};let r={cb:typeof e[e.length-1]=="function"?e.pop():void 0},n=e[0],s=e.length,i=e[s-1];return typeof n=="string"&&isNaN(n)?(r.path=n,r.backlog=s>1?i:void 0):(r.port=s>=1&&Number.isInteger(n)?n:EI(n),r.host=s>=2&&e[1]?e[1]:"localhost",r.backlog=s>=3?e[2]:void 0),r}function EI(e){let t=Number(e);return t>=0&&!Number.isNaN(t)&&Number.isInteger(t)?t:0}function Wg(e,t){let r=e.address(),n=typeof r=="string";n||(r.address.indexOf(":")===-1?r=r.address+":"+r.port:r="["+r.address+"]:"+r.port),r=(n?"":"http"+(this[hI].https?"s":"")+"://")+r;let s=t(r);return this.log.info(s),r}function zg(){try{return require("node:http2")}catch{throw new mI}}function SI(e){return function(t){t.setTimeout(e,bI)}}function bI(){this.close()}});var Lc=E((zK,Qg)=>{"use strict";var{kSchemaHeaders:Na,kSchemaParams:Dc,kSchemaQuerystring:jc,kSchemaBody:xc,kSchemaResponse:Xg}=ct(),wI=/^[1-5]{1}[0-9]{2}$|^[1-5]xx$|^default$/,{FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX:RI}=St(),{FSTWRN001:Ca}=zr();function TI(e,t){if(!e.schema||!e.schema.response)return;let{method:r,url:n}=e.config||{};e[Xg]=Object.keys(e.schema.response).reduce(function(s,i){let o=e.schema.response[i];if(i=i.toLowerCase(),!wI.exec(i))throw new RI;if(o.content){let a={};for(let u of Object.keys(o.content)){let c=o.content[u].schema;a[u]=t({schema:c,url:n,method:r,httpStatus:i,contentType:u})}s[i]=a}else s[i]=t({schema:o,url:n,method:r,httpStatus:i});return s},{})}function PI(e,t,r){let{schema:n}=e;if(!n)return;let{method:s,url:i}=e.config||{},o=n.headers;if(o&&(r||Object.getPrototypeOf(o)!==Object.prototype))e[Na]=t({schema:o,method:s,url:i,httpPart:"headers"});else if(o){let a={};Object.keys(o).forEach(u=>{a[u]=o[u]}),a.required instanceof Array&&(a.required=a.required.map(u=>u.toLowerCase())),o.properties&&(a.properties={},Object.keys(o.properties).forEach(u=>{a.properties[u.toLowerCase()]=o.properties[u]})),e[Na]=t({schema:a,method:s,url:i,httpPart:"headers"})}else Object.prototype.hasOwnProperty.call(n,"headers")&&Ca("headers",s,i);n.body?e[xc]=t({schema:n.body,method:s,url:i,httpPart:"body"}):Object.prototype.hasOwnProperty.call(n,"body")&&Ca("body",s,i),n.querystring?e[jc]=t({schema:n.querystring,method:s,url:i,httpPart:"querystring"}):Object.prototype.hasOwnProperty.call(n,"querystring")&&Ca("querystring",s,i),n.params?e[Dc]=t({schema:n.params,method:s,url:i,httpPart:"params"}):Object.prototype.hasOwnProperty.call(n,"params")&&Ca("params",s,i)}function Ia(e,t,r){let n=t[r]===void 0,s=e&&e(n?null:t[r]);if(s?.then)return s.then(o=>i(o)).catch(o=>o);return i(s);function i(o){return o===!1?e.errors:o&&o.error?o.error:(o&&o.value&&(t[r]=o.value),!1)}}function ka(e,t,r){let n=r===void 0;if(n||!r.skipParams){let i=Ia(e[Dc],t,"params");if(i)return typeof i.then!="function"?hn(i,"params",e.schemaErrorFormatter):$I(i,e,t)}if(n||!r.skipBody){let i=Ia(e[xc],t,"body");if(i)return typeof i.then!="function"?hn(i,"body",e.schemaErrorFormatter):OI(i,e,t)}if(n||!r.skipQuery){let i=Ia(e[jc],t,"query");if(i)return typeof i.then!="function"?hn(i,"querystring",e.schemaErrorFormatter):AI(i,e,t)}let s=Ia(e[Na],t,"headers");return s?typeof s.then!="function"?hn(s,"headers",e.schemaErrorFormatter):CI(s,e,t):!1}function $I(e,t,r){return e.then(n=>n?hn(n,"params",t.schemaErrorFormatter):ka(t,r,{skipParams:!0}))}function OI(e,t,r){return e.then(n=>n?hn(n,"body",t.schemaErrorFormatter):ka(t,r,{skipParams:!0,skipBody:!0}))}function AI(e,t,r){return e.then(n=>n?hn(n,"querystring",t.schemaErrorFormatter):ka(t,r,{skipParams:!0,skipBody:!0,skipQuery:!0}))}function CI(e,t,r){return e.then(n=>n?hn(n,"headers",t.schemaErrorFormatter):!1)}function hn(e,t,r){if(e instanceof Error)return e.statusCode=e.statusCode||400,e.code=e.code||"FST_ERR_VALIDATION",e.validationContext=e.validationContext||t,e;let n=r(e,t);return n.statusCode=n.statusCode||400,n.code=n.code||"FST_ERR_VALIDATION",n.validation=e,n.validationContext=t,n}Qg.exports={symbols:{bodySchema:xc,querystringSchema:jc,responseSchema:Xg,paramsSchema:Dc,headersSchema:Na},compileSchemasForValidation:PI,compileSchemasForSerialization:TI,validate:ka}});var Fc=E((UK,e0)=>{"use strict";var{kReplyIsError:Zg,kReplyHijacked:II}=ct();function NI(e,t){e.then(function(r){if(t[II]!==!0&&(r!==void 0||t.sent===!1&&t.raw.headersSent===!1&&t.request.raw.aborted===!1))try{t.send(r)}catch(n){t[Zg]=!0,t.send(n)}},function(r){if(t.sent===!0){t.log.error({err:r},"Promise errored, but reply.sent = true was set");return}t[Zg]=!0;try{t.send(r)}catch(n){t.send(n)}})}e0.exports=NI});var zc=E((BK,Hc)=>{"use strict";var{validate:kI}=Lc(),{preValidationHookRunner:qI,preHandlerHookRunner:DI}=dn(),jI=Fc(),{kReplyIsError:qa,kRouteContext:mn}=ct();function xI(e,t,r){if(r.sent===!0)return;if(e!=null){r[qa]=!0,r.send(e);return}let n=t.raw.method,s=t.headers,i=t[mn];if(n==="GET"||n==="HEAD"){pn(t,r);return}let o=s["content-type"];if(n==="POST"||n==="PUT"||n==="PATCH"||n==="TRACE"||n==="SEARCH"){o===void 0?s["transfer-encoding"]===void 0&&(s["content-length"]==="0"||s["content-length"]===void 0)?pn(t,r):i.contentTypeParser.run("",pn,t,r):i.contentTypeParser.run(o,pn,t,r);return}if(n==="OPTIONS"||n==="DELETE"){o!==void 0&&(s["transfer-encoding"]!==void 0||s["content-length"]!==void 0)?i.contentTypeParser.run(o,pn,t,r):pn(t,r);return}pn(t,r)}function pn(e,t){try{e[mn].preValidation!==null?qI(e[mn].preValidation,e,t,Mc):Mc(null,e,t)}catch(r){Mc(r,e,t)}}function Mc(e,t,r){if(r.sent===!0)return;if(e!=null){r[qa]=!0,r.send(e);return}let n=kI(r[mn],t);if(n&&typeof n.then=="function"||!1){let i=t0.bind(null,t,r);n.then(i,i)}else t0(t,r,n)}function t0(e,t,r){if(r){if(t[mn].attachValidation===!1){t.send(r);return}t.request.validationError=r}e[mn].preHandler!==null?DI(e[mn].preHandler,e,t,Vc):Vc(null,e,t)}function Vc(e,t,r){if(r.sent)return;if(e!=null){r[qa]=!0,r.send(e);return}let n;try{n=t[mn].handler(t,r)}catch(s){r[qa]=!0,r.send(s);return}n!==void 0&&(n!==null&&typeof n.then=="function"?jI(n,r):r.send(n))}Hc.exports=xI;Hc.exports[Symbol.for("internals")]={handler:pn,preHandlerCallback:Vc}});var n0=E((GK,r0)=>{"use strict";function Cs(){}var LI={fatal:Cs,error:Cs,warn:Cs,info:Cs,debug:Cs,trace:Cs};Object.defineProperty(r0,"exports",{get(){return Object.create(LI)}})});var Bc=E((KK,o0)=>{"use strict";var Li=e=>e&&typeof e.message=="string",Uc=e=>{if(!e)return;let t=e.cause;if(typeof t=="function"){let r=e.cause();return Li(r)?r:void 0}else return Li(t)?t:void 0},s0=(e,t)=>{if(!Li(e))return"";let r=e.stack||"";if(t.has(e))return r+`
causes have become circular...`;let n=Uc(e);return n?(t.add(e),r+`
caused by: `+s0(n,t)):r},FI=e=>s0(e,new Set),i0=(e,t,r)=>{if(!Li(e))return"";let n=r?"":e.message||"";if(t.has(e))return n+": ...";let s=Uc(e);if(s){t.add(e);let i=typeof e.cause=="function";return n+(i?"":": ")+i0(s,t,i)}else return n},MI=e=>i0(e,new Set);o0.exports={isErrorLike:Li,getErrorCause:Uc,stackWithCauses:FI,messageWithCauses:MI}});var Gc=E((YK,u0)=>{"use strict";var VI=Symbol("circular-ref-tag"),Da=Symbol("pino-raw-err-ref"),a0=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},aggregateErrors:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[Da]},set:function(e){this[Da]=e}}});Object.defineProperty(a0,Da,{writable:!0,value:{}});u0.exports={pinoErrProto:a0,pinoErrorSymbols:{seen:VI,rawSymbol:Da}}});var f0=E((WK,c0)=>{"use strict";c0.exports=Yc;var{messageWithCauses:HI,stackWithCauses:zI,isErrorLike:l0}=Bc(),{pinoErrProto:UI,pinoErrorSymbols:BI}=Gc(),{seen:Kc}=BI,{toString:GI}=Object.prototype;function Yc(e){if(!l0(e))return e;e[Kc]=void 0;let t=Object.create(UI);t.type=GI.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=HI(e),t.stack=zI(e),Array.isArray(e.errors)&&(t.aggregateErrors=e.errors.map(r=>Yc(r)));for(let r in e)if(t[r]===void 0){let n=e[r];l0(n)?r!=="cause"&&!Object.prototype.hasOwnProperty.call(n,Kc)&&(t[r]=Yc(n)):t[r]=n}return delete e[Kc],t.raw=e,t}});var h0=E((JK,d0)=>{"use strict";d0.exports=xa;var{isErrorLike:Wc}=Bc(),{pinoErrProto:KI,pinoErrorSymbols:YI}=Gc(),{seen:ja}=YI,{toString:WI}=Object.prototype;function xa(e){if(!Wc(e))return e;e[ja]=void 0;let t=Object.create(KI);t.type=WI.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=e.message,t.stack=e.stack,Array.isArray(e.errors)&&(t.aggregateErrors=e.errors.map(r=>xa(r))),Wc(e.cause)&&!Object.prototype.hasOwnProperty.call(e.cause,ja)&&(t.cause=xa(e.cause));for(let r in e)if(t[r]===void 0){let n=e[r];Wc(n)?Object.prototype.hasOwnProperty.call(n,ja)||(t[r]=xa(n)):t[r]=n}return delete e[ja],t.raw=e,t}});var g0=E((XK,y0)=>{"use strict";y0.exports={mapHttpRequest:JI,reqSerializer:m0};var Jc=Symbol("pino-raw-req-ref"),p0=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[Jc]},set:function(e){this[Jc]=e}}});Object.defineProperty(p0,Jc,{writable:!0,value:{}});function m0(e){let t=e.info||e.socket,r=Object.create(p0);if(r.id=typeof e.id=="function"?e.id():e.id||(e.info?e.info.id:void 0),r.method=e.method,e.originalUrl)r.url=e.originalUrl;else{let n=e.path;r.url=typeof n=="string"?n:e.url?e.url.path||e.url:void 0}return e.query&&(r.query=e.query),e.params&&(r.params=e.params),r.headers=e.headers,r.remoteAddress=t&&t.remoteAddress,r.remotePort=t&&t.remotePort,r.raw=e.raw||e,r}function JI(e){return{req:m0(e)}}});var S0=E((QK,E0)=>{"use strict";E0.exports={mapHttpResponse:XI,resSerializer:v0};var Xc=Symbol("pino-raw-res-ref"),_0=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[Xc]},set:function(e){this[Xc]=e}}});Object.defineProperty(_0,Xc,{writable:!0,value:{}});function v0(e){let t=Object.create(_0);return t.statusCode=e.headersSent?e.statusCode:null,t.headers=e.getHeaders?e.getHeaders():e._headers,t.raw=e,t}function XI(e){return{res:v0(e)}}});var Zc=E((ZK,b0)=>{"use strict";var Qc=f0(),QI=h0(),La=g0(),Fa=S0();b0.exports={err:Qc,errWithCause:QI,mapHttpRequest:La.mapHttpRequest,mapHttpResponse:Fa.mapHttpResponse,req:La.reqSerializer,res:Fa.resSerializer,wrapErrorSerializer:function(t){return t===Qc?t:function(n){return t(Qc(n))}},wrapRequestSerializer:function(t){return t===La.reqSerializer?t:function(n){return t(La.reqSerializer(n))}},wrapResponseSerializer:function(t){return t===Fa.resSerializer?t:function(n){return t(Fa.resSerializer(n))}}}});var ef=E((e7,w0)=>{"use strict";function ZI(e,t){return t}w0.exports=function(){let t=Error.prepareStackTrace;Error.prepareStackTrace=ZI;let r=new Error().stack;if(Error.prepareStackTrace=t,!Array.isArray(r))return;let n=r.slice(2),s=[];for(let i of n)i&&s.push(i.getFileName());return s}});var T0=E((t7,R0)=>{"use strict";R0.exports=eN;function eN(e={}){let{ERR_PATHS_MUST_BE_STRINGS:t=()=>"fast-redact - Paths must be (non-empty) strings",ERR_INVALID_PATH:r=n=>`fast-redact \u2013 Invalid path (${n})`}=e;return function({paths:s}){s.forEach(i=>{if(typeof i!="string")throw Error(t());try{if(//.test(i))throw Error();let o=(i[0]==="["?"":".")+i.replace(/^\*/,"\u3007").replace(/\.\*/g,".\u3007").replace(/\[\*\]/g,"[\u3007]");if(/\n|\r|;/.test(o)||/\/\*/.test(o))throw Error();Function(`
            'use strict'
            const o = new Proxy({}, { get: () => o, set: () => { throw Error() } });
            const \u3007 = null;
            o${o}
            if ([o${o}].length !== 1) throw Error()`)()}catch{throw Error(r(i))}})}}});var Ma=E((r7,P0)=>{"use strict";P0.exports=/[^.[\]]+|\[((?:.)*?)\]/g});var O0=E((n7,$0)=>{"use strict";var tN=Ma();$0.exports=rN;function rN({paths:e}){let t=[];var r=0;let n=e.reduce(function(s,i,o){var a=i.match(tN).map(l=>l.replace(/'|"|`/g,""));let u=i[0]==="[";a=a.map(l=>l[0]==="["?l.substr(1,l.length-2):l);let c=a.indexOf("*");if(c>-1){let l=a.slice(0,c),f=l.join("."),d=a.slice(c+1,a.length),h=d.length>0;r++,t.push({before:l,beforeStr:f,after:d,nested:h})}else s[i]={path:a,val:void 0,precensored:!1,circle:"",escPath:JSON.stringify(i),leadingBracket:u};return s},{});return{wildcards:t,wcLen:r,secret:n}}});var C0=E((s7,A0)=>{"use strict";var nN=Ma();A0.exports=sN;function sN({secret:e,serialize:t,wcLen:r,strict:n,isCensorFct:s,censorFctTakesPath:i},o){let a=Function("o",`
    if (typeof o !== 'object' || o == null) {
      ${uN(n,t)}
    }
    const { censor, secret } = this
    ${iN(e,s,i)}
    this.compileRestore()
    ${oN(r>0,s,i)}
    ${aN(t)}
  `).bind(o);return t===!1&&(a.restore=u=>o.restore(u)),a}function iN(e,t,r){return Object.keys(e).map(n=>{let{escPath:s,leadingBracket:i,path:o}=e[n],a=i?1:0,u=i?"":".",c=[];for(var l;(l=nN.exec(n))!==null;){let[,p]=l,{index:y,input:v}=l;y>a&&c.push(v.substring(0,y-(p?0:1)))}var f=c.map(p=>`o${u}${p}`).join(" && ");f.length===0?f+=`o${u}${n} != null`:f+=` && o${u}${n} != null`;let d=`
      switch (true) {
        ${c.reverse().map(p=>`
          case o${u}${p} === censor:
            secret[${s}].circle = ${JSON.stringify(p)}
            break
        `).join(`
`)}
      }
    `,h=r?`val, ${JSON.stringify(o)}`:"val";return`
      if (${f}) {
        const val = o${u}${n}
        if (val === censor) {
          secret[${s}].precensored = true
        } else {
          secret[${s}].val = val
          o${u}${n} = ${t?`censor(${h})`:"censor"}
          ${d}
        }
      }
    `}).join(`
`)}function oN(e,t,r){return e===!0?`
    {
      const { wildcards, wcLen, groupRedact, nestedRedact } = this
      for (var i = 0; i < wcLen; i++) {
        const { before, beforeStr, after, nested } = wildcards[i]
        if (nested === true) {
          secret[beforeStr] = secret[beforeStr] || []
          nestedRedact(secret[beforeStr], o, before, after, censor, ${t}, ${r})
        } else secret[beforeStr] = groupRedact(o, before, censor, ${t}, ${r})
      }
    }
  `:""}function aN(e){return e===!1?"return o":`
    var s = this.serialize(o)
    this.restore(o)
    return s
  `}function uN(e,t){return e===!0?"throw Error('fast-redact: primitives cannot be redacted')":t===!1?"return o":"return this.serialize(o)"}});var rf=E((i7,k0)=>{"use strict";k0.exports={groupRedact:cN,groupRestore:lN,nestedRedact:dN,nestedRestore:fN};function lN({keys:e,values:t,target:r}){if(r==null)return;let n=e.length;for(var s=0;s<n;s++){let i=e[s];r[i]=t[s]}}function cN(e,t,r,n,s){let i=I0(e,t);if(i==null)return{keys:null,values:null,target:null,flat:!0};let o=Object.keys(i),a=o.length,u=t.length,c=s?[...t]:void 0,l=new Array(a);for(var f=0;f<a;f++){let d=o[f];l[f]=i[d],s?(c[u]=d,i[d]=r(i[d],c)):n?i[d]=r(i[d]):i[d]=r}return{keys:o,values:l,target:i,flat:!0}}function fN(e){for(let t=0;t<e.length;t++){let{target:r,path:n,value:s}=e[t],i=r;for(let o=n.length-1;o>0;o--)i=i[n[o]];i[n[0]]=s}}function dN(e,t,r,n,s,i,o){let a=I0(t,r);if(a==null)return;let u=Object.keys(a),c=u.length;for(var l=0;l<c;l++){let f=u[l];hN(e,a,f,r,n,s,i,o)}return e}function tf(e,t){return e!=null?"hasOwn"in Object?Object.hasOwn(e,t):Object.prototype.hasOwnProperty.call(e,t):!1}function hN(e,t,r,n,s,i,o,a){let u=s.length,c=u-1,l=r;var f=-1,d,h,p,y=null,v=null,_,w,g=!1,m=0,T=0,A=pN();if(p=d=t[r],typeof d=="object"){for(;d!=null&&++f<u&&(T+=1,r=s[f],y=p,!(r!=="*"&&!v&&!(typeof d=="object"&&r in d)));)if(!(r==="*"&&(v==="*"&&(g=!0),v=r,f!==c))){if(v){let $=Object.keys(d);for(var b=0;b<$.length;b++){let k=$[b];if(w=d[k],_=r==="*",g)A=Ur(A,k,T),m=f,p=N0(w,m-1,r,n,s,i,o,a,l,d,h,p,_,k,f,c,A,e,t[l],T+1);else if(_||typeof w=="object"&&w!==null&&r in w){if(_?p=w:p=w[r],h=f!==c?p:o?a?i(p,[...n,l,...s]):i(p):i,_){let R=Fi(Ur(A,k,T),p,t[l]);e.push(R),d[k]=h}else if(w[r]!==h)if(h===void 0&&i!==void 0||tf(w,r)&&h===p)A=Ur(A,k,T);else{A=Ur(A,k,T);let R=Fi(Ur(A,r,T+1),p,t[l]);e.push(R),w[r]=h}}}v=null}else{if(p=d[r],A=Ur(A,r,T),h=f!==c?p:o?a?i(p,[...n,l,...s]):i(p):i,!(tf(d,r)&&h===p||h===void 0&&i!==void 0)){let $=Fi(A,p,t[l]);e.push($),d[r]=h}d=d[r]}if(typeof d!="object")break}}}function I0(e,t){for(var r=-1,n=t.length,s=e;s!=null&&++r<n;)s=s[t[r]];return s}function N0(e,t,r,n,s,i,o,a,u,c,l,f,d,h,p,y,v,_,w,g){if(t===0&&(d||typeof e=="object"&&e!==null&&r in e)){if(d?f=e:f=e[r],l=p!==y?f:o?a?i(f,[...n,u,...s]):i(f):i,d){let m=Fi(v,f,w);_.push(m),c[h]=l}else if(e[r]!==l){if(!(l===void 0&&i!==void 0||tf(e,r)&&l===f)){let m=Fi(Ur(v,r,g+1),f,w);_.push(m),e[r]=l}}}for(let m in e)typeof e[m]=="object"&&(v=Ur(v,m,g),N0(e[m],t-1,r,n,s,i,o,a,u,c,l,f,d,h,p,y,v,_,w,g+1))}function pN(){return{parent:null,key:null,children:[],depth:0}}function Ur(e,t,r){if(e.depth===r)return Ur(e.parent,t,r);var n={parent:e,key:t,depth:r,children:[]};return e.children.push(n),n}function Fi(e,t,r){let n=e,s=[];do s.push(n.key),n=n.parent;while(n.parent!=null);return{path:s,value:t,target:r}}});var D0=E((o7,q0)=>{"use strict";var{groupRestore:mN,nestedRestore:yN}=rf();q0.exports=gN;function gN({secret:e,wcLen:t}){return function(){if(this.restore)return;let n=Object.keys(e),s=_N(e,n),i=t>0,o=i?{secret:e,groupRestore:mN,nestedRestore:yN}:{secret:e};this.restore=Function("o",vN(s,n,i)).bind(o)}}function _N(e,t){return t.map(r=>{let{circle:n,escPath:s,leadingBracket:i}=e[r],a=n?`o.${n} = secret[${s}].val`:`o${i?"":"."}${r} = secret[${s}].val`,u=`secret[${s}].val = undefined`;return`
      if (secret[${s}].val !== undefined) {
        try { ${a} } catch (e) {}
        ${u}
      }
    `}).join("")}function vN(e,t,r){return`
    const secret = this.secret
    ${r===!0?`
    const keys = Object.keys(secret)
    const len = keys.length
    for (var i = len - 1; i >= ${t.length}; i--) {
      const k = keys[i]
      const o = secret[k]
      if (o.flat === true) this.groupRestore(o)
      else this.nestedRestore(o)
      secret[k] = null
    }
  `:""}
    ${e}
    return o
  `}});var x0=E((a7,j0)=>{"use strict";j0.exports=EN;function EN(e){let{secret:t,censor:r,compileRestore:n,serialize:s,groupRedact:i,nestedRedact:o,wildcards:a,wcLen:u}=e,c=[{secret:t,censor:r,compileRestore:n}];return s!==!1&&c.push({serialize:s}),u>0&&c.push({groupRedact:i,nestedRedact:o,wildcards:a,wcLen:u}),Object.assign(...c)}});var M0=E((u7,F0)=>{"use strict";var L0=T0(),SN=O0(),bN=C0(),wN=D0(),{groupRedact:RN,nestedRedact:TN}=rf(),PN=x0(),$N=Ma(),ON=L0(),nf=e=>e;nf.restore=nf;var AN="[REDACTED]";sf.rx=$N;sf.validator=L0;F0.exports=sf;function sf(e={}){let t=Array.from(new Set(e.paths||[])),r="serialize"in e&&(e.serialize===!1||typeof e.serialize=="function")?e.serialize:JSON.stringify,n=e.remove;if(n===!0&&r!==JSON.stringify)throw Error("fast-redact \u2013 remove option may only be set when serializer is JSON.stringify");let s=n===!0?void 0:"censor"in e?e.censor:AN,i=typeof s=="function",o=i&&s.length>1;if(t.length===0)return r||nf;ON({paths:t,serialize:r,censor:s});let{wildcards:a,wcLen:u,secret:c}=SN({paths:t,censor:s}),l=wN({secret:c,wcLen:u}),f="strict"in e?e.strict:!0;return bN({secret:c,wcLen:u,serialize:r,strict:f,isCensorFct:i,censorFctTakesPath:o},PN({secret:c,censor:s,compileRestore:l,serialize:r,groupRedact:RN,nestedRedact:TN,wildcards:a,wcLen:u}))}});var Is=E((l7,V0)=>{"use strict";var CN=Symbol("pino.setLevel"),IN=Symbol("pino.getLevel"),NN=Symbol("pino.levelVal"),kN=Symbol("pino.useLevelLabels"),qN=Symbol("pino.useOnlyCustomLevels"),DN=Symbol("pino.mixin"),jN=Symbol("pino.lsCache"),xN=Symbol("pino.chindings"),LN=Symbol("pino.asJson"),FN=Symbol("pino.write"),MN=Symbol("pino.redactFmt"),VN=Symbol("pino.time"),HN=Symbol("pino.timeSliceIndex"),zN=Symbol("pino.stream"),UN=Symbol("pino.stringify"),BN=Symbol("pino.stringifySafe"),GN=Symbol("pino.stringifiers"),KN=Symbol("pino.end"),YN=Symbol("pino.formatOpts"),WN=Symbol("pino.messageKey"),JN=Symbol("pino.errorKey"),XN=Symbol("pino.nestedKey"),QN=Symbol("pino.nestedKeyStr"),ZN=Symbol("pino.mixinMergeStrategy"),ek=Symbol("pino.msgPrefix"),tk=Symbol("pino.wildcardFirst"),rk=Symbol.for("pino.serializers"),nk=Symbol.for("pino.formatters"),sk=Symbol.for("pino.hooks"),ik=Symbol.for("pino.metadata");V0.exports={setLevelSym:CN,getLevelSym:IN,levelValSym:NN,useLevelLabelsSym:kN,mixinSym:DN,lsCacheSym:jN,chindingsSym:xN,asJsonSym:LN,writeSym:FN,serializersSym:rk,redactFmtSym:MN,timeSym:VN,timeSliceIndexSym:HN,streamSym:zN,stringifySym:UN,stringifySafeSym:BN,stringifiersSym:GN,endSym:KN,formatOptsSym:YN,messageKeySym:WN,errorKeySym:JN,nestedKeySym:XN,wildcardFirstSym:tk,needsMetadataGsym:ik,useOnlyCustomLevelsSym:qN,formattersSym:nk,hooksSym:sk,nestedKeyStrSym:QN,mixinMergeStrategySym:ZN,msgPrefixSym:ek}});var uf=E((c7,B0)=>{"use strict";var af=M0(),{redactFmtSym:ok,wildcardFirstSym:Va}=Is(),{rx:of,validator:ak}=af,H0=ak({ERR_PATHS_MUST_BE_STRINGS:()=>"pino \u2013 redacted paths must be strings",ERR_INVALID_PATH:e=>`pino \u2013 redact paths array contains an invalid path (${e})`}),z0="[Redacted]",U0=!1;function uk(e,t){let{paths:r,censor:n}=lk(e),s=r.reduce((a,u)=>{of.lastIndex=0;let c=of.exec(u),l=of.exec(u),f=c[1]!==void 0?c[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):c[0];if(f==="*"&&(f=Va),l===null)return a[f]=null,a;if(a[f]===null)return a;let{index:d}=l,h=`${u.substr(d,u.length-1)}`;return a[f]=a[f]||[],f!==Va&&a[f].length===0&&a[f].push(...a[Va]||[]),f===Va&&Object.keys(a).forEach(function(p){a[p]&&a[p].push(h)}),a[f].push(h),a},{}),i={[ok]:af({paths:r,censor:n,serialize:t,strict:U0})},o=(...a)=>t(typeof n=="function"?n(...a):n);return[...Object.keys(s),...Object.getOwnPropertySymbols(s)].reduce((a,u)=>{if(s[u]===null)a[u]=c=>o(c,[u]);else{let c=typeof n=="function"?(l,f)=>n(l,[u,...f]):n;a[u]=af({paths:s[u],censor:c,serialize:t,strict:U0})}return a},i)}function lk(e){if(Array.isArray(e))return e={paths:e,censor:z0},H0(e),e;let{paths:t,censor:r=z0,remove:n}=e;if(Array.isArray(t)===!1)throw Error("pino \u2013 redact must contain an array of strings");return n===!0&&(r=void 0),H0({paths:t,censor:r}),{paths:t,censor:r}}B0.exports=uk});var K0=E((f7,G0)=>{"use strict";var ck=()=>"",fk=()=>`,"time":${Date.now()}`,dk=()=>`,"time":${Math.round(Date.now()/1e3)}`,hk=()=>`,"time":"${new Date(Date.now()).toISOString()}"`;G0.exports={nullTime:ck,epochTime:fk,unixTime:dk,isoTime:hk}});var W0=E((d7,Y0)=>{"use strict";function pk(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}Y0.exports=mk;function mk(e,t,r){var n=r&&r.stringify||pk,s=1;if(typeof e=="object"&&e!==null){var i=t.length+s;if(i===1)return e;var o=new Array(i);o[0]=n(e);for(var a=1;a<i;a++)o[a]=n(t[a]);return o.join(" ")}if(typeof e!="string")return e;var u=t.length;if(u===0)return e;for(var c="",l=1-s,f=-1,d=e&&e.length||0,h=0;h<d;){if(e.charCodeAt(h)===37&&h+1<d){switch(f=f>-1?f:0,e.charCodeAt(h+1)){case 100:case 102:if(l>=u||t[l]==null)break;f<h&&(c+=e.slice(f,h)),c+=Number(t[l]),f=h+2,h++;break;case 105:if(l>=u||t[l]==null)break;f<h&&(c+=e.slice(f,h)),c+=Math.floor(Number(t[l])),f=h+2,h++;break;case 79:case 111:case 106:if(l>=u||t[l]===void 0)break;f<h&&(c+=e.slice(f,h));var p=typeof t[l];if(p==="string"){c+="'"+t[l]+"'",f=h+2,h++;break}if(p==="function"){c+=t[l].name||"<anonymous>",f=h+2,h++;break}c+=n(t[l]),f=h+2,h++;break;case 115:if(l>=u)break;f<h&&(c+=e.slice(f,h)),c+=String(t[l]),f=h+2,h++;break;case 37:f<h&&(c+=e.slice(f,h)),c+="%",f=h+2,h++,l--;break}++l}++h}return f===-1?e:(f<d&&(c+=e.slice(f)),c)}});var cf=E((h7,lf)=>{"use strict";if(typeof SharedArrayBuffer<"u"&&typeof Atomics<"u"){let t=function(r){if((r>0&&r<1/0)===!1)throw typeof r!="number"&&typeof r!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");Atomics.wait(e,0,0,Number(r))},e=new Int32Array(new SharedArrayBuffer(4));lf.exports=t}else{let e=function(t){if((t>0&&t<1/0)===!1)throw typeof t!="number"&&typeof t!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");let n=Date.now()+Number(t);for(;n>Date.now(););};lf.exports=e}});var n_=E((p7,r_)=>{"use strict";var Ye=require("fs"),yk=require("events"),gk=require("util").inherits,J0=require("path"),ff=cf(),Ha=100,za=Buffer.allocUnsafe(0),_k=16*1024,X0="buffer",Q0="utf8";function Z0(e,t){t._opening=!0,t._writing=!0,t._asyncDrainScheduled=!1;function r(i,o){if(i){t._reopening=!1,t._writing=!1,t._opening=!1,t.sync?process.nextTick(()=>{t.listenerCount("error")>0&&t.emit("error",i)}):t.emit("error",i);return}t.fd=o,t.file=e,t._reopening=!1,t._opening=!1,t._writing=!1,t.sync?process.nextTick(()=>t.emit("ready")):t.emit("ready"),!(t._reopening||t.destroyed)&&(!t._writing&&t._len>t.minLength||t._flushPending)&&t._actualWrite()}let n=t.append?"a":"w",s=t.mode;if(t.sync)try{t.mkdir&&Ye.mkdirSync(J0.dirname(e),{recursive:!0});let i=Ye.openSync(e,n,s);r(null,i)}catch(i){throw r(i),i}else t.mkdir?Ye.mkdir(J0.dirname(e),{recursive:!0},i=>{if(i)return r(i);Ye.open(e,n,s,r)}):Ye.open(e,n,s,r)}function cr(e){if(!(this instanceof cr))return new cr(e);let{fd:t,dest:r,minLength:n,maxLength:s,maxWrite:i,sync:o,append:a=!0,mkdir:u,retryEAGAIN:c,fsync:l,contentMode:f,mode:d}=e||{};t=t||r,this._len=0,this.fd=-1,this._bufs=[],this._lens=[],this._writing=!1,this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this._flushPending=!1,this._hwm=Math.max(n||0,16387),this.file=null,this.destroyed=!1,this.minLength=n||0,this.maxLength=s||0,this.maxWrite=i||_k,this.sync=o||!1,this.writable=!0,this._fsync=l||!1,this.append=a||!1,this.mode=d,this.retryEAGAIN=c||(()=>!0),this.mkdir=u||!1;let h,p;if(f===X0)this._writingBuf=za,this.write=Sk,this.flush=wk,this.flushSync=Tk,this._actualWrite=$k,h=()=>Ye.writeSync(this.fd,this._writingBuf),p=()=>Ye.write(this.fd,this._writingBuf,this.release);else if(f===void 0||f===Q0)this._writingBuf="",this.write=Ek,this.flush=bk,this.flushSync=Rk,this._actualWrite=Pk,h=()=>Ye.writeSync(this.fd,this._writingBuf,"utf8"),p=()=>Ye.write(this.fd,this._writingBuf,"utf8",this.release);else throw new Error(`SonicBoom supports "${Q0}" and "${X0}", but passed ${f}`);if(typeof t=="number")this.fd=t,process.nextTick(()=>this.emit("ready"));else if(typeof t=="string")Z0(t,this);else throw new Error("SonicBoom supports only file descriptors and files");if(this.minLength>=this.maxWrite)throw new Error(`minLength should be smaller than maxWrite (${this.maxWrite})`);this.release=(y,v)=>{if(y){if((y.code==="EAGAIN"||y.code==="EBUSY")&&this.retryEAGAIN(y,this._writingBuf.length,this._len-this._writingBuf.length))if(this.sync)try{ff(Ha),this.release(void 0,0)}catch(w){this.release(w)}else setTimeout(p,Ha);else this._writing=!1,this.emit("error",y);return}if(this.emit("write",v),this._len-=v,this._len<0&&(this._len=0),this._writingBuf=this._writingBuf.slice(v),this._writingBuf.length){if(!this.sync){p();return}try{do{let w=h();this._len-=w,this._writingBuf=this._writingBuf.slice(w)}while(this._writingBuf.length)}catch(w){this.release(w);return}}this._fsync&&Ye.fsyncSync(this.fd);let _=this._len;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):_>this.minLength?this._actualWrite():this._ending?_>0?this._actualWrite():(this._writing=!1,Ua(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(vk,this)):this.emit("drain"))},this.on("newListener",function(y){y==="drain"&&(this._asyncDrainScheduled=!1)})}function vk(e){e.listenerCount("drain")>0&&(e._asyncDrainScheduled=!1,e.emit("drain"))}gk(cr,yk);function e_(e,t){return e.length===0?za:e.length===1?e[0]:Buffer.concat(e,t)}function Ek(e){if(this.destroyed)throw new Error("SonicBoom destroyed");let t=this._len+e.length,r=this._bufs;return this.maxLength&&t>this.maxLength?(this.emit("drop",e),this._len<this._hwm):(r.length===0||r[r.length-1].length+e.length>this.maxWrite?r.push(""+e):r[r.length-1]+=e,this._len=t,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function Sk(e){if(this.destroyed)throw new Error("SonicBoom destroyed");let t=this._len+e.length,r=this._bufs,n=this._lens;return this.maxLength&&t>this.maxLength?(this.emit("drop",e),this._len<this._hwm):(r.length===0||n[n.length-1]+e.length>this.maxWrite?(r.push([e]),n.push(e.length)):(r[r.length-1].push(e),n[n.length-1]+=e.length),this._len=t,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function t_(e){this._flushPending=!0;let t=()=>{this._fsync?(this._flushPending=!1,e()):Ye.fsync(this.fd,n=>{this._flushPending=!1,e(n)}),this.off("error",r)},r=n=>{this._flushPending=!1,e(n),this.off("drain",t)};this.once("drain",t),this.once("error",r)}function bk(e){if(e!=null&&typeof e!="function")throw new Error("flush cb must be a function");if(this.destroyed){let t=new Error("SonicBoom destroyed");if(e){e(t);return}throw t}if(this.minLength<=0){e?.();return}e&&t_.call(this,e),!this._writing&&(this._bufs.length===0&&this._bufs.push(""),this._actualWrite())}function wk(e){if(e!=null&&typeof e!="function")throw new Error("flush cb must be a function");if(this.destroyed){let t=new Error("SonicBoom destroyed");if(e){e(t);return}throw t}if(this.minLength<=0){e?.();return}e&&t_.call(this,e),!this._writing&&(this._bufs.length===0&&(this._bufs.push([]),this._lens.push(0)),this._actualWrite())}cr.prototype.reopen=function(e){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.reopen(e)});return}if(this._ending)return;if(!this.file)throw new Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(this._reopening=!0,this._writing)return;let t=this.fd;this.once("ready",()=>{t!==this.fd&&Ye.close(t,r=>{if(r)return this.emit("error",r)})}),Z0(e||this.file,this)};cr.prototype.end=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.end()});return}this._ending||(this._ending=!0,!this._writing&&(this._len>0&&this.fd>=0?this._actualWrite():Ua(this)))};function Rk(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift(this._writingBuf),this._writingBuf="");let e="";for(;this._bufs.length||e;){e.length<=0&&(e=this._bufs[0]);try{let t=Ye.writeSync(this.fd,e,"utf8");e=e.slice(t),this._len=Math.max(this._len-t,0),e.length<=0&&this._bufs.shift()}catch(t){if((t.code==="EAGAIN"||t.code==="EBUSY")&&!this.retryEAGAIN(t,e.length,this._len-e.length))throw t;ff(Ha)}}try{Ye.fsyncSync(this.fd)}catch{}}function Tk(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift([this._writingBuf]),this._writingBuf=za);let e=za;for(;this._bufs.length||e.length;){e.length<=0&&(e=e_(this._bufs[0],this._lens[0]));try{let t=Ye.writeSync(this.fd,e);e=e.subarray(t),this._len=Math.max(this._len-t,0),e.length<=0&&(this._bufs.shift(),this._lens.shift())}catch(t){if((t.code==="EAGAIN"||t.code==="EBUSY")&&!this.retryEAGAIN(t,e.length,this._len-e.length))throw t;ff(Ha)}}}cr.prototype.destroy=function(){this.destroyed||Ua(this)};function Pk(){let e=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf||this._bufs.shift()||"",this.sync)try{let t=Ye.writeSync(this.fd,this._writingBuf,"utf8");e(null,t)}catch(t){e(t)}else Ye.write(this.fd,this._writingBuf,"utf8",e)}function $k(){let e=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf.length?this._writingBuf:e_(this._bufs.shift(),this._lens.shift()),this.sync)try{let t=Ye.writeSync(this.fd,this._writingBuf);e(null,t)}catch(t){e(t)}else Ye.write(this.fd,this._writingBuf,e)}function Ua(e){if(e.fd===-1){e.once("ready",Ua.bind(null,e));return}e.destroyed=!0,e._bufs=[],e._lens=[],Ye.fsync(e.fd,t);function t(){e.fd!==1&&e.fd!==2?Ye.close(e.fd,r):r()}function r(n){if(n){e.emit("error",n);return}e._ending&&!e._writing&&e.emit("finish"),e.emit("close")}}cr.SonicBoom=cr;cr.default=cr;r_.exports=cr});var df=E((m7,u_)=>{"use strict";var fr={exit:[],beforeExit:[]},s_={exit:Ck,beforeExit:Ik},Ns;function Ok(){Ns===void 0&&(Ns=new FinalizationRegistry(Nk))}function Ak(e){fr[e].length>0||process.on(e,s_[e])}function i_(e){fr[e].length>0||(process.removeListener(e,s_[e]),fr.exit.length===0&&fr.beforeExit.length===0&&(Ns=void 0))}function Ck(){o_("exit")}function Ik(){o_("beforeExit")}function o_(e){for(let t of fr[e]){let r=t.deref(),n=t.fn;r!==void 0&&n(r,e)}fr[e]=[]}function Nk(e){for(let t of["exit","beforeExit"]){let r=fr[t].indexOf(e);fr[t].splice(r,r+1),i_(t)}}function a_(e,t,r){if(t===void 0)throw new Error("the object can't be undefined");Ak(e);let n=new WeakRef(t);n.fn=r,Ok(),Ns.register(t,n),fr[e].push(n)}function kk(e,t){a_("exit",e,t)}function qk(e,t){a_("beforeExit",e,t)}function Dk(e){if(Ns!==void 0){Ns.unregister(e);for(let t of["exit","beforeExit"])fr[t]=fr[t].filter(r=>{let n=r.deref();return n&&n!==e}),i_(t)}}u_.exports={register:kk,registerBeforeExit:qk,unregister:Dk}});var l_=E((y7,jk)=>{jk.exports={name:"thread-stream",version:"2.4.1",description:"A streaming way to send data to a Node.js Worker Thread",main:"index.js",types:"index.d.ts",dependencies:{"real-require":"^0.2.0"},devDependencies:{"@types/node":"^20.1.0","@types/tap":"^15.0.0",desm:"^1.3.0",fastbench:"^1.0.1",husky:"^8.0.1","pino-elasticsearch":"^6.0.0","sonic-boom":"^3.0.0",standard:"^17.0.0",tap:"^16.2.0","ts-node":"^10.8.0",typescript:"^4.7.2","why-is-node-running":"^2.2.2"},scripts:{test:"standard && npm run transpile && tap test/*.test.*js && tap --ts test/*.test.*ts","test:ci":"standard && npm run transpile && npm run test:ci:js && npm run test:ci:ts","test:ci:js":'tap --no-check-coverage --coverage-report=lcovonly "test/**/*.test.*js"',"test:ci:ts":'tap --ts --no-check-coverage --coverage-report=lcovonly "test/**/*.test.*ts"',"test:yarn":'npm run transpile && tap "test/**/*.test.js" --no-check-coverage',transpile:"sh ./test/ts/transpile.sh",prepare:"husky install"},standard:{ignore:["test/ts/**/*"]},repository:{type:"git",url:"git+https://github.com/mcollina/thread-stream.git"},keywords:["worker","thread","threads","stream"],author:"Matteo Collina <hello@matteocollina.com>",license:"MIT",bugs:{url:"https://github.com/mcollina/thread-stream/issues"},homepage:"https://github.com/mcollina/thread-stream#readme"}});var f_=E((g7,c_)=>{"use strict";function xk(e,t,r,n,s){let i=Date.now()+n,o=Atomics.load(e,t);if(o===r){s(null,"ok");return}let a=o,u=c=>{Date.now()>i?s(null,"timed-out"):setTimeout(()=>{a=o,o=Atomics.load(e,t),o===a?u(c>=1e3?1e3:c*2):o===r?s(null,"ok"):s(null,"not-equal")},c)};u(1)}function Lk(e,t,r,n,s){let i=Date.now()+n,o=Atomics.load(e,t);if(o!==r){s(null,"ok");return}let a=u=>{Date.now()>i?s(null,"timed-out"):setTimeout(()=>{o=Atomics.load(e,t),o!==r?s(null,"ok"):a(u>=1e3?1e3:u*2)},u)};a(1)}c_.exports={wait:xk,waitDiff:Lk}});var h_=E((_7,d_)=>{"use strict";d_.exports={WRITE_INDEX:4,READ_INDEX:8}});var __=E((v7,g_)=>{"use strict";var{version:Fk}=l_(),{EventEmitter:Mk}=require("events"),{Worker:Vk}=require("worker_threads"),{join:Hk}=require("path"),{pathToFileURL:zk}=require("url"),{wait:Uk}=f_(),{WRITE_INDEX:kt,READ_INDEX:Rr}=h_(),Bk=require("buffer"),Gk=require("assert"),D=Symbol("kImpl"),Kk=Bk.constants.MAX_STRING_LENGTH,Mi=class{constructor(t){this._value=t}deref(){return this._value}},Ga=class{register(){}unregister(){}},Yk=process.env.NODE_V8_COVERAGE?Ga:global.FinalizationRegistry||Ga,Wk=process.env.NODE_V8_COVERAGE?Mi:global.WeakRef||Mi,p_=new Yk(e=>{e.exited||e.terminate()});function Jk(e,t){let{filename:r,workerData:n}=t,i=("__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{})["thread-stream-worker"]||Hk(__dirname,"lib","worker.js"),o=new Vk(i,{...t.workerOpts,trackUnmanagedFds:!1,workerData:{filename:r.indexOf("file://")===0?r:zk(r).href,dataBuf:e[D].dataBuf,stateBuf:e[D].stateBuf,workerData:{$context:{threadStreamVersion:Fk},...n}}});return o.stream=new Mi(e),o.on("message",Xk),o.on("exit",y_),p_.register(e,o),o}function m_(e){Gk(!e[D].sync),e[D].needDrain&&(e[D].needDrain=!1,e.emit("drain"))}function Ba(e){let t=Atomics.load(e[D].state,kt),r=e[D].data.length-t;if(r>0){if(e[D].buf.length===0){e[D].flushing=!1,e[D].ending?gf(e):e[D].needDrain&&process.nextTick(m_,e);return}let n=e[D].buf.slice(0,r),s=Buffer.byteLength(n);s<=r?(e[D].buf=e[D].buf.slice(r),Ka(e,n,Ba.bind(null,e))):e.flush(()=>{if(!e.destroyed){for(Atomics.store(e[D].state,Rr,0),Atomics.store(e[D].state,kt,0);s>e[D].data.length;)r=r/2,n=e[D].buf.slice(0,r),s=Buffer.byteLength(n);e[D].buf=e[D].buf.slice(r),Ka(e,n,Ba.bind(null,e))}})}else if(r===0){if(t===0&&e[D].buf.length===0)return;e.flush(()=>{Atomics.store(e[D].state,Rr,0),Atomics.store(e[D].state,kt,0),Ba(e)})}else Tr(e,new Error("overwritten"))}function Xk(e){let t=this.stream.deref();if(t===void 0){this.exited=!0,this.terminate();return}switch(e.code){case"READY":this.stream=new Wk(t),t.flush(()=>{t[D].ready=!0,t.emit("ready")});break;case"ERROR":Tr(t,e.err);break;case"EVENT":Array.isArray(e.args)?t.emit(e.name,...e.args):t.emit(e.name,e.args);break;case"WARNING":process.emitWarning(e.err);break;default:Tr(t,new Error("this should not happen: "+e.code))}}function y_(e){let t=this.stream.deref();t!==void 0&&(p_.unregister(t),t.worker.exited=!0,t.worker.off("exit",y_),Tr(t,e!==0?new Error("the worker thread exited"):null))}var pf=class extends Mk{constructor(t={}){if(super(),t.bufferSize<4)throw new Error("bufferSize must at least fit a 4-byte utf-8 char");this[D]={},this[D].stateBuf=new SharedArrayBuffer(128),this[D].state=new Int32Array(this[D].stateBuf),this[D].dataBuf=new SharedArrayBuffer(t.bufferSize||4*1024*1024),this[D].data=Buffer.from(this[D].dataBuf),this[D].sync=t.sync||!1,this[D].ending=!1,this[D].ended=!1,this[D].needDrain=!1,this[D].destroyed=!1,this[D].flushing=!1,this[D].ready=!1,this[D].finished=!1,this[D].errored=null,this[D].closed=!1,this[D].buf="",this.worker=Jk(this,t)}write(t){if(this[D].destroyed)return mf(this,new Error("the worker has exited")),!1;if(this[D].ending)return mf(this,new Error("the worker is ending")),!1;if(this[D].flushing&&this[D].buf.length+t.length>=Kk)try{hf(this),this[D].flushing=!0}catch(r){return Tr(this,r),!1}if(this[D].buf+=t,this[D].sync)try{return hf(this),!0}catch(r){return Tr(this,r),!1}return this[D].flushing||(this[D].flushing=!0,setImmediate(Ba,this)),this[D].needDrain=this[D].data.length-this[D].buf.length-Atomics.load(this[D].state,kt)<=0,!this[D].needDrain}end(){this[D].destroyed||(this[D].ending=!0,gf(this))}flush(t){if(this[D].destroyed){typeof t=="function"&&process.nextTick(t,new Error("the worker has exited"));return}let r=Atomics.load(this[D].state,kt);Uk(this[D].state,Rr,r,1/0,(n,s)=>{if(n){Tr(this,n),process.nextTick(t,n);return}if(s==="not-equal"){this.flush(t);return}process.nextTick(t)})}flushSync(){this[D].destroyed||(hf(this),yf(this))}unref(){this.worker.unref()}ref(){this.worker.ref()}get ready(){return this[D].ready}get destroyed(){return this[D].destroyed}get closed(){return this[D].closed}get writable(){return!this[D].destroyed&&!this[D].ending}get writableEnded(){return this[D].ending}get writableFinished(){return this[D].finished}get writableNeedDrain(){return this[D].needDrain}get writableObjectMode(){return!1}get writableErrored(){return this[D].errored}};function mf(e,t){setImmediate(()=>{e.emit("error",t)})}function Tr(e,t){e[D].destroyed||(e[D].destroyed=!0,t&&(e[D].errored=t,mf(e,t)),e.worker.exited?setImmediate(()=>{e[D].closed=!0,e.emit("close")}):e.worker.terminate().catch(()=>{}).then(()=>{e[D].closed=!0,e.emit("close")}))}function Ka(e,t,r){let n=Atomics.load(e[D].state,kt),s=Buffer.byteLength(t);return e[D].data.write(t,n),Atomics.store(e[D].state,kt,n+s),Atomics.notify(e[D].state,kt),r(),!0}function gf(e){if(!(e[D].ended||!e[D].ending||e[D].flushing)){e[D].ended=!0;try{e.flushSync();let t=Atomics.load(e[D].state,Rr);Atomics.store(e[D].state,kt,-1),Atomics.notify(e[D].state,kt);let r=0;for(;t!==-1;){if(Atomics.wait(e[D].state,Rr,t,1e3),t=Atomics.load(e[D].state,Rr),t===-2){Tr(e,new Error("end() failed"));return}if(++r===10){Tr(e,new Error("end() took too long (10s)"));return}}process.nextTick(()=>{e[D].finished=!0,e.emit("finish")})}catch(t){Tr(e,t)}}}function hf(e){let t=()=>{e[D].ending?gf(e):e[D].needDrain&&process.nextTick(m_,e)};for(e[D].flushing=!1;e[D].buf.length!==0;){let r=Atomics.load(e[D].state,kt),n=e[D].data.length-r;if(n===0){yf(e),Atomics.store(e[D].state,Rr,0),Atomics.store(e[D].state,kt,0);continue}else if(n<0)throw new Error("overwritten");let s=e[D].buf.slice(0,n),i=Buffer.byteLength(s);if(i<=n)e[D].buf=e[D].buf.slice(n),Ka(e,s,t);else{for(yf(e),Atomics.store(e[D].state,Rr,0),Atomics.store(e[D].state,kt,0);i>e[D].buf.length;)n=n/2,s=e[D].buf.slice(0,n),i=Buffer.byteLength(s);e[D].buf=e[D].buf.slice(n),Ka(e,s,t)}}}function yf(e){if(e[D].flushing)throw new Error("unable to flush while flushing");let t=Atomics.load(e[D].state,kt),r=0;for(;;){let n=Atomics.load(e[D].state,Rr);if(n===-2)throw Error("_flushSync failed");if(n!==t)Atomics.wait(e[D].state,Rr,n,1e3);else break;if(++r===10)throw new Error("_flushSync took too long (10s)")}}g_.exports=pf});var Ef=E((E7,v_)=>{"use strict";var{createRequire:Qk}=require("module"),Zk=ef(),{join:_f,isAbsolute:eq,sep:tq}=require("path"),rq=cf(),vf=df(),nq=__();function sq(e){vf.register(e,oq),vf.registerBeforeExit(e,aq),e.on("close",function(){vf.unregister(e)})}function iq(e,t,r){let n=new nq({filename:e,workerData:t,workerOpts:r});n.on("ready",s),n.on("close",function(){process.removeListener("exit",i)}),process.on("exit",i);function s(){process.removeListener("exit",i),n.unref(),r.autoEnd!==!1&&sq(n)}function i(){n.closed||(n.flushSync(),rq(100),n.end())}return n}function oq(e){e.ref(),e.flushSync(),e.end(),e.once("close",function(){e.unref()})}function aq(e){e.flushSync()}function uq(e){let{pipeline:t,targets:r,levels:n,dedupe:s,options:i={},worker:o={},caller:a=Zk()}=e,u=typeof a=="string"?[a]:a,c="__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{},l=e.target;if(l&&r)throw new Error("only one of target or targets can be specified");return r?(l=c["pino-worker"]||_f(__dirname,"worker.js"),i.targets=r.map(d=>({...d,target:f(d.target)}))):t&&(l=c["pino-pipeline-worker"]||_f(__dirname,"worker-pipeline.js"),i.targets=t.map(d=>({...d,target:f(d.target)}))),n&&(i.levels=n),s&&(i.dedupe=s),iq(f(l),i,o);function f(d){if(d=c[d]||d,eq(d)||d.indexOf("file://")===0)return d;if(d==="pino/file")return _f(__dirname,"..","file.js");let h;for(let p of u)try{let y=p==="node:repl"?process.cwd()+tq:p;h=Qk(y).resolve(d);break}catch{continue}if(!h)throw new Error(`unable to determine transport target for "${d}"`);return h}}v_.exports=uq});var Ja=E((S7,C_)=>{"use strict";var E_=W0(),{mapHttpRequest:lq,mapHttpResponse:cq}=Zc(),bf=n_(),S_=df(),{lsCacheSym:fq,chindingsSym:R_,writeSym:b_,serializersSym:T_,formatOptsSym:w_,endSym:dq,stringifiersSym:P_,stringifySym:$_,stringifySafeSym:wf,wildcardFirstSym:O_,nestedKeySym:hq,formattersSym:A_,messageKeySym:pq,errorKeySym:mq,nestedKeyStrSym:yq,msgPrefixSym:Ya}=Is(),{isMainThread:gq}=require("worker_threads"),_q=Ef();function ks(){}function vq(e,t){if(!t)return r;return function(...s){t.call(this,s,r,e)};function r(n,...s){if(typeof n=="object"){let i=n;n!==null&&(n.method&&n.headers&&n.socket?n=lq(n):typeof n.setHeader=="function"&&(n=cq(n)));let o;i===null&&s.length===0?o=[null]:(i=s.shift(),o=s),typeof this[Ya]=="string"&&i!==void 0&&i!==null&&(i=this[Ya]+i),this[b_](n,E_(i,o,this[w_]),e)}else{let i=n===void 0?s.shift():n;typeof this[Ya]=="string"&&i!==void 0&&i!==null&&(i=this[Ya]+i),this[b_](null,E_(i,s,this[w_]),e)}}}function Sf(e){let t="",r=0,n=!1,s=255,i=e.length;if(i>100)return JSON.stringify(e);for(var o=0;o<i&&s>=32;o++)s=e.charCodeAt(o),(s===34||s===92)&&(t+=e.slice(r,o)+"\\",r=o,n=!0);return n?t+=e.slice(r):t=e,s<32?JSON.stringify(e):'"'+t+'"'}function Eq(e,t,r,n){let s=this[$_],i=this[wf],o=this[P_],a=this[dq],u=this[R_],c=this[T_],l=this[A_],f=this[pq],d=this[mq],h=this[fq][r]+n;h=h+u;let p;l.log&&(e=l.log(e));let y=o[O_],v="";for(let w in e)if(p=e[w],Object.prototype.hasOwnProperty.call(e,w)&&p!==void 0){c[w]?p=c[w](p):w===d&&c.err&&(p=c.err(p));let g=o[w]||y;switch(typeof p){case"undefined":case"function":continue;case"number":Number.isFinite(p)===!1&&(p=null);case"boolean":g&&(p=g(p));break;case"string":p=(g||Sf)(p);break;default:p=(g||s)(p,i)}if(p===void 0)continue;let m=Sf(w);v+=","+m+":"+p}let _="";if(t!==void 0){p=c[f]?c[f](t):t;let w=o[f]||y;switch(typeof p){case"function":break;case"number":Number.isFinite(p)===!1&&(p=null);case"boolean":w&&(p=w(p)),_=',"'+f+'":'+p;break;case"string":p=(w||Sf)(p),_=',"'+f+'":'+p;break;default:p=(w||s)(p,i),_=',"'+f+'":'+p}}return this[hq]&&v?h+this[yq]+v.slice(1)+"}"+_+a:h+v+_+a}function Sq(e,t){let r,n=e[R_],s=e[$_],i=e[wf],o=e[P_],a=o[O_],u=e[T_],c=e[A_].bindings;t=c(t);for(let l in t)if(r=t[l],(l!=="level"&&l!=="serializers"&&l!=="formatters"&&l!=="customLevels"&&t.hasOwnProperty(l)&&r!==void 0)===!0){if(r=u[l]?u[l](r):r,r=(o[l]||a||s)(r,i),r===void 0)continue;n+=',"'+l+'":'+r}return n}function bq(e){return e.write!==e.constructor.prototype.write}var wq=process.env.NODE_V8_COVERAGE||process.env.V8_COVERAGE;function Wa(e){let t=new bf(e);return t.on("error",r),!wq&&!e.sync&&gq&&(S_.register(t,Rq),t.on("close",function(){S_.unregister(t)})),t;function r(n){if(n.code==="EPIPE"){t.write=ks,t.end=ks,t.flushSync=ks,t.destroy=ks;return}t.removeListener("error",r),t.emit("error",n)}}function Rq(e,t){e.destroyed||(t==="beforeExit"?(e.flush(),e.on("drain",function(){e.end()})):e.flushSync())}function Tq(e){return function(r,n,s={},i){if(typeof s=="string")i=Wa({dest:s}),s={};else if(typeof i=="string"){if(s&&s.transport)throw Error("only one of option.transport or stream can be specified");i=Wa({dest:i})}else if(s instanceof bf||s.writable||s._writableState)i=s,s={};else if(s.transport){if(s.transport instanceof bf||s.transport.writable||s.transport._writableState)throw Error("option.transport do not allow stream, please pass to option directly. e.g. pino(transport)");if(s.transport.targets&&s.transport.targets.length&&s.formatters&&typeof s.formatters.level=="function")throw Error("option.transport.targets do not allow custom level formatters");let u;s.customLevels&&(u=s.useOnlyCustomLevels?s.customLevels:Object.assign({},s.levels,s.customLevels)),i=_q({caller:n,...s.transport,levels:u})}if(s=Object.assign({},e,s),s.serializers=Object.assign({},e.serializers,s.serializers),s.formatters=Object.assign({},e.formatters,s.formatters),s.prettyPrint)throw new Error("prettyPrint option is no longer supported, see the pino-pretty package (https://github.com/pinojs/pino-pretty)");let{enabled:o,onChild:a}=s;return o===!1&&(s.level="silent"),a||(s.onChild=ks),i||(bq(process.stdout)?i=process.stdout:i=Wa({fd:process.stdout.fd||1})),{opts:s,stream:i}}}function Pq(e,t){try{return JSON.stringify(e)}catch{try{return(t||this[wf])(e)}catch{return'"[unable to serialize, circular reference is too complex to analyze]"'}}}function $q(e,t,r){return{level:e,bindings:t,log:r}}function Oq(e){let t=Number(e);return typeof e=="string"&&Number.isFinite(t)?t:e===void 0?1:e}C_.exports={noop:ks,buildSafeSonicBoom:Wa,asChindings:Sq,asJson:Eq,genLog:vq,createArgsNormalizer:Tq,stringify:Pq,buildFormatters:$q,normalizeDestFileDescriptor:Oq}});var Xa=E((b7,N_)=>{"use strict";var{lsCacheSym:Aq,levelValSym:Rf,useOnlyCustomLevelsSym:Cq,streamSym:Iq,formattersSym:Nq,hooksSym:kq}=Is(),{noop:qq,genLog:zn}=Ja(),dr={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},I_={fatal:e=>{let t=zn(dr.fatal,e);return function(...r){let n=this[Iq];if(t.call(this,...r),typeof n.flushSync=="function")try{n.flushSync()}catch{}}},error:e=>zn(dr.error,e),warn:e=>zn(dr.warn,e),info:e=>zn(dr.info,e),debug:e=>zn(dr.debug,e),trace:e=>zn(dr.trace,e)},Tf=Object.keys(dr).reduce((e,t)=>(e[dr[t]]=t,e),{}),Dq=Object.keys(Tf).reduce((e,t)=>(e[t]='{"level":'+Number(t),e),{});function jq(e){let t=e[Nq].level,{labels:r}=e.levels,n={};for(let s in r){let i=t(r[s],Number(s));n[s]=JSON.stringify(i).slice(0,-1)}return e[Aq]=n,e}function xq(e,t){if(t)return!1;switch(e){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}function Lq(e){let{labels:t,values:r}=this.levels;if(typeof e=="number"){if(t[e]===void 0)throw Error("unknown level value"+e);e=t[e]}if(r[e]===void 0)throw Error("unknown level "+e);let n=this[Rf],s=this[Rf]=r[e],i=this[Cq],o=this[kq].logMethod;for(let a in r){if(s>r[a]){this[a]=qq;continue}this[a]=xq(a,i)?I_[a](o):zn(r[a],o)}this.emit("level-change",e,s,t[n],n,this)}function Fq(e){let{levels:t,levelVal:r}=this;return t&&t.labels?t.labels[r]:""}function Mq(e){let{values:t}=this.levels,r=t[e];return r!==void 0&&r>=this[Rf]}function Vq(e=null,t=!1){let r=e?Object.keys(e).reduce((i,o)=>(i[e[o]]=o,i),{}):null,n=Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),t?null:Tf,r),s=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),t?null:dr,e);return{labels:n,values:s}}function Hq(e,t,r){if(typeof e=="number"){if(![].concat(Object.keys(t||{}).map(i=>t[i]),r?[]:Object.keys(Tf).map(i=>+i),1/0).includes(e))throw Error(`default level:${e} must be included in custom levels`);return}let n=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),r?null:dr,t);if(!(e in n))throw Error(`default level:${e} must be included in custom levels`)}function zq(e,t){let{labels:r,values:n}=e;for(let s in t){if(s in n)throw Error("levels cannot be overridden");if(t[s]in r)throw Error("pre-existing level values cannot be used for new levels")}}N_.exports={initialLsCache:Dq,genLsCache:jq,levelMethods:I_,getLevel:Fq,setLevel:Lq,isLevelEnabled:Mq,mappings:Vq,levels:dr,assertNoLevelCollisions:zq,assertDefaultLevelFound:Hq}});var Pf=E((w7,k_)=>{"use strict";k_.exports={version:"8.17.0"}});var U_=E((T7,z_)=>{"use strict";var{EventEmitter:Uq}=require("events"),{lsCacheSym:Bq,levelValSym:Gq,setLevelSym:Of,getLevelSym:q_,chindingsSym:Af,parsedChindingsSym:Kq,mixinSym:Yq,asJsonSym:F_,writeSym:Wq,mixinMergeStrategySym:Jq,timeSym:Xq,timeSliceIndexSym:Qq,streamSym:M_,serializersSym:Un,formattersSym:$f,errorKeySym:Zq,messageKeySym:eD,useOnlyCustomLevelsSym:tD,needsMetadataGsym:rD,redactFmtSym:nD,stringifySym:sD,formatOptsSym:iD,stringifiersSym:oD,msgPrefixSym:D_}=Is(),{getLevel:aD,setLevel:uD,isLevelEnabled:lD,mappings:cD,initialLsCache:fD,genLsCache:dD,assertNoLevelCollisions:hD}=Xa(),{asChindings:V_,asJson:pD,buildFormatters:j_,stringify:x_}=Ja(),{version:mD}=Pf(),yD=uf(),gD=class{},H_={constructor:gD,child:_D,bindings:vD,setBindings:ED,flush:RD,isLevelEnabled:lD,version:mD,get level(){return this[q_]()},set level(e){this[Of](e)},get levelVal(){return this[Gq]},set levelVal(e){throw Error("levelVal is read-only")},[Bq]:fD,[Wq]:bD,[F_]:pD,[q_]:aD,[Of]:uD};Object.setPrototypeOf(H_,Uq.prototype);z_.exports=function(){return Object.create(H_)};var L_=e=>e;function _D(e,t){if(!e)throw Error("missing bindings for child Pino");t=t||{};let r=this[Un],n=this[$f],s=Object.create(this);if(t.hasOwnProperty("serializers")===!0){s[Un]=Object.create(null);for(let l in r)s[Un][l]=r[l];let u=Object.getOwnPropertySymbols(r);for(var i=0;i<u.length;i++){let l=u[i];s[Un][l]=r[l]}for(let l in t.serializers)s[Un][l]=t.serializers[l];let c=Object.getOwnPropertySymbols(t.serializers);for(var o=0;o<c.length;o++){let l=c[o];s[Un][l]=t.serializers[l]}}else s[Un]=r;if(t.hasOwnProperty("formatters")){let{level:u,bindings:c,log:l}=t.formatters;s[$f]=j_(u||n.level,c||L_,l||n.log)}else s[$f]=j_(n.level,L_,n.log);if(t.hasOwnProperty("customLevels")===!0&&(hD(this.levels,t.customLevels),s.levels=cD(t.customLevels,s[tD]),dD(s)),typeof t.redact=="object"&&t.redact!==null||Array.isArray(t.redact)){s.redact=t.redact;let u=yD(s.redact,x_),c={stringify:u[nD]};s[sD]=x_,s[oD]=u,s[iD]=c}typeof t.msgPrefix=="string"&&(s[D_]=(this[D_]||"")+t.msgPrefix),s[Af]=V_(s,e);let a=t.level||this.level;return s[Of](a),this.onChild(s),s}function vD(){let t=`{${this[Af].substr(1)}}`,r=JSON.parse(t);return delete r.pid,delete r.hostname,r}function ED(e){let t=V_(this,e);this[Af]=t,delete this[Kq]}function SD(e,t){return Object.assign(t,e)}function bD(e,t,r){let n=this[Xq](),s=this[Yq],i=this[Zq],o=this[eD],a=this[Jq]||SD,u;e==null?u={}:e instanceof Error?(u={[i]:e},t===void 0&&(t=e.message)):(u=e,t===void 0&&e[o]===void 0&&e[i]&&(t=e[i].message)),s&&(u=a(u,s(u,r,this)));let c=this[F_](u,t,r,n),l=this[M_];l[rD]===!0&&(l.lastLevel=r,l.lastObj=u,l.lastMsg=t,l.lastTime=n.slice(this[Qq]),l.lastLogger=this),l.write(c)}function wD(){}function RD(e){if(e!=null&&typeof e!="function")throw Error("callback must be a function");let t=this[M_];typeof t.flush=="function"?t.flush(e||wD):e&&e()}});var W_=E((kf,Y_)=>{"use strict";var{hasOwnProperty:Qa}=Object.prototype,Gn=Nf();Gn.configure=Nf;Gn.stringify=Gn;Gn.default=Gn;kf.stringify=Gn;kf.configure=Nf;Y_.exports=Gn;var TD=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function yn(e){return e.length<5e3&&!TD.test(e)?`"${e}"`:JSON.stringify(e)}function Cf(e){if(e.length>200)return e.sort();for(let t=1;t<e.length;t++){let r=e[t],n=t;for(;n!==0&&e[n-1]>r;)e[n]=e[n-1],n--;e[n]=r}return e}var PD=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function If(e){return PD.call(e)!==void 0&&e.length!==0}function B_(e,t,r){e.length<r&&(r=e.length);let n=t===","?"":" ",s=`"0":${n}${e[0]}`;for(let i=1;i<r;i++)s+=`${t}"${i}":${n}${e[i]}`;return s}function $D(e){if(Qa.call(e,"circularValue")){let t=e.circularValue;if(typeof t=="string")return`"${t}"`;if(t==null)return t;if(t===Error||t===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function G_(e,t){let r;if(Qa.call(e,t)&&(r=e[t],typeof r!="boolean"))throw new TypeError(`The "${t}" argument must be of type boolean`);return r===void 0?!0:r}function K_(e,t){let r;if(Qa.call(e,t)){if(r=e[t],typeof r!="number")throw new TypeError(`The "${t}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${t}" argument must be an integer`);if(r<1)throw new RangeError(`The "${t}" argument must be >= 1`)}return r===void 0?1/0:r}function Bn(e){return e===1?"1 item":`${e} items`}function OD(e){let t=new Set;for(let r of e)(typeof r=="string"||typeof r=="number")&&t.add(String(r));return t}function AD(e){if(Qa.call(e,"strict")){let t=e.strict;if(typeof t!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(t)return r=>{let n=`Object can not safely be stringified. Received type ${typeof r}`;throw typeof r!="function"&&(n+=` (${r.toString()})`),new Error(n)}}}function Nf(e){e={...e};let t=AD(e);t&&(e.bigint===void 0&&(e.bigint=!1),"circularValue"in e||(e.circularValue=Error));let r=$D(e),n=G_(e,"bigint"),s=G_(e,"deterministic"),i=K_(e,"maximumDepth"),o=K_(e,"maximumBreadth");function a(d,h,p,y,v,_){let w=h[d];switch(typeof w=="object"&&w!==null&&typeof w.toJSON=="function"&&(w=w.toJSON(d)),w=y.call(h,d,w),typeof w){case"string":return yn(w);case"object":{if(w===null)return"null";if(p.indexOf(w)!==-1)return r;let g="",m=",",T=_;if(Array.isArray(w)){if(w.length===0)return"[]";if(i<p.length+1)return'"[Array]"';p.push(w),v!==""&&(_+=v,g+=`
${_}`,m=`,
${_}`);let x=Math.min(w.length,o),j=0;for(;j<x-1;j++){let Q=a(String(j),w,p,y,v,_);g+=Q!==void 0?Q:"null",g+=m}let L=a(String(j),w,p,y,v,_);if(g+=L!==void 0?L:"null",w.length-1>o){let Q=w.length-o-1;g+=`${m}"... ${Bn(Q)} not stringified"`}return v!==""&&(g+=`
${T}`),p.pop(),`[${g}]`}let A=Object.keys(w),b=A.length;if(b===0)return"{}";if(i<p.length+1)return'"[Object]"';let $="",k="";v!==""&&(_+=v,m=`,
${_}`,$=" ");let R=Math.min(b,o);s&&!If(w)&&(A=Cf(A)),p.push(w);for(let x=0;x<R;x++){let j=A[x],L=a(j,w,p,y,v,_);L!==void 0&&(g+=`${k}${yn(j)}:${$}${L}`,k=m)}if(b>o){let x=b-o;g+=`${k}"...":${$}"${Bn(x)} not stringified"`,k=m}return v!==""&&k.length>1&&(g=`
${_}${g}
${T}`),p.pop(),`{${g}}`}case"number":return isFinite(w)?String(w):t?t(w):"null";case"boolean":return w===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(w);default:return t?t(w):void 0}}function u(d,h,p,y,v,_){switch(typeof h=="object"&&h!==null&&typeof h.toJSON=="function"&&(h=h.toJSON(d)),typeof h){case"string":return yn(h);case"object":{if(h===null)return"null";if(p.indexOf(h)!==-1)return r;let w=_,g="",m=",";if(Array.isArray(h)){if(h.length===0)return"[]";if(i<p.length+1)return'"[Array]"';p.push(h),v!==""&&(_+=v,g+=`
${_}`,m=`,
${_}`);let b=Math.min(h.length,o),$=0;for(;$<b-1;$++){let R=u(String($),h[$],p,y,v,_);g+=R!==void 0?R:"null",g+=m}let k=u(String($),h[$],p,y,v,_);if(g+=k!==void 0?k:"null",h.length-1>o){let R=h.length-o-1;g+=`${m}"... ${Bn(R)} not stringified"`}return v!==""&&(g+=`
${w}`),p.pop(),`[${g}]`}p.push(h);let T="";v!==""&&(_+=v,m=`,
${_}`,T=" ");let A="";for(let b of y){let $=u(b,h[b],p,y,v,_);$!==void 0&&(g+=`${A}${yn(b)}:${T}${$}`,A=m)}return v!==""&&A.length>1&&(g=`
${_}${g}
${w}`),p.pop(),`{${g}}`}case"number":return isFinite(h)?String(h):t?t(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(h);default:return t?t(h):void 0}}function c(d,h,p,y,v){switch(typeof h){case"string":return yn(h);case"object":{if(h===null)return"null";if(typeof h.toJSON=="function"){if(h=h.toJSON(d),typeof h!="object")return c(d,h,p,y,v);if(h===null)return"null"}if(p.indexOf(h)!==-1)return r;let _=v;if(Array.isArray(h)){if(h.length===0)return"[]";if(i<p.length+1)return'"[Array]"';p.push(h),v+=y;let $=`
${v}`,k=`,
${v}`,R=Math.min(h.length,o),x=0;for(;x<R-1;x++){let L=c(String(x),h[x],p,y,v);$+=L!==void 0?L:"null",$+=k}let j=c(String(x),h[x],p,y,v);if($+=j!==void 0?j:"null",h.length-1>o){let L=h.length-o-1;$+=`${k}"... ${Bn(L)} not stringified"`}return $+=`
${_}`,p.pop(),`[${$}]`}let w=Object.keys(h),g=w.length;if(g===0)return"{}";if(i<p.length+1)return'"[Object]"';v+=y;let m=`,
${v}`,T="",A="",b=Math.min(g,o);If(h)&&(T+=B_(h,m,o),w=w.slice(h.length),b-=h.length,A=m),s&&(w=Cf(w)),p.push(h);for(let $=0;$<b;$++){let k=w[$],R=c(k,h[k],p,y,v);R!==void 0&&(T+=`${A}${yn(k)}: ${R}`,A=m)}if(g>o){let $=g-o;T+=`${A}"...": "${Bn($)} not stringified"`,A=m}return A!==""&&(T=`
${v}${T}
${_}`),p.pop(),`{${T}}`}case"number":return isFinite(h)?String(h):t?t(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(h);default:return t?t(h):void 0}}function l(d,h,p){switch(typeof h){case"string":return yn(h);case"object":{if(h===null)return"null";if(typeof h.toJSON=="function"){if(h=h.toJSON(d),typeof h!="object")return l(d,h,p);if(h===null)return"null"}if(p.indexOf(h)!==-1)return r;let y="";if(Array.isArray(h)){if(h.length===0)return"[]";if(i<p.length+1)return'"[Array]"';p.push(h);let m=Math.min(h.length,o),T=0;for(;T<m-1;T++){let b=l(String(T),h[T],p);y+=b!==void 0?b:"null",y+=","}let A=l(String(T),h[T],p);if(y+=A!==void 0?A:"null",h.length-1>o){let b=h.length-o-1;y+=`,"... ${Bn(b)} not stringified"`}return p.pop(),`[${y}]`}let v=Object.keys(h),_=v.length;if(_===0)return"{}";if(i<p.length+1)return'"[Object]"';let w="",g=Math.min(_,o);If(h)&&(y+=B_(h,",",o),v=v.slice(h.length),g-=h.length,w=","),s&&(v=Cf(v)),p.push(h);for(let m=0;m<g;m++){let T=v[m],A=l(T,h[T],p);A!==void 0&&(y+=`${w}${yn(T)}:${A}`,w=",")}if(_>o){let m=_-o;y+=`${w}"...":"${Bn(m)} not stringified"`}return p.pop(),`{${y}}`}case"number":return isFinite(h)?String(h):t?t(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(h);default:return t?t(h):void 0}}function f(d,h,p){if(arguments.length>1){let y="";if(typeof p=="number"?y=" ".repeat(Math.min(p,10)):typeof p=="string"&&(y=p.slice(0,10)),h!=null){if(typeof h=="function")return a("",{"":d},[],h,y,"");if(Array.isArray(h))return u("",d,[],OD(h),y,"")}if(y.length!==0)return c("",d,[],y,"")}return l("",d,[])}return f}});var Q_=E((P7,X_)=>{"use strict";var qf=Symbol.for("pino.metadata"),{levels:J_}=Xa(),CD=J_.info;function ID(e,t){let r=0;e=e||[],t=t||{dedupe:!1};let n=Object.create(J_);n.silent=1/0,t.levels&&typeof t.levels=="object"&&Object.keys(t.levels).forEach(l=>{n[l]=t.levels[l]});let s={write:i,add:a,flushSync:o,end:u,minLevel:0,streams:[],clone:c,[qf]:!0,streamLevels:n};return Array.isArray(e)?e.forEach(a,s):a.call(s,e),e=null,s;function i(l){let f,d=this.lastLevel,{streams:h}=this,p=0,y;for(let v=kD(h.length,t.dedupe);DD(v,h.length,t.dedupe);v=qD(v,t.dedupe))if(f=h[v],f.level<=d){if(p!==0&&p!==f.level)break;if(y=f.stream,y[qf]){let{lastTime:_,lastMsg:w,lastObj:g,lastLogger:m}=this;y.lastLevel=d,y.lastTime=_,y.lastMsg=w,y.lastObj=g,y.lastLogger=m}y.write(l),t.dedupe&&(p=f.level)}else if(!t.dedupe)break}function o(){for(let{stream:l}of this.streams)typeof l.flushSync=="function"&&l.flushSync()}function a(l){if(!l)return s;let f=typeof l.write=="function"||l.stream,d=l.write?l:l.stream;if(!f)throw Error("stream object needs to implement either StreamEntry or DestinationStream interface");let{streams:h,streamLevels:p}=this,y;typeof l.levelVal=="number"?y=l.levelVal:typeof l.level=="string"?y=p[l.level]:typeof l.level=="number"?y=l.level:y=CD;let v={stream:d,level:y,levelVal:void 0,id:r++};return h.unshift(v),h.sort(ND),this.minLevel=h[0].level,s}function u(){for(let{stream:l}of this.streams)typeof l.flushSync=="function"&&l.flushSync(),l.end()}function c(l){let f=new Array(this.streams.length);for(let d=0;d<f.length;d++)f[d]={level:l,stream:this.streams[d].stream};return{write:i,add:a,minLevel:l,streams:f,clone:c,flushSync:o,[qf]:!0}}}function ND(e,t){return e.level-t.level}function kD(e,t){return t?e-1:0}function qD(e,t){return t?e-1:e+1}function DD(e,t,r){return r?e>=0:e<t}X_.exports=ID});var fv=E(($7,Xt)=>{"use strict";var jD=require("os"),ov=Zc(),xD=ef(),LD=uf(),av=K0(),FD=U_(),uv=Is(),{configure:MD}=W_(),{assertDefaultLevelFound:VD,mappings:lv,genLsCache:HD,levels:zD}=Xa(),{createArgsNormalizer:UD,asChindings:BD,buildSafeSonicBoom:Z_,buildFormatters:GD,stringify:Df,normalizeDestFileDescriptor:ev,noop:KD}=Ja(),{version:YD}=Pf(),{chindingsSym:tv,redactFmtSym:WD,serializersSym:rv,timeSym:JD,timeSliceIndexSym:XD,streamSym:QD,stringifySym:nv,stringifySafeSym:jf,stringifiersSym:sv,setLevelSym:ZD,endSym:ej,formatOptsSym:tj,messageKeySym:rj,errorKeySym:nj,nestedKeySym:sj,mixinSym:ij,useOnlyCustomLevelsSym:oj,formattersSym:iv,hooksSym:aj,nestedKeyStrSym:uj,mixinMergeStrategySym:lj,msgPrefixSym:cj}=uv,{epochTime:cv,nullTime:fj}=av,{pid:dj}=process,hj=jD.hostname(),pj=ov.err,mj={level:"info",levels:zD,messageKey:"msg",errorKey:"err",nestedKey:null,enabled:!0,base:{pid:dj,hostname:hj},serializers:Object.assign(Object.create(null),{err:pj}),formatters:Object.assign(Object.create(null),{bindings(e){return e},level(e,t){return{level:t}}}),hooks:{logMethod:void 0},timestamp:cv,name:void 0,redact:null,customLevels:null,useOnlyCustomLevels:!1,depthLimit:5,edgeLimit:100},yj=UD(mj),gj=Object.assign(Object.create(null),ov);function xf(...e){let t={},{opts:r,stream:n}=yj(t,xD(),...e),{redact:s,crlf:i,serializers:o,timestamp:a,messageKey:u,errorKey:c,nestedKey:l,base:f,name:d,level:h,customLevels:p,mixin:y,mixinMergeStrategy:v,useOnlyCustomLevels:_,formatters:w,hooks:g,depthLimit:m,edgeLimit:T,onChild:A,msgPrefix:b}=r,$=MD({maximumDepth:m,maximumBreadth:T}),k=GD(w.level,w.bindings,w.log),R=Df.bind({[jf]:$}),x=s?LD(s,R):{},j=s?{stringify:x[WD]}:{stringify:R},L="}"+(i?`\r
`:`
`),Q=BD.bind(null,{[tv]:"",[rv]:o,[sv]:x,[nv]:Df,[jf]:$,[iv]:k}),oe="";f!==null&&(d===void 0?oe=Q(f):oe=Q(Object.assign({},f,{name:d})));let H=a instanceof Function?a:a?cv:fj,W=H().indexOf(":")+1;if(_&&!p)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(y&&typeof y!="function")throw Error(`Unknown mixin type "${typeof y}" - expected "function"`);if(b&&typeof b!="string")throw Error(`Unknown msgPrefix type "${typeof b}" - expected "string"`);VD(h,p,_);let Oe=lv(p,_);return Object.assign(t,{levels:Oe,[oj]:_,[QD]:n,[JD]:H,[XD]:W,[nv]:Df,[jf]:$,[sv]:x,[ej]:L,[tj]:j,[rj]:u,[nj]:c,[sj]:l,[uj]:l?`,${JSON.stringify(l)}:{`:"",[rv]:o,[ij]:y,[lj]:v,[tv]:oe,[iv]:k,[aj]:g,silent:KD,onChild:A,[cj]:b}),Object.setPrototypeOf(t,FD()),HD(t),t[ZD](h),t}Xt.exports=xf;Xt.exports.destination=(e=process.stdout.fd)=>typeof e=="object"?(e.dest=ev(e.dest||process.stdout.fd),Z_(e)):Z_({dest:ev(e),minLength:0});Xt.exports.transport=Ef();Xt.exports.multistream=Q_();Xt.exports.levels=lv();Xt.exports.stdSerializers=gj;Xt.exports.stdTimeFunctions=Object.assign({},av);Xt.exports.symbols=uv;Xt.exports.version=YD;Xt.exports.default=xf;Xt.exports.pino=xf});var Vi=E((O7,yv)=>{"use strict";var _j=n0(),Za=fv(),{serializersSym:dv}=Za.symbols,{FST_ERR_LOG_INVALID_DESTINATION:vj,FST_ERR_LOG_INVALID_LOGGER:Ej}=St();function hv(e){if(e.stream&&e.file)throw new vj;e.file&&(e.stream=Za.destination(e.file),delete e.file);let t=e.logger,r=e.genReqId,n=null;return t?(e.logger=void 0,e.genReqId=void 0,t[dv]&&(e.serializers=Object.assign({},e.serializers,t[dv])),n=t.child({},e),e.logger=t,e.genReqId=r):n=Za(e,e.stream),n}var Lf={req:function(t){return{method:t.method,url:t.url,version:t.headers&&t.headers["accept-version"],hostname:t.hostname,remoteAddress:t.ip,remotePort:t.socket?t.socket.remotePort:void 0}},err:Za.stdSerializers.err,res:function(t){return{statusCode:t.statusCode}}};function Sj(){let e=process.hrtime();return e[0]*1e3+e[1]/1e6}function bj(e){if(!e.logger){let n=_j;return n.child=()=>n,{logger:n,hasLogger:!1}}if(pv(e.logger))return{logger:hv({logger:e.logger,serializers:Object.assign({},Lf,e.logger.serializers)}),hasLogger:!0};let t={};return Object.prototype.toString.call(e.logger)==="[object Object]"&&Reflect.ownKeys(e.logger).forEach(n=>{Object.defineProperty(t,n,{value:e.logger[n],writable:!0,enumerable:!0,configurable:!0})}),t.level=t.level||"info",t.serializers=Object.assign({},Lf,t.serializers),e.logger=t,{logger:hv(e.logger),hasLogger:!0}}function pv(e,t){let r=["info","error","debug","fatal","warn","trace","child"],n=e?r.filter(s=>!e[s]||typeof e[s]!="function"):r;if(n.length){if(n.length===r.length&&!t)return!1;throw Ej(n.join(","))}else return!0}function wj(e,t,r,n,s){let i={[e.requestIdLogLabel]:n},o=e.childLoggerFactory.call(e.server,t,i,s||{},r);return e.childLoggerFactory!==mv&&pv(o,!0),o}function mv(e,t,r){return e.child(t,r)}yv.exports={createLogger:bj,createChildLogger:wj,defaultChildLoggerFactory:mv,serializers:Lf,now:Sj}});var Hi=E((A7,gv)=>{"use strict";gv.exports=Rj;function qs(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}function Rj(e){if(e=e||{},e.circles)return Tj(e);return e.proto?n:r;function t(s,i){for(var o=Object.keys(s),a=new Array(o.length),u=0;u<o.length;u++){var c=o[u],l=s[c];typeof l!="object"||l===null?a[c]=l:l instanceof Date?a[c]=new Date(l):ArrayBuffer.isView(l)?a[c]=qs(l):a[c]=i(l)}return a}function r(s){if(typeof s!="object"||s===null)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return t(s,r);if(s instanceof Map)return new Map(t(Array.from(s),r));if(s instanceof Set)return new Set(t(Array.from(s),r));var i={};for(var o in s)if(Object.hasOwnProperty.call(s,o)!==!1){var a=s[o];typeof a!="object"||a===null?i[o]=a:a instanceof Date?i[o]=new Date(a):a instanceof Map?i[o]=new Map(t(Array.from(a),r)):a instanceof Set?i[o]=new Set(t(Array.from(a),r)):ArrayBuffer.isView(a)?i[o]=qs(a):i[o]=r(a)}return i}function n(s){if(typeof s!="object"||s===null)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return t(s,n);if(s instanceof Map)return new Map(t(Array.from(s),n));if(s instanceof Set)return new Set(t(Array.from(s),n));var i={};for(var o in s){var a=s[o];typeof a!="object"||a===null?i[o]=a:a instanceof Date?i[o]=new Date(a):a instanceof Map?i[o]=new Map(t(Array.from(a),n)):a instanceof Set?i[o]=new Set(t(Array.from(a),n)):ArrayBuffer.isView(a)?i[o]=qs(a):i[o]=n(a)}return i}}function Tj(e){var t=[],r=[];return e.proto?i:s;function n(o,a){for(var u=Object.keys(o),c=new Array(u.length),l=0;l<u.length;l++){var f=u[l],d=o[f];if(typeof d!="object"||d===null)c[f]=d;else if(d instanceof Date)c[f]=new Date(d);else if(ArrayBuffer.isView(d))c[f]=qs(d);else{var h=t.indexOf(d);h!==-1?c[f]=r[h]:c[f]=a(d)}}return c}function s(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return n(o,s);if(o instanceof Map)return new Map(n(Array.from(o),s));if(o instanceof Set)return new Set(n(Array.from(o),s));var a={};t.push(o),r.push(a);for(var u in o)if(Object.hasOwnProperty.call(o,u)!==!1){var c=o[u];if(typeof c!="object"||c===null)a[u]=c;else if(c instanceof Date)a[u]=new Date(c);else if(c instanceof Map)a[u]=new Map(n(Array.from(c),s));else if(c instanceof Set)a[u]=new Set(n(Array.from(c),s));else if(ArrayBuffer.isView(c))a[u]=qs(c);else{var l=t.indexOf(c);l!==-1?a[u]=r[l]:a[u]=s(c)}}return t.pop(),r.pop(),a}function i(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return n(o,i);if(o instanceof Map)return new Map(n(Array.from(o),i));if(o instanceof Set)return new Set(n(Array.from(o),i));var a={};t.push(o),r.push(a);for(var u in o){var c=o[u];if(typeof c!="object"||c===null)a[u]=c;else if(c instanceof Date)a[u]=new Date(c);else if(c instanceof Map)a[u]=new Map(n(Array.from(c),i));else if(c instanceof Set)a[u]=new Set(n(Array.from(c),i));else if(ArrayBuffer.isView(c))a[u]=qs(c);else{var l=t.indexOf(c);l!==-1?a[u]=r[l]:a[u]=i(c)}}return t.pop(),r.pop(),a}}});var zi=E((C7,Sv)=>{"use strict";var Pj=Hi()({circles:!1,proto:!0}),{kSchemaVisited:_v,kSchemaResponse:$j}=ct(),Mf=Symbol.for("fluent-schema-object"),{FST_ERR_SCH_MISSING_ID:Oj,FST_ERR_SCH_ALREADY_PRESENT:Aj,FST_ERR_SCH_DUPLICATE:Cj,FST_ERR_SCH_CONTENT_MISSING_SCHEMA:Ij}=St(),Ev=["params","body","querystring","query","headers"];function eu(e){this.store=e||{}}eu.prototype.add=function(e){let t=Pj(e.isFluentSchema||e.isFluentJSONSchema||e[Mf]?e.valueOf():e),r=t.$id;if(!r)throw new Oj;if(this.store[r])throw new Aj(r);this.store[r]=t};eu.prototype.getSchemas=function(){return Object.assign({},this.store)};eu.prototype.getSchema=function(e){return this.store[e]};function vv(e){return typeof e=="object"&&Object.getPrototypeOf(e)!==Object.prototype}function Nj(e,t){if(e[_v])return e;if(e.query){if(e.querystring)throw new Cj("querystring");e.querystring=e.query}kj(e);for(let r of Ev){let n=e[r];n&&!vv(n)&&(e[r]=Ff(n,t.jsonShorthand))}if(e.response){let r=Object.keys(e.response);for(let n of r){if(vv(e.response[n]))continue;let s=e.response[n].content,i=!1;if(s){let o=Object.keys(s);for(let a=0;a<o.length;a++){let u=o[a];if(!s[u].schema){if(o.length===1)break;throw new Ij(u)}e.response[n].content[u].schema=Ff(s[u].schema,t.jsonShorthand),a===o.length-1&&(i=!0)}}i||(e.response[n]=Ff(e.response[n],t.jsonShorthand))}}return e[_v]=!0,e}function kj(e){for(let t of Ev)e[t]&&(e[t].isFluentSchema||e[t][Mf])&&(e[t]=e[t].valueOf());if(e.response){let t=Object.keys(e.response);for(let r of t)(e.response[r].isFluentSchema||e.response[r][Mf])&&(e.response[r]=e.response[r].valueOf())}}function Ff(e,t){return!t||e.$ref||e.oneOf||e.allOf||e.anyOf||e.$merge||e.$patch?e:!e.type&&!e.properties?{type:"object",properties:e}:e}function qj(e,t,r){let n=e[$j];if(!n)return!1;if(n[t]){if(n[t].constructor===Object&&r){let i=r.split(";",1)[0];return n[t][i]?n[t][i]:!1}return n[t]}let s=(t+"")[0]+"xx";if(n[s]){if(n[s].constructor===Object&&r){let i=r.split(";",1)[0];return n[s][i]?n[s][i]:!1}return n[s]}if(n.default){if(n.default.constructor===Object&&r){let i=r.split(";",1)[0];return n.default[i]?n.default[i]:!1}return n.default}return!1}Sv.exports={buildSchemas(e){return new eu(e)},getSchemaSerializer:qj,normalizeSchema:Nj}});var Vf=E((I7,wv)=>{"use strict";var Dj=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;wv.exports=class bv{constructor(t){switch(t&&t.rounding){case"floor":this.parseInteger=Math.floor;break;case"ceil":this.parseInteger=Math.ceil;break;case"round":this.parseInteger=Math.round;break;case"trunc":default:this.parseInteger=Math.trunc;break}this._options=t}asInteger(t){if(typeof t=="number"){if(t===1/0||t===-1/0)throw new Error(`The value "${t}" cannot be converted to an integer.`);if(Number.isInteger(t))return""+t;if(Number.isNaN(t))throw new Error(`The value "${t}" cannot be converted to an integer.`);return this.parseInteger(t)}else{if(t===null)return"0";if(typeof t=="bigint")return t.toString();{let r=this.parseInteger(t);if(Number.isFinite(r))return""+r;throw new Error(`The value "${t}" cannot be converted to an integer.`)}}}asNumber(t){let r=Number(t);if(Number.isNaN(r))throw new Error(`The value "${t}" cannot be converted to a number.`);return Number.isFinite(r)?""+r:"null"}asBoolean(t){return t&&"true"||"false"}asDateTime(t){if(t===null)return'""';if(t instanceof Date)return'"'+t.toISOString()+'"';if(typeof t=="string")return'"'+t+'"';throw new Error(`The value "${t}" cannot be converted to a date-time.`)}asDate(t){if(t===null)return'""';if(t instanceof Date)return'"'+new Date(t.getTime()-t.getTimezoneOffset()*6e4).toISOString().slice(0,10)+'"';if(typeof t=="string")return'"'+t+'"';throw new Error(`The value "${t}" cannot be converted to a date.`)}asTime(t){if(t===null)return'""';if(t instanceof Date)return'"'+new Date(t.getTime()-t.getTimezoneOffset()*6e4).toISOString().slice(11,19)+'"';if(typeof t=="string")return'"'+t+'"';throw new Error(`The value "${t}" cannot be converted to a time.`)}asString(t){if(typeof t!="string"){if(t===null)return'""';if(t instanceof Date)return'"'+t.toISOString()+'"';t instanceof RegExp?t=t.source:t=t.toString()}return t.length<42?this.asStringSmall(t):Dj.test(t)===!1?'"'+t+'"':JSON.stringify(t)}asStringSmall(t){let r=t.length,n="",s=-1,i=255;for(var o=0;o<r;o++){if(i=t.charCodeAt(o),i<32||i>=55296&&i<=57343)return JSON.stringify(t);(i===34||i===92)&&(s===-1&&(s=0),n+=t.slice(s,o)+"\\",s=o)}return s===-1&&'"'+t+'"'||'"'+n+t.slice(s)+'"'}getState(){return this._options}static restoreFromState(t){return new bv(t)}}});var Ds=E(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.regexpCode=_e.getEsmExportName=_e.getProperty=_e.safeStringify=_e.stringify=_e.strConcat=_e.addCodeArg=_e.str=_e._=_e.nil=_e._Code=_e.Name=_e.IDENTIFIER=_e._CodeOrName=void 0;var Ui=class{};_e._CodeOrName=Ui;_e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Kn=class extends Ui{constructor(t){if(super(),!_e.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};_e.Name=Kn;var Qt=class extends Ui{constructor(t){super(),this._items=typeof t=="string"?[t]:t}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let t=this._items[0];return t===""||t==='""'}get str(){var t;return(t=this._str)!==null&&t!==void 0?t:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var t;return(t=this._names)!==null&&t!==void 0?t:this._names=this._items.reduce((r,n)=>(n instanceof Kn&&(r[n.str]=(r[n.str]||0)+1),r),{})}};_e._Code=Qt;_e.nil=new Qt("");function Rv(e,...t){let r=[e[0]],n=0;for(;n<t.length;)zf(r,t[n]),r.push(e[++n]);return new Qt(r)}_e._=Rv;var Hf=new Qt("+");function Tv(e,...t){let r=[Bi(e[0])],n=0;for(;n<t.length;)r.push(Hf),zf(r,t[n]),r.push(Hf,Bi(e[++n]));return jj(r),new Qt(r)}_e.str=Tv;function zf(e,t){t instanceof Qt?e.push(...t._items):t instanceof Kn?e.push(t):e.push(Fj(t))}_e.addCodeArg=zf;function jj(e){let t=1;for(;t<e.length-1;){if(e[t]===Hf){let r=xj(e[t-1],e[t+1]);if(r!==void 0){e.splice(t-1,3,r);continue}e[t++]="+"}t++}}function xj(e,t){if(t==='""')return e;if(e==='""')return t;if(typeof e=="string")return t instanceof Kn||e[e.length-1]!=='"'?void 0:typeof t!="string"?`${e.slice(0,-1)}${t}"`:t[0]==='"'?e.slice(0,-1)+t.slice(1):void 0;if(typeof t=="string"&&t[0]==='"'&&!(e instanceof Kn))return`"${e}${t.slice(1)}`}function Lj(e,t){return t.emptyStr()?e:e.emptyStr()?t:Tv`${e}${t}`}_e.strConcat=Lj;function Fj(e){return typeof e=="number"||typeof e=="boolean"||e===null?e:Bi(Array.isArray(e)?e.join(","):e)}function Mj(e){return new Qt(Bi(e))}_e.stringify=Mj;function Bi(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}_e.safeStringify=Bi;function Vj(e){return typeof e=="string"&&_e.IDENTIFIER.test(e)?new Qt(`.${e}`):Rv`[${e}]`}_e.getProperty=Vj;function Hj(e){if(typeof e=="string"&&_e.IDENTIFIER.test(e))return new Qt(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)}_e.getEsmExportName=Hj;function zj(e){return new Qt(e.toString())}_e.regexpCode=zj});var nu=E($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.ValueScope=$t.ValueScopeName=$t.Scope=$t.varKinds=$t.UsedValueState=void 0;var qt=Ds(),Uf=class extends Error{constructor(t){super(`CodeGen: "code" for ${t} not defined`),this.value=t.value}},Bf;(function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"})(Bf=$t.UsedValueState||($t.UsedValueState={}));$t.varKinds={const:new qt.Name("const"),let:new qt.Name("let"),var:new qt.Name("var")};var tu=class{constructor({prefixes:t,parent:r}={}){this._names={},this._prefixes=t,this._parent=r}toName(t){return t instanceof qt.Name?t:this.name(t)}name(t){return new qt.Name(this._newName(t))}_newName(t){let r=this._names[t]||this._nameGroup(t);return`${t}${r.index++}`}_nameGroup(t){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(t)||this._prefixes&&!this._prefixes.has(t))throw new Error(`CodeGen: prefix "${t}" is not allowed in this scope`);return this._names[t]={prefix:t,index:0}}};$t.Scope=tu;var ru=class extends qt.Name{constructor(t,r){super(r),this.prefix=t}setValue(t,{property:r,itemIndex:n}){this.value=t,this.scopePath=(0,qt._)`.${new qt.Name(r)}[${n}]`}};$t.ValueScopeName=ru;var Uj=(0,qt._)`\n`,Gf=class extends tu{constructor(t){super(t),this._values={},this._scope=t.scope,this.opts={...t,_n:t.lines?Uj:qt.nil}}get(){return this._scope}name(t){return new ru(t,this._newName(t))}value(t,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(t),{prefix:i}=s,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[i];if(a){let l=a.get(o);if(l)return l}else a=this._values[i]=new Map;a.set(o,s);let u=this._scope[i]||(this._scope[i]=[]),c=u.length;return u[c]=r.ref,s.setValue(r,{property:i,itemIndex:c}),s}getValue(t,r){let n=this._values[t];if(n)return n.get(r)}scopeRefs(t,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,qt._)`${t}${n.scopePath}`})}scopeCode(t=this._values,r,n){return this._reduceValues(t,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(t,r,n={},s){let i=qt.nil;for(let o in t){let a=t[o];if(!a)continue;let u=n[o]=n[o]||new Map;a.forEach(c=>{if(u.has(c))return;u.set(c,Bf.Started);let l=r(c);if(l){let f=this.opts.es5?$t.varKinds.var:$t.varKinds.const;i=(0,qt._)`${i}${f} ${c} = ${l};${this.opts._n}`}else if(l=s?.(c))i=(0,qt._)`${i}${l}${this.opts._n}`;else throw new Uf(c);u.set(c,Bf.Completed)})}return i}};$t.ValueScope=Gf});var X=E(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.or=ue.and=ue.not=ue.CodeGen=ue.operators=ue.varKinds=ue.ValueScopeName=ue.ValueScope=ue.Scope=ue.Name=ue.regexpCode=ue.stringify=ue.getProperty=ue.nil=ue.strConcat=ue.str=ue._=void 0;var pe=Ds(),hr=nu(),gn=Ds();Object.defineProperty(ue,"_",{enumerable:!0,get:function(){return gn._}});Object.defineProperty(ue,"str",{enumerable:!0,get:function(){return gn.str}});Object.defineProperty(ue,"strConcat",{enumerable:!0,get:function(){return gn.strConcat}});Object.defineProperty(ue,"nil",{enumerable:!0,get:function(){return gn.nil}});Object.defineProperty(ue,"getProperty",{enumerable:!0,get:function(){return gn.getProperty}});Object.defineProperty(ue,"stringify",{enumerable:!0,get:function(){return gn.stringify}});Object.defineProperty(ue,"regexpCode",{enumerable:!0,get:function(){return gn.regexpCode}});Object.defineProperty(ue,"Name",{enumerable:!0,get:function(){return gn.Name}});var au=nu();Object.defineProperty(ue,"Scope",{enumerable:!0,get:function(){return au.Scope}});Object.defineProperty(ue,"ValueScope",{enumerable:!0,get:function(){return au.ValueScope}});Object.defineProperty(ue,"ValueScopeName",{enumerable:!0,get:function(){return au.ValueScopeName}});Object.defineProperty(ue,"varKinds",{enumerable:!0,get:function(){return au.varKinds}});ue.operators={GT:new pe._Code(">"),GTE:new pe._Code(">="),LT:new pe._Code("<"),LTE:new pe._Code("<="),EQ:new pe._Code("==="),NEQ:new pe._Code("!=="),NOT:new pe._Code("!"),OR:new pe._Code("||"),AND:new pe._Code("&&"),ADD:new pe._Code("+")};var Br=class{optimizeNodes(){return this}optimizeNames(t,r){return this}},Kf=class extends Br{constructor(t,r,n){super(),this.varKind=t,this.name=r,this.rhs=n}render({es5:t,_n:r}){let n=t?hr.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(t,r){if(t[this.name.str])return this.rhs&&(this.rhs=xs(this.rhs,t,r)),this}get names(){return this.rhs instanceof pe._CodeOrName?this.rhs.names:{}}},su=class extends Br{constructor(t,r,n){super(),this.lhs=t,this.rhs=r,this.sideEffects=n}render({_n:t}){return`${this.lhs} = ${this.rhs};`+t}optimizeNames(t,r){if(!(this.lhs instanceof pe.Name&&!t[this.lhs.str]&&!this.sideEffects))return this.rhs=xs(this.rhs,t,r),this}get names(){let t=this.lhs instanceof pe.Name?{}:{...this.lhs.names};return ou(t,this.rhs)}},Yf=class extends su{constructor(t,r,n,s){super(t,n,s),this.op=r}render({_n:t}){return`${this.lhs} ${this.op}= ${this.rhs};`+t}},Wf=class extends Br{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`${this.label}:`+t}},Jf=class extends Br{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`break${this.label?` ${this.label}`:""};`+t}},Xf=class extends Br{constructor(t){super(),this.error=t}render({_n:t}){return`throw ${this.error};`+t}get names(){return this.error.names}},Qf=class extends Br{constructor(t){super(),this.code=t}render({_n:t}){return`${this.code};`+t}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(t,r){return this.code=xs(this.code,t,r),this}get names(){return this.code instanceof pe._CodeOrName?this.code.names:{}}},Gi=class extends Br{constructor(t=[]){super(),this.nodes=t}render(t){return this.nodes.reduce((r,n)=>r+n.render(t),"")}optimizeNodes(){let{nodes:t}=this,r=t.length;for(;r--;){let n=t[r].optimizeNodes();Array.isArray(n)?t.splice(r,1,...n):n?t[r]=n:t.splice(r,1)}return t.length>0?this:void 0}optimizeNames(t,r){let{nodes:n}=this,s=n.length;for(;s--;){let i=n[s];i.optimizeNames(t,r)||(Bj(t,i.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((t,r)=>Jn(t,r.names),{})}},Gr=class extends Gi{render(t){return"{"+t._n+super.render(t)+"}"+t._n}},Zf=class extends Gi{},js=class extends Gr{};js.kind="else";var Yn=class e extends Gr{constructor(t,r){super(r),this.condition=t}render(t){let r=`if(${this.condition})`+super.render(t);return this.else&&(r+="else "+this.else.render(t)),r}optimizeNodes(){super.optimizeNodes();let t=this.condition;if(t===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new js(n):n}if(r)return t===!1?r instanceof e?r:r.nodes:this.nodes.length?this:new e(Pv(t),r instanceof e?[r]:r.nodes);if(!(t===!1||!this.nodes.length))return this}optimizeNames(t,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(t,r),!!(super.optimizeNames(t,r)||this.else))return this.condition=xs(this.condition,t,r),this}get names(){let t=super.names;return ou(t,this.condition),this.else&&Jn(t,this.else.names),t}};Yn.kind="if";var Wn=class extends Gr{};Wn.kind="for";var ed=class extends Wn{constructor(t){super(),this.iteration=t}render(t){return`for(${this.iteration})`+super.render(t)}optimizeNames(t,r){if(super.optimizeNames(t,r))return this.iteration=xs(this.iteration,t,r),this}get names(){return Jn(super.names,this.iteration.names)}},td=class extends Wn{constructor(t,r,n,s){super(),this.varKind=t,this.name=r,this.from=n,this.to=s}render(t){let r=t.es5?hr.varKinds.var:this.varKind,{name:n,from:s,to:i}=this;return`for(${r} ${n}=${s}; ${n}<${i}; ${n}++)`+super.render(t)}get names(){let t=ou(super.names,this.from);return ou(t,this.to)}},iu=class extends Wn{constructor(t,r,n,s){super(),this.loop=t,this.varKind=r,this.name=n,this.iterable=s}render(t){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(t)}optimizeNames(t,r){if(super.optimizeNames(t,r))return this.iterable=xs(this.iterable,t,r),this}get names(){return Jn(super.names,this.iterable.names)}},Ki=class extends Gr{constructor(t,r,n){super(),this.name=t,this.args=r,this.async=n}render(t){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(t)}};Ki.kind="func";var Yi=class extends Gi{render(t){return"return "+super.render(t)}};Yi.kind="return";var rd=class extends Gr{render(t){let r="try"+super.render(t);return this.catch&&(r+=this.catch.render(t)),this.finally&&(r+=this.finally.render(t)),r}optimizeNodes(){var t,r;return super.optimizeNodes(),(t=this.catch)===null||t===void 0||t.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(t,r){var n,s;return super.optimizeNames(t,r),(n=this.catch)===null||n===void 0||n.optimizeNames(t,r),(s=this.finally)===null||s===void 0||s.optimizeNames(t,r),this}get names(){let t=super.names;return this.catch&&Jn(t,this.catch.names),this.finally&&Jn(t,this.finally.names),t}},Wi=class extends Gr{constructor(t){super(),this.error=t}render(t){return`catch(${this.error})`+super.render(t)}};Wi.kind="catch";var Ji=class extends Gr{render(t){return"finally"+super.render(t)}};Ji.kind="finally";var nd=class{constructor(t,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=t,this._scope=new hr.Scope({parent:t}),this._nodes=[new Zf]}toString(){return this._root.render(this.opts)}name(t){return this._scope.name(t)}scopeName(t){return this._extScope.name(t)}scopeValue(t,r){let n=this._extScope.value(t,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(t,r){return this._extScope.getValue(t,r)}scopeRefs(t){return this._extScope.scopeRefs(t,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(t,r,n,s){let i=this._scope.toName(r);return n!==void 0&&s&&(this._constants[i.str]=n),this._leafNode(new Kf(t,i,n)),i}const(t,r,n){return this._def(hr.varKinds.const,t,r,n)}let(t,r,n){return this._def(hr.varKinds.let,t,r,n)}var(t,r,n){return this._def(hr.varKinds.var,t,r,n)}assign(t,r,n){return this._leafNode(new su(t,r,n))}add(t,r){return this._leafNode(new Yf(t,ue.operators.ADD,r))}code(t){return typeof t=="function"?t():t!==pe.nil&&this._leafNode(new Qf(t)),this}object(...t){let r=["{"];for(let[n,s]of t)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,pe.addCodeArg)(r,s));return r.push("}"),new pe._Code(r)}if(t,r,n){if(this._blockNode(new Yn(t)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(t){return this._elseNode(new Yn(t))}else(){return this._elseNode(new js)}endIf(){return this._endBlockNode(Yn,js)}_for(t,r){return this._blockNode(t),r&&this.code(r).endFor(),this}for(t,r){return this._for(new ed(t),r)}forRange(t,r,n,s,i=this.opts.es5?hr.varKinds.var:hr.varKinds.let){let o=this._scope.toName(t);return this._for(new td(i,o,r,n),()=>s(o))}forOf(t,r,n,s=hr.varKinds.const){let i=this._scope.toName(t);if(this.opts.es5){let o=r instanceof pe.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,pe._)`${o}.length`,a=>{this.var(i,(0,pe._)`${o}[${a}]`),n(i)})}return this._for(new iu("of",s,i,r),()=>n(i))}forIn(t,r,n,s=this.opts.es5?hr.varKinds.var:hr.varKinds.const){if(this.opts.ownProperties)return this.forOf(t,(0,pe._)`Object.keys(${r})`,n);let i=this._scope.toName(t);return this._for(new iu("in",s,i,r),()=>n(i))}endFor(){return this._endBlockNode(Wn)}label(t){return this._leafNode(new Wf(t))}break(t){return this._leafNode(new Jf(t))}return(t){let r=new Yi;if(this._blockNode(r),this.code(t),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Yi)}try(t,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new rd;if(this._blockNode(s),this.code(t),r){let i=this.name("e");this._currNode=s.catch=new Wi(i),r(i)}return n&&(this._currNode=s.finally=new Ji,this.code(n)),this._endBlockNode(Wi,Ji)}throw(t){return this._leafNode(new Xf(t))}block(t,r){return this._blockStarts.push(this._nodes.length),t&&this.code(t).endBlock(r),this}endBlock(t){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||t!==void 0&&n!==t)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${t} expected`);return this._nodes.length=r,this}func(t,r=pe.nil,n,s){return this._blockNode(new Ki(t,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(Ki)}optimize(t=1){for(;t-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(t){return this._currNode.nodes.push(t),this}_blockNode(t){this._currNode.nodes.push(t),this._nodes.push(t)}_endBlockNode(t,r){let n=this._currNode;if(n instanceof t||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${t.kind}/${r.kind}`:t.kind}"`)}_elseNode(t){let r=this._currNode;if(!(r instanceof Yn))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=t,this}get _root(){return this._nodes[0]}get _currNode(){let t=this._nodes;return t[t.length-1]}set _currNode(t){let r=this._nodes;r[r.length-1]=t}};ue.CodeGen=nd;function Jn(e,t){for(let r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function ou(e,t){return t instanceof pe._CodeOrName?Jn(e,t.names):e}function xs(e,t,r){if(e instanceof pe.Name)return n(e);if(!s(e))return e;return new pe._Code(e._items.reduce((i,o)=>(o instanceof pe.Name&&(o=n(o)),o instanceof pe._Code?i.push(...o._items):i.push(o),i),[]));function n(i){let o=r[i.str];return o===void 0||t[i.str]!==1?i:(delete t[i.str],o)}function s(i){return i instanceof pe._Code&&i._items.some(o=>o instanceof pe.Name&&t[o.str]===1&&r[o.str]!==void 0)}}function Bj(e,t){for(let r in t)e[r]=(e[r]||0)-(t[r]||0)}function Pv(e){return typeof e=="boolean"||typeof e=="number"||e===null?!e:(0,pe._)`!${sd(e)}`}ue.not=Pv;var Gj=$v(ue.operators.AND);function Kj(...e){return e.reduce(Gj)}ue.and=Kj;var Yj=$v(ue.operators.OR);function Wj(...e){return e.reduce(Yj)}ue.or=Wj;function $v(e){return(t,r)=>t===pe.nil?r:r===pe.nil?t:(0,pe._)`${sd(t)} ${e} ${sd(r)}`}function sd(e){return e instanceof pe.Name?e:(0,pe._)`(${e})`}});var se=E(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.checkStrictMode=le.getErrorPath=le.Type=le.useFunc=le.setEvaluated=le.evaluatedPropsToName=le.mergeEvaluated=le.eachItem=le.unescapeJsonPointer=le.escapeJsonPointer=le.escapeFragment=le.unescapeFragment=le.schemaRefOrVal=le.schemaHasRulesButRef=le.schemaHasRules=le.checkUnknownRules=le.alwaysValidSchema=le.toHash=void 0;var Ne=X(),Jj=Ds();function Xj(e){let t={};for(let r of e)t[r]=!0;return t}le.toHash=Xj;function Qj(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(Cv(e,t),!Iv(t,e.self.RULES.all))}le.alwaysValidSchema=Qj;function Cv(e,t=e.schema){let{opts:r,self:n}=e;if(!r.strictSchema||typeof t=="boolean")return;let s=n.RULES.keywords;for(let i in t)s[i]||Dv(e,`unknown keyword: "${i}"`)}le.checkUnknownRules=Cv;function Iv(e,t){if(typeof e=="boolean")return!e;for(let r in e)if(t[r])return!0;return!1}le.schemaHasRules=Iv;function Zj(e,t){if(typeof e=="boolean")return!e;for(let r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}le.schemaHasRulesButRef=Zj;function ex({topSchemaRef:e,schemaPath:t},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,Ne._)`${r}`}return(0,Ne._)`${e}${t}${(0,Ne.getProperty)(n)}`}le.schemaRefOrVal=ex;function tx(e){return Nv(decodeURIComponent(e))}le.unescapeFragment=tx;function rx(e){return encodeURIComponent(id(e))}le.escapeFragment=rx;function id(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}le.escapeJsonPointer=id;function Nv(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}le.unescapeJsonPointer=Nv;function nx(e,t){if(Array.isArray(e))for(let r of e)t(r);else t(e)}le.eachItem=nx;function Ov({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:n}){return(s,i,o,a)=>{let u=o===void 0?i:o instanceof Ne.Name?(i instanceof Ne.Name?e(s,i,o):t(s,i,o),o):i instanceof Ne.Name?(t(s,o,i),i):r(i,o);return a===Ne.Name&&!(u instanceof Ne.Name)?n(s,u):u}}le.mergeEvaluated={props:Ov({mergeNames:(e,t,r)=>e.if((0,Ne._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,Ne._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,Ne._)`${r} || {}`).code((0,Ne._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,Ne._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,Ne._)`${r} || {}`),od(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:kv}),items:Ov({mergeNames:(e,t,r)=>e.if((0,Ne._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,Ne._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,Ne._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,Ne._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function kv(e,t){if(t===!0)return e.var("props",!0);let r=e.var("props",(0,Ne._)`{}`);return t!==void 0&&od(e,r,t),r}le.evaluatedPropsToName=kv;function od(e,t,r){Object.keys(r).forEach(n=>e.assign((0,Ne._)`${t}${(0,Ne.getProperty)(n)}`,!0))}le.setEvaluated=od;var Av={};function sx(e,t){return e.scopeValue("func",{ref:t,code:Av[t.code]||(Av[t.code]=new Jj._Code(t.code))})}le.useFunc=sx;var qv;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(qv=le.Type||(le.Type={}));function ix(e,t,r){if(e instanceof Ne.Name){let n=t===qv.Num;return r?n?(0,Ne._)`"[" + ${e} + "]"`:(0,Ne._)`"['" + ${e} + "']"`:n?(0,Ne._)`"/" + ${e}`:(0,Ne._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,Ne.getProperty)(e).toString():"/"+id(e)}le.getErrorPath=ix;function Dv(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}le.checkStrictMode=Dv});var Zt=E(ad=>{"use strict";Object.defineProperty(ad,"__esModule",{value:!0});var wt=X(),ox={data:new wt.Name("data"),valCxt:new wt.Name("valCxt"),instancePath:new wt.Name("instancePath"),parentData:new wt.Name("parentData"),parentDataProperty:new wt.Name("parentDataProperty"),rootData:new wt.Name("rootData"),dynamicAnchors:new wt.Name("dynamicAnchors"),vErrors:new wt.Name("vErrors"),errors:new wt.Name("errors"),this:new wt.Name("this"),self:new wt.Name("self"),scope:new wt.Name("scope"),json:new wt.Name("json"),jsonPos:new wt.Name("jsonPos"),jsonLen:new wt.Name("jsonLen"),jsonPart:new wt.Name("jsonPart")};ad.default=ox});var Xi=E(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.extendErrors=Rt.resetErrorsCount=Rt.reportExtraError=Rt.reportError=Rt.keyword$DataError=Rt.keywordError=void 0;var ye=X(),uu=se(),Ot=Zt();Rt.keywordError={message:({keyword:e})=>(0,ye.str)`must pass "${e}" keyword validation`};Rt.keyword$DataError={message:({keyword:e,schemaType:t})=>t?(0,ye.str)`"${e}" keyword must be ${t} ($data)`:(0,ye.str)`"${e}" keyword is invalid ($data)`};function ax(e,t=Rt.keywordError,r,n){let{it:s}=e,{gen:i,compositeRule:o,allErrors:a}=s,u=Lv(e,t,r);n??(o||a)?jv(i,u):xv(s,(0,ye._)`[${u}]`)}Rt.reportError=ax;function ux(e,t=Rt.keywordError,r){let{it:n}=e,{gen:s,compositeRule:i,allErrors:o}=n,a=Lv(e,t,r);jv(s,a),i||o||xv(n,Ot.default.vErrors)}Rt.reportExtraError=ux;function lx(e,t){e.assign(Ot.default.errors,t),e.if((0,ye._)`${Ot.default.vErrors} !== null`,()=>e.if(t,()=>e.assign((0,ye._)`${Ot.default.vErrors}.length`,t),()=>e.assign(Ot.default.vErrors,null)))}Rt.resetErrorsCount=lx;function cx({gen:e,keyword:t,schemaValue:r,data:n,errsCount:s,it:i}){if(s===void 0)throw new Error("ajv implementation error");let o=e.name("err");e.forRange("i",s,Ot.default.errors,a=>{e.const(o,(0,ye._)`${Ot.default.vErrors}[${a}]`),e.if((0,ye._)`${o}.instancePath === undefined`,()=>e.assign((0,ye._)`${o}.instancePath`,(0,ye.strConcat)(Ot.default.instancePath,i.errorPath))),e.assign((0,ye._)`${o}.schemaPath`,(0,ye.str)`${i.errSchemaPath}/${t}`),i.opts.verbose&&(e.assign((0,ye._)`${o}.schema`,r),e.assign((0,ye._)`${o}.data`,n))})}Rt.extendErrors=cx;function jv(e,t){let r=e.const("err",t);e.if((0,ye._)`${Ot.default.vErrors} === null`,()=>e.assign(Ot.default.vErrors,(0,ye._)`[${r}]`),(0,ye._)`${Ot.default.vErrors}.push(${r})`),e.code((0,ye._)`${Ot.default.errors}++`)}function xv(e,t){let{gen:r,validateName:n,schemaEnv:s}=e;s.$async?r.throw((0,ye._)`new ${e.ValidationError}(${t})`):(r.assign((0,ye._)`${n}.errors`,t),r.return(!1))}var Xn={keyword:new ye.Name("keyword"),schemaPath:new ye.Name("schemaPath"),params:new ye.Name("params"),propertyName:new ye.Name("propertyName"),message:new ye.Name("message"),schema:new ye.Name("schema"),parentSchema:new ye.Name("parentSchema")};function Lv(e,t,r){let{createErrors:n}=e.it;return n===!1?(0,ye._)`{}`:fx(e,t,r)}function fx(e,t,r={}){let{gen:n,it:s}=e,i=[dx(s,r),hx(e,r)];return px(e,t,i),n.object(...i)}function dx({errorPath:e},{instancePath:t}){let r=t?(0,ye.str)`${e}${(0,uu.getErrorPath)(t,uu.Type.Str)}`:e;return[Ot.default.instancePath,(0,ye.strConcat)(Ot.default.instancePath,r)]}function hx({keyword:e,it:{errSchemaPath:t}},{schemaPath:r,parentSchema:n}){let s=n?t:(0,ye.str)`${t}/${e}`;return r&&(s=(0,ye.str)`${s}${(0,uu.getErrorPath)(r,uu.Type.Str)}`),[Xn.schemaPath,s]}function px(e,{params:t,message:r},n){let{keyword:s,data:i,schemaValue:o,it:a}=e,{opts:u,propertyName:c,topSchemaRef:l,schemaPath:f}=a;n.push([Xn.keyword,s],[Xn.params,typeof t=="function"?t(e):t||(0,ye._)`{}`]),u.messages&&n.push([Xn.message,typeof r=="function"?r(e):r]),u.verbose&&n.push([Xn.schema,o],[Xn.parentSchema,(0,ye._)`${l}${f}`],[Ot.default.data,i]),c&&n.push([Xn.propertyName,c])}});var Mv=E(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});Ls.boolOrEmptySchema=Ls.topBoolOrEmptySchema=void 0;var mx=Xi(),yx=X(),gx=Zt(),_x={message:"boolean schema is false"};function vx(e){let{gen:t,schema:r,validateName:n}=e;r===!1?Fv(e,!1):typeof r=="object"&&r.$async===!0?t.return(gx.default.data):(t.assign((0,yx._)`${n}.errors`,null),t.return(!0))}Ls.topBoolOrEmptySchema=vx;function Ex(e,t){let{gen:r,schema:n}=e;n===!1?(r.var(t,!1),Fv(e)):r.var(t,!0)}Ls.boolOrEmptySchema=Ex;function Fv(e,t){let{gen:r,data:n}=e,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,mx.reportError)(s,_x,void 0,t)}});var ud=E(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.getRules=Fs.isJSONType=void 0;var Sx=["string","number","integer","boolean","null","object","array"],bx=new Set(Sx);function wx(e){return typeof e=="string"&&bx.has(e)}Fs.isJSONType=wx;function Rx(){let e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Fs.getRules=Rx});var ld=E(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.shouldUseRule=_n.shouldUseGroup=_n.schemaHasRulesForType=void 0;function Tx({schema:e,self:t},r){let n=t.RULES.types[r];return n&&n!==!0&&Vv(e,n)}_n.schemaHasRulesForType=Tx;function Vv(e,t){return t.rules.some(r=>Hv(e,r))}_n.shouldUseGroup=Vv;function Hv(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(n=>e[n]!==void 0))}_n.shouldUseRule=Hv});var Zi=E(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.reportTypeError=mt.checkDataTypes=mt.checkDataType=mt.coerceAndCheckDataType=mt.getJSONTypes=mt.getSchemaTypes=mt.DataType=void 0;var Px=ud(),$x=ld(),Ox=Xi(),ne=X(),zv=se(),Qi;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Qi=mt.DataType||(mt.DataType={}));function Ax(e){let t=Uv(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}mt.getSchemaTypes=Ax;function Uv(e){let t=Array.isArray(e)?e:e?[e]:[];if(t.every(Px.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}mt.getJSONTypes=Uv;function Cx(e,t){let{gen:r,data:n,opts:s}=e,i=Ix(t,s.coerceTypes),o=t.length>0&&!(i.length===0&&t.length===1&&(0,$x.schemaHasRulesForType)(e,t[0]));if(o){let a=fd(t,n,s.strictNumbers,Qi.Wrong);r.if(a,()=>{i.length?Nx(e,t,i):dd(e)})}return o}mt.coerceAndCheckDataType=Cx;var Bv=new Set(["string","number","integer","boolean","null"]);function Ix(e,t){return t?e.filter(r=>Bv.has(r)||t==="array"&&r==="array"):[]}function Nx(e,t,r){let{gen:n,data:s,opts:i}=e,o=n.let("dataType",(0,ne._)`typeof ${s}`),a=n.let("coerced",(0,ne._)`undefined`);i.coerceTypes==="array"&&n.if((0,ne._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,ne._)`${s}[0]`).assign(o,(0,ne._)`typeof ${s}`).if(fd(t,s,i.strictNumbers),()=>n.assign(a,s))),n.if((0,ne._)`${a} !== undefined`);for(let c of r)(Bv.has(c)||c==="array"&&i.coerceTypes==="array")&&u(c);n.else(),dd(e),n.endIf(),n.if((0,ne._)`${a} !== undefined`,()=>{n.assign(s,a),kx(e,a)});function u(c){switch(c){case"string":n.elseIf((0,ne._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,ne._)`"" + ${s}`).elseIf((0,ne._)`${s} === null`).assign(a,(0,ne._)`""`);return;case"number":n.elseIf((0,ne._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,ne._)`+${s}`);return;case"integer":n.elseIf((0,ne._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,ne._)`+${s}`);return;case"boolean":n.elseIf((0,ne._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,ne._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,ne._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,ne._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,ne._)`[${s}]`)}}}function kx({gen:e,parentData:t,parentDataProperty:r},n){e.if((0,ne._)`${t} !== undefined`,()=>e.assign((0,ne._)`${t}[${r}]`,n))}function cd(e,t,r,n=Qi.Correct){let s=n===Qi.Correct?ne.operators.EQ:ne.operators.NEQ,i;switch(e){case"null":return(0,ne._)`${t} ${s} null`;case"array":i=(0,ne._)`Array.isArray(${t})`;break;case"object":i=(0,ne._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":i=o((0,ne._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":i=o();break;default:return(0,ne._)`typeof ${t} ${s} ${e}`}return n===Qi.Correct?i:(0,ne.not)(i);function o(a=ne.nil){return(0,ne.and)((0,ne._)`typeof ${t} == "number"`,a,r?(0,ne._)`isFinite(${t})`:ne.nil)}}mt.checkDataType=cd;function fd(e,t,r,n){if(e.length===1)return cd(e[0],t,r,n);let s,i=(0,zv.toHash)(e);if(i.array&&i.object){let o=(0,ne._)`typeof ${t} != "object"`;s=i.null?o:(0,ne._)`!${t} || ${o}`,delete i.null,delete i.array,delete i.object}else s=ne.nil;i.number&&delete i.integer;for(let o in i)s=(0,ne.and)(s,cd(o,t,r,n));return s}mt.checkDataTypes=fd;var qx={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,ne._)`{type: ${e}}`:(0,ne._)`{type: ${t}}`};function dd(e){let t=Dx(e);(0,Ox.reportError)(t,qx)}mt.reportTypeError=dd;function Dx(e){let{gen:t,data:r,schema:n}=e,s=(0,zv.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:e}}});var Kv=E(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.assignDefaults=void 0;var Ms=X(),jx=se();function xx(e,t){let{properties:r,items:n}=e.schema;if(t==="object"&&r)for(let s in r)Gv(e,s,r[s].default);else t==="array"&&Array.isArray(n)&&n.forEach((s,i)=>Gv(e,i,s.default))}lu.assignDefaults=xx;function Gv(e,t,r){let{gen:n,compositeRule:s,data:i,opts:o}=e;if(r===void 0)return;let a=(0,Ms._)`${i}${(0,Ms.getProperty)(t)}`;if(s){(0,jx.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,Ms._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,Ms._)`${u} || ${a} === null || ${a} === ""`),n.if(u,(0,Ms._)`${a} = ${(0,Ms.stringify)(r)}`)}});var yt=E(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.validateUnion=Ce.validateArray=Ce.usePattern=Ce.callValidateCode=Ce.schemaProperties=Ce.allSchemaProperties=Ce.noPropertyInData=Ce.propertyInData=Ce.isOwnProperty=Ce.hasPropFunc=Ce.reportMissingProp=Ce.checkMissingProp=Ce.checkReportMissingProp=void 0;var xe=X(),hd=se(),vn=Zt(),Lx=se();function Fx(e,t){let{gen:r,data:n,it:s}=e;r.if(md(r,n,t,s.opts.ownProperties),()=>{e.setParams({missingProperty:(0,xe._)`${t}`},!0),e.error()})}Ce.checkReportMissingProp=Fx;function Mx({gen:e,data:t,it:{opts:r}},n,s){return(0,xe.or)(...n.map(i=>(0,xe.and)(md(e,t,i,r.ownProperties),(0,xe._)`${s} = ${i}`)))}Ce.checkMissingProp=Mx;function Vx(e,t){e.setParams({missingProperty:t},!0),e.error()}Ce.reportMissingProp=Vx;function Yv(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,xe._)`Object.prototype.hasOwnProperty`})}Ce.hasPropFunc=Yv;function pd(e,t,r){return(0,xe._)`${Yv(e)}.call(${t}, ${r})`}Ce.isOwnProperty=pd;function Hx(e,t,r,n){let s=(0,xe._)`${t}${(0,xe.getProperty)(r)} !== undefined`;return n?(0,xe._)`${s} && ${pd(e,t,r)}`:s}Ce.propertyInData=Hx;function md(e,t,r,n){let s=(0,xe._)`${t}${(0,xe.getProperty)(r)} === undefined`;return n?(0,xe.or)(s,(0,xe.not)(pd(e,t,r))):s}Ce.noPropertyInData=md;function Wv(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Ce.allSchemaProperties=Wv;function zx(e,t){return Wv(t).filter(r=>!(0,hd.alwaysValidSchema)(e,t[r]))}Ce.schemaProperties=zx;function Ux({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,u,c){let l=c?(0,xe._)`${e}, ${t}, ${n}${s}`:t,f=[[vn.default.instancePath,(0,xe.strConcat)(vn.default.instancePath,i)],[vn.default.parentData,o.parentData],[vn.default.parentDataProperty,o.parentDataProperty],[vn.default.rootData,vn.default.rootData]];o.opts.dynamicRef&&f.push([vn.default.dynamicAnchors,vn.default.dynamicAnchors]);let d=(0,xe._)`${l}, ${r.object(...f)}`;return u!==xe.nil?(0,xe._)`${a}.call(${u}, ${d})`:(0,xe._)`${a}(${d})`}Ce.callValidateCode=Ux;var Bx=(0,xe._)`new RegExp`;function Gx({gen:e,it:{opts:t}},r){let n=t.unicodeRegExp?"u":"",{regExp:s}=t.code,i=s(r,n);return e.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,xe._)`${s.code==="new RegExp"?Bx:(0,Lx.useFunc)(e,s)}(${r}, ${n})`})}Ce.usePattern=Gx;function Kx(e){let{gen:t,data:r,keyword:n,it:s}=e,i=t.name("valid");if(s.allErrors){let a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(i,!0),o(()=>t.break()),i;function o(a){let u=t.const("len",(0,xe._)`${r}.length`);t.forRange("i",0,u,c=>{e.subschema({keyword:n,dataProp:c,dataPropType:hd.Type.Num},i),t.if((0,xe.not)(i),a)})}}Ce.validateArray=Kx;function Yx(e){let{gen:t,schema:r,keyword:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(u=>(0,hd.alwaysValidSchema)(s,u))&&!s.opts.unevaluated)return;let o=t.let("valid",!1),a=t.name("_valid");t.block(()=>r.forEach((u,c)=>{let l=e.subschema({keyword:n,schemaProp:c,compositeRule:!0},a);t.assign(o,(0,xe._)`${o} || ${a}`),e.mergeValidEvaluated(l,a)||t.if((0,xe.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Ce.validateUnion=Yx});var Qv=E(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.validateKeywordUsage=Pr.validSchemaType=Pr.funcKeywordCode=Pr.macroKeywordCode=void 0;var At=X(),Qn=Zt(),Wx=yt(),Jx=Xi();function Xx(e,t){let{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=e,a=t.macro.call(o.self,s,i,o),u=Xv(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let c=r.name("valid");e.subschema({schema:a,schemaPath:At.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:u,compositeRule:!0},c),e.pass(c,()=>e.error(!0))}Pr.macroKeywordCode=Xx;function Qx(e,t){var r;let{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:u}=e;eL(u,t);let c=!a&&t.compile?t.compile.call(u.self,i,o,u):t.validate,l=Xv(n,s,c),f=n.let("valid");e.block$data(f,d),e.ok((r=t.valid)!==null&&r!==void 0?r:f);function d(){if(t.errors===!1)y(),t.modifying&&Jv(e),v(()=>e.error());else{let _=t.async?h():p();t.modifying&&Jv(e),v(()=>Zx(e,_))}}function h(){let _=n.let("ruleErrs",null);return n.try(()=>y((0,At._)`await `),w=>n.assign(f,!1).if((0,At._)`${w} instanceof ${u.ValidationError}`,()=>n.assign(_,(0,At._)`${w}.errors`),()=>n.throw(w))),_}function p(){let _=(0,At._)`${l}.errors`;return n.assign(_,null),y(At.nil),_}function y(_=t.async?(0,At._)`await `:At.nil){let w=u.opts.passContext?Qn.default.this:Qn.default.self,g=!("compile"in t&&!a||t.schema===!1);n.assign(f,(0,At._)`${_}${(0,Wx.callValidateCode)(e,l,w,g)}`,t.modifying)}function v(_){var w;n.if((0,At.not)((w=t.valid)!==null&&w!==void 0?w:f),_)}}Pr.funcKeywordCode=Qx;function Jv(e){let{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,At._)`${n.parentData}[${n.parentDataProperty}]`))}function Zx(e,t){let{gen:r}=e;r.if((0,At._)`Array.isArray(${t})`,()=>{r.assign(Qn.default.vErrors,(0,At._)`${Qn.default.vErrors} === null ? ${t} : ${Qn.default.vErrors}.concat(${t})`).assign(Qn.default.errors,(0,At._)`${Qn.default.vErrors}.length`),(0,Jx.extendErrors)(e)},()=>e.error())}function eL({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function Xv(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,At.stringify)(r)})}function tL(e,t,r=!1){return!t.length||t.some(n=>n==="array"?Array.isArray(e):n==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==n||r&&typeof e>"u")}Pr.validSchemaType=tL;function rL({schema:e,opts:t,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");let o=s.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(e[i])){let u=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(u);else throw new Error(u)}}Pr.validateKeywordUsage=rL});var eE=E(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});En.extendSubschemaMode=En.extendSubschemaData=En.getSubschema=void 0;var $r=X(),Zv=se();function nL(e,{keyword:t,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(t!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){let a=e.schema[t];return r===void 0?{schema:a,schemaPath:(0,$r._)`${e.schemaPath}${(0,$r.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[r],schemaPath:(0,$r._)`${e.schemaPath}${(0,$r.getProperty)(t)}${(0,$r.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,Zv.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}En.getSubschema=nL;function sL(e,t,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=t;if(r!==void 0){let{errorPath:c,dataPathArr:l,opts:f}=t,d=a.let("data",(0,$r._)`${t.data}${(0,$r.getProperty)(r)}`,!0);u(d),e.errorPath=(0,$r.str)`${c}${(0,Zv.getErrorPath)(r,n,f.jsPropertySyntax)}`,e.parentDataProperty=(0,$r._)`${r}`,e.dataPathArr=[...l,e.parentDataProperty]}if(s!==void 0){let c=s instanceof $r.Name?s:a.let("data",s,!0);u(c),o!==void 0&&(e.propertyName=o)}i&&(e.dataTypes=i);function u(c){e.data=c,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,c]}}En.extendSubschemaData=sL;function iL(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(e.compositeRule=n),s!==void 0&&(e.createErrors=s),i!==void 0&&(e.allErrors=i),e.jtdDiscriminator=t,e.jtdMetadata=r}En.extendSubschemaMode=iL});var Vs=E((G7,tE)=>{"use strict";tE.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var o=i[s];if(!e(t[o],r[o]))return!1}return!0}return t!==t&&r!==r}});var nE=E((K7,rE)=>{"use strict";var Sn=rE.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};cu(t,n,s,e,"",e)};Sn.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Sn.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Sn.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Sn.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function cu(e,t,r,n,s,i,o,a,u,c){if(n&&typeof n=="object"&&!Array.isArray(n)){t(n,s,i,o,a,u,c);for(var l in n){var f=n[l];if(Array.isArray(f)){if(l in Sn.arrayKeywords)for(var d=0;d<f.length;d++)cu(e,t,r,f[d],s+"/"+l+"/"+d,i,s,l,n,d)}else if(l in Sn.propsKeywords){if(f&&typeof f=="object")for(var h in f)cu(e,t,r,f[h],s+"/"+l+"/"+oL(h),i,s,l,n,h)}else(l in Sn.keywords||e.allKeys&&!(l in Sn.skipKeywords))&&cu(e,t,r,f,s+"/"+l,i,s,l,n)}r(n,s,i,o,a,u,c)}}function oL(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}});var eo=E(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.getSchemaRefs=Dt.resolveUrl=Dt.normalizeId=Dt._getFullPath=Dt.getFullPath=Dt.inlineRef=void 0;var aL=se(),uL=Vs(),lL=nE(),cL=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function fL(e,t=!0){return typeof e=="boolean"?!0:t===!0?!yd(e):t?sE(e)<=t:!1}Dt.inlineRef=fL;var dL=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function yd(e){for(let t in e){if(dL.has(t))return!0;let r=e[t];if(Array.isArray(r)&&r.some(yd)||typeof r=="object"&&yd(r))return!0}return!1}function sE(e){let t=0;for(let r in e){if(r==="$ref")return 1/0;if(t++,!cL.has(r)&&(typeof e[r]=="object"&&(0,aL.eachItem)(e[r],n=>t+=sE(n)),t===1/0))return 1/0}return t}function iE(e,t="",r){r!==!1&&(t=Hs(t));let n=e.parse(t);return oE(e,n)}Dt.getFullPath=iE;function oE(e,t){return e.serialize(t).split("#")[0]+"#"}Dt._getFullPath=oE;var hL=/#\/?$/;function Hs(e){return e?e.replace(hL,""):""}Dt.normalizeId=Hs;function pL(e,t,r){return r=Hs(r),e.resolve(t,r)}Dt.resolveUrl=pL;var mL=/^[a-z_][-a-z0-9._]*$/i;function yL(e,t){if(typeof e=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=Hs(e[r]||t),i={"":s},o=iE(n,s,!1),a={},u=new Set;return lL(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;let y=o+d,v=i[p];typeof f[r]=="string"&&(v=_.call(this,f[r])),w.call(this,f.$anchor),w.call(this,f.$dynamicAnchor),i[d]=v;function _(g){let m=this.opts.uriResolver.resolve;if(g=Hs(v?m(v,g):g),u.has(g))throw l(g);u.add(g);let T=this.refs[g];return typeof T=="string"&&(T=this.refs[T]),typeof T=="object"?c(f,T.schema,g):g!==Hs(y)&&(g[0]==="#"?(c(f,a[g],g),a[g]=f):this.refs[g]=y),g}function w(g){if(typeof g=="string"){if(!mL.test(g))throw new Error(`invalid anchor "${g}"`);_.call(this,`#${g}`)}}}),a;function c(f,d,h){if(d!==void 0&&!uL(f,d))throw l(h)}function l(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Dt.getSchemaRefs=yL});var zs=E(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.getData=bn.KeywordCxt=bn.validateFunctionCode=void 0;var fE=Mv(),aE=Zi(),_d=ld(),fu=Zi(),gL=Kv(),ro=Qv(),gd=eE(),Y=X(),ee=Zt(),_L=eo(),Kr=se(),to=Xi();function vL(e){if(pE(e)&&(mE(e),hE(e))){bL(e);return}dE(e,()=>(0,fE.topBoolOrEmptySchema)(e))}bn.validateFunctionCode=vL;function dE({gen:e,validateName:t,schema:r,schemaEnv:n,opts:s},i){s.code.es5?e.func(t,(0,Y._)`${ee.default.data}, ${ee.default.valCxt}`,n.$async,()=>{e.code((0,Y._)`"use strict"; ${uE(r,s)}`),SL(e,s),e.code(i)}):e.func(t,(0,Y._)`${ee.default.data}, ${EL(s)}`,n.$async,()=>e.code(uE(r,s)).code(i))}function EL(e){return(0,Y._)`{${ee.default.instancePath}="", ${ee.default.parentData}, ${ee.default.parentDataProperty}, ${ee.default.rootData}=${ee.default.data}${e.dynamicRef?(0,Y._)`, ${ee.default.dynamicAnchors}={}`:Y.nil}}={}`}function SL(e,t){e.if(ee.default.valCxt,()=>{e.var(ee.default.instancePath,(0,Y._)`${ee.default.valCxt}.${ee.default.instancePath}`),e.var(ee.default.parentData,(0,Y._)`${ee.default.valCxt}.${ee.default.parentData}`),e.var(ee.default.parentDataProperty,(0,Y._)`${ee.default.valCxt}.${ee.default.parentDataProperty}`),e.var(ee.default.rootData,(0,Y._)`${ee.default.valCxt}.${ee.default.rootData}`),t.dynamicRef&&e.var(ee.default.dynamicAnchors,(0,Y._)`${ee.default.valCxt}.${ee.default.dynamicAnchors}`)},()=>{e.var(ee.default.instancePath,(0,Y._)`""`),e.var(ee.default.parentData,(0,Y._)`undefined`),e.var(ee.default.parentDataProperty,(0,Y._)`undefined`),e.var(ee.default.rootData,ee.default.data),t.dynamicRef&&e.var(ee.default.dynamicAnchors,(0,Y._)`{}`)})}function bL(e){let{schema:t,opts:r,gen:n}=e;dE(e,()=>{r.$comment&&t.$comment&&gE(e),$L(e),n.let(ee.default.vErrors,null),n.let(ee.default.errors,0),r.unevaluated&&wL(e),yE(e),CL(e)})}function wL(e){let{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,Y._)`${r}.evaluated`),t.if((0,Y._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Y._)`${e.evaluated}.props`,(0,Y._)`undefined`)),t.if((0,Y._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Y._)`${e.evaluated}.items`,(0,Y._)`undefined`))}function uE(e,t){let r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,Y._)`/*# sourceURL=${r} */`:Y.nil}function RL(e,t){if(pE(e)&&(mE(e),hE(e))){TL(e,t);return}(0,fE.boolOrEmptySchema)(e,t)}function hE({schema:e,self:t}){if(typeof e=="boolean")return!e;for(let r in e)if(t.RULES.all[r])return!0;return!1}function pE(e){return typeof e.schema!="boolean"}function TL(e,t){let{schema:r,gen:n,opts:s}=e;s.$comment&&r.$comment&&gE(e),OL(e),AL(e);let i=n.const("_errs",ee.default.errors);yE(e,i),n.var(t,(0,Y._)`${i} === ${ee.default.errors}`)}function mE(e){(0,Kr.checkUnknownRules)(e),PL(e)}function yE(e,t){if(e.opts.jtd)return lE(e,[],!1,t);let r=(0,aE.getSchemaTypes)(e.schema),n=(0,aE.coerceAndCheckDataType)(e,r);lE(e,r,!n,t)}function PL(e){let{schema:t,errSchemaPath:r,opts:n,self:s}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,Kr.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function $L(e){let{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Kr.checkStrictMode)(e,"default is ignored in the schema root")}function OL(e){let t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,_L.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function AL(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function gE({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:s}){let i=r.$comment;if(s.$comment===!0)e.code((0,Y._)`${ee.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){let o=(0,Y.str)`${n}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Y._)`${ee.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function CL(e){let{gen:t,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=e;r.$async?t.if((0,Y._)`${ee.default.errors} === 0`,()=>t.return(ee.default.data),()=>t.throw((0,Y._)`new ${s}(${ee.default.vErrors})`)):(t.assign((0,Y._)`${n}.errors`,ee.default.vErrors),i.unevaluated&&IL(e),t.return((0,Y._)`${ee.default.errors} === 0`))}function IL({gen:e,evaluated:t,props:r,items:n}){r instanceof Y.Name&&e.assign((0,Y._)`${t}.props`,r),n instanceof Y.Name&&e.assign((0,Y._)`${t}.items`,n)}function lE(e,t,r,n){let{gen:s,schema:i,data:o,allErrors:a,opts:u,self:c}=e,{RULES:l}=c;if(i.$ref&&(u.ignoreKeywordsWithRef||!(0,Kr.schemaHasRulesButRef)(i,l))){s.block(()=>vE(e,"$ref",l.all.$ref.definition));return}u.jtd||NL(e,t),s.block(()=>{for(let d of l.rules)f(d);f(l.post)});function f(d){(0,_d.shouldUseGroup)(i,d)&&(d.type?(s.if((0,fu.checkDataType)(d.type,o,u.strictNumbers)),cE(e,d),t.length===1&&t[0]===d.type&&r&&(s.else(),(0,fu.reportTypeError)(e)),s.endIf()):cE(e,d),a||s.if((0,Y._)`${ee.default.errors} === ${n||0}`))}}function cE(e,t){let{gen:r,schema:n,opts:{useDefaults:s}}=e;s&&(0,gL.assignDefaults)(e,t.type),r.block(()=>{for(let i of t.rules)(0,_d.shouldUseRule)(n,i)&&vE(e,i.keyword,i.definition,t.type)})}function NL(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(kL(e,t),e.opts.allowUnionTypes||qL(e,t),DL(e,e.dataTypes))}function kL(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{_E(e.dataTypes,r)||vd(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),xL(e,t)}}function qL(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&vd(e,"use allowUnionTypes to allow union type keyword")}function DL(e,t){let r=e.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,_d.shouldUseRule)(e.schema,s)){let{type:i}=s.definition;i.length&&!i.some(o=>jL(t,o))&&vd(e,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function jL(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function _E(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function xL(e,t){let r=[];for(let n of e.dataTypes)_E(t,n)?r.push(n):t.includes("integer")&&n==="number"&&r.push("integer");e.dataTypes=r}function vd(e,t){let r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,Kr.checkStrictMode)(e,t,e.opts.strictTypes)}var du=class{constructor(t,r,n){if((0,ro.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Kr.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",EE(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,ro.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",ee.default.errors))}result(t,r,n){this.failResult((0,Y.not)(t),r,n)}failResult(t,r,n){this.gen.if(t),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,Y.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);let{schemaCode:r}=this;this.fail((0,Y._)`${r} !== undefined && (${(0,Y.or)(this.invalid$data(),t)})`)}error(t,r,n){if(r){this.setParams(r),this._error(t,n),this.setParams({});return}this._error(t,n)}_error(t,r){(t?to.reportExtraError:to.reportError)(this,this.def.error,r)}$dataError(){(0,to.reportError)(this,this.def.$dataError||to.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,to.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,n=Y.nil){this.gen.block(()=>{this.check$data(t,n),r()})}check$data(t=Y.nil,r=Y.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,Y.or)((0,Y._)`${s} === undefined`,r)),t!==Y.nil&&n.assign(t,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==Y.nil&&n.assign(t,!1)),n.else()}invalid$data(){let{gen:t,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,Y.or)(o(),a());function o(){if(n.length){if(!(r instanceof Y.Name))throw new Error("ajv implementation error");let u=Array.isArray(n)?n:[n];return(0,Y._)`${(0,fu.checkDataTypes)(u,r,i.opts.strictNumbers,fu.DataType.Wrong)}`}return Y.nil}function a(){if(s.validateSchema){let u=t.scopeValue("validate$data",{ref:s.validateSchema});return(0,Y._)`!${u}(${r})`}return Y.nil}}subschema(t,r){let n=(0,gd.getSubschema)(this.it,t);(0,gd.extendSubschemaData)(n,this.it,t),(0,gd.extendSubschemaMode)(n,t);let s={...this.it,...n,items:void 0,props:void 0};return RL(s,r),s}mergeEvaluated(t,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&t.props!==void 0&&(n.props=Kr.mergeEvaluated.props(s,t.props,n.props,r)),n.items!==!0&&t.items!==void 0&&(n.items=Kr.mergeEvaluated.items(s,t.items,n.items,r)))}mergeValidEvaluated(t,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(t,Y.Name)),!0}};bn.KeywordCxt=du;function vE(e,t,r,n){let s=new du(e,r,t);"code"in r?r.code(s,n):s.$data&&r.validate?(0,ro.funcKeywordCode)(s,r):"macro"in r?(0,ro.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,ro.funcKeywordCode)(s,r)}var LL=/^\/(?:[^~]|~0|~1)*$/,FL=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function EE(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let s,i;if(e==="")return ee.default.rootData;if(e[0]==="/"){if(!LL.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,i=ee.default.rootData}else{let c=FL.exec(e);if(!c)throw new Error(`Invalid JSON-pointer: ${e}`);let l=+c[1];if(s=c[2],s==="#"){if(l>=t)throw new Error(u("property/index",l));return n[t-l]}if(l>t)throw new Error(u("data",l));if(i=r[t-l],!s)return i}let o=i,a=s.split("/");for(let c of a)c&&(i=(0,Y._)`${i}${(0,Y.getProperty)((0,Kr.unescapeJsonPointer)(c))}`,o=(0,Y._)`${o} && ${i}`);return o;function u(c,l){return`Cannot access ${c} ${l} levels up, current level is ${t}`}}bn.getData=EE});var no=E(Sd=>{"use strict";Object.defineProperty(Sd,"__esModule",{value:!0});var Ed=class extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}};Sd.default=Ed});var wn=E(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0});var bd=eo(),wd=class extends Error{constructor(t,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,bd.resolveUrl)(t,r,n),this.missingSchema=(0,bd.normalizeId)((0,bd.getFullPath)(t,this.missingRef))}};Rd.default=wd});var es=E(er=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.resolveSchema=er.getCompilingSchema=er.resolveRef=er.compileSchema=er.SchemaEnv=void 0;var pr=X(),ML=no(),Zn=Zt(),mr=eo(),SE=se(),VL=zs(),Us=class{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,mr.normalizeId)(n?.[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n?.$async,this.refs={}}};er.SchemaEnv=Us;function Pd(e){let t=bE.call(this,e);if(t)return t;let r=(0,mr.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new pr.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a;e.$async&&(a=o.scopeValue("Error",{ref:ML.default,code:(0,pr._)`require("ajv/dist/runtime/validation_error").default`}));let u=o.scopeName("validate");e.validateName=u;let c={gen:o,allErrors:this.opts.allErrors,data:Zn.default.data,parentData:Zn.default.parentData,parentDataProperty:Zn.default.parentDataProperty,dataNames:[Zn.default.data],dataPathArr:[pr.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,pr.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:pr.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,pr._)`""`,opts:this.opts,self:this},l;try{this._compilations.add(e),(0,VL.validateFunctionCode)(c),o.optimize(this.opts.code.optimize);let f=o.toString();l=`${o.scopeRefs(Zn.default.scope)}return ${f}`,this.opts.code.process&&(l=this.opts.code.process(l,e));let h=new Function(`${Zn.default.self}`,`${Zn.default.scope}`,l)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){let{props:p,items:y}=c;h.evaluated={props:p instanceof pr.Name?void 0:p,items:y instanceof pr.Name?void 0:y,dynamicProps:p instanceof pr.Name,dynamicItems:y instanceof pr.Name},h.source&&(h.source.evaluated=(0,pr.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,l&&this.logger.error("Error compiling schema, function code:",l),f}finally{this._compilations.delete(e)}}er.compileSchema=Pd;function HL(e,t,r){var n;r=(0,mr.resolveUrl)(this.opts.uriResolver,t,r);let s=e.refs[r];if(s)return s;let i=BL.call(this,e,r);if(i===void 0){let o=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new Us({schema:o,schemaId:a,root:e,baseId:t}))}if(i!==void 0)return e.refs[r]=zL.call(this,i)}er.resolveRef=HL;function zL(e){return(0,mr.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:Pd.call(this,e)}function bE(e){for(let t of this._compilations)if(UL(t,e))return t}er.getCompilingSchema=bE;function UL(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function BL(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||hu.call(this,e,t)}function hu(e,t){let r=this.opts.uriResolver.parse(t),n=(0,mr._getFullPath)(this.opts.uriResolver,r),s=(0,mr.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===s)return Td.call(this,r,e);let i=(0,mr.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){let a=hu.call(this,e,o);return typeof a?.schema!="object"?void 0:Td.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||Pd.call(this,o),i===(0,mr.normalizeId)(t)){let{schema:a}=o,{schemaId:u}=this.opts,c=a[u];return c&&(s=(0,mr.resolveUrl)(this.opts.uriResolver,s,c)),new Us({schema:a,schemaId:u,root:e,baseId:s})}return Td.call(this,r,o)}}er.resolveSchema=hu;var GL=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Td(e,{baseId:t,schema:r,root:n}){var s;if(((s=e.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let a of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let u=r[(0,SE.unescapeFragment)(a)];if(u===void 0)return;r=u;let c=typeof r=="object"&&r[this.opts.schemaId];!GL.has(a)&&c&&(t=(0,mr.resolveUrl)(this.opts.uriResolver,t,c))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,SE.schemaHasRulesButRef)(r,this.RULES)){let a=(0,mr.resolveUrl)(this.opts.uriResolver,t,r.$ref);i=hu.call(this,n,a)}let{schemaId:o}=this.opts;if(i=i||new Us({schema:r,schemaId:o,root:n,baseId:t}),i.schema!==i.root.schema)return i}});var wE=E((Z7,KL)=>{KL.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var TE=E((pu,RE)=>{(function(e,t){typeof pu=="object"&&typeof RE<"u"?t(pu):typeof define=="function"&&define.amd?define(["exports"],t):t(e.URI=e.URI||{})})(pu,function(e){"use strict";function t(){for(var P=arguments.length,S=Array(P),O=0;O<P;O++)S[O]=arguments[O];if(S.length>1){S[0]=S[0].slice(0,-1);for(var C=S.length-1,N=1;N<C;++N)S[N]=S[N].slice(1,-1);return S[C]=S[C].slice(1),S.join("")}else return S[0]}function r(P){return"(?:"+P+")"}function n(P){return P===void 0?"undefined":P===null?"null":Object.prototype.toString.call(P).split(" ").pop().split("]").shift().toLowerCase()}function s(P){return P.toUpperCase()}function i(P){return P!=null?P instanceof Array?P:typeof P.length!="number"||P.split||P.setInterval||P.call?[P]:Array.prototype.slice.call(P):[]}function o(P,S){var O=P;if(S)for(var C in S)O[C]=S[C];return O}function a(P){var S="[A-Za-z]",O="[\\x0D]",C="[0-9]",N="[\\x22]",U=t(C,"[A-Fa-f]"),re="[\\x0A]",ge="[\\x20]",Pe=r(r("%[EFef]"+U+"%"+U+U+"%"+U+U)+"|"+r("%[89A-Fa-f]"+U+"%"+U+U)+"|"+r("%"+U+U)),tt="[\\:\\/\\?\\#\\[\\]\\@]",me="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",He=t(tt,me),rt=P?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Ve=P?"[\\uE000-\\uF8FF]":"[]",Ee=t(S,C,"[\\-\\.\\_\\~]",rt),ze=r(S+t(S,C,"[\\+\\-\\.]")+"*"),Ae=r(r(Pe+"|"+t(Ee,me,"[\\:]"))+"*"),Ln=r(r("25[0-5]")+"|"+r("2[0-4]"+C)+"|"+r("1"+C+C)+"|"+r("[1-9]"+C)+"|"+C),Ht=r(r("25[0-5]")+"|"+r("2[0-4]"+C)+"|"+r("1"+C+C)+"|"+r("0?[1-9]"+C)+"|0?0?"+C),Yt=r(Ht+"\\."+Ht+"\\."+Ht+"\\."+Ht),Ie=r(U+"{1,4}"),zt=r(r(Ie+"\\:"+Ie)+"|"+Yt),Wt=r(r(Ie+"\\:")+"{6}"+zt),Sr=r("\\:\\:"+r(Ie+"\\:")+"{5}"+zt),Fn=r(r(Ie)+"?\\:\\:"+r(Ie+"\\:")+"{4}"+zt),Mr=r(r(r(Ie+"\\:")+"{0,1}"+Ie)+"?\\:\\:"+r(Ie+"\\:")+"{3}"+zt),Pi=r(r(r(Ie+"\\:")+"{0,2}"+Ie)+"?\\:\\:"+r(Ie+"\\:")+"{2}"+zt),ha=r(r(r(Ie+"\\:")+"{0,3}"+Ie)+"?\\:\\:"+Ie+"\\:"+zt),pa=r(r(r(Ie+"\\:")+"{0,4}"+Ie)+"?\\:\\:"+zt),ys=r(r(r(Ie+"\\:")+"{0,5}"+Ie)+"?\\:\\:"+Ie),gs=r(r(r(Ie+"\\:")+"{0,6}"+Ie)+"?\\:\\:"),Vr=r([Wt,Sr,Fn,Mr,Pi,ha,pa,ys,gs].join("|")),_s=r(r(Ee+"|"+Pe)+"+"),Ql=r(Vr+"\\%25"+_s),Mn=r(Vr+r("\\%25|\\%(?!"+U+"{2})")+_s),F1=r("[vV]"+U+"+\\."+t(Ee,me,"[\\:]")+"+"),M1=r("\\["+r(Mn+"|"+Vr+"|"+F1)+"\\]"),Ty=r(r(Pe+"|"+t(Ee,me))+"*"),$i=r(M1+"|"+Yt+"(?!"+Ty+")|"+Ty),Oi=r(C+"*"),Py=r(r(Ae+"@")+"?"+$i+r("\\:"+Oi)+"?"),Ai=r(Pe+"|"+t(Ee,me,"[\\:\\@]")),V1=r(Ai+"*"),$y=r(Ai+"+"),H1=r(r(Pe+"|"+t(Ee,me,"[\\@]"))+"+"),Hr=r(r("\\/"+V1)+"*"),vs=r("\\/"+r($y+Hr)+"?"),Zl=r(H1+Hr),ma=r($y+Hr),Es="(?!"+Ai+")",sK=r(Hr+"|"+vs+"|"+Zl+"|"+ma+"|"+Es),Ss=r(r(Ai+"|"+t("[\\/\\?]",Ve))+"*"),Ci=r(r(Ai+"|[\\/\\?]")+"*"),Oy=r(r("\\/\\/"+Py+Hr)+"|"+vs+"|"+ma+"|"+Es),z1=r(ze+"\\:"+Oy+r("\\?"+Ss)+"?"+r("\\#"+Ci)+"?"),U1=r(r("\\/\\/"+Py+Hr)+"|"+vs+"|"+Zl+"|"+Es),B1=r(U1+r("\\?"+Ss)+"?"+r("\\#"+Ci)+"?"),iK=r(z1+"|"+B1),oK=r(ze+"\\:"+Oy+r("\\?"+Ss)+"?"),aK="^("+ze+")\\:"+r(r("\\/\\/("+r("("+Ae+")@")+"?("+$i+")"+r("\\:("+Oi+")")+"?)")+"?("+Hr+"|"+vs+"|"+ma+"|"+Es+")")+r("\\?("+Ss+")")+"?"+r("\\#("+Ci+")")+"?$",uK="^(){0}"+r(r("\\/\\/("+r("("+Ae+")@")+"?("+$i+")"+r("\\:("+Oi+")")+"?)")+"?("+Hr+"|"+vs+"|"+Zl+"|"+Es+")")+r("\\?("+Ss+")")+"?"+r("\\#("+Ci+")")+"?$",lK="^("+ze+")\\:"+r(r("\\/\\/("+r("("+Ae+")@")+"?("+$i+")"+r("\\:("+Oi+")")+"?)")+"?("+Hr+"|"+vs+"|"+ma+"|"+Es+")")+r("\\?("+Ss+")")+"?$",cK="^"+r("\\#("+Ci+")")+"?$",fK="^"+r("("+Ae+")@")+"?("+$i+")"+r("\\:("+Oi+")")+"?$";return{NOT_SCHEME:new RegExp(t("[^]",S,C,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",Ee,me),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",Ee,me),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",Ee,me),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",Ee,me),"g"),NOT_QUERY:new RegExp(t("[^\\%]",Ee,me,"[\\:\\@\\/\\?]",Ve),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",Ee,me,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",Ee,me),"g"),UNRESERVED:new RegExp(Ee,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",Ee,He),"g"),PCT_ENCODED:new RegExp(Pe,"g"),IPV4ADDRESS:new RegExp("^("+Yt+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Vr+")"+r(r("\\%25|\\%(?!"+U+"{2})")+"("+_s+")")+"?\\]?$")}}var u=a(!1),c=a(!0),l=function(){function P(S,O){var C=[],N=!0,U=!1,re=void 0;try{for(var ge=S[Symbol.iterator](),Pe;!(N=(Pe=ge.next()).done)&&(C.push(Pe.value),!(O&&C.length===O));N=!0);}catch(tt){U=!0,re=tt}finally{try{!N&&ge.return&&ge.return()}finally{if(U)throw re}}return C}return function(S,O){if(Array.isArray(S))return S;if(Symbol.iterator in Object(S))return P(S,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(P){if(Array.isArray(P)){for(var S=0,O=Array(P.length);S<P.length;S++)O[S]=P[S];return O}else return Array.from(P)},d=2147483647,h=36,p=1,y=26,v=38,_=700,w=72,g=128,m="-",T=/^xn--/,A=/[^\0-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,$={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=h-p,R=Math.floor,x=String.fromCharCode;function j(P){throw new RangeError($[P])}function L(P,S){for(var O=[],C=P.length;C--;)O[C]=S(P[C]);return O}function Q(P,S){var O=P.split("@"),C="";O.length>1&&(C=O[0]+"@",P=O[1]),P=P.replace(b,".");var N=P.split("."),U=L(N,S).join(".");return C+U}function oe(P){for(var S=[],O=0,C=P.length;O<C;){var N=P.charCodeAt(O++);if(N>=55296&&N<=56319&&O<C){var U=P.charCodeAt(O++);(U&64512)==56320?S.push(((N&1023)<<10)+(U&1023)+65536):(S.push(N),O--)}else S.push(N)}return S}var H=function(S){return String.fromCodePoint.apply(String,f(S))},W=function(S){return S-48<10?S-22:S-65<26?S-65:S-97<26?S-97:h},Oe=function(S,O){return S+22+75*(S<26)-((O!=0)<<5)},z=function(S,O,C){var N=0;for(S=C?R(S/_):S>>1,S+=R(S/O);S>k*y>>1;N+=h)S=R(S/k);return R(N+(k+1)*S/(S+v))},Ke=function(S){var O=[],C=S.length,N=0,U=g,re=w,ge=S.lastIndexOf(m);ge<0&&(ge=0);for(var Pe=0;Pe<ge;++Pe)S.charCodeAt(Pe)>=128&&j("not-basic"),O.push(S.charCodeAt(Pe));for(var tt=ge>0?ge+1:0;tt<C;){for(var me=N,He=1,rt=h;;rt+=h){tt>=C&&j("invalid-input");var Ve=W(S.charCodeAt(tt++));(Ve>=h||Ve>R((d-N)/He))&&j("overflow"),N+=Ve*He;var Ee=rt<=re?p:rt>=re+y?y:rt-re;if(Ve<Ee)break;var ze=h-Ee;He>R(d/ze)&&j("overflow"),He*=ze}var Ae=O.length+1;re=z(N-me,Ae,me==0),R(N/Ae)>d-U&&j("overflow"),U+=R(N/Ae),N%=Ae,O.splice(N++,0,U)}return String.fromCodePoint.apply(String,O)},Kt=function(S){var O=[];S=oe(S);var C=S.length,N=g,U=0,re=w,ge=!0,Pe=!1,tt=void 0;try{for(var me=S[Symbol.iterator](),He;!(ge=(He=me.next()).done);ge=!0){var rt=He.value;rt<128&&O.push(x(rt))}}catch(Mn){Pe=!0,tt=Mn}finally{try{!ge&&me.return&&me.return()}finally{if(Pe)throw tt}}var Ve=O.length,Ee=Ve;for(Ve&&O.push(m);Ee<C;){var ze=d,Ae=!0,Ln=!1,Ht=void 0;try{for(var Yt=S[Symbol.iterator](),Ie;!(Ae=(Ie=Yt.next()).done);Ae=!0){var zt=Ie.value;zt>=N&&zt<ze&&(ze=zt)}}catch(Mn){Ln=!0,Ht=Mn}finally{try{!Ae&&Yt.return&&Yt.return()}finally{if(Ln)throw Ht}}var Wt=Ee+1;ze-N>R((d-U)/Wt)&&j("overflow"),U+=(ze-N)*Wt,N=ze;var Sr=!0,Fn=!1,Mr=void 0;try{for(var Pi=S[Symbol.iterator](),ha;!(Sr=(ha=Pi.next()).done);Sr=!0){var pa=ha.value;if(pa<N&&++U>d&&j("overflow"),pa==N){for(var ys=U,gs=h;;gs+=h){var Vr=gs<=re?p:gs>=re+y?y:gs-re;if(ys<Vr)break;var _s=ys-Vr,Ql=h-Vr;O.push(x(Oe(Vr+_s%Ql,0))),ys=R(_s/Ql)}O.push(x(Oe(ys,0))),re=z(U,Wt,Ee==Ve),U=0,++Ee}}}catch(Mn){Fn=!0,Mr=Mn}finally{try{!Sr&&Pi.return&&Pi.return()}finally{if(Fn)throw Mr}}++U,++N}return O.join("")},Re=function(S){return Q(S,function(O){return T.test(O)?Ke(O.slice(4).toLowerCase()):O})},xr=function(S){return Q(S,function(O){return A.test(O)?"xn--"+Kt(O):O})},ot={version:"2.1.0",ucs2:{decode:oe,encode:H},decode:Ke,encode:Kt,toASCII:xr,toUnicode:Re},de={};function Ze(P){var S=P.charCodeAt(0),O=void 0;return S<16?O="%0"+S.toString(16).toUpperCase():S<128?O="%"+S.toString(16).toUpperCase():S<2048?O="%"+(S>>6|192).toString(16).toUpperCase()+"%"+(S&63|128).toString(16).toUpperCase():O="%"+(S>>12|224).toString(16).toUpperCase()+"%"+(S>>6&63|128).toString(16).toUpperCase()+"%"+(S&63|128).toString(16).toUpperCase(),O}function te(P){for(var S="",O=0,C=P.length;O<C;){var N=parseInt(P.substr(O+1,2),16);if(N<128)S+=String.fromCharCode(N),O+=3;else if(N>=194&&N<224){if(C-O>=6){var U=parseInt(P.substr(O+4,2),16);S+=String.fromCharCode((N&31)<<6|U&63)}else S+=P.substr(O,6);O+=6}else if(N>=224){if(C-O>=9){var re=parseInt(P.substr(O+4,2),16),ge=parseInt(P.substr(O+7,2),16);S+=String.fromCharCode((N&15)<<12|(re&63)<<6|ge&63)}else S+=P.substr(O,9);O+=9}else S+=P.substr(O,3),O+=3}return S}function we(P,S){function O(C){var N=te(C);return N.match(S.UNRESERVED)?N:C}return P.scheme&&(P.scheme=String(P.scheme).replace(S.PCT_ENCODED,O).toLowerCase().replace(S.NOT_SCHEME,"")),P.userinfo!==void 0&&(P.userinfo=String(P.userinfo).replace(S.PCT_ENCODED,O).replace(S.NOT_USERINFO,Ze).replace(S.PCT_ENCODED,s)),P.host!==void 0&&(P.host=String(P.host).replace(S.PCT_ENCODED,O).toLowerCase().replace(S.NOT_HOST,Ze).replace(S.PCT_ENCODED,s)),P.path!==void 0&&(P.path=String(P.path).replace(S.PCT_ENCODED,O).replace(P.scheme?S.NOT_PATH:S.NOT_PATH_NOSCHEME,Ze).replace(S.PCT_ENCODED,s)),P.query!==void 0&&(P.query=String(P.query).replace(S.PCT_ENCODED,O).replace(S.NOT_QUERY,Ze).replace(S.PCT_ENCODED,s)),P.fragment!==void 0&&(P.fragment=String(P.fragment).replace(S.PCT_ENCODED,O).replace(S.NOT_FRAGMENT,Ze).replace(S.PCT_ENCODED,s)),P}function Lt(P){return P.replace(/^0*(.*)/,"$1")||"0"}function Te(P,S){var O=P.match(S.IPV4ADDRESS)||[],C=l(O,2),N=C[1];return N?N.split(".").map(Lt).join("."):P}function I(P,S){var O=P.match(S.IPV6ADDRESS)||[],C=l(O,3),N=C[1],U=C[2];if(N){for(var re=N.toLowerCase().split("::").reverse(),ge=l(re,2),Pe=ge[0],tt=ge[1],me=tt?tt.split(":").map(Lt):[],He=Pe.split(":").map(Lt),rt=S.IPV4ADDRESS.test(He[He.length-1]),Ve=rt?7:8,Ee=He.length-Ve,ze=Array(Ve),Ae=0;Ae<Ve;++Ae)ze[Ae]=me[Ae]||He[Ee+Ae]||"";rt&&(ze[Ve-1]=Te(ze[Ve-1],S));var Ln=ze.reduce(function(Wt,Sr,Fn){if(!Sr||Sr==="0"){var Mr=Wt[Wt.length-1];Mr&&Mr.index+Mr.length===Fn?Mr.length++:Wt.push({index:Fn,length:1})}return Wt},[]),Ht=Ln.sort(function(Wt,Sr){return Sr.length-Wt.length})[0],Yt=void 0;if(Ht&&Ht.length>1){var Ie=ze.slice(0,Ht.index),zt=ze.slice(Ht.index+Ht.length);Yt=Ie.join(":")+"::"+zt.join(":")}else Yt=ze.join(":");return U&&(Yt+="%"+U),Yt}else return P}var q=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,V="".match(/(){0}/)[1]===void 0;function B(P){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O={},C=S.iri!==!1?c:u;S.reference==="suffix"&&(P=(S.scheme?S.scheme+":":"")+"//"+P);var N=P.match(q);if(N){V?(O.scheme=N[1],O.userinfo=N[3],O.host=N[4],O.port=parseInt(N[5],10),O.path=N[6]||"",O.query=N[7],O.fragment=N[8],isNaN(O.port)&&(O.port=N[5])):(O.scheme=N[1]||void 0,O.userinfo=P.indexOf("@")!==-1?N[3]:void 0,O.host=P.indexOf("//")!==-1?N[4]:void 0,O.port=parseInt(N[5],10),O.path=N[6]||"",O.query=P.indexOf("?")!==-1?N[7]:void 0,O.fragment=P.indexOf("#")!==-1?N[8]:void 0,isNaN(O.port)&&(O.port=P.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?N[4]:void 0)),O.host&&(O.host=I(Te(O.host,C),C)),O.scheme===void 0&&O.userinfo===void 0&&O.host===void 0&&O.port===void 0&&!O.path&&O.query===void 0?O.reference="same-document":O.scheme===void 0?O.reference="relative":O.fragment===void 0?O.reference="absolute":O.reference="uri",S.reference&&S.reference!=="suffix"&&S.reference!==O.reference&&(O.error=O.error||"URI is not a "+S.reference+" reference.");var U=de[(S.scheme||O.scheme||"").toLowerCase()];if(!S.unicodeSupport&&(!U||!U.unicodeSupport)){if(O.host&&(S.domainHost||U&&U.domainHost))try{O.host=ot.toASCII(O.host.replace(C.PCT_ENCODED,te).toLowerCase())}catch(re){O.error=O.error||"Host's domain name can not be converted to ASCII via punycode: "+re}we(O,u)}else we(O,C);U&&U.parse&&U.parse(O,S)}else O.error=O.error||"URI can not be parsed.";return O}function ae(P,S){var O=S.iri!==!1?c:u,C=[];return P.userinfo!==void 0&&(C.push(P.userinfo),C.push("@")),P.host!==void 0&&C.push(I(Te(String(P.host),O),O).replace(O.IPV6ADDRESS,function(N,U,re){return"["+U+(re?"%25"+re:"")+"]"})),(typeof P.port=="number"||typeof P.port=="string")&&(C.push(":"),C.push(String(P.port))),C.length?C.join(""):void 0}var Z=/^\.\.?\//,ve=/^\/\.(\/|$)/,Fe=/^\/\.\.(\/|$)/,jn=/^\/?(?:.|\n)*?(?=\/|$)/;function Me(P){for(var S=[];P.length;)if(P.match(Z))P=P.replace(Z,"");else if(P.match(ve))P=P.replace(ve,"/");else if(P.match(Fe))P=P.replace(Fe,"/"),S.pop();else if(P==="."||P==="..")P="";else{var O=P.match(jn);if(O){var C=O[0];P=P.slice(C.length),S.push(C)}else throw new Error("Unexpected dot segment condition")}return S.join("")}function it(P){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O=S.iri?c:u,C=[],N=de[(S.scheme||P.scheme||"").toLowerCase()];if(N&&N.serialize&&N.serialize(P,S),P.host&&!O.IPV6ADDRESS.test(P.host)){if(S.domainHost||N&&N.domainHost)try{P.host=S.iri?ot.toUnicode(P.host):ot.toASCII(P.host.replace(O.PCT_ENCODED,te).toLowerCase())}catch(ge){P.error=P.error||"Host's domain name can not be converted to "+(S.iri?"Unicode":"ASCII")+" via punycode: "+ge}}we(P,O),S.reference!=="suffix"&&P.scheme&&(C.push(P.scheme),C.push(":"));var U=ae(P,S);if(U!==void 0&&(S.reference!=="suffix"&&C.push("//"),C.push(U),P.path&&P.path.charAt(0)!=="/"&&C.push("/")),P.path!==void 0){var re=P.path;!S.absolutePath&&(!N||!N.absolutePath)&&(re=Me(re)),U===void 0&&(re=re.replace(/^\/\//,"/%2F")),C.push(re)}return P.query!==void 0&&(C.push("?"),C.push(P.query)),P.fragment!==void 0&&(C.push("#"),C.push(P.fragment)),C.join("")}function Sy(P,S){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},C=arguments[3],N={};return C||(P=B(it(P,O),O),S=B(it(S,O),O)),O=O||{},!O.tolerant&&S.scheme?(N.scheme=S.scheme,N.userinfo=S.userinfo,N.host=S.host,N.port=S.port,N.path=Me(S.path||""),N.query=S.query):(S.userinfo!==void 0||S.host!==void 0||S.port!==void 0?(N.userinfo=S.userinfo,N.host=S.host,N.port=S.port,N.path=Me(S.path||""),N.query=S.query):(S.path?(S.path.charAt(0)==="/"?N.path=Me(S.path):((P.userinfo!==void 0||P.host!==void 0||P.port!==void 0)&&!P.path?N.path="/"+S.path:P.path?N.path=P.path.slice(0,P.path.lastIndexOf("/")+1)+S.path:N.path=S.path,N.path=Me(N.path)),N.query=S.query):(N.path=P.path,S.query!==void 0?N.query=S.query:N.query=P.query),N.userinfo=P.userinfo,N.host=P.host,N.port=P.port),N.scheme=P.scheme),N.fragment=S.fragment,N}function or(P,S,O){var C=o({scheme:"null"},O);return it(Sy(B(P,C),B(S,C),C,!0),C)}function Lr(P,S){return typeof P=="string"?P=it(B(P,S),S):n(P)==="object"&&(P=B(it(P,S),S)),P}function Ri(P,S,O){return typeof P=="string"?P=it(B(P,O),O):n(P)==="object"&&(P=it(P,O)),typeof S=="string"?S=it(B(S,O),O):n(S)==="object"&&(S=it(S,O)),P===S}function un(P,S){return P&&P.toString().replace(!S||!S.iri?u.ESCAPE:c.ESCAPE,Ze)}function ar(P,S){return P&&P.toString().replace(!S||!S.iri?u.PCT_ENCODED:c.PCT_ENCODED,te)}var Ti={scheme:"http",domainHost:!0,parse:function(S,O){return S.host||(S.error=S.error||"HTTP URIs must have a host."),S},serialize:function(S,O){var C=String(S.scheme).toLowerCase()==="https";return(S.port===(C?443:80)||S.port==="")&&(S.port=void 0),S.path||(S.path="/"),S}},vt={scheme:"https",domainHost:Ti.domainHost,parse:Ti.parse,serialize:Ti.serialize};function fa(P){return typeof P.secure=="boolean"?P.secure:String(P.scheme).toLowerCase()==="wss"}var ln={scheme:"ws",domainHost:!0,parse:function(S,O){var C=S;return C.secure=fa(C),C.resourceName=(C.path||"/")+(C.query?"?"+C.query:""),C.path=void 0,C.query=void 0,C},serialize:function(S,O){if((S.port===(fa(S)?443:80)||S.port==="")&&(S.port=void 0),typeof S.secure=="boolean"&&(S.scheme=S.secure?"wss":"ws",S.secure=void 0),S.resourceName){var C=S.resourceName.split("?"),N=l(C,2),U=N[0],re=N[1];S.path=U&&U!=="/"?U:void 0,S.query=re,S.resourceName=void 0}return S.fragment=void 0,S}},je={scheme:"wss",domainHost:ln.domainHost,parse:ln.parse,serialize:ln.serialize},Ft={},q1=!0,Mt="[A-Za-z0-9\\-\\.\\_\\~"+(q1?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",at="[0-9A-Fa-f]",D1=r(r("%[EFef]"+at+"%"+at+at+"%"+at+at)+"|"+r("%[89A-Fa-f]"+at+"%"+at+at)+"|"+r("%"+at+at)),et="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",xn="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",j1=t(xn,'[\\"\\\\]'),ur="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Vt=new RegExp(Mt,"g"),Fr=new RegExp(D1,"g"),cn=new RegExp(t("[^]",et,"[\\.]",'[\\"]',j1),"g"),fn=new RegExp(t("[^]",Mt,ur),"g"),da=fn;function Er(P){var S=te(P);return S.match(Vt)?S:P}var by={scheme:"mailto",parse:function(S,O){var C=S,N=C.to=C.path?C.path.split(","):[];if(C.path=void 0,C.query){for(var U=!1,re={},ge=C.query.split("&"),Pe=0,tt=ge.length;Pe<tt;++Pe){var me=ge[Pe].split("=");switch(me[0]){case"to":for(var He=me[1].split(","),rt=0,Ve=He.length;rt<Ve;++rt)N.push(He[rt]);break;case"subject":C.subject=ar(me[1],O);break;case"body":C.body=ar(me[1],O);break;default:U=!0,re[ar(me[0],O)]=ar(me[1],O);break}}U&&(C.headers=re)}C.query=void 0;for(var Ee=0,ze=N.length;Ee<ze;++Ee){var Ae=N[Ee].split("@");if(Ae[0]=ar(Ae[0]),O.unicodeSupport)Ae[1]=ar(Ae[1],O).toLowerCase();else try{Ae[1]=ot.toASCII(ar(Ae[1],O).toLowerCase())}catch(Ln){C.error=C.error||"Email address's domain name can not be converted to ASCII via punycode: "+Ln}N[Ee]=Ae.join("@")}return C},serialize:function(S,O){var C=S,N=i(S.to);if(N){for(var U=0,re=N.length;U<re;++U){var ge=String(N[U]),Pe=ge.lastIndexOf("@"),tt=ge.slice(0,Pe).replace(Fr,Er).replace(Fr,s).replace(cn,Ze),me=ge.slice(Pe+1);try{me=O.iri?ot.toUnicode(me):ot.toASCII(ar(me,O).toLowerCase())}catch(Ee){C.error=C.error||"Email address's domain name can not be converted to "+(O.iri?"Unicode":"ASCII")+" via punycode: "+Ee}N[U]=tt+"@"+me}C.path=N.join(",")}var He=S.headers=S.headers||{};S.subject&&(He.subject=S.subject),S.body&&(He.body=S.body);var rt=[];for(var Ve in He)He[Ve]!==Ft[Ve]&&rt.push(Ve.replace(Fr,Er).replace(Fr,s).replace(fn,Ze)+"="+He[Ve].replace(Fr,Er).replace(Fr,s).replace(da,Ze));return rt.length&&(C.query=rt.join("&")),C}},x1=/^([^\:]+)\:(.*)/,wy={scheme:"urn",parse:function(S,O){var C=S.path&&S.path.match(x1),N=S;if(C){var U=O.scheme||N.scheme||"urn",re=C[1].toLowerCase(),ge=C[2],Pe=U+":"+(O.nid||re),tt=de[Pe];N.nid=re,N.nss=ge,N.path=void 0,tt&&(N=tt.parse(N,O))}else N.error=N.error||"URN can not be parsed.";return N},serialize:function(S,O){var C=O.scheme||S.scheme||"urn",N=S.nid,U=C+":"+(O.nid||N),re=de[U];re&&(S=re.serialize(S,O));var ge=S,Pe=S.nss;return ge.path=(N||O.nid)+":"+Pe,ge}},L1=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ry={scheme:"urn:uuid",parse:function(S,O){var C=S;return C.uuid=C.nss,C.nss=void 0,!O.tolerant&&(!C.uuid||!C.uuid.match(L1))&&(C.error=C.error||"UUID is not valid."),C},serialize:function(S,O){var C=S;return C.nss=(S.uuid||"").toLowerCase(),C}};de[Ti.scheme]=Ti,de[vt.scheme]=vt,de[ln.scheme]=ln,de[je.scheme]=je,de[by.scheme]=by,de[wy.scheme]=wy,de[Ry.scheme]=Ry,e.SCHEMES=de,e.pctEncChar=Ze,e.pctDecChars=te,e.parse=B,e.removeDotSegments=Me,e.serialize=it,e.resolveComponents=Sy,e.resolve=or,e.normalize=Lr,e.equal=Ri,e.escapeComponent=un,e.unescapeComponent=ar,Object.defineProperty(e,"__esModule",{value:!0})})});var $E=E($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});var PE=TE();PE.code='require("ajv/dist/runtime/uri").default';$d.default=PE});var Cd=E(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.CodeGen=gt.Name=gt.nil=gt.stringify=gt.str=gt._=gt.KeywordCxt=void 0;var YL=zs();Object.defineProperty(gt,"KeywordCxt",{enumerable:!0,get:function(){return YL.KeywordCxt}});var Bs=X();Object.defineProperty(gt,"_",{enumerable:!0,get:function(){return Bs._}});Object.defineProperty(gt,"str",{enumerable:!0,get:function(){return Bs.str}});Object.defineProperty(gt,"stringify",{enumerable:!0,get:function(){return Bs.stringify}});Object.defineProperty(gt,"nil",{enumerable:!0,get:function(){return Bs.nil}});Object.defineProperty(gt,"Name",{enumerable:!0,get:function(){return Bs.Name}});Object.defineProperty(gt,"CodeGen",{enumerable:!0,get:function(){return Bs.CodeGen}});var WL=no(),NE=wn(),JL=ud(),so=es(),XL=X(),io=eo(),mu=Zi(),Ad=se(),OE=wE(),QL=$E(),kE=(e,t)=>new RegExp(e,t);kE.code="new RegExp";var ZL=["removeAdditional","useDefaults","coerceTypes"],eF=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),tF={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},rF={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},AE=200;function nF(e){var t,r,n,s,i,o,a,u,c,l,f,d,h,p,y,v,_,w,g,m,T,A,b,$,k;let R=e.strict,x=(t=e.code)===null||t===void 0?void 0:t.optimize,j=x===!0||x===void 0?1:x||0,L=(n=(r=e.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:kE,Q=(s=e.uriResolver)!==null&&s!==void 0?s:QL.default;return{strictSchema:(o=(i=e.strictSchema)!==null&&i!==void 0?i:R)!==null&&o!==void 0?o:!0,strictNumbers:(u=(a=e.strictNumbers)!==null&&a!==void 0?a:R)!==null&&u!==void 0?u:!0,strictTypes:(l=(c=e.strictTypes)!==null&&c!==void 0?c:R)!==null&&l!==void 0?l:"log",strictTuples:(d=(f=e.strictTuples)!==null&&f!==void 0?f:R)!==null&&d!==void 0?d:"log",strictRequired:(p=(h=e.strictRequired)!==null&&h!==void 0?h:R)!==null&&p!==void 0?p:!1,code:e.code?{...e.code,optimize:j,regExp:L}:{optimize:j,regExp:L},loopRequired:(y=e.loopRequired)!==null&&y!==void 0?y:AE,loopEnum:(v=e.loopEnum)!==null&&v!==void 0?v:AE,meta:(_=e.meta)!==null&&_!==void 0?_:!0,messages:(w=e.messages)!==null&&w!==void 0?w:!0,inlineRefs:(g=e.inlineRefs)!==null&&g!==void 0?g:!0,schemaId:(m=e.schemaId)!==null&&m!==void 0?m:"$id",addUsedSchema:(T=e.addUsedSchema)!==null&&T!==void 0?T:!0,validateSchema:(A=e.validateSchema)!==null&&A!==void 0?A:!0,validateFormats:(b=e.validateFormats)!==null&&b!==void 0?b:!0,unicodeRegExp:($=e.unicodeRegExp)!==null&&$!==void 0?$:!0,int32range:(k=e.int32range)!==null&&k!==void 0?k:!0,uriResolver:Q}}var oo=class{constructor(t={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,t=this.opts={...t,...nF(t)};let{es5:r,lines:n}=this.opts.code;this.scope=new XL.ValueScope({scope:{},prefixes:eF,es5:r,lines:n}),this.logger=lF(t.logger);let s=t.validateFormats;t.validateFormats=!1,this.RULES=(0,JL.getRules)(),CE.call(this,tF,t,"NOT SUPPORTED"),CE.call(this,rF,t,"DEPRECATED","warn"),this._metaOpts=aF.call(this),t.formats&&iF.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),t.keywords&&oF.call(this,t.keywords),typeof t.meta=="object"&&this.addMetaSchema(t.meta),sF.call(this),t.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:t,meta:r,schemaId:n}=this.opts,s=OE;n==="id"&&(s={...OE},s.id=s.$id,delete s.$id),r&&t&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:t,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof t=="object"?t[r]||t:void 0}validate(t,r){let n;if(typeof t=="string"){if(n=this.getSchema(t),!n)throw new Error(`no schema with key or ref "${t}"`)}else n=this.compile(t);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(t,r){let n=this._addSchema(t,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(t,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,t,r);async function s(l,f){await i.call(this,l.$schema);let d=this._addSchema(l,f);return d.validate||o.call(this,d)}async function i(l){l&&!this.getSchema(l)&&await s.call(this,{$ref:l},!0)}async function o(l){try{return this._compileSchemaEnv(l)}catch(f){if(!(f instanceof NE.default))throw f;return a.call(this,f),await u.call(this,f.missingSchema),o.call(this,l)}}function a({missingSchema:l,missingRef:f}){if(this.refs[l])throw new Error(`AnySchema ${l} is loaded but ${f} cannot be resolved`)}async function u(l){let f=await c.call(this,l);this.refs[l]||await i.call(this,f.$schema),this.refs[l]||this.addSchema(f,l,r)}async function c(l){let f=this._loading[l];if(f)return f;try{return await(this._loading[l]=n(l))}finally{delete this._loading[l]}}}addSchema(t,r,n,s=this.opts.validateSchema){if(Array.isArray(t)){for(let o of t)this.addSchema(o,void 0,n,s);return this}let i;if(typeof t=="object"){let{schemaId:o}=this.opts;if(i=t[o],i!==void 0&&typeof i!="string")throw new Error(`schema ${o} must be string`)}return r=(0,io.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(t,n,r,s,!0),this}addMetaSchema(t,r,n=this.opts.validateSchema){return this.addSchema(t,r,!0,n),this}validateSchema(t,r){if(typeof t=="boolean")return!0;let n;if(n=t.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,t);if(!s&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return s}getSchema(t){let r;for(;typeof(r=IE.call(this,t))=="string";)t=r;if(r===void 0){let{schemaId:n}=this.opts,s=new so.SchemaEnv({schema:{},schemaId:n});if(r=so.resolveSchema.call(this,s,t),!r)return;this.refs[t]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(t){if(t instanceof RegExp)return this._removeAllSchemas(this.schemas,t),this._removeAllSchemas(this.refs,t),this;switch(typeof t){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=IE.call(this,t);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[t],delete this.refs[t],this}case"object":{let r=t;this._cache.delete(r);let n=t[this.opts.schemaId];return n&&(n=(0,io.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(t){for(let r of t)this.addKeyword(r);return this}addKeyword(t,r){let n;if(typeof t=="string")n=t,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof t=="object"&&r===void 0){if(r=t,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(fF.call(this,n,r),!r)return(0,Ad.eachItem)(n,i=>Od.call(this,i)),this;hF.call(this,r);let s={...r,type:(0,mu.getJSONTypes)(r.type),schemaType:(0,mu.getJSONTypes)(r.schemaType)};return(0,Ad.eachItem)(n,s.type.length===0?i=>Od.call(this,i,s):i=>s.type.forEach(o=>Od.call(this,i,s,o))),this}getKeyword(t){let r=this.RULES.all[t];return typeof r=="object"?r.definition:!!r}removeKeyword(t){let{RULES:r}=this;delete r.keywords[t],delete r.all[t];for(let n of r.rules){let s=n.rules.findIndex(i=>i.keyword===t);s>=0&&n.rules.splice(s,1)}return this}addFormat(t,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[t]=r,this}errorsText(t=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!t||t.length===0?"No errors":t.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,i)=>s+r+i)}$dataMetaSchema(t,r){let n=this.RULES.all;t=JSON.parse(JSON.stringify(t));for(let s of r){let i=s.split("/").slice(1),o=t;for(let a of i)o=o[a];for(let a in n){let u=n[a];if(typeof u!="object")continue;let{$data:c}=u.definition,l=o[a];c&&l&&(o[a]=qE(l))}}return t}_removeAllSchemas(t,r){for(let n in t){let s=t[n];(!r||r.test(n))&&(typeof s=="string"?delete t[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete t[n]))}}_addSchema(t,r,n,s=this.opts.validateSchema,i=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof t=="object")o=t[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof t!="boolean")throw new Error("schema must be object or boolean")}let u=this._cache.get(t);if(u!==void 0)return u;n=(0,io.normalizeId)(o||n);let c=io.getSchemaRefs.call(this,t,n);return u=new so.SchemaEnv({schema:t,schemaId:a,meta:r,baseId:n,localRefs:c}),this._cache.set(u.schema,u),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=u),s&&this.validateSchema(t,!0),u}_checkUnique(t){if(this.schemas[t]||this.refs[t])throw new Error(`schema with key or id "${t}" already exists`)}_compileSchemaEnv(t){if(t.meta?this._compileMetaSchema(t):so.compileSchema.call(this,t),!t.validate)throw new Error("ajv implementation error");return t.validate}_compileMetaSchema(t){let r=this.opts;this.opts=this._metaOpts;try{so.compileSchema.call(this,t)}finally{this.opts=r}}};gt.default=oo;oo.ValidationError=WL.default;oo.MissingRefError=NE.default;function CE(e,t,r,n="error"){for(let s in e){let i=s;i in t&&this.logger[n](`${r}: option ${s}. ${e[i]}`)}}function IE(e){return e=(0,io.normalizeId)(e),this.schemas[e]||this.refs[e]}function sF(){let e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(let t in e)this.addSchema(e[t],t)}function iF(){for(let e in this.opts.formats){let t=this.opts.formats[e];t&&this.addFormat(e,t)}}function oF(e){if(Array.isArray(e)){this.addVocabulary(e);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let t in e){let r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}function aF(){let e={...this.opts};for(let t of ZL)delete e[t];return e}var uF={log(){},warn(){},error(){}};function lF(e){if(e===!1)return uF;if(e===void 0)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}var cF=/^[a-z_$][a-z0-9_$:-]*$/i;function fF(e,t){let{RULES:r}=this;if((0,Ad.eachItem)(e,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!cF.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!t&&t.$data&&!("code"in t||"validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function Od(e,t,r){var n;let s=t?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,o=s?i.post:i.rules.find(({type:u})=>u===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[e]=!0,!t)return;let a={keyword:e,definition:{...t,type:(0,mu.getJSONTypes)(t.type),schemaType:(0,mu.getJSONTypes)(t.schemaType)}};t.before?dF.call(this,o,a,t.before):o.rules.push(a),i.all[e]=a,(n=t.implements)===null||n===void 0||n.forEach(u=>this.addKeyword(u))}function dF(e,t,r){let n=e.rules.findIndex(s=>s.keyword===r);n>=0?e.rules.splice(n,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function hF(e){let{metaSchema:t}=e;t!==void 0&&(e.$data&&this.opts.$data&&(t=qE(t)),e.validateSchema=this.compile(t,!0))}var pF={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function qE(e){return{anyOf:[e,pF]}}});var DE=E(Id=>{"use strict";Object.defineProperty(Id,"__esModule",{value:!0});var mF={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Id.default=mF});var Nd=E(ts=>{"use strict";Object.defineProperty(ts,"__esModule",{value:!0});ts.callRef=ts.getValidate=void 0;var yF=wn(),jE=yt(),jt=X(),Gs=Zt(),xE=es(),yu=se(),gF={keyword:"$ref",schemaType:"string",code(e){let{gen:t,schema:r,it:n}=e,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:u}=n,{root:c}=i;if((r==="#"||r==="#/")&&s===c.baseId)return f();let l=xE.resolveRef.call(u,c,s,r);if(l===void 0)throw new yF.default(n.opts.uriResolver,s,r);if(l instanceof xE.SchemaEnv)return d(l);return h(l);function f(){if(i===c)return gu(e,o,i,i.$async);let p=t.scopeValue("root",{ref:c});return gu(e,(0,jt._)`${p}.validate`,c,c.$async)}function d(p){let y=LE(e,p);gu(e,y,p,p.$async)}function h(p){let y=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,jt.stringify)(p)}:{ref:p}),v=t.name("valid"),_=e.subschema({schema:p,dataTypes:[],schemaPath:jt.nil,topSchemaRef:y,errSchemaPath:r},v);e.mergeEvaluated(_),e.ok(v)}}};function LE(e,t){let{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,jt._)`${r.scopeValue("wrapper",{ref:t})}.validate`}ts.getValidate=LE;function gu(e,t,r,n){let{gen:s,it:i}=e,{allErrors:o,schemaEnv:a,opts:u}=i,c=u.passContext?Gs.default.this:jt.nil;n?l():f();function l(){if(!a.$async)throw new Error("async schema referenced by sync schema");let p=s.let("valid");s.try(()=>{s.code((0,jt._)`await ${(0,jE.callValidateCode)(e,t,c)}`),h(t),o||s.assign(p,!0)},y=>{s.if((0,jt._)`!(${y} instanceof ${i.ValidationError})`,()=>s.throw(y)),d(y),o||s.assign(p,!1)}),e.ok(p)}function f(){e.result((0,jE.callValidateCode)(e,t,c),()=>h(t),()=>d(t))}function d(p){let y=(0,jt._)`${p}.errors`;s.assign(Gs.default.vErrors,(0,jt._)`${Gs.default.vErrors} === null ? ${y} : ${Gs.default.vErrors}.concat(${y})`),s.assign(Gs.default.errors,(0,jt._)`${Gs.default.vErrors}.length`)}function h(p){var y;if(!i.opts.unevaluated)return;let v=(y=r?.validate)===null||y===void 0?void 0:y.evaluated;if(i.props!==!0)if(v&&!v.dynamicProps)v.props!==void 0&&(i.props=yu.mergeEvaluated.props(s,v.props,i.props));else{let _=s.var("props",(0,jt._)`${p}.evaluated.props`);i.props=yu.mergeEvaluated.props(s,_,i.props,jt.Name)}if(i.items!==!0)if(v&&!v.dynamicItems)v.items!==void 0&&(i.items=yu.mergeEvaluated.items(s,v.items,i.items));else{let _=s.var("items",(0,jt._)`${p}.evaluated.items`);i.items=yu.mergeEvaluated.items(s,_,i.items,jt.Name)}}}ts.callRef=gu;ts.default=gF});var FE=E(kd=>{"use strict";Object.defineProperty(kd,"__esModule",{value:!0});var _F=DE(),vF=Nd(),EF=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",_F.default,vF.default];kd.default=EF});var ME=E(qd=>{"use strict";Object.defineProperty(qd,"__esModule",{value:!0});var _u=X(),Rn=_u.operators,vu={maximum:{okStr:"<=",ok:Rn.LTE,fail:Rn.GT},minimum:{okStr:">=",ok:Rn.GTE,fail:Rn.LT},exclusiveMaximum:{okStr:"<",ok:Rn.LT,fail:Rn.GTE},exclusiveMinimum:{okStr:">",ok:Rn.GT,fail:Rn.LTE}},SF={message:({keyword:e,schemaCode:t})=>(0,_u.str)`must be ${vu[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,_u._)`{comparison: ${vu[e].okStr}, limit: ${t}}`},bF={keyword:Object.keys(vu),type:"number",schemaType:"number",$data:!0,error:SF,code(e){let{keyword:t,data:r,schemaCode:n}=e;e.fail$data((0,_u._)`${r} ${vu[t].fail} ${n} || isNaN(${r})`)}};qd.default=bF});var VE=E(Dd=>{"use strict";Object.defineProperty(Dd,"__esModule",{value:!0});var ao=X(),wF={message:({schemaCode:e})=>(0,ao.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,ao._)`{multipleOf: ${e}}`},RF={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:wF,code(e){let{gen:t,data:r,schemaCode:n,it:s}=e,i=s.opts.multipleOfPrecision,o=t.let("res"),a=i?(0,ao._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,ao._)`${o} !== parseInt(${o})`;e.fail$data((0,ao._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};Dd.default=RF});var zE=E(jd=>{"use strict";Object.defineProperty(jd,"__esModule",{value:!0});function HE(e){let t=e.length,r=0,n=0,s;for(;n<t;)r++,s=e.charCodeAt(n++),s>=55296&&s<=56319&&n<t&&(s=e.charCodeAt(n),(s&64512)===56320&&n++);return r}jd.default=HE;HE.code='require("ajv/dist/runtime/ucs2length").default'});var UE=E(xd=>{"use strict";Object.defineProperty(xd,"__esModule",{value:!0});var rs=X(),TF=se(),PF=zE(),$F={message({keyword:e,schemaCode:t}){let r=e==="maxLength"?"more":"fewer";return(0,rs.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,rs._)`{limit: ${e}}`},OF={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:$F,code(e){let{keyword:t,data:r,schemaCode:n,it:s}=e,i=t==="maxLength"?rs.operators.GT:rs.operators.LT,o=s.opts.unicode===!1?(0,rs._)`${r}.length`:(0,rs._)`${(0,TF.useFunc)(e.gen,PF.default)}(${r})`;e.fail$data((0,rs._)`${o} ${i} ${n}`)}};xd.default=OF});var BE=E(Ld=>{"use strict";Object.defineProperty(Ld,"__esModule",{value:!0});var AF=yt(),Eu=X(),CF={message:({schemaCode:e})=>(0,Eu.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,Eu._)`{pattern: ${e}}`},IF={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:CF,code(e){let{data:t,$data:r,schema:n,schemaCode:s,it:i}=e,o=i.opts.unicodeRegExp?"u":"",a=r?(0,Eu._)`(new RegExp(${s}, ${o}))`:(0,AF.usePattern)(e,n);e.fail$data((0,Eu._)`!${a}.test(${t})`)}};Ld.default=IF});var GE=E(Fd=>{"use strict";Object.defineProperty(Fd,"__esModule",{value:!0});var uo=X(),NF={message({keyword:e,schemaCode:t}){let r=e==="maxProperties"?"more":"fewer";return(0,uo.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,uo._)`{limit: ${e}}`},kF={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:NF,code(e){let{keyword:t,data:r,schemaCode:n}=e,s=t==="maxProperties"?uo.operators.GT:uo.operators.LT;e.fail$data((0,uo._)`Object.keys(${r}).length ${s} ${n}`)}};Fd.default=kF});var KE=E(Md=>{"use strict";Object.defineProperty(Md,"__esModule",{value:!0});var lo=yt(),co=X(),qF=se(),DF={message:({params:{missingProperty:e}})=>(0,co.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,co._)`{missingProperty: ${e}}`},jF={keyword:"required",type:"object",schemaType:"array",$data:!0,error:DF,code(e){let{gen:t,schema:r,schemaCode:n,data:s,$data:i,it:o}=e,{opts:a}=o;if(!i&&r.length===0)return;let u=r.length>=a.loopRequired;if(o.allErrors?c():l(),a.strictRequired){let h=e.parentSchema.properties,{definedProperties:p}=e.it;for(let y of r)if(h?.[y]===void 0&&!p.has(y)){let v=o.schemaEnv.baseId+o.errSchemaPath,_=`required property "${y}" is not defined at "${v}" (strictRequired)`;(0,qF.checkStrictMode)(o,_,o.opts.strictRequired)}}function c(){if(u||i)e.block$data(co.nil,f);else for(let h of r)(0,lo.checkReportMissingProp)(e,h)}function l(){let h=t.let("missing");if(u||i){let p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,lo.checkMissingProp)(e,r,h)),(0,lo.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",n,h=>{e.setParams({missingProperty:h}),t.if((0,lo.noPropertyInData)(t,s,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,n,()=>{t.assign(p,(0,lo.propertyInData)(t,s,h,a.ownProperties)),t.if((0,co.not)(p),()=>{e.error(),t.break()})},co.nil)}}};Md.default=jF});var YE=E(Vd=>{"use strict";Object.defineProperty(Vd,"__esModule",{value:!0});var fo=X(),xF={message({keyword:e,schemaCode:t}){let r=e==="maxItems"?"more":"fewer";return(0,fo.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,fo._)`{limit: ${e}}`},LF={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:xF,code(e){let{keyword:t,data:r,schemaCode:n}=e,s=t==="maxItems"?fo.operators.GT:fo.operators.LT;e.fail$data((0,fo._)`${r}.length ${s} ${n}`)}};Vd.default=LF});var ho=E(Hd=>{"use strict";Object.defineProperty(Hd,"__esModule",{value:!0});var WE=Vs();WE.code='require("ajv/dist/runtime/equal").default';Hd.default=WE});var JE=E(Ud=>{"use strict";Object.defineProperty(Ud,"__esModule",{value:!0});var zd=Zi(),_t=X(),FF=se(),MF=ho(),VF={message:({params:{i:e,j:t}})=>(0,_t.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,_t._)`{i: ${e}, j: ${t}}`},HF={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:VF,code(e){let{gen:t,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=e;if(!n&&!s)return;let u=t.let("valid"),c=i.items?(0,zd.getSchemaTypes)(i.items):[];e.block$data(u,l,(0,_t._)`${o} === false`),e.ok(u);function l(){let p=t.let("i",(0,_t._)`${r}.length`),y=t.let("j");e.setParams({i:p,j:y}),t.assign(u,!0),t.if((0,_t._)`${p} > 1`,()=>(f()?d:h)(p,y))}function f(){return c.length>0&&!c.some(p=>p==="object"||p==="array")}function d(p,y){let v=t.name("item"),_=(0,zd.checkDataTypes)(c,v,a.opts.strictNumbers,zd.DataType.Wrong),w=t.const("indices",(0,_t._)`{}`);t.for((0,_t._)`;${p}--;`,()=>{t.let(v,(0,_t._)`${r}[${p}]`),t.if(_,(0,_t._)`continue`),c.length>1&&t.if((0,_t._)`typeof ${v} == "string"`,(0,_t._)`${v} += "_"`),t.if((0,_t._)`typeof ${w}[${v}] == "number"`,()=>{t.assign(y,(0,_t._)`${w}[${v}]`),e.error(),t.assign(u,!1).break()}).code((0,_t._)`${w}[${v}] = ${p}`)})}function h(p,y){let v=(0,FF.useFunc)(t,MF.default),_=t.name("outer");t.label(_).for((0,_t._)`;${p}--;`,()=>t.for((0,_t._)`${y} = ${p}; ${y}--;`,()=>t.if((0,_t._)`${v}(${r}[${p}], ${r}[${y}])`,()=>{e.error(),t.assign(u,!1).break(_)})))}}};Ud.default=HF});var XE=E(Gd=>{"use strict";Object.defineProperty(Gd,"__esModule",{value:!0});var Bd=X(),zF=se(),UF=ho(),BF={message:"must be equal to constant",params:({schemaCode:e})=>(0,Bd._)`{allowedValue: ${e}}`},GF={keyword:"const",$data:!0,error:BF,code(e){let{gen:t,data:r,$data:n,schemaCode:s,schema:i}=e;n||i&&typeof i=="object"?e.fail$data((0,Bd._)`!${(0,zF.useFunc)(t,UF.default)}(${r}, ${s})`):e.fail((0,Bd._)`${i} !== ${r}`)}};Gd.default=GF});var QE=E(Kd=>{"use strict";Object.defineProperty(Kd,"__esModule",{value:!0});var po=X(),KF=se(),YF=ho(),WF={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,po._)`{allowedValues: ${e}}`},JF={keyword:"enum",schemaType:"array",$data:!0,error:WF,code(e){let{gen:t,data:r,$data:n,schema:s,schemaCode:i,it:o}=e;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let a=s.length>=o.opts.loopEnum,u,c=()=>u??(u=(0,KF.useFunc)(t,YF.default)),l;if(a||n)l=t.let("valid"),e.block$data(l,f);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let h=t.const("vSchema",i);l=(0,po.or)(...s.map((p,y)=>d(h,y)))}e.pass(l);function f(){t.assign(l,!1),t.forOf("v",i,h=>t.if((0,po._)`${c()}(${r}, ${h})`,()=>t.assign(l,!0).break()))}function d(h,p){let y=s[p];return typeof y=="object"&&y!==null?(0,po._)`${c()}(${r}, ${h}[${p}])`:(0,po._)`${r} === ${y}`}}};Kd.default=JF});var ZE=E(Yd=>{"use strict";Object.defineProperty(Yd,"__esModule",{value:!0});var XF=ME(),QF=VE(),ZF=UE(),e2=BE(),t2=GE(),r2=KE(),n2=YE(),s2=JE(),i2=XE(),o2=QE(),a2=[XF.default,QF.default,ZF.default,e2.default,t2.default,r2.default,n2.default,s2.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},i2.default,o2.default];Yd.default=a2});var Jd=E(mo=>{"use strict";Object.defineProperty(mo,"__esModule",{value:!0});mo.validateAdditionalItems=void 0;var ns=X(),Wd=se(),u2={message:({params:{len:e}})=>(0,ns.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,ns._)`{limit: ${e}}`},l2={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:u2,code(e){let{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n)){(0,Wd.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}eS(e,n)}};function eS(e,t){let{gen:r,schema:n,data:s,keyword:i,it:o}=e;o.items=!0;let a=r.const("len",(0,ns._)`${s}.length`);if(n===!1)e.setParams({len:t.length}),e.pass((0,ns._)`${a} <= ${t.length}`);else if(typeof n=="object"&&!(0,Wd.alwaysValidSchema)(o,n)){let c=r.var("valid",(0,ns._)`${a} <= ${t.length}`);r.if((0,ns.not)(c),()=>u(c)),e.ok(c)}function u(c){r.forRange("i",t.length,a,l=>{e.subschema({keyword:i,dataProp:l,dataPropType:Wd.Type.Num},c),o.allErrors||r.if((0,ns.not)(c),()=>r.break())})}}mo.validateAdditionalItems=eS;mo.default=l2});var Xd=E(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.validateTuple=void 0;var tS=X(),Su=se(),c2=yt(),f2={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){let{schema:t,it:r}=e;if(Array.isArray(t))return rS(e,"additionalItems",t);r.items=!0,!(0,Su.alwaysValidSchema)(r,t)&&e.ok((0,c2.validateArray)(e))}};function rS(e,t,r=e.schema){let{gen:n,parentSchema:s,data:i,keyword:o,it:a}=e;l(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=Su.mergeEvaluated.items(n,r.length,a.items));let u=n.name("valid"),c=n.const("len",(0,tS._)`${i}.length`);r.forEach((f,d)=>{(0,Su.alwaysValidSchema)(a,f)||(n.if((0,tS._)`${c} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function l(f){let{opts:d,errSchemaPath:h}=a,p=r.length,y=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!y){let v=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,Su.checkStrictMode)(a,v,d.strictTuples)}}}yo.validateTuple=rS;yo.default=f2});var nS=E(Qd=>{"use strict";Object.defineProperty(Qd,"__esModule",{value:!0});var d2=Xd(),h2={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,d2.validateTuple)(e,"items")};Qd.default=h2});var iS=E(Zd=>{"use strict";Object.defineProperty(Zd,"__esModule",{value:!0});var sS=X(),p2=se(),m2=yt(),y2=Jd(),g2={message:({params:{len:e}})=>(0,sS.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,sS._)`{limit: ${e}}`},_2={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:g2,code(e){let{schema:t,parentSchema:r,it:n}=e,{prefixItems:s}=r;n.items=!0,!(0,p2.alwaysValidSchema)(n,t)&&(s?(0,y2.validateAdditionalItems)(e,s):e.ok((0,m2.validateArray)(e)))}};Zd.default=_2});var oS=E(eh=>{"use strict";Object.defineProperty(eh,"__esModule",{value:!0});var tr=X(),bu=se(),v2={message:({params:{min:e,max:t}})=>t===void 0?(0,tr.str)`must contain at least ${e} valid item(s)`:(0,tr.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,tr._)`{minContains: ${e}}`:(0,tr._)`{minContains: ${e}, maxContains: ${t}}`},E2={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:v2,code(e){let{gen:t,schema:r,parentSchema:n,data:s,it:i}=e,o,a,{minContains:u,maxContains:c}=n;i.opts.next?(o=u===void 0?1:u,a=c):o=1;let l=t.const("len",(0,tr._)`${s}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,bu.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,bu.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,bu.alwaysValidSchema)(i,r)){let y=(0,tr._)`${l} >= ${o}`;a!==void 0&&(y=(0,tr._)`${y} && ${l} <= ${a}`),e.pass(y);return}i.items=!0;let f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,tr._)`${s}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){let y=t.name("_valid"),v=t.let("count",0);h(y,()=>t.if(y,()=>p(v)))}function h(y,v){t.forRange("i",0,l,_=>{e.subschema({keyword:"contains",dataProp:_,dataPropType:bu.Type.Num,compositeRule:!0},y),v()})}function p(y){t.code((0,tr._)`${y}++`),a===void 0?t.if((0,tr._)`${y} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,tr._)`${y} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,tr._)`${y} >= ${o}`,()=>t.assign(f,!0)))}}};eh.default=E2});var lS=E(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.validateSchemaDeps=Or.validatePropertyDeps=Or.error=void 0;var th=X(),S2=se(),go=yt();Or.error={message:({params:{property:e,depsCount:t,deps:r}})=>{let n=t===1?"property":"properties";return(0,th.str)`must have ${n} ${r} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:r,missingProperty:n}})=>(0,th._)`{property: ${e},
    missingProperty: ${n},
    depsCount: ${t},
    deps: ${r}}`};var b2={keyword:"dependencies",type:"object",schemaType:"object",error:Or.error,code(e){let[t,r]=w2(e);aS(e,t),uS(e,r)}};function w2({schema:e}){let t={},r={};for(let n in e){if(n==="__proto__")continue;let s=Array.isArray(e[n])?t:r;s[n]=e[n]}return[t,r]}function aS(e,t=e.schema){let{gen:r,data:n,it:s}=e;if(Object.keys(t).length===0)return;let i=r.let("missing");for(let o in t){let a=t[o];if(a.length===0)continue;let u=(0,go.propertyInData)(r,n,o,s.opts.ownProperties);e.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),s.allErrors?r.if(u,()=>{for(let c of a)(0,go.checkReportMissingProp)(e,c)}):(r.if((0,th._)`${u} && (${(0,go.checkMissingProp)(e,a,i)})`),(0,go.reportMissingProp)(e,i),r.else())}}Or.validatePropertyDeps=aS;function uS(e,t=e.schema){let{gen:r,data:n,keyword:s,it:i}=e,o=r.name("valid");for(let a in t)(0,S2.alwaysValidSchema)(i,t[a])||(r.if((0,go.propertyInData)(r,n,a,i.opts.ownProperties),()=>{let u=e.subschema({keyword:s,schemaProp:a},o);e.mergeValidEvaluated(u,o)},()=>r.var(o,!0)),e.ok(o))}Or.validateSchemaDeps=uS;Or.default=b2});var fS=E(rh=>{"use strict";Object.defineProperty(rh,"__esModule",{value:!0});var cS=X(),R2=se(),T2={message:"property name must be valid",params:({params:e})=>(0,cS._)`{propertyName: ${e.propertyName}}`},P2={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:T2,code(e){let{gen:t,schema:r,data:n,it:s}=e;if((0,R2.alwaysValidSchema)(s,r))return;let i=t.name("valid");t.forIn("key",n,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),t.if((0,cS.not)(i),()=>{e.error(!0),s.allErrors||t.break()})}),e.ok(i)}};rh.default=P2});var sh=E(nh=>{"use strict";Object.defineProperty(nh,"__esModule",{value:!0});var wu=yt(),yr=X(),$2=Zt(),Ru=se(),O2={message:"must NOT have additional properties",params:({params:e})=>(0,yr._)`{additionalProperty: ${e.additionalProperty}}`},A2={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:O2,code(e){let{gen:t,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=e;if(!i)throw new Error("ajv implementation error");let{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,Ru.alwaysValidSchema)(o,r))return;let c=(0,wu.allSchemaProperties)(n.properties),l=(0,wu.allSchemaProperties)(n.patternProperties);f(),e.ok((0,yr._)`${i} === ${$2.default.errors}`);function f(){t.forIn("key",s,v=>{!c.length&&!l.length?p(v):t.if(d(v),()=>p(v))})}function d(v){let _;if(c.length>8){let w=(0,Ru.schemaRefOrVal)(o,n.properties,"properties");_=(0,wu.isOwnProperty)(t,w,v)}else c.length?_=(0,yr.or)(...c.map(w=>(0,yr._)`${v} === ${w}`)):_=yr.nil;return l.length&&(_=(0,yr.or)(_,...l.map(w=>(0,yr._)`${(0,wu.usePattern)(e,w)}.test(${v})`))),(0,yr.not)(_)}function h(v){t.code((0,yr._)`delete ${s}[${v}]`)}function p(v){if(u.removeAdditional==="all"||u.removeAdditional&&r===!1){h(v);return}if(r===!1){e.setParams({additionalProperty:v}),e.error(),a||t.break();return}if(typeof r=="object"&&!(0,Ru.alwaysValidSchema)(o,r)){let _=t.name("valid");u.removeAdditional==="failing"?(y(v,_,!1),t.if((0,yr.not)(_),()=>{e.reset(),h(v)})):(y(v,_),a||t.if((0,yr.not)(_),()=>t.break()))}}function y(v,_,w){let g={keyword:"additionalProperties",dataProp:v,dataPropType:Ru.Type.Str};w===!1&&Object.assign(g,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(g,_)}}};nh.default=A2});var pS=E(oh=>{"use strict";Object.defineProperty(oh,"__esModule",{value:!0});var C2=zs(),dS=yt(),ih=se(),hS=sh(),I2={keyword:"properties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,parentSchema:n,data:s,it:i}=e;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&hS.default.code(new C2.KeywordCxt(i,hS.default,"additionalProperties"));let o=(0,dS.allSchemaProperties)(r);for(let f of o)i.definedProperties.add(f);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=ih.mergeEvaluated.props(t,(0,ih.toHash)(o),i.props));let a=o.filter(f=>!(0,ih.alwaysValidSchema)(i,r[f]));if(a.length===0)return;let u=t.name("valid");for(let f of a)c(f)?l(f):(t.if((0,dS.propertyInData)(t,s,f,i.opts.ownProperties)),l(f),i.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function c(f){return i.opts.useDefaults&&!i.compositeRule&&r[f].default!==void 0}function l(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};oh.default=I2});var _S=E(ah=>{"use strict";Object.defineProperty(ah,"__esModule",{value:!0});var mS=yt(),Tu=X(),yS=se(),gS=se(),N2={keyword:"patternProperties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,data:n,parentSchema:s,it:i}=e,{opts:o}=i,a=(0,mS.allSchemaProperties)(r),u=a.filter(y=>(0,yS.alwaysValidSchema)(i,r[y]));if(a.length===0||u.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;let c=o.strictSchema&&!o.allowMatchingProperties&&s.properties,l=t.name("valid");i.props!==!0&&!(i.props instanceof Tu.Name)&&(i.props=(0,gS.evaluatedPropsToName)(t,i.props));let{props:f}=i;d();function d(){for(let y of a)c&&h(y),i.allErrors?p(y):(t.var(l,!0),p(y),t.if(l))}function h(y){for(let v in c)new RegExp(y).test(v)&&(0,yS.checkStrictMode)(i,`property ${v} matches pattern ${y} (use allowMatchingProperties)`)}function p(y){t.forIn("key",n,v=>{t.if((0,Tu._)`${(0,mS.usePattern)(e,y)}.test(${v})`,()=>{let _=u.includes(y);_||e.subschema({keyword:"patternProperties",schemaProp:y,dataProp:v,dataPropType:gS.Type.Str},l),i.opts.unevaluated&&f!==!0?t.assign((0,Tu._)`${f}[${v}]`,!0):!_&&!i.allErrors&&t.if((0,Tu.not)(l),()=>t.break())})})}}};ah.default=N2});var vS=E(uh=>{"use strict";Object.defineProperty(uh,"__esModule",{value:!0});var k2=se(),q2={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){let{gen:t,schema:r,it:n}=e;if((0,k2.alwaysValidSchema)(n,r)){e.fail();return}let s=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),e.failResult(s,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};uh.default=q2});var ES=E(lh=>{"use strict";Object.defineProperty(lh,"__esModule",{value:!0});var D2=yt(),j2={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:D2.validateUnion,error:{message:"must match a schema in anyOf"}};lh.default=j2});var SS=E(ch=>{"use strict";Object.defineProperty(ch,"__esModule",{value:!0});var Pu=X(),x2=se(),L2={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,Pu._)`{passingSchemas: ${e.passing}}`},F2={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:L2,code(e){let{gen:t,schema:r,parentSchema:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let i=r,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(c),e.result(o,()=>e.reset(),()=>e.error(!0));function c(){i.forEach((l,f)=>{let d;(0,x2.alwaysValidSchema)(s,l)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,Pu._)`${u} && ${o}`).assign(o,!1).assign(a,(0,Pu._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,Pu.Name)})})}}};ch.default=F2});var bS=E(fh=>{"use strict";Object.defineProperty(fh,"__esModule",{value:!0});var M2=se(),V2={keyword:"allOf",schemaType:"array",code(e){let{gen:t,schema:r,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=t.name("valid");r.forEach((i,o)=>{if((0,M2.alwaysValidSchema)(n,i))return;let a=e.subschema({keyword:"allOf",schemaProp:o},s);e.ok(s),e.mergeEvaluated(a)})}};fh.default=V2});var TS=E(dh=>{"use strict";Object.defineProperty(dh,"__esModule",{value:!0});var $u=X(),RS=se(),H2={message:({params:e})=>(0,$u.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,$u._)`{failingKeyword: ${e.ifClause}}`},z2={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:H2,code(e){let{gen:t,parentSchema:r,it:n}=e;r.then===void 0&&r.else===void 0&&(0,RS.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=wS(n,"then"),i=wS(n,"else");if(!s&&!i)return;let o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),s&&i){let l=t.let("ifClause");e.setParams({ifClause:l}),t.if(a,c("then",l),c("else",l))}else s?t.if(a,c("then")):t.if((0,$u.not)(a),c("else"));e.pass(o,()=>e.error(!0));function u(){let l=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(l)}function c(l,f){return()=>{let d=e.subschema({keyword:l},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,$u._)`${l}`):e.setParams({ifClause:l})}}}};function wS(e,t){let r=e.schema[t];return r!==void 0&&!(0,RS.alwaysValidSchema)(e,r)}dh.default=z2});var PS=E(hh=>{"use strict";Object.defineProperty(hh,"__esModule",{value:!0});var U2=se(),B2={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,U2.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};hh.default=B2});var $S=E(ph=>{"use strict";Object.defineProperty(ph,"__esModule",{value:!0});var G2=Jd(),K2=nS(),Y2=Xd(),W2=iS(),J2=oS(),X2=lS(),Q2=fS(),Z2=sh(),eM=pS(),tM=_S(),rM=vS(),nM=ES(),sM=SS(),iM=bS(),oM=TS(),aM=PS();function uM(e=!1){let t=[rM.default,nM.default,sM.default,iM.default,oM.default,aM.default,Q2.default,Z2.default,X2.default,eM.default,tM.default];return e?t.push(K2.default,W2.default):t.push(G2.default,Y2.default),t.push(J2.default),t}ph.default=uM});var OS=E(mh=>{"use strict";Object.defineProperty(mh,"__esModule",{value:!0});var We=X(),lM={message:({schemaCode:e})=>(0,We.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,We._)`{format: ${e}}`},cM={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:lM,code(e,t){let{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:c,schemaEnv:l,self:f}=a;if(!u.validateFormats)return;s?d():h();function d(){let p=r.scopeValue("formats",{ref:f.formats,code:u.code.formats}),y=r.const("fDef",(0,We._)`${p}[${o}]`),v=r.let("fType"),_=r.let("format");r.if((0,We._)`typeof ${y} == "object" && !(${y} instanceof RegExp)`,()=>r.assign(v,(0,We._)`${y}.type || "string"`).assign(_,(0,We._)`${y}.validate`),()=>r.assign(v,(0,We._)`"string"`).assign(_,y)),e.fail$data((0,We.or)(w(),g()));function w(){return u.strictSchema===!1?We.nil:(0,We._)`${o} && !${_}`}function g(){let m=l.$async?(0,We._)`(${y}.async ? await ${_}(${n}) : ${_}(${n}))`:(0,We._)`${_}(${n})`,T=(0,We._)`(typeof ${_} == "function" ? ${m} : ${_}.test(${n}))`;return(0,We._)`${_} && ${_} !== true && ${v} === ${t} && !${T}`}}function h(){let p=f.formats[i];if(!p){w();return}if(p===!0)return;let[y,v,_]=g(p);y===t&&e.pass(m());function w(){if(u.strictSchema===!1){f.logger.warn(T());return}throw new Error(T());function T(){return`unknown format "${i}" ignored in schema at path "${c}"`}}function g(T){let A=T instanceof RegExp?(0,We.regexpCode)(T):u.code.formats?(0,We._)`${u.code.formats}${(0,We.getProperty)(i)}`:void 0,b=r.scopeValue("formats",{key:i,ref:T,code:A});return typeof T=="object"&&!(T instanceof RegExp)?[T.type||"string",T.validate,(0,We._)`${b}.validate`]:["string",T,b]}function m(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!l.$async)throw new Error("async format in sync schema");return(0,We._)`await ${_}(${n})`}return typeof v=="function"?(0,We._)`${_}(${n})`:(0,We._)`${_}.test(${n})`}}}};mh.default=cM});var AS=E(yh=>{"use strict";Object.defineProperty(yh,"__esModule",{value:!0});var fM=OS(),dM=[fM.default];yh.default=dM});var CS=E(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});Ks.contentVocabulary=Ks.metadataVocabulary=void 0;Ks.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Ks.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var NS=E(gh=>{"use strict";Object.defineProperty(gh,"__esModule",{value:!0});var hM=FE(),pM=ZE(),mM=$S(),yM=AS(),IS=CS(),gM=[hM.default,pM.default,(0,mM.default)(),yM.default,IS.metadataVocabulary,IS.contentVocabulary];gh.default=gM});var _h=E(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});_o.DiscrError=void 0;var _M;(function(e){e.Tag="tag",e.Mapping="mapping"})(_M=_o.DiscrError||(_o.DiscrError={}))});var qS=E(Eh=>{"use strict";Object.defineProperty(Eh,"__esModule",{value:!0});var Ys=X(),vh=_h(),kS=es(),vM=se(),EM={message:({params:{discrError:e,tagName:t}})=>e===vh.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,Ys._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},SM={keyword:"discriminator",type:"object",schemaType:"object",error:EM,code(e){let{gen:t,data:r,schema:n,parentSchema:s,it:i}=e,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let u=t.let("valid",!1),c=t.const("tag",(0,Ys._)`${r}${(0,Ys.getProperty)(a)}`);t.if((0,Ys._)`typeof ${c} == "string"`,()=>l(),()=>e.error(!1,{discrError:vh.DiscrError.Tag,tag:c,tagName:a})),e.ok(u);function l(){let h=d();t.if(!1);for(let p in h)t.elseIf((0,Ys._)`${c} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:vh.DiscrError.Mapping,tag:c,tagName:a}),t.endIf()}function f(h){let p=t.name("valid"),y=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(y,Ys.Name),p}function d(){var h;let p={},y=_(s),v=!0;for(let m=0;m<o.length;m++){let T=o[m];T?.$ref&&!(0,vM.schemaHasRulesButRef)(T,i.self.RULES)&&(T=kS.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,T?.$ref),T instanceof kS.SchemaEnv&&(T=T.schema));let A=(h=T?.properties)===null||h===void 0?void 0:h[a];if(typeof A!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);v=v&&(y||_(T)),w(A,m)}if(!v)throw new Error(`discriminator: "${a}" must be required`);return p;function _({required:m}){return Array.isArray(m)&&m.includes(a)}function w(m,T){if(m.const)g(m.const,T);else if(m.enum)for(let A of m.enum)g(A,T);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function g(m,T){if(typeof m!="string"||m in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[m]=T}}}};Eh.default=SM});var DS=E((VY,bM)=>{bM.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var Cu=E((Ue,xS)=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});Ue.MissingRefError=Ue.ValidationError=Ue.CodeGen=Ue.Name=Ue.nil=Ue.stringify=Ue.str=Ue._=Ue.KeywordCxt=void 0;var wM=Cd(),RM=NS(),TM=qS(),jS=DS(),PM=["/properties"],Ou="http://json-schema.org/draft-07/schema",Au=class extends wM.default{_addVocabularies(){super._addVocabularies(),RM.default.forEach(t=>this.addVocabulary(t)),this.opts.discriminator&&this.addKeyword(TM.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let t=this.opts.$data?this.$dataMetaSchema(jS,PM):jS;this.addMetaSchema(t,Ou,!1),this.refs["http://json-schema.org/schema"]=Ou}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Ou)?Ou:void 0)}};xS.exports=Ue=Au;Object.defineProperty(Ue,"__esModule",{value:!0});Ue.default=Au;var $M=zs();Object.defineProperty(Ue,"KeywordCxt",{enumerable:!0,get:function(){return $M.KeywordCxt}});var Ws=X();Object.defineProperty(Ue,"_",{enumerable:!0,get:function(){return Ws._}});Object.defineProperty(Ue,"str",{enumerable:!0,get:function(){return Ws.str}});Object.defineProperty(Ue,"stringify",{enumerable:!0,get:function(){return Ws.stringify}});Object.defineProperty(Ue,"nil",{enumerable:!0,get:function(){return Ws.nil}});Object.defineProperty(Ue,"Name",{enumerable:!0,get:function(){return Ws.Name}});Object.defineProperty(Ue,"CodeGen",{enumerable:!0,get:function(){return Ws.CodeGen}});var OM=no();Object.defineProperty(Ue,"ValidationError",{enumerable:!0,get:function(){return OM.default}});var AM=wn();Object.defineProperty(Ue,"MissingRefError",{enumerable:!0,get:function(){return AM.default}})});var FS=E((HY,LS)=>{"use strict";var CM={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};LS.exports={HEX:CM}});var KS=E((zY,GS)=>{"use strict";var{HEX:IM}=FS();function zS(e){if(BS(e,".")<3)return{host:e,isIPV4:!1};let t=e.match(/^(\b[01]?\d{1,2}|\b2[0-4]\d|\b25[0-5])(\.([01]?\d{1,2}|2[0-4]\d|25[0-5])){3}$/u)||[],[r]=t;return r?{host:kM(r,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function Sh(e){let t="",r=!0;for(let n of e){if(n!=="0"&&r===!0&&(r=!1),IM[n]===void 0)return;r||(t+=n)}return t}function NM(e){let t=0,r={error:!1,address:"",zone:""},n=[],s=[],i=!1,o=!1,a=!1;function u(){if(s.length){if(i===!1){let c=Sh(s.join(""));if(c!==void 0)n.push(c);else return r.error=!0,!1}s.length=0}return!0}for(let c=0;c<e.length;c++){let l=e[c];if(!(l==="["||l==="]"))if(l===":"){if(o===!0&&(a=!0),!u())break;if(t++,n.push(":"),t>7){r.error=!0;break}c-1>=0&&e[c-1]===":"&&(o=!0);continue}else if(l==="%"){if(!u())break;i=!0}else{s.push(l);continue}}return s.length&&(i?r.zone=s.join(""):a?n.push(s.join("")):n.push(Sh(s.join("")))),r.address=n.join(""),r}function US(e,t={}){if(BS(e,":")<2)return{host:e,isIPV6:!1};let r=NM(e);if(r.error)return{host:e,isIPV6:!1};{let n=r.address,s=r.address;return r.zone&&(n+="%"+r.zone,s+="%25"+r.zone),{host:n,escapedHost:s,isIPV6:!0}}}function kM(e,t){let r="",n=!0,s=e.length;for(let i=0;i<s;i++){let o=e[i];o==="0"&&n?(i+1<=s&&e[i+1]===t||i+1===s)&&(r+=o,n=!1):(o===t?n=!0:n=!1,r+=o)}return r}function BS(e,t){let r=0;for(let n=0;n<e.length;n++)e[n]===t&&r++;return r}var MS=/^\.\.?\//u,VS=/^\/\.(?:\/|$)/u,HS=/^\/\.\.(?:\/|$)/u,qM=/^\/?(?:.|\n)*?(?=\/|$)/u;function DM(e){let t=[];for(;e.length;)if(e.match(MS))e=e.replace(MS,"");else if(e.match(VS))e=e.replace(VS,"/");else if(e.match(HS))e=e.replace(HS,"/"),t.pop();else if(e==="."||e==="..")e="";else{let r=e.match(qM);if(r){let n=r[0];e=e.slice(n.length),t.push(n)}else throw new Error("Unexpected dot segment condition")}return t.join("")}function jM(e,t){let r=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=r(e.scheme)),e.userinfo!==void 0&&(e.userinfo=r(e.userinfo)),e.host!==void 0&&(e.host=r(e.host)),e.path!==void 0&&(e.path=r(e.path)),e.query!==void 0&&(e.query=r(e.query)),e.fragment!==void 0&&(e.fragment=r(e.fragment)),e}function xM(e,t){let r=[];if(e.userinfo!==void 0&&(r.push(e.userinfo),r.push("@")),e.host!==void 0){let n=unescape(e.host),s=zS(n);if(s.isIPV4)n=s.host;else{let i=US(s.host,{isIPV4:!1});i.isIPV6===!0?n=`[${i.escapedHost}]`:n=e.host}r.push(n)}return(typeof e.port=="number"||typeof e.port=="string")&&(r.push(":"),r.push(String(e.port))),r.length?r.join(""):void 0}GS.exports={recomposeAuthority:xM,normalizeComponentEncoding:jM,removeDotSegments:DM,normalizeIPv4:zS,normalizeIPv6:US,stringToHexStripped:Sh}});var ZS=E((UY,QS)=>{"use strict";var LM=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,FM=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function YS(e){return typeof e.secure=="boolean"?e.secure:String(e.scheme).toLowerCase()==="wss"}function WS(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function JS(e){let t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function MM(e){return e.secure=YS(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function VM(e){if((e.port===(YS(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){let[t,r]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}function HM(e,t){if(!e.path)return e.error="URN can not be parsed",e;let r=e.path.match(FM);if(r){let n=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];let s=`${n}:${t.nid||e.nid}`,i=bh[s];e.path=void 0,i&&(e=i.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function zM(e,t){let r=t.scheme||e.scheme||"urn",n=e.nid.toLowerCase(),s=`${r}:${t.nid||n}`,i=bh[s];i&&(e=i.serialize(e,t));let o=e,a=e.nss;return o.path=`${n||t.nid}:${a}`,t.skipEscape=!0,o}function UM(e,t){let r=e;return r.uuid=r.nss,r.nss=void 0,!t.tolerant&&(!r.uuid||!LM.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function BM(e){let t=e;return t.nss=(e.uuid||"").toLowerCase(),t}var XS={scheme:"http",domainHost:!0,parse:WS,serialize:JS},GM={scheme:"https",domainHost:XS.domainHost,parse:WS,serialize:JS},Iu={scheme:"ws",domainHost:!0,parse:MM,serialize:VM},KM={scheme:"wss",domainHost:Iu.domainHost,parse:Iu.parse,serialize:Iu.serialize},YM={scheme:"urn",parse:HM,serialize:zM,skipNormalize:!0},WM={scheme:"urn:uuid",parse:UM,serialize:BM,skipNormalize:!0},bh={http:XS,https:GM,ws:Iu,wss:KM,urn:YM,"urn:uuid":WM};QS.exports=bh});var Rh=E((BY,ku)=>{"use strict";var JM=require("node:url"),{normalizeIPv6:XM,normalizeIPv4:QM,removeDotSegments:vo,recomposeAuthority:ZM,normalizeComponentEncoding:Nu}=KS(),eb=ZS();function eV(e,t){return typeof e=="string"?e=Ar(Yr(e,t),t):typeof e=="object"&&(e=Yr(Ar(e,t),t)),e}function tV(e,t,r){let n=Object.assign({scheme:"null"},r),s=tb(Yr(e,n),Yr(t,n),n,!0);return Ar(s,{...n,skipEscape:!0})}function tb(e,t,r,n){let s={};return n||(e=Yr(Ar(e,r),r),t=Yr(Ar(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(s.scheme=t.scheme,s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=vo(t.path||""),s.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=vo(t.path||""),s.query=t.query):(t.path?(t.path.charAt(0)==="/"?s.path=vo(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?s.path="/"+t.path:e.path?s.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:s.path=t.path,s.path=vo(s.path)),s.query=t.query):(s.path=e.path,t.query!==void 0?s.query=t.query:s.query=e.query),s.userinfo=e.userinfo,s.host=e.host,s.port=e.port),s.scheme=e.scheme),s.fragment=t.fragment,s}function rV(e,t,r){return typeof e=="string"?(e=unescape(e),e=Ar(Nu(Yr(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=Ar(Nu(e,!0),{...r,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=Ar(Nu(Yr(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=Ar(Nu(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function Ar(e,t){let r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},n=Object.assign({},t),s=[],i=eb[(n.scheme||r.scheme||"").toLowerCase()];i&&i.serialize&&i.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&(s.push(r.scheme),s.push(":"));let o=ZM(r,n);if(o!==void 0&&(n.reference!=="suffix"&&s.push("//"),s.push(o),r.path&&r.path.charAt(0)!=="/"&&s.push("/")),r.path!==void 0){let a=r.path;!n.absolutePath&&(!i||!i.absolutePath)&&(a=vo(a)),o===void 0&&(a=a.replace(/^\/\//u,"/%2F")),s.push(a)}return r.query!==void 0&&(s.push("?"),s.push(r.query)),r.fragment!==void 0&&(s.push("#"),s.push(r.fragment)),s.join("")}var nV=Array.from({length:127},(e,t)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(t)));function sV(e){let t=0;for(let r=0,n=e.length;r<n;++r)if(t=e.charCodeAt(r),t>126||nV[t])return!0;return!1}var iV=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Yr(e,t){let r=Object.assign({},t),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},s=e.indexOf("%")!==-1;r.reference==="suffix"&&(e=(r.scheme?r.scheme+":":"")+"//"+e);let i=e.match(iV);if(i){if(n.scheme=i[1],n.userinfo=i[3],n.host=i[4],n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=i[7],n.fragment=i[8],isNaN(n.port)&&(n.port=i[5]),n.host){let a=QM(n.host);a.isIPV4===!1?n.host=XM(a.host,{isIPV4:!1}).host.toLowerCase():n.host=a.host}n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&!n.path&&n.query===void 0?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");let o=eb[(r.scheme||n.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!o||!o.unicodeSupport)&&n.host&&(r.domainHost||o&&o.domainHost)&&sV(n.host))try{n.host=JM.domainToASCII(n.host.toLowerCase())}catch(a){n.error=n.error||"Host's domain name can not be converted to ASCII: "+a}(!o||o&&!o.skipNormalize)&&(s&&n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),s&&n.userinfo!==void 0&&(n.userinfo=unescape(n.userinfo)),s&&n.host!==void 0&&(n.host=unescape(n.host)),n.path!==void 0&&n.path.length&&(n.path=encodeURI(n.path)),n.fragment!==void 0&&n.fragment.length&&(n.fragment=encodeURI(decodeURI(n.fragment)))),o&&o.parse&&o.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}var wh={normalize:eV,resolve:tV,resolveComponents:tb,equal:rV,serialize:Ar,parse:Yr};ku.exports=wh;ku.exports.default=wh;ku.exports.fastUri=wh});var qu=E(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.formatNames=Cr.fastFormats=Cr.fullFormats=void 0;function Js(e,t){return{validate:e,compare:t}}Cr.fullFormats={date:Js(sb,$h),time:Js(ib,Oh),"date-time":Js(lV,ob),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:dV,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:vV,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:hV,int32:{type:"number",validate:yV},int64:{type:"number",validate:gV},float:{type:"number",validate:nb},double:{type:"number",validate:nb},password:!0,binary:!0};Cr.fastFormats={...Cr.fullFormats,date:Js(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,$h),time:Js(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,Oh),"date-time":Js(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,ob),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};Cr.formatNames=Object.keys(Cr.fullFormats);function oV(e){return e%4===0&&(e%100!==0||e%400===0)}var aV=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,uV=[0,31,28,31,30,31,30,31,31,30,31,30,31];function sb(e){let t=aV.exec(e);if(!t)return!1;let r=+t[1],n=+t[2],s=+t[3];return n>=1&&n<=12&&s>=1&&s<=(n===2&&oV(r)?29:uV[n])}function $h(e,t){if(e&&t)return e>t?1:e<t?-1:0}var Th=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function ib(e,t){let r=Th.exec(e);if(!r)return!1;let n=+r[1],s=+r[2],i=+r[3],o=r[5];return(n<=23&&s<=59&&i<=59||n===23&&s===59&&i===60)&&(!t||o!=="")}function Oh(e,t){if(!(e&&t))return;let r=Th.exec(e),n=Th.exec(t);if(r&&n)return e=r[1]+r[2]+r[3]+(r[4]||""),t=n[1]+n[2]+n[3]+(n[4]||""),e>t?1:e<t?-1:0}var Ph=/t|\s/i;function lV(e){let t=e.split(Ph);return t.length===2&&sb(t[0])&&ib(t[1],!0)}function ob(e,t){if(!(e&&t))return;let[r,n]=e.split(Ph),[s,i]=t.split(Ph),o=$h(r,s);if(o!==void 0)return o||Oh(n,i)}var cV=/\/|:/,fV=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function dV(e){return cV.test(e)&&fV.test(e)}var rb=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function hV(e){return rb.lastIndex=0,rb.test(e)}var pV=-(2**31),mV=2**31-1;function yV(e){return Number.isInteger(e)&&e<=mV&&e>=pV}function gV(e){return Number.isInteger(e)}function nb(){return!0}var _V=/[^\\]\\Z/;function vV(e){if(_V.test(e))return!1;try{return new RegExp(e),!0}catch{return!1}}});var ab=E(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});Xs.formatLimitDefinition=void 0;var EV=Cu(),gr=X(),Tn=gr.operators,Du={formatMaximum:{okStr:"<=",ok:Tn.LTE,fail:Tn.GT},formatMinimum:{okStr:">=",ok:Tn.GTE,fail:Tn.LT},formatExclusiveMaximum:{okStr:"<",ok:Tn.LT,fail:Tn.GTE},formatExclusiveMinimum:{okStr:">",ok:Tn.GT,fail:Tn.LTE}},SV={message:({keyword:e,schemaCode:t})=>gr.str`should be ${Du[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>gr._`{comparison: ${Du[e].okStr}, limit: ${t}}`};Xs.formatLimitDefinition={keyword:Object.keys(Du),type:"string",schemaType:"string",$data:!0,error:SV,code(e){let{gen:t,data:r,schemaCode:n,keyword:s,it:i}=e,{opts:o,self:a}=i;if(!o.validateFormats)return;let u=new EV.KeywordCxt(i,a.RULES.all.format.definition,"format");u.$data?c():l();function c(){let d=t.scopeValue("formats",{ref:a.formats,code:o.code.formats}),h=t.const("fmt",gr._`${d}[${u.schemaCode}]`);e.fail$data(gr.or(gr._`typeof ${h} != "object"`,gr._`${h} instanceof RegExp`,gr._`typeof ${h}.compare != "function"`,f(h)))}function l(){let d=u.schema,h=a.formats[d];if(!h||h===!0)return;if(typeof h!="object"||h instanceof RegExp||typeof h.compare!="function")throw new Error(`"${s}": format "${d}" does not define "compare" function`);let p=t.scopeValue("formats",{key:d,ref:h,code:o.code.formats?gr._`${o.code.formats}${gr.getProperty(d)}`:void 0});e.fail$data(f(p))}function f(d){return gr._`${d}.compare(${r}, ${n}) ${Du[s].fail} 0`}},dependencies:["format"]};var bV=e=>(e.addKeyword(Xs.formatLimitDefinition),e);Xs.default=bV});var Ih=E((Eo,cb)=>{"use strict";Object.defineProperty(Eo,"__esModule",{value:!0});var Qs=qu(),wV=ab(),Ah=X(),ub=new Ah.Name("fullFormats"),RV=new Ah.Name("fastFormats"),Ch=(e,t={keywords:!0})=>{if(Array.isArray(t))return lb(e,t,Qs.fullFormats,ub),e;let[r,n]=t.mode==="fast"?[Qs.fastFormats,RV]:[Qs.fullFormats,ub],s=t.formats||Qs.formatNames;return lb(e,s,r,n),t.keywords&&wV.default(e),e};Ch.get=(e,t="full")=>{let n=(t==="fast"?Qs.fastFormats:Qs.fullFormats)[e];if(!n)throw new Error(`Unknown format "${e}"`);return n};function lb(e,t,r,n){var s,i;(s=(i=e.opts.code).formats)!==null&&s!==void 0||(i.formats=Ah._`require("ajv-formats/dist/formats").${n}`);for(let o of t)e.addFormat(o,r[o])}cb.exports=Eo=Ch;Object.defineProperty(Eo,"__esModule",{value:!0});Eo.default=Ch});var kh=E((YY,fb)=>{"use strict";var TV=Cu(),PV=Rh(),$V=Ih(),OV=Hi()({proto:!0}),Nh=class e{constructor(t){this.ajv=new TV({...t,strictSchema:!1,validateSchema:!1,allowUnionTypes:!0,uriResolver:PV}),$V(this.ajv),this.ajv.addKeyword({keyword:"fjs_type",type:"object",errors:!1,validate:(r,n)=>n instanceof Date}),this._ajvSchemas={},this._ajvOptions=t||{}}addSchema(t,r){let n=t.$id||r;if(t.$id!==void 0&&t.$id[0]==="#"&&(n=r+t.$id),this.ajv.refs[n]===void 0&&this.ajv.schemas[n]===void 0){let s=OV(t);this.convertSchemaToAjvFormat(s),this.ajv.addSchema(s,n),this._ajvSchemas[n]=t}}validate(t,r){return this.ajv.validate(t,r)}convertSchemaToAjvFormat(t){if(t!==null){t.type==="string"?(t.fjs_type="string",t.type=["string","object"]):Array.isArray(t.type)&&t.type.includes("string")&&!t.type.includes("object")&&(t.fjs_type="string",t.type.push("object"));for(let r in t)typeof t[r]=="object"&&this.convertSchemaToAjvFormat(t[r])}}getState(){return{ajvOptions:this._ajvOptions,ajvSchemas:this._ajvSchemas}}static restoreFromState(t){let r=new e(t.ajvOptions);for(let[n,s]of Object.entries(t.ajvSchemas))r.ajv.addSchema(s,n);return r}};fb.exports=Nh});var Dh=E((WY,qh)=>{"use strict";function AV(e,t,r,n){let s="";return t.validatorSchemasIds.size>0?(s+=`const validatorState = ${JSON.stringify(n.getState())}
`,s+=`const validator = Validator.restoreFromState(validatorState)
`):s+=`const validator = null
`,`
  'use strict'
  const { dependencies } = require('fast-json-stringify/lib/standalone')

  const { Serializer, Validator } = dependencies

  const serializerState = ${JSON.stringify(r.getState())}
  const serializer = Serializer.restoreFromState(serializerState)

  ${s}

  module.exports = ${e.toString()}(validator, serializer)`}qh.exports=AV;qh.exports.dependencies={Serializer:Vf(),Validator:kh()}});var hb=E((XY,db)=>{"use strict";var{dependencies:CV}=Dh(),{Serializer:IV,Validator:JY}=CV,NV={mode:"standalone"},kV=IV.restoreFromState(NV),qV=null;db.exports=function(t,r){function n(i){let o=i&&typeof i.toJSON=="function"?i.toJSON():i,a=!1,u="{";return o.statusCode!==void 0&&(!a&&(a=!0)||(u+=","),u+='"statusCode":',u+=r.asNumber(o.statusCode)),o.code!==void 0&&(!a&&(a=!0)||(u+=","),u+='"code":',u+=r.asString(o.code)),o.error!==void 0&&(!a&&(a=!0)||(u+=","),u+='"error":',u+=r.asString(o.error)),o.message!==void 0&&(!a&&(a=!0)||(u+=","),u+='"message":',u+=r.asString(o.message)),u+"}"}return n}(qV,kV)});var So=E((QY,gb)=>{"use strict";var pb=require("node:http").STATUS_CODES,DV=Fc(),{kReplyHeaders:Zs,kReplyNextErrorHandler:ju,kReplyIsRunningOnErrorHook:jV,kReplyHasStatusCode:xV,kRouteContext:yb}=ct(),{FST_ERR_REP_INVALID_PAYLOAD_TYPE:LV,FST_ERR_FAILED_ERROR_SERIALIZATION:FV}=St(),{getSchemaSerializer:MV}=zi(),jh=hb(),VV={func:zV,toJSON(){return this.func.name.toString()+"()"}};function HV(e,t,r){e[jV]=!1;let n=e[yb];if(e[ju]===!1){mb(t,e,function(a,u){try{a.raw.writeHead(a.raw.statusCode,a[Zs])}catch(c){a.log.warn({req:a.request,res:a,err:c},c&&c.message),a.raw.writeHead(a.raw.statusCode)}a.raw.end(u)});return}let s=e[ju]||n.errorHandler;e[ju]=Object.getPrototypeOf(s),delete e[Zs]["content-type"],delete e[Zs]["content-length"];let i=s.func;if(!i){e[ju]=!1,mb(t,e,r);return}let o=i(t,e.request,e);o!==void 0&&(o!==null&&typeof o.then=="function"?DV(o,e):e.send(o))}function zV(e,t,r){if(BV(e,r),!r[xV]||r.statusCode===200){let n=e.statusCode||e.status;r.code(n>=400?n:500)}r.statusCode<500?r.log.info({res:r,err:e},e&&e.message):r.log.error({req:t,res:r,err:e},e&&e.message),r.send(e)}function mb(e,t,r){let n=t.raw,s=t.statusCode,i;try{let o=MV(t[yb],s,t[Zs]["content-type"]);i=o===!1?jh({error:pb[s+""],code:e.code,message:e.message,statusCode:s}):o(Object.create(e,{error:{value:pb[s+""]},message:{value:e.message},statusCode:{value:s}}))}catch(o){t.log.error({err:o,statusCode:n.statusCode},"The serializer for the given status code failed"),t.code(500),i=jh(new FV(o.message,e.message))}typeof i!="string"&&!Buffer.isBuffer(i)&&(i=jh(new LV(typeof i))),t[Zs]["content-type"]="application/json; charset=utf-8",t[Zs]["content-length"]=""+Buffer.byteLength(i),r(t,i)}function UV(e=VV,t){if(!t)return e;let r=Object.create(e);return r.func=t,r}function BV(e,t){let r=t.raw,n=r.statusCode;n=n>=400?n:500,e!=null&&(e.headers!==void 0&&t.headers(e.headers),e.status>=400?n=e.status:e.statusCode>=400&&(n=e.statusCode)),r.statusCode=n}gb.exports={buildErrorHandler:UV,handleError:HV}});var Hu=E((ZY,Vu)=>{"use strict";var Mh=require("node:stream").finished,{kFourOhFourContext:_b,kPublicRouteContext:vb,kReplyErrorHandlerCalled:Pb,kReplyHijacked:bo,kReplyStartTime:wo,kReplyEndTime:Hh,kReplySerializer:Wr,kReplySerializerDefault:Lu,kReplyIsError:Fu,kReplyHeaders:qe,kReplyTrailers:ft,kReplyHasStatusCode:zh,kReplyIsRunningOnErrorHook:Uh,kReplyNextErrorHandler:GV,kDisableRequestLogging:$b,kSchemaResponse:Mu,kReplyCacheSerializeFns:Pn,kSchemaController:xh,kOptions:KV,kRouteContext:ce}=ct(),{onSendHookRunner:Ob,onResponseHookRunner:YV,preHandlerHookRunner:WV,preSerializationHookRunner:JV}=dn(),Eb=zc()[Symbol.for("internals")],XV=Vi(),Vh=XV.now,{handleError:Sb}=So(),{getSchemaSerializer:QV}=zi(),Lh={JSON:"application/json; charset=utf-8",PLAIN:"text/plain; charset=utf-8",OCTET:"application/octet-stream"},{FST_ERR_REP_INVALID_PAYLOAD_TYPE:ZV,FST_ERR_REP_ALREADY_SENT:Ab,FST_ERR_REP_SENT_VALUE:eH,FST_ERR_SEND_INSIDE_ONERR:tH,FST_ERR_BAD_STATUS_CODE:rH,FST_ERR_BAD_TRAILER_NAME:nH,FST_ERR_BAD_TRAILER_VALUE:sH,FST_ERR_MISSING_SERIALIZATION_FN:iH,FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN:oH}=St(),{FSTDEP010:aH,FSTDEP013:uH,FSTDEP019:lH}=zr();function ke(e,t,r){this.raw=e,this[Wr]=null,this[Pb]=!1,this[Fu]=!1,this[Uh]=!1,this.request=t,this[qe]={},this[ft]=null,this[zh]=!1,this[wo]=void 0,this.log=r}ke.props=[];Object.defineProperties(ke.prototype,{[ce]:{get(){return this.request[ce]}},context:{get(){return lH(),this.request[ce]}},server:{get(){return this.request[ce].server}},sent:{enumerable:!0,get(){return(this[bo]||this.raw.writableEnded)===!0},set(e){if(aH(),e!==!0)throw new eH;if(this.sent&&this[bo])throw new Ab(this.request.url,this.request.method);this[bo]=!0}},statusCode:{get(){return this.raw.statusCode},set(e){this.code(e)}},[vb]:{get(){return this.request[vb]}}});ke.prototype.hijack=function(){return this[bo]=!0,this};ke.prototype.send=function(e){if(this[Uh]===!0)throw new tH;if(this.sent)return this.log.warn({err:new Ab(this.request.url,this.request.method)}),this;if(e instanceof Error||this[Fu]===!0)return this[Fu]=!1,Ro(this,e,ss),this;if(e===void 0)return ss(this,e),this;let t=this.getHeader("content-type"),r=t!==void 0;if(e!==null){if(typeof e.pipe=="function")return ss(this,e),this;if(e?.buffer instanceof ArrayBuffer){r===!1&&(this[qe]["content-type"]=Lh.OCTET);let n=Buffer.isBuffer(e)?e:Buffer.from(e.buffer,e.byteOffset,e.byteLength);return ss(this,n),this}if(r===!1&&typeof e=="string")return this[qe]["content-type"]=Lh.PLAIN,ss(this,e),this}if(this[Wr]!==null){if(typeof e!="string")return bb(this,e),this;e=this[Wr](e)}else if(r===!1||t.indexOf("json")>-1){if(r===!1)this[qe]["content-type"]=Lh.JSON;else if(t.indexOf("charset")===-1){let n=t.trim();n.endsWith(";")?this[qe]["content-type"]=`${n} charset=utf-8`:this[qe]["content-type"]=`${n}; charset=utf-8`}if(typeof e!="string")return bb(this,e),this}return ss(this,e),this};ke.prototype.getHeader=function(e){e=e.toLowerCase();let t=this.raw,r=this[qe][e];return r===void 0&&t.hasHeader(e)&&(r=t.getHeader(e)),r};ke.prototype.getHeaders=function(){return{...this.raw.getHeaders(),...this[qe]}};ke.prototype.hasHeader=function(e){return e=e.toLowerCase(),this[qe][e]!==void 0||this.raw.hasHeader(e)};ke.prototype.removeHeader=function(e){return delete this[qe][e.toLowerCase()],this};ke.prototype.header=function(e,t=""){return e=e.toLowerCase(),this[qe][e]&&e==="set-cookie"?(typeof this[qe][e]=="string"&&(this[qe][e]=[this[qe][e]]),Array.isArray(t)?Array.prototype.push.apply(this[qe][e],t):this[qe][e].push(t)):this[qe][e]=t,this};ke.prototype.headers=function(e){let t=Object.keys(e);for(var r=0;r!==t.length;++r){let n=t[r];this.header(n,e[n])}return this};var cH=new Set(["transfer-encoding","content-length","host","cache-control","max-forwards","te","authorization","set-cookie","content-encoding","content-type","content-range","trailer"]);ke.prototype.trailer=function(e,t){if(e=e.toLowerCase(),cH.has(e))throw new nH(e);if(typeof t!="function")throw new sH(e,typeof t);return this[ft]===null&&(this[ft]={}),this[ft][e]=t,this};ke.prototype.hasTrailer=function(e){return this[ft]?.[e.toLowerCase()]!==void 0};ke.prototype.removeTrailer=function(e){return this[ft]===null?this:(this[ft][e.toLowerCase()]=void 0,this)};ke.prototype.code=function(e){let t=Number(e);if(isNaN(t)||t<100||t>599)throw new rH(e||String(e));return this.raw.statusCode=t,this[zh]=!0,this};ke.prototype.status=ke.prototype.code;ke.prototype.getSerializationFunction=function(e,t){let r;return typeof e=="string"||typeof e=="number"?typeof t=="string"?r=this[ce][Mu]?.[e]?.[t]:r=this[ce][Mu]?.[e]:typeof e=="object"&&(r=this[ce][Pn]?.get(e)),r};ke.prototype.compileSerializationSchema=function(e,t=null,r=null){let{request:n}=this,{method:s,url:i}=n;if(this[ce][Pn]?.has(e))return this[ce][Pn].get(e);let a=(this[ce].serializerCompiler||this.server[xh].serializerCompiler||this.server[xh].setupSerializer(this.server[KV])||this.server[xh].serializerCompiler)({schema:e,method:s,url:i,httpStatus:t,contentType:r});return this[ce][Pn]==null&&(this[ce][Pn]=new WeakMap),this[ce][Pn].set(e,a),a};ke.prototype.serializeInput=function(e,t,r,n){let s=r,i;if(r=typeof t=="string"||typeof t=="number"?t:r,n=r&&s!==r?s:n,r!=null){if(n!=null?i=this[ce][Mu]?.[r]?.[n]:i=this[ce][Mu]?.[r],i==null)throw n?new oH(r,n):new iH(r)}else this[ce][Pn]?.has(t)?i=this[ce][Pn].get(t):i=this.compileSerializationSchema(t,r,n);return i(e)};ke.prototype.serialize=function(e){return this[Wr]!==null?this[Wr](e):this[ce]&&this[ce][Lu]?this[ce][Lu](e,this.raw.statusCode):Ib(this[ce],e,this.raw.statusCode)};ke.prototype.serializer=function(e){return this[Wr]=e,this};ke.prototype.type=function(e){return this[qe]["content-type"]=e,this};ke.prototype.redirect=function(e,t){return typeof e=="string"&&(t=e,e=this[zh]?this.raw.statusCode:302),this.header("location",t).code(e).send()};ke.prototype.callNotFound=function(){return gH(this),this};ke.prototype.getResponseTime=function(){let e=0;return this[wo]!==void 0&&(e=(this[Hh]||Vh())-this[wo]),e};ke.prototype.then=function(e,t){if(this.sent){e();return}Mh(this.raw,r=>{r&&r.code!=="ERR_STREAM_PREMATURE_CLOSE"?t?t(r):this.log&&this.log.warn("unhandled rejection on reply.then"):e()})};function bb(e,t){e[ce].preSerialization!==null?JV(e[ce].preSerialization,e.request,e,t,wb):wb(null,e.request,e,t)}function wb(e,t,r,n){if(e!=null){Ro(r,e);return}try{r[Wr]!==null?n=r[Wr](n):r[ce]&&r[ce][Lu]?n=r[ce][Lu](n,r.raw.statusCode):n=Ib(r[ce],n,r.raw.statusCode,r[qe]["content-type"])}catch(s){fH(s,r),Ro(r,s);return}ss(r,n)}function fH(e,t){e.serialization=t[ce].config}function ss(e,t){e[ce].onSend!==null?Ob(e[ce].onSend,e.request,e,t,dH):Cb(e,t)}function dH(e,t,r,n){e!=null?Ro(r,e):Cb(r,n)}function Fh(e,t){let r=e.raw;try{r.writeHead(t,e[qe])}catch(n){throw n.code==="ERR_HTTP_HEADERS_SENT"&&e.log.warn(`Reply was already sent, did you forget to "return reply" in the "${e.request.raw.url}" (${e.request.raw.method}) route?`),n}}function Cb(e,t){let r=e.raw,n=e.request,s=r.statusCode;if(e[ft]!==null){let i=Object.keys(e[ft]),o="";for(let a of i)typeof e[ft][a]=="function"&&(o+=" ",o+=a);e.header("Transfer-Encoding","chunked"),e.header("Trailer",o.trim())}if(t==null){s>=200&&s!==204&&s!==304&&n.method!=="HEAD"&&e[ft]===null&&(e[qe]["content-length"]="0"),Fh(e,s),xu(t,r,e);return}if(s>=100&&s<200||s===204){e.removeHeader("content-type"),e.removeHeader("content-length"),Fh(e,s),xu(void 0,r,e),typeof t.resume=="function"&&(t.on("error",Nb),t.resume());return}if(typeof t.pipe=="function"){hH(t,r,e);return}if(typeof t!="string"&&!Buffer.isBuffer(t))throw new ZV(typeof t);if(e[ft]===null){let i=e[qe]["content-length"];(!i||n.raw.method!=="HEAD"&&Number(i)!==Buffer.byteLength(t))&&(e[qe]["content-length"]=""+Buffer.byteLength(t))}Fh(e,s),r.write(t),xu(t,r,e)}function Rb(e,t,r){t.code==="ERR_STREAM_PREMATURE_CLOSE"?e[$b]||e.info({res:r},"stream closed prematurely"):e.warn({err:t},"response terminated with an error with headers already sent")}function hH(e,t,r){let n=!0,s=!1;if(pH(e,t,r),Mh(e,{readable:!0,writable:!1},function(i){n=!1,i!=null&&(t.headersSent||r.request.raw.aborted===!0?(s||(s=!0,Rb(r.log,i,t)),t.destroy()):Ro(r,i))}),Mh(t,function(i){n&&(i!=null&&t.headersSent&&!s&&(s=!0,Rb(r.log,i,t)),typeof e.destroy=="function"?e.destroy():typeof e.close=="function"?e.close(Nb):typeof e.abort=="function"?e.abort():r.log.warn("stream payload does not end properly"))}),t.headersSent)r.log.warn("response will send, but you shouldn't use res.writeHead in stream mode");else for(let i in r[qe])t.setHeader(i,r[qe][i]);e.pipe(t)}function xu(e,t,r){if(r[ft]===null){t.end(null,null,null);return}let n=Object.keys(r[ft]),s={},i=0,o=!0;function a(){i===0&&(t.addTrailers(s),t.end(null,null,null))}for(let u of n){let c=function(f,d){i++,f?r.log.debug(f):s[u]=d,process.nextTick(a)};if(typeof r[ft][u]!="function")continue;o=!1,i--;let l=r[ft][u](r,e,c);typeof l=="object"&&typeof l.then=="function"?l.then(f=>c(null,f),c):l!=null&&(uH(),c(null,l))}o&&t.end(null,null,null)}function pH(e,t,r){r[ft]!==null&&e.on("end",()=>xu(null,t,r))}function Ro(e,t,r){e[ce].onError!==null&&!e[GV]?(e[Uh]=!0,Ob(e[ce].onError,e.request,e,t,()=>Sb(e,t,r))):Sb(e,t,r)}function mH(e){e[wo]=Vh();let t=r=>{e[Hh]=Vh(),e.raw.removeListener("finish",t),e.raw.removeListener("error",t);let n=e[ce];n&&n.onResponse!==null?YV(n.onResponse,e.request,e,Tb):Tb(r,e.request,e)};e.raw.on("finish",t),e.raw.on("error",t)}function Tb(e,t,r){if(r.log[$b])return;let n=r.getResponseTime();if(e!=null){r.log.error({res:r,err:e,responseTime:n},"request errored");return}r.log.info({res:r,responseTime:n},"request completed")}function yH(e){let t=e.props.slice();function r(n,s,i){this.raw=n,this[Fu]=!1,this[Pb]=!1,this[bo]=!1,this[Wr]=null,this.request=s,this[qe]={},this[ft]=null,this[wo]=void 0,this[Hh]=void 0,this.log=i;for(var o,a=0;a<t.length;a++)o=t[a],this[o.key]=o.value}return Object.setPrototypeOf(r.prototype,e.prototype),Object.setPrototypeOf(r,e),r.parent=e,r.props=t,r}function gH(e){if(e[ce][_b]===null){e.log.warn("Trying to send a NotFound error inside a 404 handler. Sending basic 404 response."),e.code(404).send("404 Not Found");return}e.request[ce]=e[ce][_b],e[ce].preHandler!==null?WV(e[ce].preHandler,e.request,e,Eb.preHandlerCallback):Eb.preHandlerCallback(null,e.request,e)}function Ib(e,t,r,n){let s=QV(e,r,n);return s?s(t):JSON.stringify(t)}function Nb(){}Vu.exports=ke;Vu.exports.buildReply=yH;Vu.exports.setupResponseListeners=mH});var qb=E((eW,kb)=>{"use strict";kb.exports=_H;function _H(e){if(!e)throw new TypeError("argument req is required");var t=EH(e.headers["x-forwarded-for"]||""),r=vH(e),n=[r].concat(t);return n}function vH(e){return e.socket?e.socket.remoteAddress:e.connection.remoteAddress}function EH(e){for(var t=e.length,r=[],n=e.length,s=e.length-1;s>=0;s--)switch(e.charCodeAt(s)){case 32:n===t&&(n=t=s);break;case 44:n!==t&&r.push(e.substring(n,t)),n=t=s;break;default:n=s;break}return n!==t&&r.push(e.substring(n,t)),r}});var jb=E((Db,To)=>{(function(){var e,t,r,n,s,i,o,a,u;t={},a=this,typeof To<"u"&&To!==null&&To.exports?To.exports=t:a.ipaddr=t,o=function(c,l,f,d){var h,p;if(c.length!==l.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");for(h=0;d>0;){if(p=f-d,p<0&&(p=0),c[h]>>p!==l[h]>>p)return!1;d-=f,h+=1}return!0},t.subnetMatch=function(c,l,f){var d,h,p,y,v;f==null&&(f="unicast");for(p in l)for(y=l[p],y[0]&&!(y[0]instanceof Array)&&(y=[y]),d=0,h=y.length;d<h;d++)if(v=y[d],c.kind()===v[0].kind()&&c.match.apply(c,v))return p;return f},t.IPv4=function(){function c(l){var f,d,h;if(l.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");for(f=0,d=l.length;f<d;f++)if(h=l[f],!(0<=h&&h<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=l}return c.prototype.kind=function(){return"ipv4"},c.prototype.toString=function(){return this.octets.join(".")},c.prototype.toNormalizedString=function(){return this.toString()},c.prototype.toByteArray=function(){return this.octets.slice(0)},c.prototype.match=function(l,f){var d;if(f===void 0&&(d=l,l=d[0],f=d[1]),l.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return o(this.octets,l.octets,8,f)},c.prototype.SpecialRanges={unspecified:[[new c([0,0,0,0]),8]],broadcast:[[new c([255,255,255,255]),32]],multicast:[[new c([224,0,0,0]),4]],linkLocal:[[new c([169,254,0,0]),16]],loopback:[[new c([127,0,0,0]),8]],carrierGradeNat:[[new c([100,64,0,0]),10]],private:[[new c([10,0,0,0]),8],[new c([172,16,0,0]),12],[new c([192,168,0,0]),16]],reserved:[[new c([192,0,0,0]),24],[new c([192,0,2,0]),24],[new c([192,88,99,0]),24],[new c([198,51,100,0]),24],[new c([203,0,113,0]),24],[new c([240,0,0,0]),4]]},c.prototype.range=function(){return t.subnetMatch(this,this.SpecialRanges)},c.prototype.toIPv4MappedAddress=function(){return t.IPv6.parse("::ffff:"+this.toString())},c.prototype.prefixLengthFromSubnetMask=function(){var l,f,d,h,p,y,v;for(v={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0},l=0,p=!1,f=d=3;d>=0;f=d+=-1)if(h=this.octets[f],h in v){if(y=v[h],p&&y!==0)return null;y!==8&&(p=!0),l+=y}else return null;return 32-l},c}(),r="(0?\\d+|0x[a-f0-9]+)",n={fourOctet:new RegExp("^"+r+"\\."+r+"\\."+r+"\\."+r+"$","i"),longValue:new RegExp("^"+r+"$","i")},t.IPv4.parser=function(c){var l,f,d,h,p;if(f=function(y){return y[0]==="0"&&y[1]!=="x"?parseInt(y,8):parseInt(y)},l=c.match(n.fourOctet))return function(){var y,v,_,w;for(_=l.slice(1,6),w=[],y=0,v=_.length;y<v;y++)d=_[y],w.push(f(d));return w}();if(l=c.match(n.longValue)){if(p=f(l[1]),p>4294967295||p<0)throw new Error("ipaddr: address outside defined range");return function(){var y,v;for(v=[],h=y=0;y<=24;h=y+=8)v.push(p>>h&255);return v}().reverse()}else return null},t.IPv6=function(){function c(l,f){var d,h,p,y,v,_;if(l.length===16)for(this.parts=[],d=h=0;h<=14;d=h+=2)this.parts.push(l[d]<<8|l[d+1]);else if(l.length===8)this.parts=l;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(_=this.parts,p=0,y=_.length;p<y;p++)if(v=_[p],!(0<=v&&v<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");f&&(this.zoneId=f)}return c.prototype.kind=function(){return"ipv6"},c.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},c.prototype.toRFC5952String=function(){var l,f,d,h,p;for(h=/((^|:)(0(:|$)){2,})/g,p=this.toNormalizedString(),l=0,f=-1;d=h.exec(p);)d[0].length>f&&(l=d.index,f=d[0].length);return f<0?p:p.substring(0,l)+"::"+p.substring(l+f)},c.prototype.toByteArray=function(){var l,f,d,h,p;for(l=[],p=this.parts,f=0,d=p.length;f<d;f++)h=p[f],l.push(h>>8),l.push(h&255);return l},c.prototype.toNormalizedString=function(){var l,f,d;return l=function(){var h,p,y,v;for(y=this.parts,v=[],h=0,p=y.length;h<p;h++)f=y[h],v.push(f.toString(16));return v}.call(this).join(":"),d="",this.zoneId&&(d="%"+this.zoneId),l+d},c.prototype.toFixedLengthString=function(){var l,f,d;return l=function(){var h,p,y,v;for(y=this.parts,v=[],h=0,p=y.length;h<p;h++)f=y[h],v.push(f.toString(16).padStart(4,"0"));return v}.call(this).join(":"),d="",this.zoneId&&(d="%"+this.zoneId),l+d},c.prototype.match=function(l,f){var d;if(f===void 0&&(d=l,l=d[0],f=d[1]),l.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return o(this.parts,l.parts,16,f)},c.prototype.SpecialRanges={unspecified:[new c([0,0,0,0,0,0,0,0]),128],linkLocal:[new c([65152,0,0,0,0,0,0,0]),10],multicast:[new c([65280,0,0,0,0,0,0,0]),8],loopback:[new c([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new c([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new c([0,0,0,0,0,65535,0,0]),96],rfc6145:[new c([0,0,0,0,65535,0,0,0]),96],rfc6052:[new c([100,65435,0,0,0,0,0,0]),96],"6to4":[new c([8194,0,0,0,0,0,0,0]),16],teredo:[new c([8193,0,0,0,0,0,0,0]),32],reserved:[[new c([8193,3512,0,0,0,0,0,0]),32]]},c.prototype.range=function(){return t.subnetMatch(this,this.SpecialRanges)},c.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},c.prototype.toIPv4Address=function(){var l,f,d;if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");return d=this.parts.slice(-2),l=d[0],f=d[1],new t.IPv4([l>>8,l&255,f>>8,f&255])},c.prototype.prefixLengthFromSubnetMask=function(){var l,f,d,h,p,y,v;for(v={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0},l=0,p=!1,f=d=7;d>=0;f=d+=-1)if(h=this.parts[f],h in v){if(y=v[h],p&&y!==0)return null;y!==16&&(p=!0),l+=y}else return null;return 128-l},c}(),s="(?:[0-9a-f]+::?)+",u="%[0-9a-z]{1,}",i={zoneIndex:new RegExp(u,"i"),native:new RegExp("^(::)?("+s+")?([0-9a-f]+)?(::)?("+u+")?$","i"),transitional:new RegExp("^((?:"+s+")|(?:::)(?:"+s+")?)"+(r+"\\."+r+"\\."+r+"\\."+r)+("("+u+")?$"),"i")},e=function(c,l){var f,d,h,p,y,v;if(c.indexOf("::")!==c.lastIndexOf("::"))return null;for(v=(c.match(i.zoneIndex)||[])[0],v&&(v=v.substring(1),c=c.replace(/%.+$/,"")),f=0,d=-1;(d=c.indexOf(":",d+1))>=0;)f++;if(c.substr(0,2)==="::"&&f--,c.substr(-2,2)==="::"&&f--,f>l)return null;for(y=l-f,p=":";y--;)p+="0:";return c=c.replace("::",p),c[0]===":"&&(c=c.slice(1)),c[c.length-1]===":"&&(c=c.slice(0,-1)),l=function(){var _,w,g,m;for(g=c.split(":"),m=[],_=0,w=g.length;_<w;_++)h=g[_],m.push(parseInt(h,16));return m}(),{parts:l,zoneId:v}},t.IPv6.parser=function(c){var l,f,d,h,p,y,v;if(i.native.test(c))return e(c,8);if((h=c.match(i.transitional))&&(v=h[6]||"",l=e(h[1].slice(0,-1)+v,6),l.parts)){for(y=[parseInt(h[2]),parseInt(h[3]),parseInt(h[4]),parseInt(h[5])],f=0,d=y.length;f<d;f++)if(p=y[f],!(0<=p&&p<=255))return null;return l.parts.push(y[0]<<8|y[1]),l.parts.push(y[2]<<8|y[3]),{parts:l.parts,zoneId:l.zoneId}}return null},t.IPv4.isIPv4=t.IPv6.isIPv6=function(c){return this.parser(c)!==null},t.IPv4.isValid=function(c){var l;try{return new this(this.parser(c)),!0}catch(f){return l=f,!1}},t.IPv4.isValidFourPartDecimal=function(c){return!!(t.IPv4.isValid(c)&&c.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},t.IPv6.isValid=function(c){var l,f;if(typeof c=="string"&&c.indexOf(":")===-1)return!1;try{return l=this.parser(c),new this(l.parts,l.zoneId),!0}catch(d){return f=d,!1}},t.IPv4.parse=function(c){var l;if(l=this.parser(c),l===null)throw new Error("ipaddr: string is not formatted like ip address");return new this(l)},t.IPv6.parse=function(c){var l;if(l=this.parser(c),l.parts===null)throw new Error("ipaddr: string is not formatted like ip address");return new this(l.parts,l.zoneId)},t.IPv4.parseCIDR=function(c){var l,f,d;if((f=c.match(/^(.+)\/(\d+)$/))&&(l=parseInt(f[2]),l>=0&&l<=32))return d=[this.parse(f[1]),l],Object.defineProperty(d,"toString",{value:function(){return this.join("/")}}),d;throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},t.IPv4.subnetMaskFromPrefixLength=function(c){var l,f,d;if(c=parseInt(c),c<0||c>32)throw new Error("ipaddr: invalid IPv4 prefix length");for(d=[0,0,0,0],f=0,l=Math.floor(c/8);f<l;)d[f]=255,f++;return l<4&&(d[l]=Math.pow(2,c%8)-1<<8-c%8),new this(d)},t.IPv4.broadcastAddressFromCIDR=function(c){var l,f,d,h,p,y;try{for(l=this.parseCIDR(c),h=l[0].toByteArray(),y=this.subnetMaskFromPrefixLength(l[1]).toByteArray(),p=[],d=0;d<4;)p.push(parseInt(h[d],10)|parseInt(y[d],10)^255),d++;return new this(p)}catch(v){throw f=v,new Error("ipaddr: the address does not have IPv4 CIDR format")}},t.IPv4.networkAddressFromCIDR=function(c){var l,f,d,h,p,y;try{for(l=this.parseCIDR(c),h=l[0].toByteArray(),y=this.subnetMaskFromPrefixLength(l[1]).toByteArray(),p=[],d=0;d<4;)p.push(parseInt(h[d],10)&parseInt(y[d],10)),d++;return new this(p)}catch(v){throw f=v,new Error("ipaddr: the address does not have IPv4 CIDR format")}},t.IPv6.parseCIDR=function(c){var l,f,d;if((f=c.match(/^(.+)\/(\d+)$/))&&(l=parseInt(f[2]),l>=0&&l<=128))return d=[this.parse(f[1]),l],Object.defineProperty(d,"toString",{value:function(){return this.join("/")}}),d;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},t.isValid=function(c){return t.IPv6.isValid(c)||t.IPv4.isValid(c)},t.parse=function(c){if(t.IPv6.isValid(c))return t.IPv6.parse(c);if(t.IPv4.isValid(c))return t.IPv4.parse(c);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},t.parseCIDR=function(c){var l;try{return t.IPv6.parseCIDR(c)}catch(f){l=f;try{return t.IPv4.parseCIDR(c)}catch(d){throw l=d,new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},t.fromByteArray=function(c){var l;if(l=c.length,l===4)return new t.IPv4(c);if(l===16)return new t.IPv6(c);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},t.process=function(c){var l;return l=this.parse(c),l.kind()==="ipv6"&&l.isIPv4MappedAddress()?l.toIPv4Address():l}}).call(Db)});var Vb=E((tW,Bu)=>{"use strict";Bu.exports=$H;Bu.exports.all=Fb;Bu.exports.compile=Mb;var SH=qb(),Lb=jb(),bH=/^[0-9]+$/,zu=Lb.isValid,Uu=Lb.parse,xb={linklocal:["169.254.0.0/16","fe80::/10"],loopback:["127.0.0.1/8","::1/128"],uniquelocal:["10.0.0.0/8","172.16.0.0/12","192.168.0.0/16","fc00::/7"]};function Fb(e,t){var r=SH(e);if(!t)return r;typeof t!="function"&&(t=Mb(t));for(var n=0;n<r.length-1;n++)t(r[n],n)||(r.length=n+1);return r}function Mb(e){if(!e)throw new TypeError("argument is required");var t;if(typeof e=="string")t=[e];else if(Array.isArray(e))t=e.slice();else throw new TypeError("unsupported trust argument");for(var r=0;r<t.length;r++)e=t[r],Object.prototype.hasOwnProperty.call(xb,e)&&(e=xb[e],t.splice.apply(t,[r,1].concat(e)),r+=e.length-1);return RH(wH(t))}function wH(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=TH(e[r]);return t}function RH(e){var t=e.length;return t===0?OH:t===1?CH(e[0]):AH(e)}function TH(e){var t=e.lastIndexOf("/"),r=t!==-1?e.substring(0,t):e;if(!zu(r))throw new TypeError("invalid IP address: "+r);var n=Uu(r);t===-1&&n.kind()==="ipv6"&&n.isIPv4MappedAddress()&&(n=n.toIPv4Address());var s=n.kind()==="ipv6"?128:32,i=t!==-1?e.substring(t+1,e.length):null;if(i===null?i=s:bH.test(i)?i=parseInt(i,10):n.kind()==="ipv4"&&zu(i)?i=PH(i):i=null,i<=0||i>s)throw new TypeError("invalid range on address: "+e);return[n,i]}function PH(e){var t=Uu(e),r=t.kind();return r==="ipv4"?t.prefixLengthFromSubnetMask():null}function $H(e,t){if(!e)throw new TypeError("req argument is required");if(!t)throw new TypeError("trust argument is required");var r=Fb(e,t),n=r[r.length-1];return n}function OH(){return!1}function AH(e){return function(r){if(!zu(r))return!1;for(var n=Uu(r),s,i=n.kind(),o=0;o<e.length;o++){var a=e[o],u=a[0],c=u.kind(),l=a[1],f=n;if(i!==c){if(c==="ipv4"&&!n.isIPv4MappedAddress())continue;s||(s=c==="ipv4"?n.toIPv4Address():n.toIPv4MappedAddress()),f=s}if(f.match(u,l))return!0}return!1}}function CH(e){var t=e[0],r=t.kind(),n=r==="ipv4",s=e[1];return function(o){if(!zu(o))return!1;var a=Uu(o),u=a.kind();if(u!==r){if(n&&!a.isIPv4MappedAddress())return!1;a=n?a.toIPv4Address():a.toIPv4MappedAddress()}return a.match(t,s)}}});var Po=E((rW,Hb)=>{var IH="2.0.0",NH=Number.MAX_SAFE_INTEGER||9007199254740991,kH=16,qH=250,DH=["major","premajor","minor","preminor","patch","prepatch","prerelease"];Hb.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:kH,MAX_SAFE_BUILD_LENGTH:qH,MAX_SAFE_INTEGER:NH,RELEASE_TYPES:DH,SEMVER_SPEC_VERSION:IH,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var $o=E((nW,zb)=>{var jH=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};zb.exports=jH});var ei=E((Jr,Ub)=>{var{MAX_SAFE_COMPONENT_LENGTH:Bh,MAX_SAFE_BUILD_LENGTH:xH,MAX_LENGTH:LH}=Po(),FH=$o();Jr=Ub.exports={};var MH=Jr.re=[],VH=Jr.safeRe=[],G=Jr.src=[],K=Jr.t={},HH=0,Gh="[a-zA-Z0-9-]",zH=[["\\s",1],["\\d",LH],[Gh,xH]],UH=e=>{for(let[t,r]of zH)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},ie=(e,t,r)=>{let n=UH(t),s=HH++;FH(e,s,t),K[e]=s,G[s]=t,MH[s]=new RegExp(t,r?"g":void 0),VH[s]=new RegExp(n,r?"g":void 0)};ie("NUMERICIDENTIFIER","0|[1-9]\\d*");ie("NUMERICIDENTIFIERLOOSE","\\d+");ie("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Gh}*`);ie("MAINVERSION",`(${G[K.NUMERICIDENTIFIER]})\\.(${G[K.NUMERICIDENTIFIER]})\\.(${G[K.NUMERICIDENTIFIER]})`);ie("MAINVERSIONLOOSE",`(${G[K.NUMERICIDENTIFIERLOOSE]})\\.(${G[K.NUMERICIDENTIFIERLOOSE]})\\.(${G[K.NUMERICIDENTIFIERLOOSE]})`);ie("PRERELEASEIDENTIFIER",`(?:${G[K.NUMERICIDENTIFIER]}|${G[K.NONNUMERICIDENTIFIER]})`);ie("PRERELEASEIDENTIFIERLOOSE",`(?:${G[K.NUMERICIDENTIFIERLOOSE]}|${G[K.NONNUMERICIDENTIFIER]})`);ie("PRERELEASE",`(?:-(${G[K.PRERELEASEIDENTIFIER]}(?:\\.${G[K.PRERELEASEIDENTIFIER]})*))`);ie("PRERELEASELOOSE",`(?:-?(${G[K.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${G[K.PRERELEASEIDENTIFIERLOOSE]})*))`);ie("BUILDIDENTIFIER",`${Gh}+`);ie("BUILD",`(?:\\+(${G[K.BUILDIDENTIFIER]}(?:\\.${G[K.BUILDIDENTIFIER]})*))`);ie("FULLPLAIN",`v?${G[K.MAINVERSION]}${G[K.PRERELEASE]}?${G[K.BUILD]}?`);ie("FULL",`^${G[K.FULLPLAIN]}$`);ie("LOOSEPLAIN",`[v=\\s]*${G[K.MAINVERSIONLOOSE]}${G[K.PRERELEASELOOSE]}?${G[K.BUILD]}?`);ie("LOOSE",`^${G[K.LOOSEPLAIN]}$`);ie("GTLT","((?:<|>)?=?)");ie("XRANGEIDENTIFIERLOOSE",`${G[K.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ie("XRANGEIDENTIFIER",`${G[K.NUMERICIDENTIFIER]}|x|X|\\*`);ie("XRANGEPLAIN",`[v=\\s]*(${G[K.XRANGEIDENTIFIER]})(?:\\.(${G[K.XRANGEIDENTIFIER]})(?:\\.(${G[K.XRANGEIDENTIFIER]})(?:${G[K.PRERELEASE]})?${G[K.BUILD]}?)?)?`);ie("XRANGEPLAINLOOSE",`[v=\\s]*(${G[K.XRANGEIDENTIFIERLOOSE]})(?:\\.(${G[K.XRANGEIDENTIFIERLOOSE]})(?:\\.(${G[K.XRANGEIDENTIFIERLOOSE]})(?:${G[K.PRERELEASELOOSE]})?${G[K.BUILD]}?)?)?`);ie("XRANGE",`^${G[K.GTLT]}\\s*${G[K.XRANGEPLAIN]}$`);ie("XRANGELOOSE",`^${G[K.GTLT]}\\s*${G[K.XRANGEPLAINLOOSE]}$`);ie("COERCE",`(^|[^\\d])(\\d{1,${Bh}})(?:\\.(\\d{1,${Bh}}))?(?:\\.(\\d{1,${Bh}}))?(?:$|[^\\d])`);ie("COERCERTL",G[K.COERCE],!0);ie("LONETILDE","(?:~>?)");ie("TILDETRIM",`(\\s*)${G[K.LONETILDE]}\\s+`,!0);Jr.tildeTrimReplace="$1~";ie("TILDE",`^${G[K.LONETILDE]}${G[K.XRANGEPLAIN]}$`);ie("TILDELOOSE",`^${G[K.LONETILDE]}${G[K.XRANGEPLAINLOOSE]}$`);ie("LONECARET","(?:\\^)");ie("CARETTRIM",`(\\s*)${G[K.LONECARET]}\\s+`,!0);Jr.caretTrimReplace="$1^";ie("CARET",`^${G[K.LONECARET]}${G[K.XRANGEPLAIN]}$`);ie("CARETLOOSE",`^${G[K.LONECARET]}${G[K.XRANGEPLAINLOOSE]}$`);ie("COMPARATORLOOSE",`^${G[K.GTLT]}\\s*(${G[K.LOOSEPLAIN]})$|^$`);ie("COMPARATOR",`^${G[K.GTLT]}\\s*(${G[K.FULLPLAIN]})$|^$`);ie("COMPARATORTRIM",`(\\s*)${G[K.GTLT]}\\s*(${G[K.LOOSEPLAIN]}|${G[K.XRANGEPLAIN]})`,!0);Jr.comparatorTrimReplace="$1$2$3";ie("HYPHENRANGE",`^\\s*(${G[K.XRANGEPLAIN]})\\s+-\\s+(${G[K.XRANGEPLAIN]})\\s*$`);ie("HYPHENRANGELOOSE",`^\\s*(${G[K.XRANGEPLAINLOOSE]})\\s+-\\s+(${G[K.XRANGEPLAINLOOSE]})\\s*$`);ie("STAR","(<|>)?=?\\s*\\*");ie("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");ie("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Gu=E((sW,Bb)=>{var BH=Object.freeze({loose:!0}),GH=Object.freeze({}),KH=e=>e?typeof e!="object"?BH:e:GH;Bb.exports=KH});var Kh=E((iW,Yb)=>{var Gb=/^[0-9]+$/,Kb=(e,t)=>{let r=Gb.test(e),n=Gb.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},YH=(e,t)=>Kb(t,e);Yb.exports={compareIdentifiers:Kb,rcompareIdentifiers:YH}});var Tt=E((oW,Qb)=>{var Ku=$o(),{MAX_LENGTH:Wb,MAX_SAFE_INTEGER:Yu}=Po(),{safeRe:Jb,t:Xb}=ei(),WH=Gu(),{compareIdentifiers:ti}=Kh(),Yh=class e{constructor(t,r){if(r=WH(r),t instanceof e){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Wb)throw new TypeError(`version is longer than ${Wb} characters`);Ku("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=t.trim().match(r.loose?Jb[Xb.LOOSE]:Jb[Xb.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Yu||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Yu||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Yu||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let i=+s;if(i>=0&&i<Yu)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Ku("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if(typeof t=="string"&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),ti(this.major,t.major)||ti(this.minor,t.minor)||ti(this.patch,t.patch)}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],s=t.prerelease[r];if(Ku("prerelease compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return ti(n,s)}while(++r)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let r=0;do{let n=this.build[r],s=t.build[r];if(Ku("prerelease compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return ti(n,s)}while(++r)}inc(t,r,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let s=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(r){let i=[r,s];n===!1&&(i=[r]),ti(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};Qb.exports=Yh});var is=E((aW,ew)=>{var Zb=Tt(),JH=(e,t,r=!1)=>{if(e instanceof Zb)return e;try{return new Zb(e,t)}catch(n){if(!r)return null;throw n}};ew.exports=JH});var rw=E((uW,tw)=>{var XH=is(),QH=(e,t)=>{let r=XH(e,t);return r?r.version:null};tw.exports=QH});var sw=E((lW,nw)=>{var ZH=is(),ez=(e,t)=>{let r=ZH(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};nw.exports=ez});var aw=E((cW,ow)=>{var iw=Tt(),tz=(e,t,r,n,s)=>{typeof r=="string"&&(s=n,n=r,r=void 0);try{return new iw(e instanceof iw?e.version:e,r).inc(t,n,s).version}catch{return null}};ow.exports=tz});var cw=E((fW,lw)=>{var uw=is(),rz=(e,t)=>{let r=uw(e,null,!0),n=uw(t,null,!0),s=r.compare(n);if(s===0)return null;let i=s>0,o=i?r:n,a=i?n:r,u=!!o.prerelease.length;if(!!a.prerelease.length&&!u)return!a.patch&&!a.minor?"major":o.patch?"patch":o.minor?"minor":"major";let l=u?"pre":"";return r.major!==n.major?l+"major":r.minor!==n.minor?l+"minor":r.patch!==n.patch?l+"patch":"prerelease"};lw.exports=rz});var dw=E((dW,fw)=>{var nz=Tt(),sz=(e,t)=>new nz(e,t).major;fw.exports=sz});var pw=E((hW,hw)=>{var iz=Tt(),oz=(e,t)=>new iz(e,t).minor;hw.exports=oz});var yw=E((pW,mw)=>{var az=Tt(),uz=(e,t)=>new az(e,t).patch;mw.exports=uz});var _w=E((mW,gw)=>{var lz=is(),cz=(e,t)=>{let r=lz(e,t);return r&&r.prerelease.length?r.prerelease:null};gw.exports=cz});var rr=E((yW,Ew)=>{var vw=Tt(),fz=(e,t,r)=>new vw(e,r).compare(new vw(t,r));Ew.exports=fz});var bw=E((gW,Sw)=>{var dz=rr(),hz=(e,t,r)=>dz(t,e,r);Sw.exports=hz});var Rw=E((_W,ww)=>{var pz=rr(),mz=(e,t)=>pz(e,t,!0);ww.exports=mz});var Wu=E((vW,Pw)=>{var Tw=Tt(),yz=(e,t,r)=>{let n=new Tw(e,r),s=new Tw(t,r);return n.compare(s)||n.compareBuild(s)};Pw.exports=yz});var Ow=E((EW,$w)=>{var gz=Wu(),_z=(e,t)=>e.sort((r,n)=>gz(r,n,t));$w.exports=_z});var Cw=E((SW,Aw)=>{var vz=Wu(),Ez=(e,t)=>e.sort((r,n)=>vz(n,r,t));Aw.exports=Ez});var Oo=E((bW,Iw)=>{var Sz=rr(),bz=(e,t,r)=>Sz(e,t,r)>0;Iw.exports=bz});var Ju=E((wW,Nw)=>{var wz=rr(),Rz=(e,t,r)=>wz(e,t,r)<0;Nw.exports=Rz});var Wh=E((RW,kw)=>{var Tz=rr(),Pz=(e,t,r)=>Tz(e,t,r)===0;kw.exports=Pz});var Jh=E((TW,qw)=>{var $z=rr(),Oz=(e,t,r)=>$z(e,t,r)!==0;qw.exports=Oz});var Xu=E((PW,Dw)=>{var Az=rr(),Cz=(e,t,r)=>Az(e,t,r)>=0;Dw.exports=Cz});var Qu=E(($W,jw)=>{var Iz=rr(),Nz=(e,t,r)=>Iz(e,t,r)<=0;jw.exports=Nz});var Xh=E((OW,xw)=>{var kz=Wh(),qz=Jh(),Dz=Oo(),jz=Xu(),xz=Ju(),Lz=Qu(),Fz=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return kz(e,r,n);case"!=":return qz(e,r,n);case">":return Dz(e,r,n);case">=":return jz(e,r,n);case"<":return xz(e,r,n);case"<=":return Lz(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};xw.exports=Fz});var Fw=E((AW,Lw)=>{var Mz=Tt(),Vz=is(),{safeRe:Zu,t:el}=ei(),Hz=(e,t)=>{if(e instanceof Mz)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(Zu[el.COERCE]);else{let n;for(;(n=Zu[el.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),Zu[el.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;Zu[el.COERCERTL].lastIndex=-1}return r===null?null:Vz(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};Lw.exports=Hz});var Vw=E((CW,Mw)=>{"use strict";Mw.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}});var zw=E((IW,Hw)=>{"use strict";Hw.exports=Se;Se.Node=os;Se.create=Se;function Se(e){var t=this;if(t instanceof Se||(t=new Se),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(s){t.push(s)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}Se.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Se.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Se.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Se.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Uz(this,arguments[e]);return this.length};Se.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Bz(this,arguments[e]);return this.length};Se.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Se.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Se.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;r!==null;n++)e.call(t,r.value,n,this),r=r.next};Se.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;r!==null;n--)e.call(t,r.value,n,this),r=r.prev};Se.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++)r=r.next;if(t===e&&r!==null)return r.value};Se.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++)r=r.prev;if(t===e&&r!==null)return r.value};Se.prototype.map=function(e,t){t=t||this;for(var r=new Se,n=this.head;n!==null;)r.push(e.call(t,n.value,this)),n=n.next;return r};Se.prototype.mapReverse=function(e,t){t=t||this;for(var r=new Se,n=this.tail;n!==null;)r.push(e.call(t,n.value,this)),n=n.prev;return r};Se.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;n!==null;s++)r=e(r,n.value,s),n=n.next;return r};Se.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;n!==null;s--)r=e(r,n.value,s),n=n.prev;return r};Se.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;r!==null;t++)e[t]=r.value,r=r.next;return e};Se.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;r!==null;t++)e[t]=r.value,r=r.prev;return e};Se.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new Se;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,s=this.head;s!==null&&n<e;n++)s=s.next;for(;s!==null&&n<t;n++,s=s.next)r.push(s.value);return r};Se.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new Se;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,s=this.tail;s!==null&&n>t;n--)s=s.prev;for(;s!==null&&n>e;n--,s=s.prev)r.push(s.value);return r};Se.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,s=this.head;s!==null&&n<e;n++)s=s.next;for(var i=[],n=0;s&&n<t;n++)i.push(s.value),s=this.removeNode(s);s===null&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(var n=0;n<r.length;n++)s=zz(this,s,r[n]);return i};Se.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};function zz(e,t,r){var n=t===e.head?new os(r,null,t,e):new os(r,t,t.next,e);return n.next===null&&(e.tail=n),n.prev===null&&(e.head=n),e.length++,n}function Uz(e,t){e.tail=new os(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Bz(e,t){e.head=new os(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function os(e,t,r,n){if(!(this instanceof os))return new os(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{Vw()(Se)}catch{}});var Yw=E((NW,Kw)=>{"use strict";var Gz=zw(),as=Symbol("max"),Qr=Symbol("length"),ri=Symbol("lengthCalculator"),Co=Symbol("allowStale"),us=Symbol("maxAge"),Xr=Symbol("dispose"),Uw=Symbol("noDisposeOnSet"),dt=Symbol("lruList"),_r=Symbol("cache"),Gw=Symbol("updateAgeOnGet"),Qh=()=>1,ep=class{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");let r=this[as]=t.max||1/0,n=t.length||Qh;if(this[ri]=typeof n!="function"?Qh:n,this[Co]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[us]=t.maxAge||0,this[Xr]=t.dispose,this[Uw]=t.noDisposeOnSet||!1,this[Gw]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[as]=t||1/0,Ao(this)}get max(){return this[as]}set allowStale(t){this[Co]=!!t}get allowStale(){return this[Co]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[us]=t,Ao(this)}get maxAge(){return this[us]}set lengthCalculator(t){typeof t!="function"&&(t=Qh),t!==this[ri]&&(this[ri]=t,this[Qr]=0,this[dt].forEach(r=>{r.length=this[ri](r.value,r.key),this[Qr]+=r.length})),Ao(this)}get lengthCalculator(){return this[ri]}get length(){return this[Qr]}get itemCount(){return this[dt].length}rforEach(t,r){r=r||this;for(let n=this[dt].tail;n!==null;){let s=n.prev;Bw(this,t,n,r),n=s}}forEach(t,r){r=r||this;for(let n=this[dt].head;n!==null;){let s=n.next;Bw(this,t,n,r),n=s}}keys(){return this[dt].toArray().map(t=>t.key)}values(){return this[dt].toArray().map(t=>t.value)}reset(){this[Xr]&&this[dt]&&this[dt].length&&this[dt].forEach(t=>this[Xr](t.key,t.value)),this[_r]=new Map,this[dt]=new Gz,this[Qr]=0}dump(){return this[dt].map(t=>tl(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[dt]}set(t,r,n){if(n=n||this[us],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let s=n?Date.now():0,i=this[ri](r,t);if(this[_r].has(t)){if(i>this[as])return ni(this,this[_r].get(t)),!1;let u=this[_r].get(t).value;return this[Xr]&&(this[Uw]||this[Xr](t,u.value)),u.now=s,u.maxAge=n,u.value=r,this[Qr]+=i-u.length,u.length=i,this.get(t),Ao(this),!0}let o=new tp(t,r,i,s,n);return o.length>this[as]?(this[Xr]&&this[Xr](t,r),!1):(this[Qr]+=o.length,this[dt].unshift(o),this[_r].set(t,this[dt].head),Ao(this),!0)}has(t){if(!this[_r].has(t))return!1;let r=this[_r].get(t).value;return!tl(this,r)}get(t){return Zh(this,t,!0)}peek(t){return Zh(this,t,!1)}pop(){let t=this[dt].tail;return t?(ni(this,t),t.value):null}del(t){ni(this,this[_r].get(t))}load(t){this.reset();let r=Date.now();for(let n=t.length-1;n>=0;n--){let s=t[n],i=s.e||0;if(i===0)this.set(s.k,s.v);else{let o=i-r;o>0&&this.set(s.k,s.v,o)}}}prune(){this[_r].forEach((t,r)=>Zh(this,r,!1))}},Zh=(e,t,r)=>{let n=e[_r].get(t);if(n){let s=n.value;if(tl(e,s)){if(ni(e,n),!e[Co])return}else r&&(e[Gw]&&(n.value.now=Date.now()),e[dt].unshiftNode(n));return s.value}},tl=(e,t)=>{if(!t||!t.maxAge&&!e[us])return!1;let r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[us]&&r>e[us]},Ao=e=>{if(e[Qr]>e[as])for(let t=e[dt].tail;e[Qr]>e[as]&&t!==null;){let r=t.prev;ni(e,t),t=r}},ni=(e,t)=>{if(t){let r=t.value;e[Xr]&&e[Xr](r.key,r.value),e[Qr]-=r.length,e[_r].delete(r.key),e[dt].removeNode(t)}},tp=class{constructor(t,r,n,s,i){this.key=t,this.value=r,this.length=n,this.now=s,this.maxAge=i||0}},Bw=(e,t,r,n)=>{let s=r.value;tl(e,s)&&(ni(e,r),e[Co]||(s=void 0)),s&&t.call(n,s.value,s.key,e)};Kw.exports=ep});var nr=E((kW,Qw)=>{var rp=class e{constructor(t,r){if(r=Yz(r),t instanceof e)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new e(t.raw,r);if(t instanceof np)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(s=>!Jw(s[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let s of this.set)if(s.length===1&&t4(s[0])){this.set=[s];break}}}this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){let n=((this.options.includePrerelease&&Zz)|(this.options.loose&&e4))+":"+t,s=Ww.get(n);if(s)return s;let i=this.options.loose,o=i?xt[Ct.HYPHENRANGELOOSE]:xt[Ct.HYPHENRANGE];t=t.replace(o,f4(this.options.includePrerelease)),Le("hyphen replace",t),t=t.replace(xt[Ct.COMPARATORTRIM],Jz),Le("comparator trim",t),t=t.replace(xt[Ct.TILDETRIM],Xz),Le("tilde trim",t),t=t.replace(xt[Ct.CARETTRIM],Qz),Le("caret trim",t);let a=t.split(" ").map(f=>r4(f,this.options)).join(" ").split(/\s+/).map(f=>c4(f,this.options));i&&(a=a.filter(f=>(Le("loose invalid filter",f,this.options),!!f.match(xt[Ct.COMPARATORLOOSE])))),Le("range list",a);let u=new Map,c=a.map(f=>new np(f,this.options));for(let f of c){if(Jw(f))return[f];u.set(f.value,f)}u.size>1&&u.has("")&&u.delete("");let l=[...u.values()];return Ww.set(n,l),l}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some(n=>Xw(n,r)&&t.set.some(s=>Xw(s,r)&&n.every(i=>s.every(o=>i.intersects(o,r)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new Wz(t,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(d4(this.set[r],t,this.options))return!0;return!1}};Qw.exports=rp;var Kz=Yw(),Ww=new Kz({max:1e3}),Yz=Gu(),np=Io(),Le=$o(),Wz=Tt(),{safeRe:xt,t:Ct,comparatorTrimReplace:Jz,tildeTrimReplace:Xz,caretTrimReplace:Qz}=ei(),{FLAG_INCLUDE_PRERELEASE:Zz,FLAG_LOOSE:e4}=Po(),Jw=e=>e.value==="<0.0.0-0",t4=e=>e.value==="",Xw=(e,t)=>{let r=!0,n=e.slice(),s=n.pop();for(;r&&n.length;)r=n.every(i=>s.intersects(i,t)),s=n.pop();return r},r4=(e,t)=>(Le("comp",e,t),e=i4(e,t),Le("caret",e),e=n4(e,t),Le("tildes",e),e=a4(e,t),Le("xrange",e),e=l4(e,t),Le("stars",e),e),It=e=>!e||e.toLowerCase()==="x"||e==="*",n4=(e,t)=>e.trim().split(/\s+/).map(r=>s4(r,t)).join(" "),s4=(e,t)=>{let r=t.loose?xt[Ct.TILDELOOSE]:xt[Ct.TILDE];return e.replace(r,(n,s,i,o,a)=>{Le("tilde",e,n,s,i,o,a);let u;return It(s)?u="":It(i)?u=`>=${s}.0.0 <${+s+1}.0.0-0`:It(o)?u=`>=${s}.${i}.0 <${s}.${+i+1}.0-0`:a?(Le("replaceTilde pr",a),u=`>=${s}.${i}.${o}-${a} <${s}.${+i+1}.0-0`):u=`>=${s}.${i}.${o} <${s}.${+i+1}.0-0`,Le("tilde return",u),u})},i4=(e,t)=>e.trim().split(/\s+/).map(r=>o4(r,t)).join(" "),o4=(e,t)=>{Le("caret",e,t);let r=t.loose?xt[Ct.CARETLOOSE]:xt[Ct.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(s,i,o,a,u)=>{Le("caret",e,s,i,o,a,u);let c;return It(i)?c="":It(o)?c=`>=${i}.0.0${n} <${+i+1}.0.0-0`:It(a)?i==="0"?c=`>=${i}.${o}.0${n} <${i}.${+o+1}.0-0`:c=`>=${i}.${o}.0${n} <${+i+1}.0.0-0`:u?(Le("replaceCaret pr",u),i==="0"?o==="0"?c=`>=${i}.${o}.${a}-${u} <${i}.${o}.${+a+1}-0`:c=`>=${i}.${o}.${a}-${u} <${i}.${+o+1}.0-0`:c=`>=${i}.${o}.${a}-${u} <${+i+1}.0.0-0`):(Le("no pr"),i==="0"?o==="0"?c=`>=${i}.${o}.${a}${n} <${i}.${o}.${+a+1}-0`:c=`>=${i}.${o}.${a}${n} <${i}.${+o+1}.0-0`:c=`>=${i}.${o}.${a} <${+i+1}.0.0-0`),Le("caret return",c),c})},a4=(e,t)=>(Le("replaceXRanges",e,t),e.split(/\s+/).map(r=>u4(r,t)).join(" ")),u4=(e,t)=>{e=e.trim();let r=t.loose?xt[Ct.XRANGELOOSE]:xt[Ct.XRANGE];return e.replace(r,(n,s,i,o,a,u)=>{Le("xRange",e,n,s,i,o,a,u);let c=It(i),l=c||It(o),f=l||It(a),d=f;return s==="="&&d&&(s=""),u=t.includePrerelease?"-0":"",c?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&d?(l&&(o=0),a=0,s===">"?(s=">=",l?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):s==="<="&&(s="<",l?i=+i+1:o=+o+1),s==="<"&&(u="-0"),n=`${s+i}.${o}.${a}${u}`):l?n=`>=${i}.0.0${u} <${+i+1}.0.0-0`:f&&(n=`>=${i}.${o}.0${u} <${i}.${+o+1}.0-0`),Le("xRange return",n),n})},l4=(e,t)=>(Le("replaceStars",e,t),e.trim().replace(xt[Ct.STAR],"")),c4=(e,t)=>(Le("replaceGTE0",e,t),e.trim().replace(xt[t.includePrerelease?Ct.GTE0PRE:Ct.GTE0],"")),f4=e=>(t,r,n,s,i,o,a,u,c,l,f,d,h)=>(It(n)?r="":It(s)?r=`>=${n}.0.0${e?"-0":""}`:It(i)?r=`>=${n}.${s}.0${e?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${e?"-0":""}`,It(c)?u="":It(l)?u=`<${+c+1}.0.0-0`:It(f)?u=`<${c}.${+l+1}.0-0`:d?u=`<=${c}.${l}.${f}-${d}`:e?u=`<${c}.${l}.${+f+1}-0`:u=`<=${u}`,`${r} ${u}`.trim()),d4=(e,t,r)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let n=0;n<e.length;n++)if(Le(e[n].semver),e[n].semver!==np.ANY&&e[n].semver.prerelease.length>0){let s=e[n].semver;if(s.major===t.major&&s.minor===t.minor&&s.patch===t.patch)return!0}return!1}return!0}});var Io=E((qW,sR)=>{var No=Symbol("SemVer ANY"),op=class e{static get ANY(){return No}constructor(t,r){if(r=Zw(r),t instanceof e){if(t.loose===!!r.loose)return t;t=t.value}t=t.trim().split(/\s+/).join(" "),ip("comparator",t,r),this.options=r,this.loose=!!r.loose,this.parse(t),this.semver===No?this.value="":this.value=this.operator+this.semver.version,ip("comp",this)}parse(t){let r=this.options.loose?eR[tR.COMPARATORLOOSE]:eR[tR.COMPARATOR],n=t.match(r);if(!n)throw new TypeError(`Invalid comparator: ${t}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new rR(n[2],this.options.loose):this.semver=No}toString(){return this.value}test(t){if(ip("Comparator.test",t,this.options.loose),this.semver===No||t===No)return!0;if(typeof t=="string")try{t=new rR(t,this.options)}catch{return!1}return sp(t,this.operator,this.semver,this.options)}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new nR(t.value,r).test(this.value):t.operator===""?t.value===""?!0:new nR(this.value,r).test(t.semver):(r=Zw(r),r.includePrerelease&&(this.value==="<0.0.0-0"||t.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&t.operator.startsWith(">")||this.operator.startsWith("<")&&t.operator.startsWith("<")||this.semver.version===t.semver.version&&this.operator.includes("=")&&t.operator.includes("=")||sp(this.semver,"<",t.semver,r)&&this.operator.startsWith(">")&&t.operator.startsWith("<")||sp(this.semver,">",t.semver,r)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}};sR.exports=op;var Zw=Gu(),{safeRe:eR,t:tR}=ei(),sp=Xh(),ip=$o(),rR=Tt(),nR=nr()});var ko=E((DW,iR)=>{var h4=nr(),p4=(e,t,r)=>{try{t=new h4(t,r)}catch{return!1}return t.test(e)};iR.exports=p4});var aR=E((jW,oR)=>{var m4=nr(),y4=(e,t)=>new m4(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));oR.exports=y4});var lR=E((xW,uR)=>{var g4=Tt(),_4=nr(),v4=(e,t,r)=>{let n=null,s=null,i=null;try{i=new _4(t,r)}catch{return null}return e.forEach(o=>{i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new g4(n,r))}),n};uR.exports=v4});var fR=E((LW,cR)=>{var E4=Tt(),S4=nr(),b4=(e,t,r)=>{let n=null,s=null,i=null;try{i=new S4(t,r)}catch{return null}return e.forEach(o=>{i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new E4(n,r))}),n};cR.exports=b4});var pR=E((FW,hR)=>{var ap=Tt(),w4=nr(),dR=Oo(),R4=(e,t)=>{e=new w4(e,t);let r=new ap("0.0.0");if(e.test(r)||(r=new ap("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){let s=e.set[n],i=null;s.forEach(o=>{let a=new ap(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||dR(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!r||dR(r,i))&&(r=i)}return r&&e.test(r)?r:null};hR.exports=R4});var yR=E((MW,mR)=>{var T4=nr(),P4=(e,t)=>{try{return new T4(e,t).range||"*"}catch{return null}};mR.exports=P4});var rl=E((VW,ER)=>{var $4=Tt(),vR=Io(),{ANY:O4}=vR,A4=nr(),C4=ko(),gR=Oo(),_R=Ju(),I4=Qu(),N4=Xu(),k4=(e,t,r,n)=>{e=new $4(e,n),t=new A4(t,n);let s,i,o,a,u;switch(r){case">":s=gR,i=I4,o=_R,a=">",u=">=";break;case"<":s=_R,i=N4,o=gR,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(C4(e,t,n))return!1;for(let c=0;c<t.set.length;++c){let l=t.set[c],f=null,d=null;if(l.forEach(h=>{h.semver===O4&&(h=new vR(">=0.0.0")),f=f||h,d=d||h,s(h.semver,f.semver,n)?f=h:o(h.semver,d.semver,n)&&(d=h)}),f.operator===a||f.operator===u||(!d.operator||d.operator===a)&&i(e,d.semver))return!1;if(d.operator===u&&o(e,d.semver))return!1}return!0};ER.exports=k4});var bR=E((HW,SR)=>{var q4=rl(),D4=(e,t,r)=>q4(e,t,">",r);SR.exports=D4});var RR=E((zW,wR)=>{var j4=rl(),x4=(e,t,r)=>j4(e,t,"<",r);wR.exports=x4});var $R=E((UW,PR)=>{var TR=nr(),L4=(e,t,r)=>(e=new TR(e,r),t=new TR(t,r),e.intersects(t,r));PR.exports=L4});var AR=E((BW,OR)=>{var F4=ko(),M4=rr();OR.exports=(e,t,r)=>{let n=[],s=null,i=null,o=e.sort((l,f)=>M4(l,f,r));for(let l of o)F4(l,t,r)?(i=l,s||(s=l)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);let a=[];for(let[l,f]of n)l===f?a.push(l):!f&&l===o[0]?a.push("*"):f?l===o[0]?a.push(`<=${f}`):a.push(`${l} - ${f}`):a.push(`>=${l}`);let u=a.join(" || "),c=typeof t.raw=="string"?t.raw:String(t);return u.length<c.length?u:t}});var DR=E((GW,qR)=>{var CR=nr(),lp=Io(),{ANY:up}=lp,qo=ko(),cp=rr(),V4=(e,t,r={})=>{if(e===t)return!0;e=new CR(e,r),t=new CR(t,r);let n=!1;e:for(let s of e.set){for(let i of t.set){let o=z4(s,i,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},H4=[new lp(">=0.0.0-0")],IR=[new lp(">=0.0.0")],z4=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===up){if(t.length===1&&t[0].semver===up)return!0;r.includePrerelease?e=H4:e=IR}if(t.length===1&&t[0].semver===up){if(r.includePrerelease)return!0;t=IR}let n=new Set,s,i;for(let h of e)h.operator===">"||h.operator===">="?s=NR(s,h,r):h.operator==="<"||h.operator==="<="?i=kR(i,h,r):n.add(h.semver);if(n.size>1)return null;let o;if(s&&i){if(o=cp(s.semver,i.semver,r),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(let h of n){if(s&&!qo(h,String(s),r)||i&&!qo(h,String(i),r))return null;for(let p of t)if(!qo(h,String(p),r))return!1;return!0}let a,u,c,l,f=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1,d=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1;f&&f.prerelease.length===1&&i.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let h of t){if(l=l||h.operator===">"||h.operator===">=",c=c||h.operator==="<"||h.operator==="<=",s){if(d&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===d.major&&h.semver.minor===d.minor&&h.semver.patch===d.patch&&(d=!1),h.operator===">"||h.operator===">="){if(a=NR(s,h,r),a===h&&a!==s)return!1}else if(s.operator===">="&&!qo(s.semver,String(h),r))return!1}if(i){if(f&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===f.major&&h.semver.minor===f.minor&&h.semver.patch===f.patch&&(f=!1),h.operator==="<"||h.operator==="<="){if(u=kR(i,h,r),u===h&&u!==i)return!1}else if(i.operator==="<="&&!qo(i.semver,String(h),r))return!1}if(!h.operator&&(i||s)&&o!==0)return!1}return!(s&&c&&!i&&o!==0||i&&l&&!s&&o!==0||d||f)},NR=(e,t,r)=>{if(!e)return t;let n=cp(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},kR=(e,t,r)=>{if(!e)return t;let n=cp(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};qR.exports=V4});var dp=E((KW,LR)=>{var fp=ei(),jR=Po(),U4=Tt(),xR=Kh(),B4=is(),G4=rw(),K4=sw(),Y4=aw(),W4=cw(),J4=dw(),X4=pw(),Q4=yw(),Z4=_w(),eU=rr(),tU=bw(),rU=Rw(),nU=Wu(),sU=Ow(),iU=Cw(),oU=Oo(),aU=Ju(),uU=Wh(),lU=Jh(),cU=Xu(),fU=Qu(),dU=Xh(),hU=Fw(),pU=Io(),mU=nr(),yU=ko(),gU=aR(),_U=lR(),vU=fR(),EU=pR(),SU=yR(),bU=rl(),wU=bR(),RU=RR(),TU=$R(),PU=AR(),$U=DR();LR.exports={parse:B4,valid:G4,clean:K4,inc:Y4,diff:W4,major:J4,minor:X4,patch:Q4,prerelease:Z4,compare:eU,rcompare:tU,compareLoose:rU,compareBuild:nU,sort:sU,rsort:iU,gt:oU,lt:aU,eq:uU,neq:lU,gte:cU,lte:fU,cmp:dU,coerce:hU,Comparator:pU,Range:mU,satisfies:yU,toComparators:gU,maxSatisfying:_U,minSatisfying:vU,minVersion:EU,validRange:SU,outside:bU,gtr:wU,ltr:RU,intersects:TU,simplifyRange:PU,subset:$U,SemVer:U4,re:fp.re,src:fp.src,tokens:fp.t,SEMVER_SPEC_VERSION:jR.SEMVER_SPEC_VERSION,RELEASE_TYPES:jR.RELEASE_TYPES,compareIdentifiers:xR.compareIdentifiers,rcompareIdentifiers:xR.rcompareIdentifiers}});var sl=E((YW,yp)=>{"use strict";var nl=Vb(),OU=dp(),{FSTDEP005:AU,FSTDEP012:CU,FSTDEP015:IU,FSTDEP016:NU,FSTDEP017:kU,FSTDEP018:qU}=zr(),{kHasBeenDecorated:DU,kSchemaBody:jU,kSchemaHeaders:xU,kSchemaParams:LU,kSchemaQuerystring:FR,kSchemaController:hp,kOptions:FU,kRequestCacheValidateFns:$n,kRouteContext:Je,kPublicRouteContext:MR,kRequestOriginalUrl:pp}=ct(),{FST_ERR_REQ_INVALID_VALIDATION_INVOCATION:MU}=St(),VR={body:jU,headers:xU,params:LU,querystring:FR,query:FR};function mp(e,t,r,n,s,i){this.id=e,this[Je]=i,this.params=t,this.raw=r,this.query=n,this.log=s,this.body=void 0}mp.props=[];function VU(e){if(typeof e=="function")return e;if(e===!0)return function(){return!0};if(typeof e=="number")return function(t,r){return r<e};if(typeof e=="string"){let t=e.split(",").map(r=>r.trim());return nl.compile(t)}return nl.compile(e)}function HU(e,t){return t?zU(e,t):zR(e)}function zR(e){let t=e.props.slice();function r(n,s,i,o,a,u){this.id=n,this[Je]=u,this.params=s,this.raw=i,this.query=o,this.log=a,this.body=void 0;for(var c,l=0;l<t.length;l++)c=t[l],this[c.key]=c.value}return Object.setPrototypeOf(r.prototype,e.prototype),Object.setPrototypeOf(r,e),r.props=t,r.parent=e,r}function HR(e){let t=e.lastIndexOf(",");return t===-1?e.trim():e.slice(t+1).trim()}function zU(e,t){let r=zR(e),n=VU(t);return r[DU]=!0,Object.defineProperties(r.prototype,{ip:{get(){return nl(this.raw,n)}},ips:{get(){return nl.all(this.raw,n)}},hostname:{get(){return this.ip!==void 0&&this.headers["x-forwarded-host"]?HR(this.headers["x-forwarded-host"]):this.headers.host||this.headers[":authority"]}},protocol:{get(){if(this.headers["x-forwarded-proto"])return HR(this.headers["x-forwarded-proto"]);if(this.socket)return this.socket.encrypted?"https":"http"}}}),r}Object.defineProperties(mp.prototype,{server:{get(){return this[Je].server}},url:{get(){return this.raw.url}},originalUrl:{get(){return this[pp]||(this[pp]=this.raw.originalUrl||this.raw.url),this[pp]}},method:{get(){return this.raw.method}},context:{get(){return CU(),this[Je]}},routerPath:{get(){return kU(),this[Je].config?.url}},routeOptions:{get(){let e=this[Je],t=e._parserOptions.limit,r=e.server.initialConfig.bodyLimit,n=e.server.hasConstraintStrategy("version")?this.raw.headers["accept-version"]:void 0,s={method:e.config?.method,url:e.config?.url,bodyLimit:t||r,attachValidation:e.attachValidation,logLevel:e.logLevel,exposeHeadRoute:e.exposeHeadRoute,prefixTrailingSlash:e.prefixTrailingSlash,handler:e.handler,version:n};return Object.defineProperties(s,{config:{get:()=>e.config},schema:{get:()=>e.schema}}),Object.freeze(s)}},routerMethod:{get(){return qU(),this[Je].config?.method}},routeConfig:{get(){return NU(),this[Je][MR]?.config}},routeSchema:{get(){return IU(),this[Je][MR].schema}},is404:{get(){return this[Je].config?.url===void 0}},connection:{get(){return OU.gte(process.versions.node,"13.0.0")&&AU(),this.raw.connection}},socket:{get(){return this.raw.socket}},ip:{get(){if(this.socket)return this.socket.remoteAddress}},hostname:{get(){return this.raw.headers.host||this.raw.headers[":authority"]}},protocol:{get(){if(this.socket)return this.socket.encrypted?"https":"http"}},headers:{get(){return this.additionalHeaders?Object.assign({},this.raw.headers,this.additionalHeaders):this.raw.headers},set(e){this.additionalHeaders=e}},getValidationFunction:{value:function(e){if(typeof e=="string"){let t=VR[e];return this[Je][t]}else if(typeof e=="object")return this[Je][$n]?.get(e)}},compileValidationSchema:{value:function(e,t=null){let{method:r,url:n}=this;if(this[Je][$n]?.has(e))return this[Je][$n].get(e);let i=(this[Je].validatorCompiler||this.server[hp].validatorCompiler||this.server[hp].setupValidator(this.server[FU])||this.server[hp].validatorCompiler)({schema:e,method:r,url:n,httpPart:t});return this[Je][$n]==null&&(this[Je][$n]=new WeakMap),this[Je][$n].set(e,i),i}},validateInput:{value:function(e,t,r){r=typeof t=="string"?t:r;let n=r!=null&&typeof r=="string"&&VR[r],s;if(n&&(s=this[Je][n]),s==null&&(t==null||typeof t!="object"||Array.isArray(t)))throw new MU(r);return s==null&&(this[Je][$n]?.has(t)?s=this[Je][$n].get(t):s=this.compileValidationSchema(t,r)),s(e)}}});yp.exports=mp;yp.exports.buildRequest=HU});var il=E((WW,UR)=>{"use strict";var{kFourOhFourContext:UU,kReplySerializerDefault:BU,kSchemaErrorFormatter:GU,kErrorHandler:KU,kChildLoggerFactory:YU,kOptions:WU,kReply:JU,kRequest:XU,kBodyLimit:QU,kLogLevel:ZU,kContentTypeParser:e3,kRouteByFastify:t3,kRequestCacheValidateFns:r3,kReplyCacheSerializeFns:n3,kPublicRouteContext:s3}=ct();function i3({schema:e,handler:t,config:r,requestIdLogLabel:n,childLoggerFactory:s,errorHandler:i,bodyLimit:o,logLevel:a,logSerializers:u,attachValidation:c,validatorCompiler:l,serializerCompiler:f,replySerializer:d,schemaErrorFormatter:h,exposeHeadRoute:p,prefixTrailingSlash:y,server:v,isFastify:_}){this.schema=e,this.handler=t,this.Reply=v[JU],this.Request=v[XU],this.contentTypeParser=v[e3],this.onRequest=null,this.onSend=null,this.onError=null,this.onTimeout=null,this.preHandler=null,this.onResponse=null,this.preSerialization=null,this.onRequestAbort=null,this.config=r,this.errorHandler=i||v[KU],this.requestIdLogLabel=n||v[WU].requestIdLogLabel,this.childLoggerFactory=s||v[YU],this._middie=null,this._parserOptions={limit:o||v[QU]},this.exposeHeadRoute=p,this.prefixTrailingSlash=y,this.logLevel=a||v[ZU],this.logSerializers=u,this[UU]=null,this.attachValidation=c,this[BU]=d,this.schemaErrorFormatter=h||v[GU]||a3,this[t3]=_,this[r3]=null,this[n3]=null,this.validatorCompiler=l||null,this.serializerCompiler=f||null,this[s3]=o3(this),this.server=v}function o3(e){return Object.create(null,{schema:{enumerable:!0,get(){return e.schema}},config:{enumerable:!0,get(){return e.config}}})}function a3(e,t){let r="",n=", ";for(var s=0;s!==e.length;++s){let i=e[s];r+=t+(i.instancePath||"")+" "+i.message+n}return new Error(r.slice(0,-n.length))}UR.exports=i3});var gp=E((JW,BR)=>{"use strict";BR.exports={supportedMethods:["DELETE","GET","HEAD","PATCH","POST","PUT","OPTIONS","PROPFIND","PROPPATCH","MKCOL","COPY","MOVE","LOCK","UNLOCK","TRACE","SEARCH"]}});var bp=E((XW,WR)=>{"use strict";var{kReply:_p,kRequest:vp,kState:u3,kHasBeenDecorated:l3}=ct(),{FST_ERR_DEC_ALREADY_PRESENT:GR,FST_ERR_DEC_MISSING_DEPENDENCY:c3,FST_ERR_DEC_AFTER_START:f3,FST_ERR_DEC_DEPENDENCY_INVALID_TYPE:d3}=St(),{FSTDEP006:h3}=zr();function p3(e,t,r,n){if(Object.prototype.hasOwnProperty.call(e,t))throw new GR(t);Ep(e,t,n),r&&(typeof r.getter=="function"||typeof r.setter=="function")?Object.defineProperty(e,t,{get:r.getter,set:r.setter}):e[t]=r}function KR(e,t,r,n){let s=e.prototype;if(Object.prototype.hasOwnProperty.call(s,t)||al(e,t))throw new GR(t);e[l3]=!0,Ep(e,t,n),r&&(typeof r.getter=="function"||typeof r.setter=="function")?Object.defineProperty(s,t,{get:r.getter,set:r.setter}):typeof r=="function"?s[t]=r:e.props.push({key:t,value:r})}function YR(e,t){typeof t=="object"&&t&&!(typeof t.getter=="function"||typeof t.setter=="function")&&h3(e)}function m3(e,t,r){return Sp(this,e),p3(this,e,t,r),this}function ol(e,t){return t?t in e||e.prototype&&t in e.prototype||al(e,t):e in this}function al(e,t){return e.props?e.props.find(({key:r})=>r===t):!1}function y3(e){return e&&al(this[vp],e)?!0:ol(this[vp].prototype,e)}function g3(e){return e&&al(this[_p],e)?!0:ol(this[_p].prototype,e)}function Ep(e,t,r){if(r!=null){if(!Array.isArray(r))throw new d3(t);for(var n=0;n!==r.length;++n)if(!ol(e,r[n]))throw new c3(r[n])}}function _3(e,t,r){return Sp(this,e),YR(e,t),KR(this[_p],e,t,r),this}function v3(e,t,r){return Sp(this,e),YR(e,t),KR(this[vp],e,t,r),this}function Sp(e,t){if(e[u3].started)throw new f3(t)}WR.exports={add:m3,exist:ol,existRequest:y3,existReply:g3,dependencies:Ep,decorateReply:_3,decorateRequest:v3}});var JR=E(Ir=>{"use strict";var Rp=class{constructor(t=1e3,r=0){if(isNaN(t)||t<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=new Map,this.last=null,this.max=t,this.ttl=r}get size(){return this.items.size}clear(){this.items=new Map,this.first=null,this.last=null}delete(t){if(this.items.has(t)){let r=this.items.get(t);this.items.delete(t),r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(t){for(var r=0;r<t.length;r++)this.delete(t[r])}evict(){if(this.size>0){let t=this.first;this.items.delete(t.key),this.size===0?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}}expiresAt(t){if(this.items.has(t))return this.items.get(t).expiry}get(t){if(this.items.has(t)){let r=this.items.get(t);if(this.ttl>0&&r.expiry<=Date.now()){this.delete(t);return}return r.value}}getMany(t){let r=[];for(var n=0;n<t.length;n++)r.push(this.get(t[n]));return r}keys(){return this.items.keys()}set(t,r){if(this.items.has(t)){let s=this.items.get(t);s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl;return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:r};this.items.set(t,n),this.size===1?this.first=n:this.last.next=n,this.last=n}},Tp=class{constructor(t=1e3,r=0){if(isNaN(t)||t<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=new Map,this.last=null,this.max=t,this.ttl=r}get size(){return this.items.size}bumpLru(t){if(this.last===t)return;let r=this.last,n=t.next,s=t.prev;this.first===t&&(this.first=n),t.next=null,t.prev=r,r.next=t,s!==null&&(s.next=n),n!==null&&(n.prev=s),this.last=t}clear(){this.items=new Map,this.first=null,this.last=null}delete(t){if(this.items.has(t)){let r=this.items.get(t);this.items.delete(t),r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(t){for(var r=0;r<t.length;r++)this.delete(t[r])}evict(){if(this.size>0){let t=this.first;this.items.delete(t.key),this.size===0?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}}expiresAt(t){if(this.items.has(t))return this.items.get(t).expiry}get(t){if(this.items.has(t)){let r=this.items.get(t);if(this.ttl>0&&r.expiry<=Date.now()){this.delete(t);return}return this.bumpLru(r),r.value}}getMany(t){let r=[];for(var n=0;n<t.length;n++)r.push(this.get(t[n]));return r}keys(){return this.items.keys()}set(t,r){if(this.items.has(t)){let s=this.items.get(t);s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl,this.last!==s&&this.bumpLru(s);return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:r};this.items.set(t,n),this.size===1?this.first=n:this.last.next=n,this.last=n}},Do=class{constructor(t=1e3,r=0){if(isNaN(t)||t<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this.max=t,this.ttl=r}bumpLru(t){if(this.last===t)return;let r=this.last,n=t.next,s=t.prev;this.first===t&&(this.first=n),t.next=null,t.prev=r,r.next=t,s!==null&&(s.next=n),n!==null&&(n.prev=s),this.last=t}clear(){this.items=Object.create(null),this.first=null,this.last=null,this.size=0}delete(t){if(Object.prototype.hasOwnProperty.call(this.items,t)){let r=this.items[t];delete this.items[t],this.size--,r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(t){for(var r=0;r<t.length;r++)this.delete(t[r])}evict(){if(this.size>0){let t=this.first;delete this.items[t.key],--this.size===0?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}}expiresAt(t){if(Object.prototype.hasOwnProperty.call(this.items,t))return this.items[t].expiry}get(t){if(Object.prototype.hasOwnProperty.call(this.items,t)){let r=this.items[t];if(this.ttl>0&&r.expiry<=Date.now()){this.delete(t);return}return this.bumpLru(r),r.value}}getMany(t){let r=[];for(var n=0;n<t.length;n++)r.push(this.get(t[n]));return r}keys(){return Object.keys(this.items)}set(t,r){if(Object.prototype.hasOwnProperty.call(this.items,t)){let s=this.items[t];s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl,this.last!==s&&this.bumpLru(s);return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:r};this.items[t]=n,++this.size===1?this.first=n:this.last.next=n,this.last=n}},ul=class{constructor(){this.records={}}initForCache(t,r){this.records[t]={[r]:{hits:0,misses:0,expirations:0}}}resetForCache(t){for(let r of Object.keys(this.records[t]))this.records[t][r]={hits:0,misses:0,expirations:0}}getStatistics(){return this.records}};function wp(e){return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`}var Pp=class{constructor(t,r,n){this.collectionStart=new Date,this.lastTimeStamp="",this.currentTimeStamp=wp(this.collectionStart),this.cacheId=t,this.statisticTtlInHours=r,this.records=n||new ul,this.records.initForCache(this.cacheId,this.currentTimeStamp)}hoursPassed(){return(Date.now()-this.collectionStart)/1e3/60/60}addHit(){this.archiveIfNeeded(),this.records.records[this.cacheId][this.currentTimeStamp].hits++}addMiss(){this.archiveIfNeeded(),this.records.records[this.cacheId][this.currentTimeStamp].misses++}addExpiration(){this.archiveIfNeeded(),this.records.records[this.cacheId][this.currentTimeStamp].expirations++}getStatistics(){return this.records.getStatistics()}archiveIfNeeded(){if(this.hoursPassed()>=this.statisticTtlInHours){let t=new Date,r=wp(t);this.lastTimeStamp&&this.lastTimeStamp!==r&&delete this.records.records[this.cacheId][this.lastTimeStamp],this.lastTimeStamp=this.currentTimeStamp,this.collectionStart=t,this.currentTimeStamp=wp(this.collectionStart),this.records.initForCache(this.cacheId,this.currentTimeStamp)}}},ll=class extends Do{constructor(t,r,n,s,i){if(super(t||1e3,r||0),!n)throw new Error("Cache id is mandatory");this.hitStatistics=new Pp(n,i!==void 0?i:24,s)}getStatistics(){return this.hitStatistics.getStatistics()}get(t){if(Object.prototype.hasOwnProperty.call(this.items,t)){let r=this.items[t];if(this.ttl>0&&r.expiry<=Date.now()){this.delete(t),this.hitStatistics.addExpiration();return}return this.bumpLru(r),this.hitStatistics.addHit(),r.value}this.hitStatistics.addMiss()}},cl=class{constructor(t=1e3,r=0){if(isNaN(t)||t<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this.max=t,this.ttl=r}clear(){this.items=Object.create(null),this.first=null,this.last=null,this.size=0}delete(t){if(Object.prototype.hasOwnProperty.call(this.items,t)){let r=this.items[t];delete this.items[t],this.size--,r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(t){for(var r=0;r<t.length;r++)this.delete(t[r])}evict(){if(this.size>0){let t=this.first;delete this.items[t.key],--this.size===0?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}}expiresAt(t){if(Object.prototype.hasOwnProperty.call(this.items,t))return this.items[t].expiry}get(t){if(Object.prototype.hasOwnProperty.call(this.items,t)){let r=this.items[t];if(this.ttl>0&&r.expiry<=Date.now()){this.delete(t);return}return r.value}}getMany(t){let r=[];for(var n=0;n<t.length;n++)r.push(this.get(t[n]));return r}keys(){return Object.keys(this.items)}set(t,r){if(Object.prototype.hasOwnProperty.call(this.items,t)){let s=this.items[t];s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl;return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:r};this.items[t]=n,++this.size===1?this.first=n:this.last.next=n,this.last=n}};Ir.Fifo=cl;Ir.FifoMap=Rp;Ir.FifoObject=cl;Ir.HitStatisticsRecord=ul;Ir.Lru=Do;Ir.LruHitStatistics=ll;Ir.LruMap=Tp;Ir.LruObject=Do;Ir.LruObjectHitStatistics=ll});var eT=E((ZW,jo)=>{"use strict";var hl=function(){};hl.prototype=Object.create(null);var fl=/; *([!#$%&'*+.^\w`|~-]+)=("(?:[\v\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\v\u0020-\u00ff])*"|[!#$%&'*+.^\w`|~-]+) */gu,dl=/\\([\v\u0020-\u00ff])/gu,XR=/^[!#$%&'*+.^\w|~-]+\/[!#$%&'*+.^\w|~-]+$/u,ls={type:"",parameters:new hl};Object.freeze(ls.parameters);Object.freeze(ls);function QR(e){if(typeof e!="string")throw new TypeError("argument header is required and must be a string");let t=e.indexOf(";"),r=t!==-1?e.slice(0,t).trim():e.trim();if(XR.test(r)===!1)throw new TypeError("invalid media type");let n={type:r.toLowerCase(),parameters:new hl};if(t===-1)return n;let s,i,o;for(fl.lastIndex=t;i=fl.exec(e);){if(i.index!==t)throw new TypeError("invalid parameter format");t+=i[0].length,s=i[1].toLowerCase(),o=i[2],o[0]==='"'&&(o=o.slice(1,o.length-1),dl.test(o)&&(o=o.replace(dl,"$1"))),n.parameters[s]=o}if(t!==e.length)throw new TypeError("invalid parameter format");return n}function ZR(e){if(typeof e!="string")return ls;let t=e.indexOf(";"),r=t!==-1?e.slice(0,t).trim():e.trim();if(XR.test(r)===!1)return ls;let n={type:r.toLowerCase(),parameters:new hl};if(t===-1)return n;let s,i,o;for(fl.lastIndex=t;i=fl.exec(e);){if(i.index!==t)return ls;t+=i[0].length,s=i[1].toLowerCase(),o=i[2],o[0]==='"'&&(o=o.slice(1,o.length-1),dl.test(o)&&(o=o.replace(dl,"$1"))),n.parameters[s]=o}return t!==e.length?ls:n}jo.exports.default={parse:QR,safeParse:ZR};jo.exports.parse=QR;jo.exports.safeParse=ZR;jo.exports.defaultContentType=ls});var iT=E((eJ,si)=>{"use strict";var E3=typeof Buffer<"u",tT=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,rT=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function nT(e,t,r){r==null&&t!==null&&typeof t=="object"&&(r=t,t=void 0),E3&&Buffer.isBuffer(e)&&(e=e.toString()),e&&e.charCodeAt(0)===65279&&(e=e.slice(1));let n=JSON.parse(e,t);if(n===null||typeof n!="object")return n;let s=r&&r.protoAction||"error",i=r&&r.constructorAction||"error";if(s==="ignore"&&i==="ignore")return n;if(s!=="ignore"&&i!=="ignore"){if(tT.test(e)===!1&&rT.test(e)===!1)return n}else if(s!=="ignore"&&i==="ignore"){if(tT.test(e)===!1)return n}else if(rT.test(e)===!1)return n;return sT(n,{protoAction:s,constructorAction:i,safe:r&&r.safe})}function sT(e,{protoAction:t="error",constructorAction:r="error",safe:n}={}){let s=[e];for(;s.length;){let i=s;s=[];for(let o of i){if(t!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"__proto__")){if(n===!0)return null;if(t==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype")){if(n===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.constructor}for(let a in o){let u=o[a];u&&typeof u=="object"&&s.push(u)}}}return e}function $p(e,t,r){let n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return nT(e,t,r)}finally{Error.stackTraceLimit=n}}function S3(e,t){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return nT(e,t,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=r}}si.exports=$p;si.exports.default=$p;si.exports.parse=$p;si.exports.safeParse=S3;si.exports.scan=sT});var Np=E((tJ,Lo)=>{"use strict";var{AsyncResource:b3}=require("node:async_hooks"),{Fifo:aT}=JR(),{safeParse:uT,defaultContentType:w3}=eT(),R3=iT(),{kDefaultJsonParse:xo,kContentTypeParser:ii,kBodyLimit:T3,kRequestPayloadStream:lT,kState:Ap,kTestInternals:P3,kReplyIsError:cT,kRouteContext:$3}=ct(),{FST_ERR_CTP_INVALID_TYPE:fT,FST_ERR_CTP_EMPTY_TYPE:O3,FST_ERR_CTP_ALREADY_PRESENT:A3,FST_ERR_CTP_INVALID_HANDLER:C3,FST_ERR_CTP_INVALID_PARSE_TYPE:I3,FST_ERR_CTP_BODY_TOO_LARGE:oT,FST_ERR_CTP_INVALID_MEDIA_TYPE:N3,FST_ERR_CTP_INVALID_CONTENT_LENGTH:k3,FST_ERR_CTP_EMPTY_JSON_BODY:q3,FST_ERR_CTP_INSTANCE_ALREADY_STARTED:Cp}=St();function Zr(e,t,r){this[xo]=hT(t,r),this.customParsers=new Map,this.customParsers.set("application/json",new Op(!0,!1,e,this[xo])),this.customParsers.set("text/plain",new Op(!0,!1,e,Ip)),this.parserList=[new pl("application/json"),new pl("text/plain")],this.parserRegExpList=[],this.cache=new aT(100)}Zr.prototype.add=function(e,t,r){let n=typeof e=="string";if(!n&&!(e instanceof RegExp))throw new fT;if(n&&e.length===0)throw new O3;if(typeof r!="function")throw new C3;if(this.existingParser(e))throw new A3(e);if(t.parseAs!==void 0&&t.parseAs!=="string"&&t.parseAs!=="buffer")throw new I3(t.parseAs);let s=new Op(t.parseAs==="string",t.parseAs==="buffer",t.bodyLimit,r);n&&e==="*"?this.customParsers.set("",s):(n?this.parserList.unshift(new pl(e)):(e.isEssence=e.source.indexOf(";")===-1,this.parserRegExpList.unshift(e)),this.customParsers.set(e.toString(),s))};Zr.prototype.hasParser=function(e){return this.customParsers.has(typeof e=="string"?e:e.toString())};Zr.prototype.existingParser=function(e){return e==="application/json"&&this.customParsers.has(e)?this.customParsers.get(e).fn!==this[xo]:e==="text/plain"&&this.customParsers.has(e)?this.customParsers.get(e).fn!==Ip:this.hasParser(e)};Zr.prototype.getParser=function(e){if(this.hasParser(e))return this.customParsers.get(e);let t=this.cache.get(e);if(t!==void 0)return t;let r=uT(e);if(r===w3)return this.customParsers.get("");for(var n=0;n!==this.parserList.length;++n){let i=this.parserList[n];if(M3(r,i)){let o=this.customParsers.get(i.name);return this.cache.set(e,o),o}}for(var s=0;s!==this.parserRegExpList.length;++s){let i=this.parserRegExpList[s];if(V3(e,r.type,i)){let o=this.customParsers.get(i.toString());return this.cache.set(e,o),o}}return this.customParsers.get("")};Zr.prototype.removeAll=function(){this.customParsers=new Map,this.parserRegExpList=[],this.parserList=[],this.cache=new aT(100)};Zr.prototype.remove=function(e){if(!(typeof e=="string"||e instanceof RegExp))throw new fT;let t=this.customParsers.delete(e.toString()),r=typeof e=="string"?this.parserList:this.parserRegExpList,n=r.findIndex(s=>s.toString()===e.toString());return n>-1&&r.splice(n,1),t||n>-1};Zr.prototype.run=function(e,t,r,n){let s=this.getParser(e),i=new b3("content-type-parser:run",r);if(s===void 0)r.is404?t(r,n):n.send(new N3(e||void 0));else if(s.asString===!0||s.asBuffer===!0)dT(r,n,n[$3]._parserOptions,s,o);else{let a=s.fn(r,r[lT],o);a&&typeof a.then=="function"&&a.then(u=>o(null,u),o)}function o(a,u){i.runInAsyncScope(()=>{a?(n[cT]=!0,n.send(a)):(r.body=u,t(r,n))})}};function dT(e,t,r,n,s){let i=n.asString,o=r.limit===null?n.bodyLimit:r.limit,a=e.headers["content-length"]===void 0?NaN:Number(e.headers["content-length"]);if(a>o){t.header("connection","close"),t.send(new oT);return}let u=0,c=i===!0?"":[],l=e[lT]||e.raw;i===!0&&l.setEncoding("utf8"),l.on("data",f),l.on("end",d),l.on("error",d),l.resume();function f(h){u+=h.length;let{receivedEncodedLength:p=0}=l;if(u>o||p>o){l.removeListener("data",f),l.removeListener("end",d),l.removeListener("error",d),t.send(new oT);return}i===!0?c+=h:c.push(h)}function d(h){if(l.removeListener("data",f),l.removeListener("end",d),l.removeListener("error",d),h!==void 0){typeof h.statusCode=="number"&&h.statusCode>=400||(h.statusCode=400),t[cT]=!0,t.code(h.statusCode).send(h);return}if(i===!0&&(u=Buffer.byteLength(c)),!Number.isNaN(a)&&(l.receivedEncodedLength||u)!==a){t.header("connection","close"),t.send(new k3);return}i===!1&&(c=Buffer.concat(c));let p=n.fn(e,c,s);p&&typeof p.then=="function"&&p.then(y=>s(null,y),s)}}function hT(e,t){return r;function r(n,s,i){if(s===""||s==null||Buffer.isBuffer(s)&&s.length===0)return i(new q3,void 0);let o;try{o=R3.parse(s,{protoAction:e,constructorAction:t})}catch(a){return a.statusCode=400,i(a,void 0)}i(null,o)}}function Ip(e,t,r){r(null,t)}function Op(e,t,r,n){this.asString=e,this.asBuffer=t,this.bodyLimit=r,this.fn=n}function D3(e){let t=new Zr;return t[xo]=e[xo],t.customParsers=new Map(e.customParsers.entries()),t.parserList=e.parserList.slice(),t.parserRegExpList=e.parserRegExpList.slice(),t}function j3(e,t,r){if(this[Ap].started)throw new Cp("addContentTypeParser");return typeof t=="function"&&(r=t,t={}),t||(t={}),t.bodyLimit||(t.bodyLimit=this[T3]),Array.isArray(e)?e.forEach(n=>this[ii].add(n,t,r)):this[ii].add(e,t,r),this}function x3(e){return this[ii].hasParser(e)}function L3(e){if(this[Ap].started)throw new Cp("removeContentTypeParser");if(Array.isArray(e))for(let t of e)this[ii].remove(t);else this[ii].remove(e)}function F3(){if(this[Ap].started)throw new Cp("removeAllContentTypeParsers");this[ii].removeAll()}function M3(e,t){if(t.isEssence)return e.type.indexOf(t)!==-1;if(e.type.indexOf(t.type)===-1)return!1;for(let r of t.parameterKeys)if(!(r in e.parameters)||e.parameters[r]!==t.parameters[r])return!1;return!0}function V3(e,t,r){return r.isEssence?r.test(t):r.test(e)}function pl(e){this.name=e;let t=uT(e);if(this.isEssence=e.indexOf(";")===-1,this.isEssence===!1&&t.type===""){let r=e.split(";",1)[0];this.type=r===""?e:r}else this.type=t.type;this.parameters=t.parameters,this.parameterKeys=Object.keys(t.parameters)}pl.prototype.toString=function(){return this.name};Lo.exports=Zr;Lo.exports.helpers={buildContentTypeParser:D3,addContentTypeParser:j3,hasContentTypeParser:x3,removeContentTypeParser:L3,removeAllContentTypeParsers:F3};Lo.exports.defaultParsers={getDefaultJsonParser:hT,defaultTextParser:Ip};Lo.exports[P3]={rawBody:dT}});var pT=E((rJ,ml)=>{"use strict";var H3=Object.getPrototypeOf({});function kp(e){function t(_){return _!=="constructor"&&_!=="prototype"&&_!=="__proto__"}function r(_){let w=0,g=_.length,m=new Array(g);for(w=0;w<g;++w)m[w]=h(_[w]);return m}function n(_){let w={};if(u&&Object.getPrototypeOf(_)!==H3)return u(_);let g=a(_),m,T,A;for(m=0,T=g.length;m<T;++m)t(A=g[m])&&(w[A]=h(_[A]));return w}function s(_,w){let g=_.length,m=w.length,T=0,A=new Array(g+m);for(T=0;T<g;++T)A[T]=h(_[T]);for(T=0;T<m;++T)A[T+g]=h(w[T]);return A}let i=Object.prototype.propertyIsEnumerable;function o(_){let w=Object.keys(_),g=Object.getOwnPropertySymbols(_);for(let m=0,T=g.length;m<T;++m)i.call(_,g[m])&&w.push(g[m]);return w}let a=e&&e.symbols?o:Object.keys,u=typeof e?.cloneProtoObject=="function"?e.cloneProtoObject:void 0;function c(_){return typeof _=="object"&&_!==null&&!(_ instanceof RegExp)&&!(_ instanceof Date)}function l(_){return typeof _!="object"||_===null}let f=typeof Buffer<"u"?_=>typeof _!="object"||_===null||_ instanceof RegExp||_ instanceof Date||_ instanceof Buffer:_=>typeof _!="object"||_===null||_ instanceof RegExp||_ instanceof Date,d=e&&typeof e.mergeArray=="function"?e.mergeArray({clone:h,deepmerge:y,getKeys:a,isMergeableObject:c}):s;function h(_){return c(_)?Array.isArray(_)?r(_):n(_):_}function p(_,w){let g={},m=a(_),T=a(w),A,b,$;for(A=0,b=m.length;A<b;++A)t($=m[A])&&T.indexOf($)===-1&&(g[$]=h(_[$]));for(A=0,b=T.length;A<b;++A)t($=T[A])&&($ in _&&(m.indexOf($)!==-1&&(g[$]=y(_[$],w[$])),!0)||(g[$]=h(w[$])));return g}function y(_,w){let g=Array.isArray(w),m=Array.isArray(_);return l(w)?w:f(_)?h(w):g&&m?d(_,w):g!==m?h(w):p(_,w)}function v(){switch(arguments.length){case 0:return{};case 1:return h(arguments[0]);case 2:return y(arguments[0],arguments[1])}let _;for(let w=0,g=arguments.length;w<g;++w)_=y(_,arguments[w]);return _}return e&&e.all?v:y}ml.exports=kp;ml.exports.default=kp;ml.exports.deepmerge=kp});var _T=E((nJ,gT)=>{"use strict";var mT=Vs(),z3=Symbol.for("json-schema-ref"),qp=class{#e;#t;#n;#s;#i;constructor(t={}){this.#e={},this.#t={},this.#n=t.insertRefSymbol??!1,this.#s=t.allowEqualDuplicates??!0,this.#i=t.cloneSchemaWithoutRefs??!1}addSchema(t,r){t.$id!==void 0&&t.$id.charAt(0)!=="#"?r=t.$id:this.#l(t,r),this.#a(t,r)}getSchema(t,r="#"){let n=this.#e[t];if(n===void 0)throw new Error(`Cannot resolve ref "${t}${r}". Schema with id "${t}" is not found.`);return n.anchors[r]!==void 0?n.anchors[r]:yT(n.schema,r)}hasSchema(t){return this.#e[t]!==void 0}getSchemaRefs(t){let r=this.#e[t];if(r===void 0)throw new Error(`Schema with id "${t}" is not found.`);return r.refs}getSchemaDependencies(t,r={}){let n=this.#e[t];for(let s of n.refs){let i=s.schemaId;r[i]===void 0&&(r[i]=this.getSchema(i),this.getSchemaDependencies(i,r))}return r}derefSchema(t){if(this.#t[t]!==void 0)return;let r=this.#e[t];if(r===void 0)throw new Error(`Schema with id "${t}" is not found.`);!this.#i&&r.refs.length===0&&(this.#t[t]={schema:r.schema,anchors:r.anchors});let n=[];this.#r(r.schema,t,n);let s=this.getSchemaDependencies(t);for(let i in s){let o=s[i];this.#r(o,i,n)}for(let i of n){let{refSchemaId:o,refJsonPointer:a}=this.#o(i.ref,i.sourceSchemaId),u=this.getDerefSchema(o,a);if(u===null)throw new Error(`Cannot resolve ref "${i.ref}". Ref "${a}" is not found in schema "${o}".`);i.targetSchema=u,i.targetSchemaId=o}for(let i of n)this.#u(i,n)}getDerefSchema(t,r="#"){let n=this.#t[t];return n===void 0&&(this.derefSchema(t),n=this.#t[t]),n.anchors[r]!==void 0?n.anchors[r]:yT(n.schema,r)}#o(t,r){let n=t.indexOf("#");return n===-1?{refSchemaId:t,refJsonPointer:"#"}:n===0?{refSchemaId:r,refJsonPointer:t}:{refSchemaId:t.slice(0,n),refJsonPointer:t.slice(n)}}#a(t,r){let n=t.$id;n!==void 0&&typeof n=="string"&&(n.charAt(0)==="#"?this.#c(t,r,n):(this.#l(t,n),r=n));let s=t.$ref;if(s!==void 0&&typeof s=="string"){let{refSchemaId:i,refJsonPointer:o}=this.#o(s,r);this.#e[r].refs.push({schemaId:i,jsonPointer:o})}for(let i in t)typeof t[i]=="object"&&t[i]!==null&&this.#a(t[i],r)}#r(t,r,n=[]){let s=Array.isArray(t)?[...t]:{...t},i=s.$id;i!==void 0&&typeof i=="string"&&(i.charAt(0)==="#"?this.#d(s,r,i):(this.#f(s,i),r=i)),s.$ref!==void 0&&n.push({ref:s.$ref,sourceSchemaId:r,sourceSchema:s});for(let o in s){let a=s[o];typeof a=="object"&&a!==null&&(s[o]=this.#r(a,r,n))}return s}#u(t,r){let{sourceSchema:n,targetSchema:s}=t;if(n.$ref){if(this.#n&&(n[z3]=n.$ref),delete n.$ref,s.$ref){let i=r.find(o=>o.sourceSchema===s);this.#u(i,r)}for(let i in s)if(i!=="$id"){if(n[i]!==void 0){if(mT(n[i],s[i]))continue;throw new Error(`Cannot resolve ref "${t.ref}". Property "${i}" is already exist in schema "${t.sourceSchemaId}".`)}n[i]=s[i]}t.isResolved=!0}}#l(t,r){let n=this.#e[r];if(n!==void 0){if(this.#s&&mT(t,n.schema))return;throw new Error(`There is already another schema with id "${r}".`)}this.#e[r]={schema:t,anchors:{},refs:[]}}#c(t,r,n){let{anchors:s}=this.#e[r];if(s[n]!==void 0)throw new Error(`There is already another anchor "${n}" in a schema "${r}".`);s[n]=t}#f(t,r){this.#t[r]===void 0&&(this.#t[r]={schema:t,anchors:{}})}#d(t,r,n){let{anchors:s}=this.#t[r];s[n]=t}};function yT(e,t){let r=t.split("/"),n=e;for(let s of r)if(!(s===""||s==="#")){if(typeof n!="object"||n===null)return null;n=n[s]}return n??null}gT.exports={RefResolver:qp}});var wT=E((sJ,jp)=>{"use strict";jp.exports=F;jp.exports.default=F;var U3={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},vT={enum:["array","boolean","integer","null","number","object","string"]},ET=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,B3=qu().fullFormats.uri,ST=qu().fullFormats.regex;function sr(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0,a=o;return typeof e=="number"&&!(e%1)&&!isNaN(e)&&isFinite(e)?o===a&&typeof e=="number"&&isFinite(e)&&(e<0||isNaN(e))?(sr.errors=[{instancePath:t,schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1):(sr.errors=i,o===0):(sr.errors=[{instancePath:t,schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1)}var Dp={validate:F};function Nt(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(o===0)if(Array.isArray(e)){if(e.length<1)return Nt.errors=[{instancePath:t,schemaPath:"#/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var a=!0;let u=e.length;for(let c=0;c<u;c++){let l=o;Dp.validate(e[c],{instancePath:t+"/"+c,parentData:e,parentDataProperty:c,rootData:s})||(i=i===null?Dp.validate.errors:i.concat(Dp.validate.errors),o=i.length);var a=l===o;if(!a)break}}}else return Nt.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;return Nt.errors=i,o===0}var bT=ho().default;function F(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(!(e&&typeof e=="object"&&!Array.isArray(e))&&typeof e!="boolean")return F.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:U3.type},message:"must be object,boolean"}],!1;if(o===0&&e&&typeof e=="object"&&!Array.isArray(e)){if(e.$id!==void 0){let g=e.$id,m=o;if(o===m&&o===m)if(typeof g=="string"){if(!ET.test(g))return F.errors=[{instancePath:t+"/$id",schemaPath:"#/properties/%24id/format",keyword:"format",params:{format:"uri-reference"},message:'must match format "uri-reference"'}],!1}else return F.errors=[{instancePath:t+"/$id",schemaPath:"#/properties/%24id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=m===o}else var a=!0;if(a){if(e.$schema!==void 0){let g=e.$schema,m=o;if(o===m&&o===m)if(typeof g=="string"){if(!B3(g))return F.errors=[{instancePath:t+"/$schema",schemaPath:"#/properties/%24schema/format",keyword:"format",params:{format:"uri"},message:'must match format "uri"'}],!1}else return F.errors=[{instancePath:t+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=m===o}else var a=!0;if(a){if(e.$ref!==void 0){let g=e.$ref,m=o;if(o===m&&o===m)if(typeof g=="string"){if(!ET.test(g))return F.errors=[{instancePath:t+"/$ref",schemaPath:"#/properties/%24ref/format",keyword:"format",params:{format:"uri-reference"},message:'must match format "uri-reference"'}],!1}else return F.errors=[{instancePath:t+"/$ref",schemaPath:"#/properties/%24ref/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=m===o}else var a=!0;if(a){if(e.$comment!==void 0){let g=o;if(typeof e.$comment!="string")return F.errors=[{instancePath:t+"/$comment",schemaPath:"#/properties/%24comment/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.title!==void 0){let g=o;if(typeof e.title!="string")return F.errors=[{instancePath:t+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.description!==void 0){let g=o;if(typeof e.description!="string")return F.errors=[{instancePath:t+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.readOnly!==void 0){let g=o;if(typeof e.readOnly!="boolean")return F.errors=[{instancePath:t+"/readOnly",schemaPath:"#/properties/readOnly/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=g===o}else var a=!0;if(a){if(e.examples!==void 0){let g=o;if(o===g&&!Array.isArray(e.examples))return F.errors=[{instancePath:t+"/examples",schemaPath:"#/properties/examples/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=g===o}else var a=!0;if(a){if(e.multipleOf!==void 0){let g=e.multipleOf,m=o;if(o===m)if(typeof g=="number"&&isFinite(g)){if(g<=0||isNaN(g))return F.errors=[{instancePath:t+"/multipleOf",schemaPath:"#/properties/multipleOf/exclusiveMinimum",keyword:"exclusiveMinimum",params:{comparison:">",limit:0},message:"must be > 0"}],!1}else return F.errors=[{instancePath:t+"/multipleOf",schemaPath:"#/properties/multipleOf/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=m===o}else var a=!0;if(a){if(e.maximum!==void 0){let g=e.maximum,m=o;if(!(typeof g=="number"&&isFinite(g)))return F.errors=[{instancePath:t+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=m===o}else var a=!0;if(a){if(e.exclusiveMaximum!==void 0){let g=e.exclusiveMaximum,m=o;if(!(typeof g=="number"&&isFinite(g)))return F.errors=[{instancePath:t+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=m===o}else var a=!0;if(a){if(e.minimum!==void 0){let g=e.minimum,m=o;if(!(typeof g=="number"&&isFinite(g)))return F.errors=[{instancePath:t+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=m===o}else var a=!0;if(a){if(e.exclusiveMinimum!==void 0){let g=e.exclusiveMinimum,m=o;if(!(typeof g=="number"&&isFinite(g)))return F.errors=[{instancePath:t+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=m===o}else var a=!0;if(a){if(e.maxLength!==void 0){let g=e.maxLength,m=o,T=o;if(!(typeof g=="number"&&!(g%1)&&!isNaN(g)&&isFinite(g)))return F.errors=[{instancePath:t+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===T&&typeof g=="number"&&isFinite(g)&&(g<0||isNaN(g)))return F.errors=[{instancePath:t+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=m===o}else var a=!0;if(a){if(e.minLength!==void 0){let g=o;sr(e.minLength,{instancePath:t+"/minLength",parentData:e,parentDataProperty:"minLength",rootData:s})||(i=i===null?sr.errors:i.concat(sr.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.pattern!==void 0){let g=e.pattern,m=o;if(o===m&&o===m)if(typeof g=="string"){if(!ST(g))return F.errors=[{instancePath:t+"/pattern",schemaPath:"#/properties/pattern/format",keyword:"format",params:{format:"regex"},message:'must match format "regex"'}],!1}else return F.errors=[{instancePath:t+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=m===o}else var a=!0;if(a){if(e.additionalItems!==void 0){let g=o;F(e.additionalItems,{instancePath:t+"/additionalItems",parentData:e,parentDataProperty:"additionalItems",rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.items!==void 0){let g=e.items,m=o,T=o,A=!1,b=o;F(g,{instancePath:t+"/items",parentData:e,parentDataProperty:"items",rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var u=b===o;if(A=A||u,!A){let k=o;Nt(g,{instancePath:t+"/items",parentData:e,parentDataProperty:"items",rootData:s})||(i=i===null?Nt.errors:i.concat(Nt.errors),o=i.length);var u=k===o;A=A||u}if(A)o=T,i!==null&&(T?i.length=T:i=null);else{let k={instancePath:t+"/items",schemaPath:"#/properties/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[k]:i.push(k),o++,F.errors=i,!1}var a=m===o}else var a=!0;if(a){if(e.maxItems!==void 0){let g=e.maxItems,m=o,T=o;if(!(typeof g=="number"&&!(g%1)&&!isNaN(g)&&isFinite(g)))return F.errors=[{instancePath:t+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===T&&typeof g=="number"&&isFinite(g)&&(g<0||isNaN(g)))return F.errors=[{instancePath:t+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=m===o}else var a=!0;if(a){if(e.minItems!==void 0){let g=o;sr(e.minItems,{instancePath:t+"/minItems",parentData:e,parentDataProperty:"minItems",rootData:s})||(i=i===null?sr.errors:i.concat(sr.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.uniqueItems!==void 0){let g=o;if(typeof e.uniqueItems!="boolean")return F.errors=[{instancePath:t+"/uniqueItems",schemaPath:"#/properties/uniqueItems/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=g===o}else var a=!0;if(a){if(e.contains!==void 0){let g=o;F(e.contains,{instancePath:t+"/contains",parentData:e,parentDataProperty:"contains",rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.maxProperties!==void 0){let g=e.maxProperties,m=o,T=o;if(!(typeof g=="number"&&!(g%1)&&!isNaN(g)&&isFinite(g)))return F.errors=[{instancePath:t+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===T&&typeof g=="number"&&isFinite(g)&&(g<0||isNaN(g)))return F.errors=[{instancePath:t+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=m===o}else var a=!0;if(a){if(e.minProperties!==void 0){let g=o;sr(e.minProperties,{instancePath:t+"/minProperties",parentData:e,parentDataProperty:"minProperties",rootData:s})||(i=i===null?sr.errors:i.concat(sr.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.required!==void 0){let g=e.required,m=o;if(o===o)if(Array.isArray(g)){var c=!0;let b=g.length;for(let $=0;$<b;$++){let k=o;if(typeof g[$]!="string")return F.errors=[{instancePath:t+"/required/"+$,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=k===o;if(!c)break}if(c){let $=g.length,k;if($>1){let R={};for(;$--;){let x=g[$];if(typeof x=="string"){if(typeof R[x]=="number"){return k=R[x],F.errors=[{instancePath:t+"/required",schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:$,j:k},message:"must NOT have duplicate items (items ## "+k+" and "+$+" are identical)"}],!1;break}R[x]=$}}}}}else return F.errors=[{instancePath:t+"/required",schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=m===o}else var a=!0;if(a){if(e.additionalProperties!==void 0){let g=o;F(e.additionalProperties,{instancePath:t+"/additionalProperties",parentData:e,parentDataProperty:"additionalProperties",rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.definitions!==void 0){let g=e.definitions,m=o;if(o===m)if(g&&typeof g=="object"&&!Array.isArray(g))for(let A in g){let b=o;F(g[A],{instancePath:t+"/definitions/"+A.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:A,rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var l=b===o;if(!l)break}else return F.errors=[{instancePath:t+"/definitions",schemaPath:"#/properties/definitions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=m===o}else var a=!0;if(a){if(e.properties!==void 0){let g=e.properties,m=o;if(o===m)if(g&&typeof g=="object"&&!Array.isArray(g))for(let A in g){let b=o;F(g[A],{instancePath:t+"/properties/"+A.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:A,rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var f=b===o;if(!f)break}else return F.errors=[{instancePath:t+"/properties",schemaPath:"#/properties/properties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=m===o}else var a=!0;if(a){if(e.patternProperties!==void 0){let g=e.patternProperties,m=o;if(o===m)if(g&&typeof g=="object"&&!Array.isArray(g)){for(let A in g){let b=o;if(o===b&&typeof A=="string"&&!ST(A)){let $={instancePath:t+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames/format",keyword:"format",params:{format:"regex"},message:'must match format "regex"',propertyName:A};i===null?i=[$]:i.push($),o++}var d=b===o;if(!d){let $={instancePath:t+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames",keyword:"propertyNames",params:{propertyName:A},message:"property name must be valid"};return i===null?i=[$]:i.push($),o++,F.errors=i,!1;break}}if(d)for(let A in g){let b=o;F(g[A],{instancePath:t+"/patternProperties/"+A.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:A,rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var h=b===o;if(!h)break}}else return F.errors=[{instancePath:t+"/patternProperties",schemaPath:"#/properties/patternProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=m===o}else var a=!0;if(a){if(e.dependencies!==void 0){let g=e.dependencies,m=o;if(o===m)if(g&&typeof g=="object"&&!Array.isArray(g))for(let A in g){let b=g[A],$=o,k=o,R=!1,x=o;F(b,{instancePath:t+"/dependencies/"+A.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:A,rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var p=x===o;if(R=R||p,!R){let j=o;if(o===o)if(Array.isArray(b)){var y=!0;let oe=b.length;for(let H=0;H<oe;H++){let W=o;if(typeof b[H]!="string"){let z={instancePath:t+"/dependencies/"+A.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+H,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[z]:i.push(z),o++}var y=W===o;if(!y)break}if(y){let H=b.length,W;if(H>1){let Oe={};for(;H--;){let z=b[H];if(typeof z=="string"){if(typeof Oe[z]=="number"){W=Oe[z];let Ke={instancePath:t+"/dependencies/"+A.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:H,j:W},message:"must NOT have duplicate items (items ## "+W+" and "+H+" are identical)"};i===null?i=[Ke]:i.push(Ke),o++;break}Oe[z]=H}}}}}else{let oe={instancePath:t+"/dependencies/"+A.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[oe]:i.push(oe),o++}var p=j===o;R=R||p}if(R)o=k,i!==null&&(k?i.length=k:i=null);else{let j={instancePath:t+"/dependencies/"+A.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/dependencies/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[j]:i.push(j),o++,F.errors=i,!1}var v=$===o;if(!v)break}else return F.errors=[{instancePath:t+"/dependencies",schemaPath:"#/properties/dependencies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=m===o}else var a=!0;if(a){if(e.propertyNames!==void 0){let g=o;F(e.propertyNames,{instancePath:t+"/propertyNames",parentData:e,parentDataProperty:"propertyNames",rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.enum!==void 0){let g=e.enum,m=o;if(o===m)if(Array.isArray(g)){if(g.length<1)return F.errors=[{instancePath:t+"/enum",schemaPath:"#/properties/enum/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{let A=g.length,b;if(A>1){e:for(;A--;)for(b=A;b--;)if(bT(g[A],g[b])){return F.errors=[{instancePath:t+"/enum",schemaPath:"#/properties/enum/uniqueItems",keyword:"uniqueItems",params:{i:A,j:b},message:"must NOT have duplicate items (items ## "+b+" and "+A+" are identical)"}],!1;break e}}}}else return F.errors=[{instancePath:t+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=m===o}else var a=!0;if(a){if(e.type!==void 0){let g=e.type,m=o,T=o,A=!1,b=o;if(!(g==="array"||g==="boolean"||g==="integer"||g==="null"||g==="number"||g==="object"||g==="string")){let k={instancePath:t+"/type",schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:vT.enum},message:"must be equal to one of the allowed values"};i===null?i=[k]:i.push(k),o++}var _=b===o;if(A=A||_,!A){let k=o;if(o===k)if(Array.isArray(g))if(g.length<1){let x={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf/1/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};i===null?i=[x]:i.push(x),o++}else{var w=!0;let x=g.length;for(let j=0;j<x;j++){let L=g[j],Q=o;if(!(L==="array"||L==="boolean"||L==="integer"||L==="null"||L==="number"||L==="object"||L==="string")){let H={instancePath:t+"/type/"+j,schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:vT.enum},message:"must be equal to one of the allowed values"};i===null?i=[H]:i.push(H),o++}var w=Q===o;if(!w)break}if(w){let j=g.length,L;if(j>1){e:for(;j--;)for(L=j;L--;)if(bT(g[j],g[L])){let Q={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf/1/uniqueItems",keyword:"uniqueItems",params:{i:j,j:L},message:"must NOT have duplicate items (items ## "+L+" and "+j+" are identical)"};i===null?i=[Q]:i.push(Q),o++;break e}}}}else{let x={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[x]:i.push(x),o++}var _=k===o;A=A||_}if(A)o=T,i!==null&&(T?i.length=T:i=null);else{let k={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[k]:i.push(k),o++,F.errors=i,!1}var a=m===o}else var a=!0;if(a){if(e.format!==void 0){let g=o;if(typeof e.format!="string")return F.errors=[{instancePath:t+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.contentMediaType!==void 0){let g=o;if(typeof e.contentMediaType!="string")return F.errors=[{instancePath:t+"/contentMediaType",schemaPath:"#/properties/contentMediaType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.contentEncoding!==void 0){let g=o;if(typeof e.contentEncoding!="string")return F.errors=[{instancePath:t+"/contentEncoding",schemaPath:"#/properties/contentEncoding/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.if!==void 0){let g=o;F(e.if,{instancePath:t+"/if",parentData:e,parentDataProperty:"if",rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.then!==void 0){let g=o;F(e.then,{instancePath:t+"/then",parentData:e,parentDataProperty:"then",rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.else!==void 0){let g=o;F(e.else,{instancePath:t+"/else",parentData:e,parentDataProperty:"else",rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.allOf!==void 0){let g=o;Nt(e.allOf,{instancePath:t+"/allOf",parentData:e,parentDataProperty:"allOf",rootData:s})||(i=i===null?Nt.errors:i.concat(Nt.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.anyOf!==void 0){let g=o;Nt(e.anyOf,{instancePath:t+"/anyOf",parentData:e,parentDataProperty:"anyOf",rootData:s})||(i=i===null?Nt.errors:i.concat(Nt.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.oneOf!==void 0){let g=o;Nt(e.oneOf,{instancePath:t+"/oneOf",parentData:e,parentDataProperty:"oneOf",rootData:s})||(i=i===null?Nt.errors:i.concat(Nt.errors),o=i.length);var a=g===o}else var a=!0;if(a)if(e.not!==void 0){let g=o;F(e.not,{instancePath:t+"/not",parentData:e,parentDataProperty:"not",rootData:s})||(i=i===null?F.errors:i.concat(F.errors),o=i.length);var a=g===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}return F.errors=i,o===0}});var TT=E((iJ,RT)=>{"use strict";var xp=class e{constructor(t,r,n="#"){this.schema=t,this.schemaId=r,this.jsonPointer=n,this.mergedSchemaId=null}getPropertyLocation(t){let r=new e(this.schema[t],this.schemaId,this.jsonPointer+"/"+t);return this.mergedSchemaId!==null&&r.addMergedSchema(this.schema[t],this.mergedSchemaId,this.jsonPointer+"/"+t),r}getSchemaId(){return this.mergedSchemaId||this.schemaId}getOriginSchemaId(){return this.schemaId}getSchemaRef(){return this.getSchemaId()+this.jsonPointer}addMergedSchema(t,r,n="#"){this.schema=t,this.mergedSchemaId=r,this.jsonPointer=n}};RT.exports=xp});var LT=E((oJ,ui)=>{"use strict";var Lp=pT()(),G3=Hi()({proto:!0}),{randomUUID:OT}=require("crypto"),{RefResolver:K3}=_T(),PT=wT(),Y3=Vf(),W3=kh(),AT=TT(),J3=/'/g,yl=2e4,CT="default",X3=["floor","ceil","round","trunc"],IT=["default","json-stringify"],oi="!addComma && (addComma = true) || (json += ',')";function Fp(e,t){if(!PT(e)){t?t=`"${t}" `:t="";let r=PT.errors[0],n=new Error(`${t}schema is invalid: data${r.instancePath} ${r.message}`);throw n.errors=Fp.errors,n}}function ai(e,t,r){let n=r.indexOf("#");n===-1&&(n=r.length);let s=r.slice(0,n)||t.getOriginSchemaId(),i=r.slice(n)||"#",o=e.refResolver.getSchema(s,i);if(o===null)throw new Error(`Cannot find reference "${r}"`);let a=new AT(o,s,i);return o.$ref!==void 0?ai(e,a,o.$ref):a}function $T(e,t){return e.$id&&e.$id.charAt(0)!=="#"?e.$id:t}function Mp(e,t){Fp(e),t=t||{};let r={functions:[],functionsCounter:0,functionsNamesBySchema:new Map,options:t,wrapObjects:!0,refResolver:new K3,rootSchemaId:e.$id||OT(),validatorSchemasIds:new Set},n=$T(e,r.rootSchemaId);if(r.refResolver.hasSchema(n)||r.refResolver.addSchema(e,r.rootSchemaId),t.schema)for(let l in t.schema){let f=t.schema[l],d=$T(f,l);r.refResolver.hasSchema(d)||(Fp(f,l),r.refResolver.addSchema(f,l))}if(t.rounding&&!X3.includes(t.rounding))throw new Error(`Unsupported integer rounding method ${t.rounding}`);if(t.largeArrayMechanism)if(IT.includes(t.largeArrayMechanism))CT=t.largeArrayMechanism;else throw new Error(`Unsupported large array mechanism ${t.largeArrayMechanism}`);if(t.largeArraySize)if(typeof t.largeArraySize=="string"&&Number.isFinite(Number.parseInt(t.largeArraySize,10)))yl=Number.parseInt(t.largeArraySize,10);else if(typeof t.largeArraySize=="number"&&Number.isInteger(t.largeArraySize))yl=t.largeArraySize;else if(typeof t.largeArraySize=="bigint")yl=Number(t.largeArraySize);else throw new Error(`Unsupported large array size. Expected integer-like, got ${typeof t.largeArraySize} with value ${t.largeArraySize}`);let s=new AT(e,r.rootSchemaId),i=Nr(r,s,"input"),o;i==="json += anonymous0(input)"?o=`
    ${r.functions.join(`
`)}
    const main = anonymous0
    return main
    `:o=`
    function main (input) {
      let json = ''
      ${i}
      return json
    }
    ${r.functions.join(`
`)}
    return main
    `;let a=new Y3(t),u=new W3(t.ajv);for(let l of r.validatorSchemasIds){let f=r.refResolver.getSchema(l);u.addSchema(f,l);let d=r.refResolver.getSchemaDependencies(l);for(let[h,p]of Object.entries(d))u.addSchema(p,h)}if(t.debugMode&&(t.mode="debug"),t.mode==="debug")return{validator:u,serializer:a,code:`validator
serializer
${o}`,ajv:u.ajv};let c=new Function("validator","serializer",o);return t.mode==="standalone"?Dh()(c,r,a,u):c(u,a)}var Q3=["properties","required","additionalProperties","patternProperties","maxProperties","minProperties","dependencies"],Z3=["items","additionalItems","maxItems","minItems","uniqueItems","contains"],e5=["maxLength","minLength","pattern"],t5=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum"];function NT(e){for(var t of Q3)if(t in e)return"object";for(var t of Z3)if(t in e)return"array";for(var t of e5)if(t in e)return"string";for(var t of t5)if(t in e)return"number";return e.type}function r5(e,t){let r=t.schema,n=Object.keys(r.properties||{}),s=`
    const propertiesKeys = ${JSON.stringify(n)}
    for (const [key, value] of Object.entries(obj)) {
      if (
        propertiesKeys.includes(key) ||
        value === undefined ||
        typeof value === 'function' ||
        typeof value === 'symbol'
      ) continue
  `,i=t.getPropertyLocation("patternProperties"),o=i.schema;if(o!==void 0)for(let c in o){let l=i.getPropertyLocation(c);s+=`
        if (/${c.replace(/\\*\//g,"\\/")}/.test(key)) {
          ${oi}
          json += serializer.asString(key) + ':'
          ${Nr(e,l,"value")}
          continue
        }
      `}let u=t.getPropertyLocation("additionalProperties").schema;if(u!==void 0)if(u===!0)s+=`
        ${oi}
        json += serializer.asString(key) + ':' + JSON.stringify(value)
      `;else{let c=t.getPropertyLocation("additionalProperties");s+=`
        ${oi}
        json += serializer.asString(key) + ':'
        ${Nr(e,c,"value")}
      `}return s+=`
    }
  `,s}function n5(e,t){let r="",n=t.schema,s=n.required||[],i=t.getPropertyLocation("properties"),o=[],a=[];if(n.properties)for(let c of Object.keys(n.properties)){if(s.indexOf(c)===-1)continue;let l=i.getPropertyLocation(c);l.schema.$ref&&(l=ai(e,t,l.schema.$ref));let f=JSON.stringify(c);l.schema.default===void 0&&(r+=`if (obj[${f}] === undefined) throw new Error('${f} is required!')
`,a.push(c)),o.push(c)}for(let c of s)o.indexOf(c)===-1&&(r+=`if (obj['${c}'] === undefined) throw new Error('"${c}" is required!')
`);r+=`
    let addComma = false
    let json = '${e.wrapObjects?"{":""}'
  `;let u=e.wrapObjects;if(e.wrapObjects=!0,n.properties)for(let c of Object.keys(n.properties)){let l=i.getPropertyLocation(c);l.schema.$ref&&(l=ai(e,t,l.schema.$ref));let f=JSON.stringify(c);if(a.indexOf(c)!==-1)r+=`
        ${oi}
        json += ${JSON.stringify(f+":")}
        ${Nr(e,l,`obj[${f}]`)}
      `;else{r+=`
        if (obj[${f}] !== undefined) {
          ${oi}
          json += ${JSON.stringify(f+":")}
          ${Nr(e,l,`obj[${f}]`)}
        }
        `;let d=l.schema.default;d!==void 0&&(r+=`
        else {
          ${oi}
          json += ${JSON.stringify(f+":"+JSON.stringify(d))}
        }
        `)}}return(n.patternProperties||n.additionalProperties)&&(r+=r5(e,t)),e.wrapObjects=u,r+=`
  return json${e.wrapObjects?" + '}'":""}
  `,r}function kT(e,t,r,n){let s=t.getPropertyLocation("allOf");for(let i=0;i<r.allOf.length;i++){let o=r.allOf[i];if(o.$ref){let u=s.getPropertyLocation(i);o=ai(e,u,o.$ref).schema}let a=o.type;if(a===void 0&&(a=NT(o)),a!==void 0){if(n.type!==void 0&&n.type!==a)throw new Error("allOf schemas have different type values");n.type=a}if(o.format!==void 0){if(n.format!==void 0&&n.format!==o.format)throw new Error("allOf schemas have different format values");n.format=o.format}if(o.nullable!==void 0){if(n.nullable!==void 0&&n.nullable!==o.nullable)throw new Error("allOf schemas have different nullable values");n.nullable=o.nullable}o.properties!==void 0&&(n.properties===void 0&&(n.properties={}),Object.assign(n.properties,o.properties)),o.additionalProperties!==void 0&&(n.additionalProperties===void 0&&(n.additionalProperties={}),Object.assign(n.additionalProperties,o.additionalProperties)),o.patternProperties!==void 0&&(n.patternProperties===void 0&&(n.patternProperties={}),Object.assign(n.patternProperties,o.patternProperties)),o.required!==void 0&&(n.required===void 0&&(n.required=[]),n.required.push(...o.required)),o.oneOf!==void 0&&(n.oneOf===void 0&&(n.oneOf=[]),n.oneOf.push(...o.oneOf)),o.anyOf!==void 0&&(n.anyOf===void 0&&(n.anyOf=[]),n.anyOf.push(...o.anyOf)),o.allOf!==void 0&&kT(e,t,o,n)}delete n.allOf,n.$id=`merged_${OT()}`,e.refResolver.addSchema(n),t.addMergedSchema(n,n.$id)}function s5(e,t,r){e.validatorSchemasIds.add(t.getSchemaId());let n=Lp({},t.schema),s=n.then,i=n.else||{additionalProperties:!0};delete n.if,delete n.then,delete n.else;let a=t.getPropertyLocation("if").getSchemaRef(),u=t.getPropertyLocation("then");u.schema=Lp(n,s);let c=t.getPropertyLocation("else");return c.schema=Lp(n,i),`
    if (validator.validate("${a}", ${r})) {
      ${Nr(e,u,r)}
    } else {
      ${Nr(e,c,r)}
    }
  `}function i5(e){return`(${e} && typeof ${e}.toJSON === 'function')
    ? ${e}.toJSON()
    : ${e}
  `}function qT(e,t){let r=t.schema;if(e.functionsNamesBySchema.has(r))return e.functionsNamesBySchema.get(r);let n=jT(e);e.functionsNamesBySchema.set(r,n);let s=t.getSchemaRef();s.startsWith(e.rootSchemaId)&&(s=s.replace(e.rootSchemaId,""));let i=`
  `;return i+=`
    // ${s}
    function ${n} (input) {
      const obj = ${i5("input")}
      ${n5(e,t)}
    }
  `,e.functions.push(i),n}function o5(e,t){let r=t.schema,n=t.getPropertyLocation("items");n.schema=n.schema||{},n.schema.$ref&&(n=ai(e,n,n.schema.$ref));let s=n.schema;if(e.functionsNamesBySchema.has(r))return e.functionsNamesBySchema.get(r);let i=jT(e);e.functionsNamesBySchema.set(r,i);let o=t.getSchemaRef();o.startsWith(e.rootSchemaId)&&(o=o.replace(e.rootSchemaId,""));let a=`
    function ${i} (obj) {
      // ${o}
  `;if(a+=`
    if (!Array.isArray(obj)) {
      throw new TypeError(\`The value of '${o}' does not match schema definition.\`)
    }
    const arrayLength = obj.length
  `,!r.additionalItems&&Array.isArray(s)&&(a+=`
      if (arrayLength > ${s.length}) {
        throw new Error(\`Item at ${s.length} does not match schema definition.\`)
      }
    `),CT==="json-stringify"&&(a+=`if (arrayLength && arrayLength >= ${yl}) return JSON.stringify(obj)
`),a+=`
    let jsonOutput = ''
  `,Array.isArray(s)){for(let u=0;u<s.length;u++){let c=s[u],l=Nr(e,n.getPropertyLocation(u),`obj[${u}]`);a+=`
        if (${u} < arrayLength) {
          if (${DT(c.type,`[${u}]`)}) {
            let json = ''
            ${l}
            jsonOutput += json
            if (${u} < arrayLength - 1) {
              jsonOutput += ','
            }
          } else {
            throw new Error(\`Item at ${u} does not match schema definition.\`)
          }
        }
        `}r.additionalItems&&(a+=`
        for (let i = ${s.length}; i < arrayLength; i++) {
          jsonOutput += JSON.stringify(obj[i])
          if (i < arrayLength - 1) {
            jsonOutput += ','
          }
        }`)}else{let u=Nr(e,n,"obj[i]");a+=`
      for (let i = 0; i < arrayLength; i++) {
        let json = ''
        ${u}
        jsonOutput += json
        if (i < arrayLength - 1) {
          jsonOutput += ','
        }
      }`}return a+="\n    return `[${jsonOutput}]`\n  }",e.functions.push(a),i}function DT(e,t){let r;switch(e){case"null":r=`obj${t} === null`;break;case"string":r=`typeof obj${t} === 'string'`;break;case"integer":r=`Number.isInteger(obj${t})`;break;case"number":r=`Number.isFinite(obj${t})`;break;case"boolean":r=`typeof obj${t} === 'boolean'`;break;case"object":r=`obj${t} && typeof obj${t} === 'object' && obj${t}.constructor === Object`;break;case"array":r=`Array.isArray(obj${t})`;break;default:Array.isArray(e)&&(r=`(${e.map(s=>DT(s,t)).join(" || ")})`)}return r}function jT(e){return"anonymous"+e.functionsCounter++}function a5(e,t,r){let s=t.schema.type.sort(a=>a==="null"?-1:1),i="";s.forEach((a,u)=>{t.schema={...t.schema,type:a};let c=xT(e,t,r),l=u===0?"if":"else if";switch(a){case"null":i+=`
          ${l} (${r} === null)
            ${c}
          `;break;case"string":{i+=`
          ${l}(
            typeof ${r} === "string" ||
            ${r} === null ||
            ${r} instanceof Date ||
            ${r} instanceof RegExp ||
            (
              typeof ${r} === "object" &&
              typeof ${r}.toString === "function" &&
              ${r}.toString !== Object.prototype.toString &&
              !(${r} instanceof Date)
            )
          )
            ${c}
        `;break}case"array":{i+=`
          ${l}(Array.isArray(${r}))
            ${c}
        `;break}case"integer":{i+=`
          ${l}(Number.isInteger(${r}) || ${r} === null)
            ${c}
        `;break}default:{i+=`
          ${l}(typeof ${r} === "${a}" || ${r} === null)
            ${c}
        `;break}}});let o=t.getSchemaRef();return o.startsWith(e.rootSchemaId)&&(o=o.replace(e.rootSchemaId,"")),i+=`
    else throw new TypeError(\`The value of '${o}' does not match schema definition.\`)
  `,i}function xT(e,t,r){let n=t.schema;switch(n.type){case"null":return"json += 'null'";case"string":return n.format==="date-time"?`json += serializer.asDateTime(${r})`:n.format==="date"?`json += serializer.asDate(${r})`:n.format==="time"?`json += serializer.asTime(${r})`:`json += serializer.asString(${r})`;case"integer":return`json += serializer.asInteger(${r})`;case"number":return`json += serializer.asNumber(${r})`;case"boolean":return`json += serializer.asBoolean(${r})`;case"object":return`json += ${qT(e,t)}(${r})`;case"array":return`json += ${o5(e,t)}(${r})`;case void 0:return`json += JSON.stringify(${r})`;default:throw new Error(`${n.type} unsupported`)}}function u5(e,t){let r=e.schema,n=r.type,s=Array.isArray(n)&&n.includes("null"),i="";return s&&(i+=`
      if (${t} === null) {
        json += 'null'
      } else {
    `),i+=`json += '${JSON.stringify(r.const).replace(J3,"\\'")}'`,s&&(i+=`
      }
    `),i}function Nr(e,t,r){let n=t.schema;if(typeof n=="boolean")return`json += JSON.stringify(${r})`;if(n.$ref&&(t=ai(e,t,n.$ref),n=t.schema),n.type===void 0){let a=NT(n);a&&(n.type=a)}if(n.if&&n.then)return s5(e,t,r);n.allOf&&(kT(e,t,n,G3(n)),n=t.schema);let s=n.type,i="";if((s===void 0||s==="object")&&(n.anyOf||n.oneOf)){if(e.validatorSchemasIds.add(t.getSchemaId()),n.type==="object"){e.wrapObjects=!1;let l=qT(e,t);i+=`
        json += '{'
        json += ${l}(${r})
        json += ','
      `}let a=n.anyOf?"anyOf":"oneOf",u=t.getPropertyLocation(a);for(let l=0;l<t.schema[a].length;l++){let f=u.getPropertyLocation(l),d=f.getSchemaRef(),h=Nr(e,f,r);i+=`
        ${l===0?"if":"else if"}(validator.validate("${d}", ${r}))
          ${h}
      `}let c=t.getSchemaRef();return c.startsWith(e.rootSchemaId)&&(c=c.replace(e.rootSchemaId,"")),i+=`
      else throw new TypeError(\`The value of '${c}' does not match schema definition.\`)
    `,n.type==="object"&&(i+=`
        json += '}'
      `,e.wrapObjects=!0),i}let o=n.nullable===!0;return o&&(i+=`
      if (${r} === null) {
        json += 'null'
      } else {
    `),n.const!==void 0?i+=u5(t,r):Array.isArray(s)?i+=a5(e,t,r):i+=xT(e,t,r),o&&(i+=`
      }
    `),i}ui.exports=Mp;ui.exports.default=Mp;ui.exports.build=Mp;ui.exports.validLargeArrayMechanisms=IT;ui.exports.restore=function({code:e,validator:t,serializer:r}){return Function.apply(null,["validator","serializer",e]).apply(null,[t,r])}});var MT=E((aJ,Vp)=>{"use strict";var l5=Hp();function FT(e={readMode:!0}){if(e.readMode===!0&&typeof e.restoreFunction!="function")throw new Error("You must provide a function for the restoreFunction-option when readMode ON");if(e.readMode!==!0&&typeof e.storeFunction!="function")throw new Error("You must provide a function for the storeFunction-option when readMode OFF");if(e.readMode===!0)return function(){return function(n){return e.restoreFunction(n)}};let t=l5();return function(n,s={}){s.mode="standalone";let i=t(n,s);return function(o){let a=i(o);return e.storeFunction(o,a),new Function(a)}}}Vp.exports=FT;Vp.exports.default=FT});var Hp=E((uJ,Fo)=>{"use strict";var c5=LT();function zp(){return function(t,r){let n=Object.assign({},r,{schema:t});return f5.bind(null,n)}}function f5(e,{schema:t}){return e.schema&&t.$id&&e.schema[t.$id]&&(e.schema={...e.schema},delete e.schema[t.$id]),c5(t,e)}Fo.exports=zp;Fo.exports.default=zp;Fo.exports.SerializerSelector=zp;Fo.exports.StandaloneSerializer=MT()});var en=E(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});Mo.checkMetadata=void 0;var d5=se(),h5={keyword:"metadata",schemaType:"object",code(e){VT(e);let{gen:t,schema:r,it:n}=e;if((0,d5.alwaysValidSchema)(n,r))return;let s=t.name("valid");e.subschema({keyword:"metadata",jtdMetadata:!0},s),e.ok(s)}};function VT({it:e,keyword:t},r){if(e.jtdMetadata!==r)throw new Error(`JTD: "${t}" cannot be used in this schema location`)}Mo.checkMetadata=VT;Mo.default=h5});var gl=E(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});Ho.hasRef=void 0;var HT=es(),Vo=X(),p5=wn(),zT=Zt(),UT=Nd(),m5=en(),y5={keyword:"ref",schemaType:"string",code(e){(0,m5.checkMetadata)(e);let{gen:t,data:r,schema:n,parentSchema:s,it:i}=e,{schemaEnv:{root:o}}=i,a=t.name("valid");s.nullable?(t.var(a,(0,Vo._)`${r} === null`),t.if((0,Vo.not)(a),u)):(t.var(a,!1),u()),e.ok(a);function u(){var f;let d=(f=o.schema.definitions)===null||f===void 0?void 0:f[n];if(!d)throw new p5.default(i.opts.uriResolver,"",n,`No definition ${n}`);Up(d)||!i.opts.inlineRefs?c(d):l(d)}function c(f){let d=HT.compileSchema.call(i.self,new HT.SchemaEnv({schema:f,root:o,schemaPath:`/definitions/${n}`})),h=(0,UT.getValidate)(e,d),p=t.const("_errs",zT.default.errors);(0,UT.callRef)(e,h,d,d.$async),t.assign(a,(0,Vo._)`${p} === ${zT.default.errors}`)}function l(f){let d=t.scopeValue("schema",i.opts.code.source===!0?{ref:f,code:(0,Vo.stringify)(f)}:{ref:f});e.subschema({schema:f,dataTypes:[],schemaPath:Vo.nil,topSchemaRef:d,errSchemaPath:`/definitions/${n}`},a)}}};function Up(e){for(let t in e){let r;if(t==="ref"||typeof(r=e[t])=="object"&&Up(r))return!0}return!1}Ho.hasRef=Up;Ho.default=y5});var Gp=E(Bp=>{"use strict";Object.defineProperty(Bp,"__esModule",{value:!0});var g5=/t|\s/i,_5=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,v5=/^(\d\d):(\d\d):(\d\d)(?:\.\d+)?(?:z|([+-]\d\d)(?::?(\d\d))?)$/i,E5=[0,31,28,31,30,31,30,31,31,30,31,30,31];function GT(e,t){let r=e.split(g5);return r.length===2&&BT(r[0])&&S5(r[1])||t&&r.length===1&&BT(r[0])}Bp.default=GT;function BT(e){let t=_5.exec(e);if(!t)return!1;let r=+t[1],n=+t[2],s=+t[3];return n>=1&&n<=12&&s>=1&&(s<=E5[n]||n===2&&s===29&&(r%100===0?r%400===0:r%4===0))}function S5(e){let t=v5.exec(e);if(!t)return!1;let r=+t[1],n=+t[2],s=+t[3],i=+(t[4]||0),o=+(t[5]||0);return r<=23&&n<=59&&s<=59||r-i===23&&n-o===59&&s===60}GT.code='require("ajv/dist/runtime/timestamp").default'});var li=E(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});On.typeErrorParams=On.typeErrorMessage=On.typeError=void 0;var b5=X();function w5(e){return{message:t=>KT(t,e),params:t=>YT(t,e)}}On.typeError=w5;function KT({parentSchema:e},t){return e?.nullable?`must be ${t} or null`:`must be ${t}`}On.typeErrorMessage=KT;function YT({parentSchema:e},t){return(0,b5._)`{type: ${t}, nullable: ${!!e?.nullable}}`}On.typeErrorParams=YT});var Kp=E(ci=>{"use strict";Object.defineProperty(ci,"__esModule",{value:!0});ci.intRange=void 0;var Bt=X(),R5=Gp(),T5=se(),P5=en(),WT=li();ci.intRange={int8:[-128,127,3],uint8:[0,255,3],int16:[-32768,32767,5],uint16:[0,65535,5],int32:[-2147483648,2147483647,10],uint32:[0,4294967295,10]};var $5={message:e=>(0,WT.typeErrorMessage)(e,e.schema),params:e=>(0,WT.typeErrorParams)(e,e.schema)};function O5(e){let{gen:t,data:r,it:n}=e,{timestamp:s,allowDate:i}=n.opts;if(s==="date")return(0,Bt._)`${r} instanceof Date `;let o=(0,T5.useFunc)(t,R5.default),a=i?(0,Bt._)`, true`:Bt.nil,u=(0,Bt._)`typeof ${r} == "string" && ${o}(${r}${a})`;return s==="string"?u:(0,Bt.or)((0,Bt._)`${r} instanceof Date`,u)}var A5={keyword:"type",schemaType:"string",error:$5,code(e){(0,P5.checkMetadata)(e);let{data:t,schema:r,parentSchema:n,it:s}=e,i;switch(r){case"boolean":case"string":i=(0,Bt._)`typeof ${t} == ${r}`;break;case"timestamp":{i=O5(e);break}case"float32":case"float64":i=(0,Bt._)`typeof ${t} == "number"`;break;default:{let o=r;if(i=(0,Bt._)`typeof ${t} == "number" && isFinite(${t}) && !(${t} % 1)`,!s.opts.int32range&&(o==="int32"||o==="uint32"))o==="uint32"&&(i=(0,Bt._)`${i} && ${t} >= 0`);else{let[a,u]=ci.intRange[o];i=(0,Bt._)`${i} && ${t} >= ${a} && ${t} <= ${u}`}}}e.pass(n.nullable?(0,Bt.or)((0,Bt._)`${t} === null`,i):i)}};ci.default=A5});var di=E(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});fi.checkNullableObject=fi.checkNullable=void 0;var _l=X();function JT({gen:e,data:t,parentSchema:r},n=_l.nil){let s=e.name("valid");return r.nullable?(e.let(s,(0,_l._)`${t} === null`),n=(0,_l.not)(s)):e.let(s,!1),[s,n]}fi.checkNullable=JT;function C5(e,t){let[r,n]=JT(e,t);return[r,(0,_l._)`${n} && typeof ${e.data} == "object" && !Array.isArray(${e.data})`]}fi.checkNullableObject=C5});var XT=E(Yp=>{"use strict";Object.defineProperty(Yp,"__esModule",{value:!0});var An=X(),I5=en(),N5=di(),k5={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,An._)`{allowedValues: ${e}}`},q5={keyword:"enum",schemaType:"array",error:k5,code(e){(0,I5.checkMetadata)(e);let{gen:t,data:r,schema:n,schemaValue:s,parentSchema:i,it:o}=e;if(n.length===0)throw new Error("enum must have non-empty array");if(n.length!==new Set(n).size)throw new Error("enum items must be unique");let a,u=(0,An._)`typeof ${r} == "string"`;if(n.length>=o.opts.loopEnum){let l;[a,l]=(0,N5.checkNullable)(e,u),t.if(l,c)}else{if(!Array.isArray(n))throw new Error("ajv implementation error");a=(0,An.and)(u,(0,An.or)(...n.map(l=>(0,An._)`${r} === ${l}`))),i.nullable&&(a=(0,An.or)((0,An._)`${r} === null`,a))}e.pass(a);function c(){t.forOf("v",s,l=>t.if((0,An._)`${a} = ${r} === ${l}`,()=>t.break()))}}};Yp.default=q5});var ZT=E(Wp=>{"use strict";Object.defineProperty(Wp,"__esModule",{value:!0});var D5=se(),j5=yt(),QT=X(),x5=en(),L5=di(),F5=li(),M5={keyword:"elements",schemaType:"object",error:(0,F5.typeError)("array"),code(e){(0,x5.checkMetadata)(e);let{gen:t,data:r,schema:n,it:s}=e;if((0,D5.alwaysValidSchema)(s,n))return;let[i]=(0,L5.checkNullable)(e);t.if((0,QT.not)(i),()=>t.if((0,QT._)`Array.isArray(${r})`,()=>t.assign(i,(0,j5.validateArray)(e)),()=>e.error())),e.ok(i)}};Wp.default=M5});var Xp=E(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.validateProperties=Cn.error=void 0;var Jp=yt(),eP=se(),tn=X(),V5=en(),H5=di(),tP=li(),hi;(function(e){e.Additional="additional",e.Missing="missing"})(hi||(hi={}));Cn.error={message:e=>{let{params:t}=e;return t.propError?t.propError===hi.Additional?"must NOT have additional properties":`must have property '${t.missingProperty}'`:(0,tP.typeErrorMessage)(e,"object")},params:e=>{let{params:t}=e;return t.propError?t.propError===hi.Additional?(0,tn._)`{error: ${t.propError}, additionalProperty: ${t.additionalProperty}}`:(0,tn._)`{error: ${t.propError}, missingProperty: ${t.missingProperty}}`:(0,tP.typeErrorParams)(e,"object")}};var z5={keyword:"properties",schemaType:"object",error:Cn.error,code:rP};function rP(e){(0,V5.checkMetadata)(e);let{gen:t,data:r,parentSchema:n,it:s}=e,{additionalProperties:i,nullable:o}=n;if(s.jtdDiscriminator&&o)throw new Error("JTD: nullable inside discriminator mapping");if(h())throw new Error("JTD: properties and optionalProperties have common members");let[a,u]=p("properties"),[c,l]=p("optionalProperties");if(u.length===0&&l.length===0&&i)return;let[f,d]=s.jtdDiscriminator===void 0?(0,H5.checkNullableObject)(e,r):[t.let("valid",!1),!0];t.if(d,()=>t.assign(f,!0).block(()=>{y(u,"properties",!0),y(l,"optionalProperties"),i||_()})),e.pass(f);function h(){let g=n.properties,m=n.optionalProperties;if(!(g&&m))return!1;for(let T in g)if(Object.prototype.hasOwnProperty.call(m,T))return!0;return!1}function p(g){let m=n[g],T=m?(0,Jp.allSchemaProperties)(m):[];if(s.jtdDiscriminator&&T.some(b=>b===s.jtdDiscriminator))throw new Error(`JTD: discriminator tag used in ${g}`);let A=T.filter(b=>!(0,eP.alwaysValidSchema)(s,m[b]));return[T,A]}function y(g,m,T){let A=t.var("valid");for(let $ of g)t.if((0,Jp.propertyInData)(t,r,$,s.opts.ownProperties),()=>v($,m,A),()=>b($)),e.ok(A);function b($){T?(t.assign(A,!1),e.error(!1,{propError:hi.Missing,missingProperty:$},{schemaPath:$})):t.assign(A,!0)}}function v(g,m,T){e.subschema({keyword:m,schemaProp:g,dataProp:g},T)}function _(){t.forIn("key",r,g=>{let m=w(g,a,"properties",s.jtdDiscriminator),T=w(g,c,"optionalProperties"),A=m===!0?T:T===!0?m:(0,tn.and)(m,T);t.if(A,()=>{s.opts.removeAdditional?t.code((0,tn._)`delete ${r}[${g}]`):(e.error(!1,{propError:hi.Additional,additionalProperty:g},{instancePath:g,parentSchema:!0}),s.opts.allErrors||t.break())})})}function w(g,m,T,A){let b;if(m.length>8){let $=(0,eP.schemaRefOrVal)(s,n[T],T);b=(0,tn.not)((0,Jp.isOwnProperty)(t,$,g)),A!==void 0&&(b=(0,tn.and)(b,(0,tn._)`${g} !== ${A}`))}else if(m.length||A!==void 0){let $=A===void 0?m:[A].concat(m);b=(0,tn.and)(...$.map(k=>(0,tn._)`${g} !== ${k}`))}else b=!0;return b}}Cn.validateProperties=rP;Cn.default=z5});var sP=E(Qp=>{"use strict";Object.defineProperty(Qp,"__esModule",{value:!0});var nP=Xp(),U5={keyword:"optionalProperties",schemaType:"object",error:nP.error,code(e){e.parentSchema.properties||(0,nP.validateProperties)(e)}};Qp.default=U5});var oP=E(Zp=>{"use strict";Object.defineProperty(Zp,"__esModule",{value:!0});var cs=X(),B5=en(),G5=di(),iP=li(),vl=_h(),K5={message:e=>{let{schema:t,params:r}=e;return r.discrError?r.discrError===vl.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in mapping`:(0,iP.typeErrorMessage)(e,"object")},params:e=>{let{schema:t,params:r}=e;return r.discrError?(0,cs._)`{error: ${r.discrError}, tag: ${t}, tagValue: ${r.tag}}`:(0,iP.typeErrorParams)(e,"object")}},Y5={keyword:"discriminator",schemaType:"string",implements:["mapping"],error:K5,code(e){(0,B5.checkMetadata)(e);let{gen:t,data:r,schema:n,parentSchema:s}=e,[i,o]=(0,G5.checkNullableObject)(e,r);t.if(o),a(),t.elseIf((0,cs.not)(i)),e.error(),t.endIf(),e.ok(i);function a(){let l=t.const("tag",(0,cs._)`${r}${(0,cs.getProperty)(n)}`);t.if((0,cs._)`${l} === undefined`),e.error(!1,{discrError:vl.DiscrError.Tag,tag:l}),t.elseIf((0,cs._)`typeof ${l} == "string"`),u(l),t.else(),e.error(!1,{discrError:vl.DiscrError.Tag,tag:l},{instancePath:n}),t.endIf()}function u(l){t.if(!1);for(let f in s.mapping)t.elseIf((0,cs._)`${l} === ${f}`),t.assign(i,c(f));t.else(),e.error(!1,{discrError:vl.DiscrError.Mapping,tag:l},{instancePath:n,schemaPath:"mapping",parentSchema:!0}),t.endIf()}function c(l){let f=t.name("valid");return e.subschema({keyword:"mapping",schemaProp:l,jtdDiscriminator:n},f),f}}};Zp.default=Y5});var uP=E(em=>{"use strict";Object.defineProperty(em,"__esModule",{value:!0});var aP=se(),El=X(),W5=en(),J5=di(),X5=li(),Q5={keyword:"values",schemaType:"object",error:(0,X5.typeError)("object"),code(e){(0,W5.checkMetadata)(e);let{gen:t,data:r,schema:n,it:s}=e,[i,o]=(0,J5.checkNullableObject)(e,r);(0,aP.alwaysValidSchema)(s,n)?t.if((0,El.not)((0,El.or)(o,i)),()=>e.error()):(t.if(o),t.assign(i,a()),t.elseIf((0,El.not)(i)),e.error(),t.endIf()),e.ok(i);function a(){let u=t.name("valid");if(s.allErrors){let l=t.let("valid",!0);return c(()=>t.assign(l,!1)),l}return t.var(u,!0),c(()=>t.break()),u;function c(l){t.forIn("key",r,f=>{e.subschema({keyword:"values",dataProp:f,dataPropType:aP.Type.Str},u),t.if((0,El.not)(u),l)})}}}};em.default=Q5});var lP=E(tm=>{"use strict";Object.defineProperty(tm,"__esModule",{value:!0});var Z5=yt(),e9={keyword:"union",schemaType:"array",trackErrors:!0,code:Z5.validateUnion,error:{message:"must match a schema in union"}};tm.default=e9});var cP=E(rm=>{"use strict";Object.defineProperty(rm,"__esModule",{value:!0});var t9=gl(),r9=Kp(),n9=XT(),s9=ZT(),i9=Xp(),o9=sP(),a9=oP(),u9=uP(),l9=lP(),c9=en(),f9=["definitions",t9.default,r9.default,n9.default,s9.default,i9.default,o9.default,a9.default,u9.default,l9.default,c9.default,{keyword:"additionalProperties",schemaType:"boolean"},{keyword:"nullable",schemaType:"boolean"}];rm.default=f9});var pP=E(nm=>{"use strict";Object.defineProperty(nm,"__esModule",{value:!0});var rn=e=>{let t={nullable:{type:"boolean"},metadata:{optionalProperties:{union:{elements:{ref:"schema"}}},additionalProperties:!0}};return e&&(t.definitions={values:{ref:"schema"}}),t},d9=e=>({optionalProperties:rn(e)}),h9=e=>({properties:{ref:{type:"string"}},optionalProperties:rn(e)}),p9=e=>({properties:{type:{enum:["boolean","timestamp","string","float32","float64","int8","uint8","int16","uint16","int32","uint32"]}},optionalProperties:rn(e)}),m9=e=>({properties:{enum:{elements:{type:"string"}}},optionalProperties:rn(e)}),y9=e=>({properties:{elements:{ref:"schema"}},optionalProperties:rn(e)}),dP=e=>({properties:{properties:{values:{ref:"schema"}}},optionalProperties:{optionalProperties:{values:{ref:"schema"}},additionalProperties:{type:"boolean"},...rn(e)}}),hP=e=>({properties:{optionalProperties:{values:{ref:"schema"}}},optionalProperties:{additionalProperties:{type:"boolean"},...rn(e)}}),g9=e=>({properties:{discriminator:{type:"string"},mapping:{values:{metadata:{union:[dP(!1),hP(!1)]}}}},optionalProperties:rn(e)}),_9=e=>({properties:{values:{ref:"schema"}},optionalProperties:rn(e)}),fP=e=>({metadata:{union:[d9,h9,p9,m9,y9,dP,hP,g9,_9].map(t=>t(e))}}),v9={definitions:{schema:fP(!1)},...fP(!0)};nm.default=v9});var sm=E(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});Sl.jtdForms=void 0;Sl.jtdForms=["elements","values","discriminator","properties","optionalProperties","enum","type","ref"]});var yP=E(om=>{"use strict";Object.defineProperty(om,"__esModule",{value:!0});var im=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,E9={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function mP(e){return im.lastIndex=0,'"'+(im.test(e)?e.replace(im,t=>{let r=E9[t];return typeof r=="string"?r:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}):e)+'"'}om.default=mP;mP.code='require("ajv/dist/runtime/quote").default'});var bP=E(um=>{"use strict";Object.defineProperty(um,"__esModule",{value:!0});var S9=sm(),_P=es(),he=X(),b9=wn(),De=Zt(),w9=yt(),R9=gl(),T9=se(),P9=yP(),$9={elements:A9,values:C9,discriminator:I9,properties:gP,optionalProperties:gP,enum:zo,type:N9,ref:q9};function vP(e,t){let r=_P.getCompilingSchema.call(this,e);if(r)return r;let{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new he.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a=o.scopeName("serialize"),u={self:this,gen:o,schema:e.schema,schemaEnv:e,definitions:t,data:De.default.data},c;try{this._compilations.add(e),e.serializeName=a,o.func(a,De.default.data,!1,()=>{o.let(De.default.json,(0,he.str)``),Uo(u),o.return(De.default.json)}),o.optimize(this.opts.code.optimize);let l=o.toString();c=`${o.scopeRefs(De.default.scope)}return ${l}`;let d=new Function(`${De.default.scope}`,c)(this.scope.get());this.scope.value(a,{ref:d}),e.serialize=d}catch(l){throw c&&this.logger.error("Error compiling serializer, function code:",c),delete e.serialize,delete e.serializeName,l}finally{this._compilations.delete(e)}return e}um.default=vP;function Uo(e){let t;for(let r of S9.jtdForms)if(r in e.schema){t=r;break}O9(e,t?$9[t]:j9)}function O9(e,t){let{gen:r,schema:n,data:s}=e;if(!n.nullable)return t(e);r.if((0,he._)`${s} === undefined || ${s} === null`,()=>r.add(De.default.json,(0,he._)`"null"`),()=>t(e))}function A9(e){let{gen:t,schema:r,data:n}=e;t.add(De.default.json,(0,he.str)`[`);let s=t.let("first",!0);t.forOf("el",n,i=>{am(e,s),Uo({...e,schema:r.elements,data:i})}),t.add(De.default.json,(0,he.str)`]`)}function C9(e){let{gen:t,schema:r,data:n}=e;t.add(De.default.json,(0,he.str)`{`);let s=t.let("first",!0);t.forIn("key",n,i=>EP(e,i,r.values,s)),t.add(De.default.json,(0,he.str)`}`)}function EP(e,t,r,n){let{gen:s,data:i}=e;am(e,n),zo({...e,data:t}),s.add(De.default.json,(0,he.str)`:`);let o=s.const("value",(0,he._)`${i}${(0,he.getProperty)(t)}`);Uo({...e,schema:r,data:o})}function I9(e){let{gen:t,schema:r,data:n}=e,{discriminator:s}=r;t.add(De.default.json,(0,he.str)`{${JSON.stringify(s)}:`);let i=t.const("tag",(0,he._)`${n}${(0,he.getProperty)(s)}`);zo({...e,data:i}),t.if(!1);for(let o in r.mapping){t.elseIf((0,he._)`${i} === ${o}`);let a=r.mapping[o];SP({...e,schema:a},s)}t.endIf(),t.add(De.default.json,(0,he.str)`}`)}function gP(e){let{gen:t}=e;t.add(De.default.json,(0,he.str)`{`),SP(e),t.add(De.default.json,(0,he.str)`}`)}function SP(e,t){let{gen:r,schema:n,data:s}=e,{properties:i,optionalProperties:o}=n,a=d(i),u=d(o),c=h(a.concat(u)),l=!t,f;for(let _ of a)l?l=!1:r.add(De.default.json,(0,he.str)`,`),y(_,i[_],p(_));l&&(f=r.let("first",!0));for(let _ of u){let w=p(_);r.if((0,he.and)((0,he._)`${w} !== undefined`,(0,w9.isOwnProperty)(r,s,_)),()=>{am(e,f),y(_,o[_],w)})}n.additionalProperties&&r.forIn("key",s,_=>r.if(v(_,c),()=>EP(e,_,{},f)));function d(_){return _?Object.keys(_):[]}function h(_){if(t&&_.push(t),new Set(_).size!==_.length)throw new Error("JTD: properties/optionalProperties/disciminator overlap");return _}function p(_){return r.const("value",(0,he._)`${s}${(0,he.getProperty)(_)}`)}function y(_,w,g){r.add(De.default.json,(0,he.str)`${JSON.stringify(_)}:`),Uo({...e,schema:w,data:g})}function v(_,w){return w.length?(0,he.and)(...w.map(g=>(0,he._)`${_} !== ${g}`)):!0}}function N9(e){let{gen:t,schema:r,data:n}=e;switch(r.type){case"boolean":t.add(De.default.json,(0,he._)`${n} ? "true" : "false"`);break;case"string":zo(e);break;case"timestamp":t.if((0,he._)`${n} instanceof Date`,()=>t.add(De.default.json,(0,he._)`'"' + ${n}.toISOString() + '"'`),()=>zo(e));break;default:k9(e)}}function zo({gen:e,data:t}){e.add(De.default.json,(0,he._)`${(0,T9.useFunc)(e,P9.default)}(${t})`)}function k9({gen:e,data:t}){e.add(De.default.json,(0,he._)`"" + ${t}`)}function q9(e){let{gen:t,self:r,data:n,definitions:s,schema:i,schemaEnv:o}=e,{ref:a}=i,u=s[a];if(!u)throw new b9.default(r.opts.uriResolver,"",a,`No definition ${a}`);if(!(0,R9.hasRef)(u))return Uo({...e,schema:u});let{root:c}=o,l=vP.call(r,new _P.SchemaEnv({schema:u,root:c}),s);t.add(De.default.json,(0,he._)`${D9(t,l)}(${n})`)}function D9(e,t){return t.serialize?e.scopeValue("serialize",{ref:t.serialize}):(0,he._)`${e.scopeValue("wrapper",{ref:t})}.serialize`}function j9({gen:e,data:t}){e.add(De.default.json,(0,he._)`JSON.stringify(${t})`)}function am({gen:e},t){t?e.if(t,()=>e.assign(t,!1),()=>e.add(De.default.json,(0,he.str)`,`)):e.add(De.default.json,(0,he.str)`,`)}});var RP=E(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.parseJsonString=Nn.parseJsonNumber=Nn.parseJson=void 0;var x9=/position\s(\d+)$/;function nn(e,t){let r;nn.message=void 0;let n;t&&(e=e.slice(t));try{return nn.position=t+e.length,JSON.parse(e)}catch(s){if(n=x9.exec(s.message),!n){nn.message="unexpected end";return}r=+n[1];let i=e[r];e=e.slice(0,r),nn.position=t+r;try{return JSON.parse(e)}catch{nn.message=`unexpected token ${i}`;return}}}Nn.parseJson=nn;nn.message=void 0;nn.position=0;nn.code='require("ajv/dist/runtime/parseJson").parseJson';function sn(e,t,r){let n="",s;if(sn.message=void 0,e[t]==="-"&&(n+="-",t++),e[t]==="0")n+="0",t++;else if(!i(r)){o();return}if(r)return sn.position=t,+n;if(e[t]==="."&&(n+=".",t++,!i())){o();return}if(s=e[t],(s==="e"||s==="E")&&(n+="e",t++,s=e[t],(s==="+"||s==="-")&&(n+=s,t++),!i())){o();return}return sn.position=t,+n;function i(a){let u=!1;for(;s=e[t],s>="0"&&s<="9"&&(a===void 0||a-- >0);)u=!0,n+=s,t++;return u}function o(){sn.position=t,sn.message=t<e.length?`unexpected token ${e[t]}`:"unexpected end"}}Nn.parseJsonNumber=sn;sn.message=void 0;sn.position=0;sn.code='require("ajv/dist/runtime/parseJson").parseJsonNumber';var wP={b:"\b",f:"\f",n:`
`,r:"\r",t:"	",'"':'"',"/":"/","\\":"\\"},L9=97,F9=48;function In(e,t){let r="",n;for(In.message=void 0;n=e[t++],n!=='"';)if(n==="\\")if(n=e[t],n in wP)r+=wP[n],t++;else if(n==="u"){t++;let i=4,o=0;for(;i--;){if(o<<=4,n=e[t],n===void 0){s("unexpected end");return}if(n=n.toLowerCase(),n>="a"&&n<="f")o+=n.charCodeAt(0)-L9+10;else if(n>="0"&&n<="9")o+=n.charCodeAt(0)-F9;else{s(`unexpected token ${n}`);return}t++}r+=String.fromCharCode(o)}else{s(`unexpected token ${n}`);return}else if(n===void 0){s("unexpected end");return}else if(n.charCodeAt(0)>=32)r+=n;else{s(`unexpected token ${n}`);return}return In.position=t,r;function s(i){In.position=t,In.message=i}}Nn.parseJsonString=In;In.message=void 0;In.position=0;In.code='require("ajv/dist/runtime/parseJson").parseJsonString'});var DP=E(ym=>{"use strict";Object.defineProperty(ym,"__esModule",{value:!0});var M9=sm(),OP=es(),J=X(),V9=wn(),fe=Zt(),H9=yt(),z9=gl(),U9=Kp(),fm=RP(),AP=se(),B9=Gp(),G9={elements:J9,values:X9,discriminator:Z9,properties:TP,optionalProperties:TP,enum:t6,type:e6,ref:r6};function CP(e,t){let r=OP.getCompilingSchema.call(this,e);if(r)return r;let{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new J.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a=o.scopeName("parse"),u={self:this,gen:o,schema:e.schema,schemaEnv:e,definitions:t,data:fe.default.data,parseName:a,char:o.name("c")},c;try{this._compilations.add(e),e.parseName=a,K9(u),o.optimize(this.opts.code.optimize);let l=o.toString();c=`${o.scopeRefs(fe.default.scope)}return ${l}`;let d=new Function(`${fe.default.scope}`,c)(this.scope.get());this.scope.value(a,{ref:d}),e.parse=d}catch(l){throw c&&this.logger.error("Error compiling parser, function code:",c),delete e.parse,delete e.parseName,l}finally{this._compilations.delete(e)}return e}ym.default=CP;var cm=(0,J._)`undefined`;function K9(e){let{gen:t,parseName:r,char:n}=e;t.func(r,(0,J._)`${fe.default.json}, ${fe.default.jsonPos}, ${fe.default.jsonPart}`,!1,()=>{t.let(fe.default.data),t.let(n),t.assign((0,J._)`${r}.message`,cm),t.assign((0,J._)`${r}.position`,cm),t.assign(fe.default.jsonPos,(0,J._)`${fe.default.jsonPos} || 0`),t.const(fe.default.jsonLen,(0,J._)`${fe.default.json}.length`),bl(e),mm(e),t.if(fe.default.jsonPart,()=>{t.assign((0,J._)`${r}.position`,fe.default.jsonPos),t.return(fe.default.data)}),t.if((0,J._)`${fe.default.jsonPos} === ${fe.default.jsonLen}`,()=>t.return(fe.default.data)),pi(e)})}function bl(e){let t;for(let r of M9.jtdForms)if(r in e.schema){t=r;break}t?W9(e,G9[t]):hm(e)}var Y9=$P(!0,$P(!1,pi));function W9(e,t){let{gen:r,schema:n,data:s}=e;if(!n.nullable)return t(e);Bo(e,"null",t,()=>r.assign(s,null))}function J9(e){let{gen:t,schema:r,data:n}=e;kr(e,"[");let s=t.let("i",0);t.assign(n,(0,J._)`[]`),dm(e,"]",()=>{let i=t.let("el");bl({...e,schema:r.elements,data:i}),t.assign((0,J._)`${n}[${s}++]`,i)})}function X9(e){let{gen:t,schema:r,data:n}=e;kr(e,"{"),t.assign(n,(0,J._)`{}`),dm(e,"}",()=>Q9(e,r.values))}function dm(e,t,r){IP(e,t,r),kr(e,t)}function IP(e,t,r){let{gen:n}=e;n.for((0,J._)`;${fe.default.jsonPos}<${fe.default.jsonLen} && ${wl(1)}!==${t};`,()=>{r(),Bo(e,",",()=>n.break(),s)});function s(){Bo(e,t,()=>{},pi)}}function Q9(e,t){let{gen:r}=e,n=r.let("key");fs({...e,data:n}),kr(e,":"),kP(e,n,t)}function Z9(e){let{gen:t,data:r,schema:n}=e,{discriminator:s,mapping:i}=n;kr(e,"{"),t.assign(r,(0,J._)`{}`);let o=t.const("pos",fe.default.jsonPos),a=t.let("value"),u=t.let("tag");IP(e,"}",()=>{let c=t.let("key");fs({...e,data:c}),kr(e,":"),t.if((0,J._)`${c} === ${s}`,()=>{fs({...e,data:u}),t.assign((0,J._)`${r}[${c}]`,u),t.break()},()=>hm({...e,data:a}))}),t.assign(fe.default.jsonPos,o),t.if((0,J._)`${u} === undefined`),on(e,(0,J.str)`discriminator tag not found`);for(let c in i)t.elseIf((0,J._)`${u} === ${c}`),NP({...e,schema:i[c]},s);t.else(),on(e,(0,J.str)`discriminator value not in schema`),t.endIf()}function TP(e){let{gen:t,data:r}=e;kr(e,"{"),t.assign(r,(0,J._)`{}`),NP(e)}function NP(e,t){let{gen:r,schema:n,data:s}=e,{properties:i,optionalProperties:o,additionalProperties:a}=n;if(dm(e,"}",()=>{let u=r.let("key");if(fs({...e,data:u}),kr(e,":"),r.if(!1),PP(e,u,i),PP(e,u,o),t){r.elseIf((0,J._)`${u} === ${t}`);let c=r.let("tag");fs({...e,data:c})}r.else(),a?hm({...e,data:(0,J._)`${s}[${u}]`}):on(e,(0,J.str)`property ${u} not allowed`),r.endIf()}),i){let u=(0,H9.hasPropFunc)(r),c=(0,J.and)(...Object.keys(i).map(l=>(0,J._)`${u}.call(${s}, ${l})`));r.if((0,J.not)(c),()=>on(e,(0,J.str)`missing required properties`))}}function PP(e,t,r={}){let{gen:n}=e;for(let s in r)n.elseIf((0,J._)`${t} === ${s}`),kP(e,t,r[s])}function kP(e,t,r){bl({...e,schema:r,data:(0,J._)`${e.data}[${t}]`})}function e6(e){let{gen:t,schema:r,data:n,self:s}=e;switch(r.type){case"boolean":Y9(e);break;case"string":fs(e);break;case"timestamp":{fs(e);let i=(0,AP.useFunc)(t,B9.default),{allowDate:o,parseDate:a}=s.opts,u=o?(0,J._)`!${i}(${n}, true)`:(0,J._)`!${i}(${n})`,c=a?(0,J.or)(u,(0,J._)`(${n} = new Date(${n}), false)`,(0,J._)`isNaN(${n}.valueOf())`):u;t.if(c,()=>on(e,(0,J.str)`invalid timestamp`));break}case"float32":case"float64":lm(e);break;default:{let i=r.type;if(!s.opts.int32range&&(i==="int32"||i==="uint32"))lm(e,16),i==="uint32"&&t.if((0,J._)`${n} < 0`,()=>on(e,(0,J.str)`integer out of range`));else{let[o,a,u]=U9.intRange[i];lm(e,u),t.if((0,J._)`${n} < ${o} || ${n} > ${a}`,()=>on(e,(0,J.str)`integer out of range`))}}}}function fs(e){kr(e,'"'),pm(e,fm.parseJsonString)}function t6(e){let{gen:t,data:r,schema:n}=e,s=n.enum;kr(e,'"'),t.if(!1);for(let i of s){let o=JSON.stringify(i).slice(1);t.elseIf((0,J._)`${wl(o.length)} === ${o}`),t.assign(r,(0,J.str)`${i}`),t.add(fe.default.jsonPos,o.length)}t.else(),pi(e),t.endIf()}function lm(e,t){let{gen:r}=e;mm(e),r.if((0,J._)`"-0123456789".indexOf(${wl(1)}) < 0`,()=>pi(e),()=>pm(e,fm.parseJsonNumber,t))}function $P(e,t){return r=>{let{gen:n,data:s}=r;Bo(r,`${e}`,()=>t(r),()=>n.assign(s,e))}}function r6(e){let{gen:t,self:r,definitions:n,schema:s,schemaEnv:i}=e,{ref:o}=s,a=n[o];if(!a)throw new V9.default(r.opts.uriResolver,"",o,`No definition ${o}`);if(!(0,z9.hasRef)(a))return bl({...e,schema:a});let{root:u}=i,c=CP.call(r,new OP.SchemaEnv({schema:a,root:u}),n);qP(e,n6(t,c),!0)}function n6(e,t){return t.parse?e.scopeValue("parse",{ref:t.parse}):(0,J._)`${e.scopeValue("wrapper",{ref:t})}.parse`}function hm(e){pm(e,fm.parseJson)}function pm(e,t,r){qP(e,(0,AP.useFunc)(e.gen,t),r)}function qP(e,t,r){let{gen:n,data:s}=e;n.assign(s,(0,J._)`${t}(${fe.default.json}, ${fe.default.jsonPos}${r?(0,J._)`, ${r}`:J.nil})`),n.assign(fe.default.jsonPos,(0,J._)`${t}.position`),n.if((0,J._)`${s} === undefined`,()=>on(e,(0,J._)`${t}.message`))}function kr(e,t){Bo(e,t,pi)}function Bo(e,t,r,n){let{gen:s}=e,i=t.length;mm(e),s.if((0,J._)`${wl(i)} === ${t}`,()=>{s.add(fe.default.jsonPos,i),n?.(e)},()=>r(e))}function mm({gen:e,char:t}){e.code((0,J._)`while((${t}=${fe.default.json}[${fe.default.jsonPos}],${t}===" "||${t}==="\\n"||${t}==="\\r"||${t}==="\\t"))${fe.default.jsonPos}++;`)}function wl(e){return e===1?(0,J._)`${fe.default.json}[${fe.default.jsonPos}]`:(0,J._)`${fe.default.json}.slice(${fe.default.jsonPos}, ${fe.default.jsonPos}+${e})`}function pi(e){on(e,(0,J._)`"unexpected token " + ${fe.default.json}[${fe.default.jsonPos}]`)}function on({gen:e,parseName:t},r){e.assign((0,J._)`${t}.message`,r),e.assign((0,J._)`${t}.position`,fe.default.jsonPos),e.return(cm)}});var _m=E((Be,jP)=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.MissingRefError=Be.ValidationError=Be.CodeGen=Be.Name=Be.nil=Be.stringify=Be.str=Be._=Be.KeywordCxt=void 0;var s6=Cd(),i6=cP(),o6=pP(),a6=bP(),u6=DP(),gm="JTD-meta-schema",Rl=class extends s6.default{constructor(t={}){super({...t,jtd:!0})}_addVocabularies(){super._addVocabularies(),this.addVocabulary(i6.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema(),this.opts.meta&&this.addMetaSchema(o6.default,gm,!1)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(gm)?gm:void 0)}compileSerializer(t){let r=this._addSchema(t);return r.serialize||this._compileSerializer(r)}compileParser(t){let r=this._addSchema(t);return r.parse||this._compileParser(r)}_compileSerializer(t){if(a6.default.call(this,t,t.schema.definitions||{}),!t.serialize)throw new Error("ajv implementation error");return t.serialize}_compileParser(t){if(u6.default.call(this,t,t.schema.definitions||{}),!t.parse)throw new Error("ajv implementation error");return t.parse}};jP.exports=Be=Rl;Object.defineProperty(Be,"__esModule",{value:!0});Be.default=Rl;var l6=zs();Object.defineProperty(Be,"KeywordCxt",{enumerable:!0,get:function(){return l6.KeywordCxt}});var mi=X();Object.defineProperty(Be,"_",{enumerable:!0,get:function(){return mi._}});Object.defineProperty(Be,"str",{enumerable:!0,get:function(){return mi.str}});Object.defineProperty(Be,"stringify",{enumerable:!0,get:function(){return mi.stringify}});Object.defineProperty(Be,"nil",{enumerable:!0,get:function(){return mi.nil}});Object.defineProperty(Be,"Name",{enumerable:!0,get:function(){return mi.Name}});Object.defineProperty(Be,"CodeGen",{enumerable:!0,get:function(){return mi.CodeGen}});var c6=no();Object.defineProperty(Be,"ValidationError",{enumerable:!0,get:function(){return c6.default}});var f6=wn();Object.defineProperty(Be,"MissingRefError",{enumerable:!0,get:function(){return f6.default}})});var vm=E((AJ,xP)=>{"use strict";var d6=Rh();xP.exports=Object.freeze({coerceTypes:"array",useDefaults:!0,removeAdditional:!0,uriResolver:d6,addUsedSchema:!1,allErrors:!1})});var MP=E((CJ,FP)=>{"use strict";var h6=Cu().default,p6=_m(),LP=vm(),Em=class{constructor(t,r){r.mode==="JTD"?this.ajv=new p6(Object.assign({},LP,r.customOptions)):this.ajv=new h6(Object.assign({},LP,r.customOptions));let n=!0;if(r.plugins&&r.plugins.length>0)for(let i of r.plugins)Array.isArray(i)?(n=n&&i[0].name!=="formatsPlugin",i[0](this.ajv,i[1])):(n=n&&i.name!=="formatsPlugin",i(this.ajv));n&&Ih()(this.ajv);let s=Object.values(t);for(let i of s)this.ajv.addSchema(i)}buildValidatorFunction({schema:t}){if(t.$id){let r=this.ajv.getSchema(t.$id);if(r)return r}return this.ajv.compile(t)}};FP.exports=Em});var HP=E((IJ,VP)=>{"use strict";var m6=_m(),y6=vm(),Sm=class{constructor(t,r){this.ajv=new m6(Object.assign({},y6,r))}buildSerializerFunction({schema:t}){return this.ajv.compileSerializer(t)}};VP.exports=Sm});var BP=E((Ko,UP)=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0});var Go=nu(),vr=Ds();function zP(e,t){if(!e.opts.code.source)throw new Error("moduleCode: ajv instance must have code.source option");let{_n:r}=e.scope.opts;return typeof t=="function"?s(t.source):t!==void 0?i(t,n):i(e.schemas,a=>a.meta?void 0:e.compile(a.schema));function n(a){let u=e.getSchema(a);if(!u)throw new Error(`moduleCode: no schema with id ${a}`);return u}function s(a){let u={},c=a?.validateName,l=o(u,a);return e.opts.code.esm?`"use strict";${r}export const validate = ${c};${r}export default ${c};${r}${l}`:`"use strict";${r}module.exports = ${c};${r}module.exports.default = ${c};${r}${l}`}function i(a,u){var c;let l={},f=(0,vr._)`"use strict";`;for(let d in a){let h=u(a[d]);if(h){let p=o(l,h.source),y=e.opts.code.esm?(0,vr._)`export const ${(0,vr.getEsmExportName)(d)}`:(0,vr._)`exports${(0,vr.getProperty)(d)}`;f=(0,vr._)`${f}${r}${y} = ${(c=h.source)===null||c===void 0?void 0:c.validateName};${r}${p}`}}return`${f}`}function o(a,u){if(!u)throw new Error('moduleCode: function does not have "source" property');if(d(u.validateName)===Go.UsedValueState.Completed)return vr.nil;h(u.validateName,Go.UsedValueState.Started);let c=e.scope.scopeCode(u.scopeValues,a,f),l=new vr._Code(`${c}${r}${u.validateCode}`);return u.evaluated?(0,vr._)`${l}${u.validateName}.evaluated = ${u.evaluated};${r}`:l;function f(p){var y;let v=(y=p.value)===null||y===void 0?void 0:y.ref;if(p.prefix==="validate"&&typeof v=="function")return o(a,v.source);if((p.prefix==="root"||p.prefix==="wrapper")&&typeof v=="object"){let{validate:_,validateName:w}=v;if(!w)throw new Error("ajv internal error");let g=e.opts.code.es5?Go.varKinds.var:Go.varKinds.const,m=(0,vr._)`${g} ${p} = {validate: ${w}};`;if(d(w)===Go.UsedValueState.Started)return m;let T=o(a,_?.source);return(0,vr._)`${m}${r}${T}`}}function d(p){var y;return(y=a[p.prefix])===null||y===void 0?void 0:y.get(p)}function h(p,y){let{prefix:v}=p;(a[v]=a[v]||new Map).set(p,y)}}}UP.exports=Ko=zP;Object.defineProperty(Ko,"__esModule",{value:!0});Ko.default=zP});var YP=E((NJ,KP)=>{"use strict";var GP=bm(),g6=BP().default;function _6(e={readMode:!0}){if(e.readMode===!0&&!e.restoreFunction)throw new Error("You must provide a restoreFunction options when readMode ON");if(e.readMode!==!0&&!e.storeFunction)throw new Error("You must provide a storeFunction options when readMode OFF");if(e.readMode===!0)return function(){return function(n){return e.restoreFunction(n)}};let t=GP();return function(n,s={}){(!s.customOptions||!s.customOptions.code)&&(s.customOptions=Object.assign({},s.customOptions,{code:{source:!0}}));let i=t(n,s);return function(o){let a=i(o),u=g6(i[GP.AjvReference].ajv,a);return e.storeFunction(o,u),a}}}KP.exports=_6});var bm=E((kJ,yi)=>{"use strict";var JP=Symbol.for("fastify.ajv-compiler.reference"),v6=MP(),E6=HP();function wm(e){let t=new Map,r=new Map;return e&&e.jtdSerializer===!0?function(s,i){let o=WP({},i);if(r.has(o))return r.get(o);let a=new E6(s,i),u=a.buildSerializerFunction.bind(a);return r.set(o,u),u}:function(s,i){let o=WP(s,i.customOptions);if(t.has(o))return t.get(o);let a=new v6(s,i),u=a.buildValidatorFunction.bind(a);return t.set(o,u),i.customOptions.code!==void 0&&(u[JP]=a),u}}function WP(e,t){let r=JSON.stringify(e),n=JSON.stringify(t);return`${r}${n}`}yi.exports=wm;yi.exports.default=wm;yi.exports.AjvCompiler=wm;yi.exports.AjvReference=JP;yi.exports.StandaloneValidator=YP()});var Rm=E((qJ,XP)=>{"use strict";var{buildSchemas:S6}=zi(),b6=Hp(),w6=bm();function R6(e,t){if(e)return new gi(e,t);let r=Object.assign({buildValidator:null,buildSerializer:null},t?.compilersFactory);r.buildValidator||(r.buildValidator=w6()),r.buildSerializer||(r.buildSerializer=b6());let n={bucket:t&&t.bucket||S6,compilersFactory:r,isCustomValidatorCompiler:typeof t?.compilersFactory?.buildValidator=="function",isCustomSerializerCompiler:typeof t?.compilersFactory?.buildValidator=="function"};return new gi(void 0,n)}var gi=class{constructor(t,r){this.opts=r||t&&t.opts,this.addedSchemas=!1,this.compilersFactory=this.opts.compilersFactory,this.isCustomValidatorCompiler=this.opts.isCustomValidatorCompiler||!1,this.isCustomSerializerCompiler=this.opts.isCustomSerializerCompiler||!1,t?(this.schemaBucket=this.opts.bucket(t.getSchemas()),this.validatorCompiler=t.getValidatorCompiler(),this.serializerCompiler=t.getSerializerCompiler(),this.isCustomValidatorCompiler=t.isCustomValidatorCompiler,this.isCustomSerializerCompiler=t.isCustomSerializerCompiler,this.parent=t):this.schemaBucket=this.opts.bucket()}add(t){return this.addedSchemas=!0,this.schemaBucket.add(t)}getSchema(t){return this.schemaBucket.getSchema(t)}getSchemas(){return this.schemaBucket.getSchemas()}setValidatorCompiler(t){this.validatorCompiler=t,this.isCustomValidatorCompiler=!0}setSerializerCompiler(t){this.serializerCompiler=t,this.isCustomSerializerCompiler=!0}getValidatorCompiler(){return this.validatorCompiler||this.parent&&this.parent.getValidatorCompiler()}getSerializerCompiler(){return this.serializerCompiler||this.parent&&this.parent.getSerializerCompiler()}getSerializerBuilder(){return this.compilersFactory.buildSerializer||this.parent&&this.parent.getSerializerBuilder()}getValidatorBuilder(){return this.compilersFactory.buildValidator||this.parent&&this.parent.getValidatorBuilder()}setupValidator(t){this.validatorCompiler!==void 0&&!this.addedSchemas||(this.validatorCompiler=this.getValidatorBuilder()(this.schemaBucket.getSchemas(),t.ajv))}setupSerializer(t){this.serializerCompiler!==void 0&&!this.addedSchemas||(this.serializerCompiler=this.getSerializerBuilder()(this.schemaBucket.getSchemas(),t.serializerOpts))}};gi.buildSchemaController=R6;XP.exports=gi});var Cm=E((DJ,Am)=>{"use strict";var Tm=dp(),$m=require("node:assert"),Om=Symbol.for("registered-plugin"),{kTestInternals:T6}=ct(),{exist:P6,existReply:$6,existRequest:O6}=bp(),{FST_ERR_PLUGIN_VERSION_MISMATCH:A6,FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE:C6}=St(),{FSTWRN002:I6}=zr();function Yo(e){return e[Symbol.for("plugin-meta")]}function QP(e){let t=ZP(e);if(t)return t;let r=require.cache;if(r){let n=Object.keys(r);for(let s=0;s<n.length;s++){let i=n[s];if(r[i].exports===e)return i}}return e.name?e.name:null}function N6(e){return e.toString().split(`
`).slice(0,2).map(t=>t.trim()).join(" -- ")}function ZP(e){return e[Symbol.for("fastify.display-name")]}function e$(e){return!!e[Symbol.for("skip-override")]}function t$(e){let t=Yo(e);if(!t)return;let r=t.dependencies;r&&($m(Array.isArray(r),"The dependencies should be an array of strings"),r.forEach(n=>{$m(this[Om].indexOf(n)>-1,`The dependency '${n}' of plugin '${t.name}' is not registered`)}))}function r$(e){let t=Yo(e);if(!t)return;let{decorators:r,name:n}=t;r&&(r.fastify&&Pm(this,"Fastify",r.fastify,n),r.reply&&Pm(this,"Reply",r.reply,n),r.request&&Pm(this,"Request",r.request,n))}var k6={Fastify:P6,Request:O6,Reply:$6};function Pm(e,t,r,n){$m(Array.isArray(r),"The decorators should be an array of strings"),r.forEach(s=>{let i=typeof n=="string"?` required by '${n}'`:"";if(!k6[t].call(e,s))throw new C6(s,i,t)})}function q6(e){let t=Yo(e);if(!t)return;let r=t.fastify,n=/-rc.+$/.test(this.version);if(!(n===!0&&Tm.gt(this.version,Tm.coerce(r))===!0)&&r&&Tm.satisfies(this.version,r,{includePrerelease:n})===!1)throw new A6(t.name,r,this.version)}function D6(e){let t=Yo(e);if(!t)return;let r=t.name;if(r)return this[Om].push(r),r}function j6(e,t){e.constructor.name==="AsyncFunction"&&e.length===3&&I6(t||"anonymous")}function x6(e){let t=D6.call(this,e)||QP(e);return j6.call(this,e,t),q6.call(this,e),r$.call(this,e),t$.call(this,e),e$(e)}Am.exports={getPluginName:QP,getFuncPreview:N6,kRegisteredPlugins:Om,getDisplayName:ZP,registerPlugin:x6};Am.exports[T6]={shouldSkipOverride:e$,getMeta:Yo,checkDecorators:r$,checkDependencies:t$}});var s$=E((jJ,n$)=>{"use strict";function L6(e,t){let r=t||F6();return e?M6(e,r):r}function F6(){let t=0;return function(){return t=t+1&2147483647,`req-${t.toString(36)}`}}function M6(e,t){return function(r){return r.headers[e]||t(r)}}n$.exports={reqIdGenFactory:L6}});var u$=E((xJ,a$)=>{"use strict";var i$=12,V6=0,Im=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function H6(e){var t=e.indexOf("%");if(t===-1)return e;for(var r=e.length,n="",s=0,i=0,o=t,a=i$;t>-1&&t<r;){var u=o$(e[t+1],4),c=o$(e[t+2],0),l=u|c,f=Im[l];if(a=Im[256+a+f],i=i<<6|l&Im[364+f],a===i$)n+=e.slice(s,o),n+=i<=65535?String.fromCharCode(i):String.fromCharCode(55232+(i>>10),56320+(i&1023)),i=0,s=t+3,t=o=e.indexOf("%",s);else{if(a===V6)return null;if(t+=3,t<r&&e.charCodeAt(t)===37)continue;return null}}return n+e.slice(s)}var z6={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function o$(e,t){var r=z6[e];return r===void 0?255:r<<t}a$.exports=H6});var h$=E((LJ,d$)=>{"use strict";var l$=u$(),c$=/\+/g,f$=function(){};f$.prototype=Object.create(null);function U6(e){let t=new f$;if(typeof e!="string")return t;let r=e.length,n="",s="",i=-1,o=-1,a=!1,u=!1,c=!1,l=!1,f=!1,d=0;for(let h=0;h<r+1;h++)if(d=h!==r?e.charCodeAt(h):38,d===38){if(f=o>i,f||(o=h),n=e.slice(i+1,o),f||n.length>0){c&&(n=n.replace(c$," ")),a&&(n=l$(n)||n),f&&(s=e.slice(o+1,h),l&&(s=s.replace(c$," ")),u&&(s=l$(s)||s));let p=t[n];p===void 0?t[n]=s:p.pop?p.push(s):t[n]=[p,s]}s="",i=h,o=h,a=!1,u=!1,c=!1,l=!1}else d===61?o<=i?o=h:u=!0:d===43?o>i?l=!0:c=!0:d===37&&(o>i?u=!0:a=!0);return t}d$.exports=U6});var m$=E((FJ,p$)=>{var qr=Array.from({length:256},(e,t)=>"%"+((t<16?"0":"")+t.toString(16)).toUpperCase()),B6=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);function G6(e){let t=e.length;if(t===0)return"";let r="",n=0,s=0;e:for(;s<t;s++){let i=e.charCodeAt(s);for(;i<128;){if(B6[i]!==1&&(n<s&&(r+=e.slice(n,s)),n=s+1,r+=qr[i]),++s===t)break e;i=e.charCodeAt(s)}if(n<s&&(r+=e.slice(n,s)),i<2048){n=s+1,r+=qr[192|i>>6]+qr[128|i&63];continue}if(i<55296||i>=57344){n=s+1,r+=qr[224|i>>12]+qr[128|i>>6&63]+qr[128|i&63];continue}if(++s,s>=t)throw new Error("URI malformed");let o=e.charCodeAt(s)&1023;n=s+1,i=65536+((i&1023)<<10|o),r+=qr[240|i>>18]+qr[128|i>>12&63]+qr[128|i>>6&63]+qr[128|i&63]}return n===0?e:n<t?r+e.slice(n):r}p$.exports={encodeString:G6}});var _$=E((MJ,g$)=>{"use strict";var{encodeString:Nm}=m$();function y$(e){let t=typeof e;return t==="string"?Nm(e):t==="bigint"?e.toString():t==="boolean"?e?"true":"false":t==="number"&&Number.isFinite(e)?e<1e21?""+e:Nm(""+e):""}function K6(e){let t="";if(e===null||typeof e!="object")return t;let r="&",n=Object.keys(e),s=n.length,i=0;for(let o=0;o<s;o++){let a=n[o],u=e[a],c=Nm(a)+"=";if(o&&(t+=r),Array.isArray(u)){i=u.length;for(let l=0;l<i;l++)l&&(t+=r),t+=c,t+=y$(u[l])}else t+=c,t+=y$(u)}return t}g$.exports=K6});var b$=E((VJ,Wo)=>{"use strict";var v$=h$(),E$=_$(),S$={parse:v$,stringify:E$};Wo.exports=S$;Wo.exports.default=S$;Wo.exports.parse=v$;Wo.exports.stringify=E$});var Jo=E((HJ,w$)=>{w$.exports={ROOT:0,GROUP:1,POSITION:2,SET:3,RANGE:4,REPETITION:5,REFERENCE:6,CHAR:7}});var qm=E(kn=>{var $e=Jo(),km=()=>[{type:$e.RANGE,from:48,to:57}],R$=()=>[{type:$e.CHAR,value:95},{type:$e.RANGE,from:97,to:122},{type:$e.RANGE,from:65,to:90}].concat(km()),T$=()=>[{type:$e.CHAR,value:9},{type:$e.CHAR,value:10},{type:$e.CHAR,value:11},{type:$e.CHAR,value:12},{type:$e.CHAR,value:13},{type:$e.CHAR,value:32},{type:$e.CHAR,value:160},{type:$e.CHAR,value:5760},{type:$e.RANGE,from:8192,to:8202},{type:$e.CHAR,value:8232},{type:$e.CHAR,value:8233},{type:$e.CHAR,value:8239},{type:$e.CHAR,value:8287},{type:$e.CHAR,value:12288},{type:$e.CHAR,value:65279}],Y6=()=>[{type:$e.CHAR,value:10},{type:$e.CHAR,value:13},{type:$e.CHAR,value:8232},{type:$e.CHAR,value:8233}];kn.words=()=>({type:$e.SET,set:R$(),not:!1});kn.notWords=()=>({type:$e.SET,set:R$(),not:!0});kn.ints=()=>({type:$e.SET,set:km(),not:!1});kn.notInts=()=>({type:$e.SET,set:km(),not:!0});kn.whitespace=()=>({type:$e.SET,set:T$(),not:!1});kn.notWhitespace=()=>({type:$e.SET,set:T$(),not:!0});kn.anyChar=()=>({type:$e.SET,set:Y6(),not:!0})});var $$=E(Xo=>{var P$=Jo(),_i=qm(),W6="@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^ ?",J6={0:0,t:9,n:10,v:11,f:12,r:13};Xo.strToChars=function(e){var t=/(\[\\b\])|(\\)?\\(?:u([A-F0-9]{4})|x([A-F0-9]{2})|(0?[0-7]{2})|c([@A-Z[\\\]^?])|([0tnvfr]))/g;return e=e.replace(t,function(r,n,s,i,o,a,u,c){if(s)return r;var l=n?8:i?parseInt(i,16):o?parseInt(o,16):a?parseInt(a,8):u?W6.indexOf(u):J6[c],f=String.fromCharCode(l);return/[[\]{}^$.|?*+()]/.test(f)&&(f="\\"+f),f}),e};Xo.tokenizeClass=(e,t)=>{for(var r=[],n=/\\(?:(w)|(d)|(s)|(W)|(D)|(S))|((?:(?:\\)(.)|([^\]\\]))-(?:\\)?([^\]]))|(\])|(?:\\)?([^])/g,s,i;(s=n.exec(e))!=null;)if(s[1])r.push(_i.words());else if(s[2])r.push(_i.ints());else if(s[3])r.push(_i.whitespace());else if(s[4])r.push(_i.notWords());else if(s[5])r.push(_i.notInts());else if(s[6])r.push(_i.notWhitespace());else if(s[7])r.push({type:P$.RANGE,from:(s[8]||s[9]).charCodeAt(0),to:s[10].charCodeAt(0)});else if(i=s[12])r.push({type:P$.CHAR,value:i.charCodeAt(0)});else return[r,n.lastIndex];Xo.error(t,"Unterminated character class")};Xo.error=(e,t)=>{throw new SyntaxError("Invalid regular expression: /"+e+"/: "+t)}});var O$=E(Qo=>{var Tl=Jo();Qo.wordBoundary=()=>({type:Tl.POSITION,value:"b"});Qo.nonWordBoundary=()=>({type:Tl.POSITION,value:"B"});Qo.begin=()=>({type:Tl.POSITION,value:"^"});Qo.end=()=>({type:Tl.POSITION,value:"$"})});var A$=E((GJ,Dm)=>{var vi=$$(),ir=Jo(),ds=qm(),Pl=O$();Dm.exports=e=>{var t=0,r,n,s={type:ir.ROOT,stack:[]},i=s,o=s.stack,a=[],u=_=>{vi.error(e,`Nothing to repeat at column ${_-1}`)},c=vi.strToChars(e);for(r=c.length;t<r;)switch(n=c[t++],n){case"\\":switch(n=c[t++],n){case"b":o.push(Pl.wordBoundary());break;case"B":o.push(Pl.nonWordBoundary());break;case"w":o.push(ds.words());break;case"W":o.push(ds.notWords());break;case"d":o.push(ds.ints());break;case"D":o.push(ds.notInts());break;case"s":o.push(ds.whitespace());break;case"S":o.push(ds.notWhitespace());break;default:/\d/.test(n)?o.push({type:ir.REFERENCE,value:parseInt(n,10)}):o.push({type:ir.CHAR,value:n.charCodeAt(0)})}break;case"^":o.push(Pl.begin());break;case"$":o.push(Pl.end());break;case"[":var l;c[t]==="^"?(l=!0,t++):l=!1;var f=vi.tokenizeClass(c.slice(t),e);t+=f[1],o.push({type:ir.SET,set:f[0],not:l});break;case".":o.push(ds.anyChar());break;case"(":var d={type:ir.GROUP,stack:[],remember:!0};n=c[t],n==="?"&&(n=c[t+1],t+=2,n==="="?d.followedBy=!0:n==="!"?d.notFollowedBy=!0:n!==":"&&vi.error(e,`Invalid group, character '${n}' after '?' at column ${t-1}`),d.remember=!1),o.push(d),a.push(i),i=d,o=d.stack;break;case")":a.length===0&&vi.error(e,`Unmatched ) at column ${t-1}`),i=a.pop(),o=i.options?i.options[i.options.length-1]:i.stack;break;case"|":i.options||(i.options=[i.stack],delete i.stack);var h=[];i.options.push(h),o=h;break;case"{":var p=/^(\d+)(,(\d+)?)?\}/.exec(c.slice(t)),y,v;p!==null?(o.length===0&&u(t),y=parseInt(p[1],10),v=p[2]?p[3]?parseInt(p[3],10):1/0:y,t+=p[0].length,o.push({type:ir.REPETITION,min:y,max:v,value:o.pop()})):o.push({type:ir.CHAR,value:123});break;case"?":o.length===0&&u(t),o.push({type:ir.REPETITION,min:0,max:1,value:o.pop()});break;case"+":o.length===0&&u(t),o.push({type:ir.REPETITION,min:1,max:1/0,value:o.pop()});break;case"*":o.length===0&&u(t),o.push({type:ir.REPETITION,min:0,max:1/0,value:o.pop()});break;default:o.push({type:ir.CHAR,value:n.charCodeAt(0)})}return a.length!==0&&vi.error(e,"Unterminated group"),s};Dm.exports.types=ir});var N$=E((KJ,I$)=>{"use strict";var C$=A$(),X6=C$.types;I$.exports=function(e,t){t||(t={});var r=t.limit===void 0?25:t.limit;Q6(e)?e=e.source:typeof e!="string"&&(e=String(e));try{e=C$(e)}catch{return!1}var n=0;return function s(i,o){var a,u,c;if(i.type===X6.REPETITION&&(o++,n++,o>1||n>r))return!1;if(i.options){for(a=0,c=i.options.length;a<c;a++)if(u=s({stack:i.options[a]},o),!u)return!1}var l=i.stack||i.value&&i.value.stack;if(!l)return!0;for(a=0;a<l.length;a++)if(u=s(l[a],o),!u)return!1;return!0}(e,0)};function Q6(e){return{}.toString.call(e)==="[object RegExp]"}});var $l=E((YJ,k$)=>{"use strict";k$.exports={name:"__fmw_internal_strategy_merged_tree_http_method__",storage:function(){let e={};return{get:t=>e[t]||null,set:(t,r)=>{e[t]=r}}},deriveConstraint:e=>e.method,mustMatchWhenDerived:!0}});var M$=E((WJ,F$)=>{"use strict";var q$=Vs(),D$=$l(),j$=Symbol("treeData");function x$(e,t=""){let r="",n=Object.keys(e);for(let s=0;s<n.length;s++){let i=n[s],o=e[i],a=s===n.length-1,u=a?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ",c=a?"    ":"\u2502   ",f=(o[j$]||"").split(`
`).join(`
`+t+c);r+=t+u+i+f+`
`,r+=x$(o,t+c)}return r}function Z6(e){let t=e.name||"";return t=t.replace("bound","").trim(),t=(t||"anonymous")+"()",t}function L$(e){return Array.isArray(e)?e.map(t=>L$(t)):typeof e=="symbol"?e.toString():typeof e=="function"?Z6(e):e}function eB(e,t){if(!t.includeMeta)return{};let r=t.buildPrettyMeta(e),n={},s=t.includeMeta;Array.isArray(s)||(s=Reflect.ownKeys(r));for(let i of s){if(!Object.prototype.hasOwnProperty.call(r,i))continue;let o=i.toString(),a=r[i];if(a!=null){let u=JSON.stringify(L$(a));n[o]=u}}return n}function tB(e){let t="";for(let[r,n]of Object.entries(e))t+=`
\u2022 (${r}) ${n}`;return t}function rB(e){let t={...e.opts.constraints},r=t[D$.name];return delete t[D$.name],{...e,method:r,opts:{constraints:t}}}function nB(e){let t=` (${e.method})`,r=e.opts.constraints||{};return Object.keys(r).length!==0&&(t+=" "+JSON.stringify(r)),t+=tB(e.metaData),t}function sB(e){return e.reduce((t,r)=>{for(let n of t)if(q$(r.opts.constraints,n.opts.constraints)&&q$(r.metaData,n.metaData))return n.method+=", "+r.method,t;return t.push(r),t},[])}function iB(e,t,r){let n=e.routes;return r.method===void 0&&(n=n.map(rB)),n=n.map(s=>(s.metaData=eB(s,r),s)),r.method===void 0&&(n=sB(n)),n.map(nB).join(`
${t}`)}function Ol(e,t,r,n){if((e.isLeafNode||n.commonPrefix!==!1)&&(r=r||"(empty root node)",t=t[r]={},e.isLeafNode&&(t[j$]=iB(e,r,n)),r=""),e.staticChildren)for(let s of Object.values(e.staticChildren))Ol(s,t,r+s.prefix,n);if(e.parametricChildren)for(let s of Object.values(e.parametricChildren)){let i=Array.from(s.nodePaths).join("|");Ol(s,t,r+i,n)}e.wildcardChild&&Ol(e.wildcardChild,t,"*",n)}function oB(e,t){let r={};return Ol(e,r,e.prefix,t),x$(r)}F$.exports={prettyPrintTree:oB}});var H$=E((JJ,V$)=>{"use strict";var aB=$l(),jm=class{constructor(){this.unconstrainedHandler=null,this.constraints=[],this.handlers=[],this.constrainedHandlerStores=null}getMatchingHandler(t){return t===void 0?this.unconstrainedHandler:this._getHandlerMatchingConstraints(t)}addHandler(t,r){let n=r.params,s=r.opts.constraints||{},i={params:n,constraints:s,handler:r.handler,store:r.store||null,_createParamsObject:this._compileCreateParamsObject(n)},o=Object.keys(s);o.length===0&&(this.unconstrainedHandler=i);for(let u of o)this.constraints.includes(u)||(u==="version"?this.constraints.unshift(u):this.constraints.push(u));let a=o.includes(aB.name);if(!a&&this.handlers.length>=32)throw new Error("find-my-way supports a maximum of 32 route handlers per node when there are constraints, limit reached");this.handlers.push(i),this.handlers.sort((u,c)=>Object.keys(u.constraints).length-Object.keys(c.constraints).length),a||this._compileGetHandlerMatchingConstraints(t,s)}_compileCreateParamsObject(t){let r=[];for(let n=0;n<t.length;n++)r.push(`'${t[n]}': paramsArray[${n}]`);return new Function("paramsArray",`return {${r.join(",")}}`)}_getHandlerMatchingConstraints(){return null}_buildConstraintStore(t,r){for(let n=0;n<this.handlers.length;n++){let i=this.handlers[n].constraints[r];if(i!==void 0){let o=t.get(i)||0;o|=1<<n,t.set(i,o)}}}_constrainedIndexBitmask(t){let r=0;for(let n=0;n<this.handlers.length;n++)this.handlers[n].constraints[t]!==void 0&&(r|=1<<n);return~r}_compileGetHandlerMatchingConstraints(t){this.constrainedHandlerStores={};for(let n of this.constraints){let s=t.newStoreForConstraint(n);this.constrainedHandlerStores[n]=s,this._buildConstraintStore(s,n)}let r=[];r.push(`
    let candidates = ${(1<<this.handlers.length)-1}
    let mask, matches
    `);for(let n of this.constraints){r.push(`
      mask = ${this._constrainedIndexBitmask(n)}
      value = derivedConstraints.${n}
      `);let i=t.strategies[n].mustMatchWhenDerived?"matches":"(matches | mask)";r.push(`
      if (value === undefined) {
        candidates &= mask
      } else {
        matches = this.constrainedHandlerStores.${n}.get(value) || 0
        candidates &= ${i}
      }
      if (candidates === 0) return null;
      `)}for(let n in t.strategies)t.strategies[n].mustMatchWhenDerived&&!this.constraints.includes(n)&&r.push(`if (derivedConstraints.${n} !== undefined) return null`);r.push("return this.handlers[Math.floor(Math.log2(candidates))]"),this._getHandlerMatchingConstraints=new Function("derivedConstraints",r.join(`
`))}};V$.exports=jm});var U$=E((XJ,z$)=>{"use strict";var uB=H$(),ql={STATIC:0,PARAMETRIC:1,WILDCARD:2},Al=class{constructor(){this.isLeafNode=!1,this.routes=null,this.handlerStorage=null}addRoute(t,r){this.routes===null&&(this.routes=[]),this.handlerStorage===null&&(this.handlerStorage=new uB),this.isLeafNode=!0,this.routes.push(t),this.handlerStorage.addHandler(r,t)}},Cl=class extends Al{constructor(){super(),this.staticChildren={}}findStaticMatchingChild(t,r){let n=this.staticChildren[t.charAt(r)];return n===void 0||!n.matchPrefix(t,r)?null:n}getStaticChild(t,r=0){if(t.length===r)return this;let n=this.findStaticMatchingChild(t,r);return n?n.getStaticChild(t,r+n.prefix.length):null}createStaticChild(t){if(t.length===0)return this;let r=this.staticChildren[t.charAt(0)];if(r){let s=1;for(;s<r.prefix.length;s++)if(t.charCodeAt(s)!==r.prefix.charCodeAt(s)){r=r.split(this,s);break}return r.createStaticChild(t.slice(s))}let n=t.charAt(0);return this.staticChildren[n]=new Il(t),this.staticChildren[n]}},Il=class e extends Cl{constructor(t){super(),this.prefix=t,this.wildcardChild=null,this.parametricChildren=[],this.kind=ql.STATIC,this._compilePrefixMatch()}getParametricChild(t){let r=t&&t.source,n=this.parametricChildren.find(s=>(s.regex&&s.regex.source)===r);return n||null}createParametricChild(t,r,n){let s=this.getParametricChild(t);return s?(s.nodePaths.add(n),s):(s=new Nl(t,r,n),this.parametricChildren.push(s),this.parametricChildren.sort((i,o)=>i.isRegex?o.isRegex?i.staticSuffix===null?1:o.staticSuffix===null?-1:o.staticSuffix.endsWith(i.staticSuffix)?1:i.staticSuffix.endsWith(o.staticSuffix)?-1:0:-1:1),s)}getWildcardChild(){return this.wildcardChild?this.wildcardChild:null}createWildcardChild(){return this.wildcardChild=this.getWildcardChild()||new kl,this.wildcardChild}split(t,r){let n=this.prefix.slice(0,r),s=this.prefix.slice(r);this.prefix=s,this._compilePrefixMatch();let i=new e(n);return i.staticChildren[s.charAt(0)]=this,t.staticChildren[n.charAt(0)]=i,i}getNextNode(t,r,n,s){let i=this.findStaticMatchingChild(t,r),o=0;if(i===null){if(this.parametricChildren.length===0)return this.wildcardChild;i=this.parametricChildren[0],o=1}this.wildcardChild!==null&&n.push({paramsCount:s,brotherPathIndex:r,brotherNode:this.wildcardChild});for(let a=this.parametricChildren.length-1;a>=o;a--)n.push({paramsCount:s,brotherPathIndex:r,brotherNode:this.parametricChildren[a]});return i}_compilePrefixMatch(){if(this.prefix.length===1){this.matchPrefix=()=>!0;return}let t=[];for(let r=1;r<this.prefix.length;r++){let n=this.prefix.charCodeAt(r);t.push(`path.charCodeAt(i + ${r}) === ${n}`)}this.matchPrefix=new Function("path","i",`return ${t.join(" && ")}`)}},Nl=class extends Cl{constructor(t,r,n){super(),this.isRegex=!!t,this.regex=t||null,this.staticSuffix=r||null,this.kind=ql.PARAMETRIC,this.nodePaths=new Set([n])}getNextNode(t,r){return this.findStaticMatchingChild(t,r)}},kl=class extends Al{constructor(){super(),this.kind=ql.WILDCARD}getNextNode(){return null}};z$.exports={StaticNode:Il,ParametricNode:Nl,WildcardNode:kl,NODE_TYPES:ql}});var G$=E((QJ,B$)=>{"use strict";var lB=require("assert");function Zo(){if(!(this instanceof Zo))return new Zo;this.store={},this.maxMajor=0,this.maxMinors={},this.maxPatches={}}Zo.prototype.set=function(e,t){if(typeof e!="string")throw new TypeError("Version should be a string");let[r,n,s]=e.split(".");return r=Number(r)||0,n=Number(n)||0,s=Number(s)||0,r>=this.maxMajor&&(this.maxMajor=r,this.store.x=t,this.store["*"]=t,this.store["x.x"]=t,this.store["x.x.x"]=t),n>=(this.maxMinors[r]||0)&&(this.maxMinors[r]=n,this.store[`${r}.x`]=t,this.store[`${r}.x.x`]=t),s>=(this.store[`${r}.${n}`]||0)&&(this.maxPatches[`${r}.${n}`]=s,this.store[`${r}.${n}.x`]=t),this.store[`${r}.${n}.${s}`]=t,this};Zo.prototype.get=function(e){return this.store[e]};B$.exports={name:"version",mustMatchWhenDerived:!0,storage:Zo,validate(e){lB(typeof e=="string","Version should be a string")}}});var Y$=E((ZJ,K$)=>{"use strict";var cB=require("assert");function fB(){let e={},t=[];return{get:r=>{let n=e[r];if(n)return n;for(let s of t)if(s.host.test(r))return s.value},set:(r,n)=>{r instanceof RegExp?t.push({host:r,value:n}):e[r]=n}}}K$.exports={name:"host",mustMatchWhenDerived:!1,storage:fB,validate(e){cB(typeof e=="string"||Object.prototype.toString.call(e)==="[object RegExp]","Host should be a string or a RegExp")}}});var J$=E((eX,W$)=>{"use strict";var dB=G$(),hB=Y$(),xm=require("assert"),Lm=class{constructor(t){if(this.strategies={version:dB,host:hB},this.strategiesInUse=new Set,this.asyncStrategiesInUse=new Set,t)for(let r of Object.values(t))this.addConstraintStrategy(r)}isStrategyUsed(t){return this.strategiesInUse.has(t)||this.asyncStrategiesInUse.has(t)}hasConstraintStrategy(t){let r=this.strategies[t];return r!==void 0?r.isCustom||this.isStrategyUsed(t):!1}addConstraintStrategy(t){if(xm(typeof t.name=="string"&&t.name!=="","strategy.name is required."),xm(t.storage&&typeof t.storage=="function","strategy.storage function is required."),xm(t.deriveConstraint&&typeof t.deriveConstraint=="function","strategy.deriveConstraint function is required."),this.strategies[t.name]&&this.strategies[t.name].isCustom)throw new Error(`There already exists a custom constraint with the name ${t.name}.`);if(this.isStrategyUsed(t.name))throw new Error(`There already exists a route with ${t.name} constraint.`);t.isCustom=!0,t.isAsync=t.deriveConstraint.length===3,this.strategies[t.name]=t,t.mustMatchWhenDerived&&this.noteUsage({[t.name]:t})}deriveConstraints(t,r,n){let s=this.deriveSyncConstraints(t,r);if(n===void 0)return s;this.deriveAsyncConstraints(s,t,r,n)}deriveSyncConstraints(t,r){}noteUsage(t){if(t){let r=this.strategiesInUse.size;for(let n in t)this.strategies[n].isAsync?this.asyncStrategiesInUse.add(n):this.strategiesInUse.add(n);r!==this.strategiesInUse.size&&this._buildDeriveConstraints()}}newStoreForConstraint(t){if(!this.strategies[t])throw new Error(`No strategy registered for constraint key ${t}`);return this.strategies[t].storage()}validateConstraints(t){for(let r in t){let n=t[r];if(typeof n>"u")throw new Error("Can't pass an undefined constraint value, must pass null or no key at all");let s=this.strategies[r];if(!s)throw new Error(`No strategy registered for constraint key ${r}`);s.validate&&s.validate(n)}}deriveAsyncConstraints(t,r,n,s){let i=this.asyncStrategiesInUse.size;if(i===0){s(null,t);return}t=t||{};for(let o of this.asyncStrategiesInUse)this.strategies[o].deriveConstraint(r,n,(u,c)=>{if(u!==null){s(u);return}t[o]=c,--i===0&&s(null,t)})}_buildDeriveConstraints(){if(this.strategiesInUse.size===0)return;let t=["return {"];for(let r of this.strategiesInUse){let n=this.strategies[r];if(n.isCustom)t.push(`  ${n.name}: this.strategies.${r}.deriveConstraint(req, ctx),`);else if(r==="version")t.push("   version: req.headers['accept-version'],");else if(r==="host")t.push("   host: req.headers.host || req.headers[':authority'],");else throw new Error("unknown non-custom strategy for compiling constraint derivation function")}t.push("}"),this.deriveSyncConstraints=new Function("req","ctx",t.join(`
`)).bind(this)}};W$.exports=Lm});var Q$=E((tX,X$)=>{"use strict";var pB=["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"];X$.exports=pB});var tO=E((rX,eO)=>{"use strict";function Z$(e,t){return e===50?t===53?"%":t===51?"#":t===52?"$":t===54?"&":t===66||t===98?"+":t===67||t===99?",":t===70||t===102?"/":null:e===51?t===65||t===97?":":t===66||t===98?";":t===68||t===100?"=":t===70||t===102?"?":null:e===52&&t===48?"@":null}function mB(e){let t=!1,r=!1,n="";for(let i=1;i<e.length;i++){let o=e.charCodeAt(i);if(o===37){let a=e.charCodeAt(i+1),u=e.charCodeAt(i+2);Z$(a,u)===null?t=!0:(r=!0,a===50&&u===53&&(t=!0,e=e.slice(0,i+1)+"25"+e.slice(i+1),i+=2),i+=2)}else if(o===63||o===59||o===35){n=e.slice(i+1),e=e.slice(0,i);break}}return{path:t?decodeURI(e):e,querystring:n,shouldDecodeParam:r}}function yB(e){let t=e.indexOf("%");if(t===-1)return e;let r="",n=t;for(let s=t;s<e.length;s++)if(e.charCodeAt(s)===37){let i=e.charCodeAt(s+1),o=e.charCodeAt(s+2),a=Z$(i,o);r+=e.slice(n,s)+a,n=s+3}return e.slice(0,t)+r+e.slice(n)}eO.exports={safeDecodeURI:mB,safeDecodeURIComponent:yB}});var Um=E((nX,uO)=>{"use strict";var Xe=require("assert"),gB=b$(),Dl=N$(),Vm=Vs(),{prettyPrintTree:_B}=M$(),{StaticNode:rO,NODE_TYPES:Fm}=U$(),vB=J$(),Ei=Q$(),Mm=$l(),{safeDecodeURI:EB,safeDecodeURIComponent:nO}=tO(),sO=/^https?:\/\/.*?\//,hs=/(\/:[^/()]*?)\?(\/?)/;if(!Dl(sO))throw new Error("the FULL_PATH_REGEXP is not safe, update this module");if(!Dl(hs))throw new Error("the OPTIONAL_PARAM_REGEXP is not safe, update this module");function Ge(e){if(!(this instanceof Ge))return new Ge(e);e=e||{},this._opts=e,e.defaultRoute?(Xe(typeof e.defaultRoute=="function","The default route must be a function"),this.defaultRoute=e.defaultRoute):this.defaultRoute=null,e.onBadUrl?(Xe(typeof e.onBadUrl=="function","The bad url handler must be a function"),this.onBadUrl=e.onBadUrl):this.onBadUrl=null,e.buildPrettyMeta?(Xe(typeof e.buildPrettyMeta=="function","buildPrettyMeta must be a function"),this.buildPrettyMeta=e.buildPrettyMeta):this.buildPrettyMeta=SB,e.querystringParser?(Xe(typeof e.querystringParser=="function","querystringParser must be a function"),this.querystringParser=e.querystringParser):this.querystringParser=t=>t===""?{}:gB.parse(t),this.caseSensitive=e.caseSensitive===void 0?!0:e.caseSensitive,this.ignoreTrailingSlash=e.ignoreTrailingSlash||!1,this.ignoreDuplicateSlashes=e.ignoreDuplicateSlashes||!1,this.maxParamLength=e.maxParamLength||100,this.allowUnsafeRegex=e.allowUnsafeRegex||!1,this.constrainer=new vB(e.constraints),this.routes=[],this.trees={}}Ge.prototype.on=function(t,r,n,s,i){typeof n=="function"&&(s!==void 0&&(i=s),s=n,n={}),Xe(typeof r=="string","Path should be a string"),Xe(r.length>0,"The path could not be empty"),Xe(r[0]==="/"||r[0]==="*","The first character of a path should be `/` or `*`"),Xe(typeof s=="function","Handler should be a function");let o=r.match(hs);if(o){Xe(r.length===o.index+o[0].length,"Optional Parameter needs to be the last parameter of the path");let c=r.replace(hs,"$1$2"),l=r.replace(hs,"$2");this.on(t,c,n,s,i),this.on(t,l,n,s,i);return}let a=r;this.ignoreDuplicateSlashes&&(r=Hm(r)),this.ignoreTrailingSlash&&(r=zm(r));let u=Array.isArray(t)?t:[t];for(let c of u)Xe(typeof c=="string","Method should be a string"),Xe(Ei.includes(c),`Method '${c}' is not an http method.`),this._on(c,r,n,s,i,a)};Ge.prototype._on=function(t,r,n,s,i){let o={};n.constraints!==void 0&&(Xe(typeof n.constraints=="object"&&n.constraints!==null,"Constraints should be an object"),Object.keys(n.constraints).length!==0&&(o=n.constraints)),this.constrainer.validateConstraints(o),this.constrainer.noteUsage(o),this.trees[t]===void 0&&(this.trees[t]=new rO("/"));let a=r;if(a==="*"&&this.trees[t].prefix.length!==0){let d=this.trees[t];this.trees[t]=new rO(""),this.trees[t].staticChildren["/"]=d}let u=this.trees[t],c=u.prefix.length,l=[];for(let d=0;d<=a.length;d++){if(a.charCodeAt(d)===58&&a.charCodeAt(d+1)===58){d++;continue}let h=a.charCodeAt(d)===58&&a.charCodeAt(d+1)!==58,p=a.charCodeAt(d)===42;if(h||p||d===a.length&&d!==c){let y=a.slice(c,d);this.caseSensitive||(y=y.toLowerCase()),y=y.split("::").join(":"),y=y.split("%").join("%25"),u=u.createStaticChild(y)}if(h){let y=!1,v=[],_=d+1;for(let w=_;;w++){let g=a.charCodeAt(w),m=g===40,T=g===45||g===46,A=g===47||w===a.length;if(m||T||A){let b=a.slice(_,w);if(l.push(b),y=y||m||T,m){let R=aO(a,w),x=a.slice(w,R+1);this.allowUnsafeRegex||Xe(Dl(new RegExp(x)),`The regex '${x}' is not safe!`),v.push(oO(x)),w=R+1}else v.push("(.*?)");let $=w;for(;w<a.length;w++){let R=a.charCodeAt(w);if(R===47)break;if(R===58)if(a.charCodeAt(w+1)===58)w++;else break}let k=a.slice($,w);if(k&&(k=k.split("::").join(":"),k=k.split("%").join("%25"),v.push(iO(k))),_=w+1,A||a.charCodeAt(w)===47||w===a.length){let R=y?"()"+k:k,x=a.slice(d,w);a=a.slice(0,d+1)+R+a.slice(w),d+=R.length;let j=y?new RegExp("^"+v.join("")+"$"):null;u=u.createParametricChild(j,k||null,x),c=d+1;break}}}}else if(p&&(l.push("*"),u=u.createWildcardChild(),c=d+1,d!==a.length-1))throw new Error("Wildcard must be the last character in the route")}this.caseSensitive||(a=a.toLowerCase()),a==="*"&&(a="/*");for(let d of this.routes){let h=d.opts.constraints||{};if(d.method===t&&d.pattern===a&&Vm(h,o))throw new Error(`Method '${t}' already declared for route '${a}' with constraints '${JSON.stringify(o)}'`)}let f={method:t,path:r,pattern:a,params:l,opts:n,handler:s,store:i};this.routes.push(f),u.addRoute(f,this.constrainer)};Ge.prototype.hasRoute=function(t,r,n){return this.findRoute(t,r,n)!==null};Ge.prototype.findRoute=function(t,r,n={}){if(this.trees[t]===void 0)return null;let s=r,i=this.trees[t],o=i.prefix.length,a=[];for(let u=0;u<=s.length;u++){if(s.charCodeAt(u)===58&&s.charCodeAt(u+1)===58){u++;continue}let c=s.charCodeAt(u)===58&&s.charCodeAt(u+1)!==58,l=s.charCodeAt(u)===42;if(c||l||u===s.length&&u!==o){let f=s.slice(o,u);if(this.caseSensitive||(f=f.toLowerCase()),f=f.split("::").join(":"),f=f.split("%").join("%25"),i=i.getStaticChild(f),i===null)return null}if(c){let f=!1,d=[],h=u+1;for(let p=h;;p++){let y=s.charCodeAt(p),v=y===40,_=y===45||y===46,w=y===47||p===s.length;if(v||_||w){let g=s.slice(h,p);if(a.push(g),f=f||v||_,v){let A=aO(s,p),b=s.slice(p,A+1);this.allowUnsafeRegex||Xe(Dl(new RegExp(b)),`The regex '${b}' is not safe!`),d.push(oO(b)),p=A+1}else d.push("(.*?)");let m=p;for(;p<s.length;p++){let A=s.charCodeAt(p);if(A===47)break;if(A===58)if(s.charCodeAt(p+1)===58)p++;else break}let T=s.slice(m,p);if(T&&(T=T.split("::").join(":"),T=T.split("%").join("%25"),d.push(iO(T))),h=p+1,w||s.charCodeAt(p)===47||p===s.length){let A=f?"()"+T:T,b=s.slice(u,p);s=s.slice(0,u+1)+A+s.slice(p),u+=A.length;let $=f?new RegExp("^"+d.join("")+"$"):null;if(i=i.getParametricChild($,T||null,b),i===null)return null;o=u+1;break}}}}else if(l){if(a.push("*"),i=i.getWildcardChild(),i===null)return null;if(o=u+1,u!==s.length-1)throw new Error("Wildcard must be the last character in the route")}}this.caseSensitive||(s=s.toLowerCase()),s==="*"&&(s="/*");for(let u of this.routes){let c=u.opts.constraints||{};if(u.method===t&&u.pattern===s&&Vm(c,n))return{handler:u.handler,store:u.store}}return null};Ge.prototype.hasConstraintStrategy=function(e){return this.constrainer.hasConstraintStrategy(e)};Ge.prototype.addConstraintStrategy=function(e){this.constrainer.addConstraintStrategy(e),this._rebuild(this.routes)};Ge.prototype.reset=function(){this.trees={},this.routes=[]};Ge.prototype.off=function(t,r,n){Xe(typeof r=="string","Path should be a string"),Xe(r.length>0,"The path could not be empty"),Xe(r[0]==="/"||r[0]==="*","The first character of a path should be `/` or `*`"),Xe(typeof n>"u"||typeof n=="object"&&!Array.isArray(n)&&n!==null,"Constraints should be an object or undefined.");let s=r.match(hs);if(s){Xe(r.length===s.index+s[0].length,"Optional Parameter needs to be the last parameter of the path");let o=r.replace(hs,"$1$2"),a=r.replace(hs,"$2");this.off(t,o,n),this.off(t,a,n);return}this.ignoreDuplicateSlashes&&(r=Hm(r)),this.ignoreTrailingSlash&&(r=zm(r));let i=Array.isArray(t)?t:[t];for(let o of i)this._off(o,r,n)};Ge.prototype._off=function(t,r,n){Xe(typeof t=="string","Method should be a string"),Xe(Ei.includes(t),`Method '${t}' is not an http method.`);function s(u){return t!==u.method||r!==u.path}function i(u){return s(u)||!Vm(n,u.opts.constraints||{})}let o=n?i:s,a=this.routes.filter(o);this._rebuild(a)};Ge.prototype.lookup=function(t,r,n,s){if(typeof n=="function"&&(s=n,n=void 0),s===void 0){let i=this.constrainer.deriveConstraints(t,n),o=this.find(t.method,t.url,i);return this.callHandler(o,t,r,n)}this.constrainer.deriveConstraints(t,n,(i,o)=>{if(i!==null){s(i);return}try{let a=this.find(t.method,t.url,o),u=this.callHandler(a,t,r,n);s(null,u)}catch(a){s(a)}})};Ge.prototype.callHandler=function(t,r,n,s){return t===null?this._defaultRoute(r,n,s):s===void 0?t.handler(r,n,t.params,t.store,t.searchParams):t.handler.call(s,r,n,t.params,t.store,t.searchParams)};Ge.prototype.find=function(t,r,n){let s=this.trees[t];if(s===void 0)return null;r.charCodeAt(0)!==47&&(r=r.replace(sO,"/")),this.ignoreDuplicateSlashes&&(r=Hm(r));let i,o,a;try{i=EB(r),r=i.path,o=i.querystring,a=i.shouldDecodeParam}catch{return this._onBadUrl(r)}this.ignoreTrailingSlash&&(r=zm(r));let u=r;this.caseSensitive===!1&&(r=r.toLowerCase());let c=this.maxParamLength,l=s.prefix.length,f=[],d=r.length,h=[];for(;;){if(l===d&&s.isLeafNode){let y=s.handlerStorage.getMatchingHandler(n);if(y!==null)return{handler:y.handler,store:y.store,params:y._createParamsObject(f),searchParams:this.querystringParser(o)}}let p=s.getNextNode(r,l,h,f.length);if(p===null){if(h.length===0)return null;let y=h.pop();l=y.brotherPathIndex,f.splice(y.paramsCount),p=y.brotherNode}if(s=p,s.kind===Fm.STATIC){l+=s.prefix.length;continue}if(s.kind===Fm.WILDCARD){let y=u.slice(l);a&&(y=nO(y)),f.push(y),l=d;continue}if(s.kind===Fm.PARAMETRIC){let y=u.indexOf("/",l);y===-1&&(y=d);let v=u.slice(l,y);if(a&&(v=nO(v)),s.isRegex){let _=s.regex.exec(v);if(_===null)continue;for(let w=1;w<_.length;w++){let g=_[w];if(g.length>c)return null;f.push(g)}}else{if(v.length>c)return null;f.push(v)}l=y}}};Ge.prototype._rebuild=function(e){this.reset();for(let t of e){let{method:r,path:n,opts:s,handler:i,store:o}=t;this._on(r,n,s,i,o)}};Ge.prototype._defaultRoute=function(e,t,r){if(this.defaultRoute!==null)return r===void 0?this.defaultRoute(e,t):this.defaultRoute.call(r,e,t);t.statusCode=404,t.end()};Ge.prototype._onBadUrl=function(e){if(this.onBadUrl===null)return null;let t=this.onBadUrl;return{handler:(r,n,s)=>t(e,r,n),params:{},store:null}};Ge.prototype.prettyPrint=function(e={}){let t=e.method;e.buildPrettyMeta=this.buildPrettyMeta.bind(this);let r=null;if(t===void 0){let{version:n,host:s,...i}=this.constrainer.strategies;i[Mm.name]=Mm;let o=new Ge({...this._opts,constraints:i}),a=this.routes.map(u=>{let c={...u.opts.constraints,[Mm.name]:u.method};return{...u,method:"MERGED",opts:{constraints:c}}});o._rebuild(a),r=o.trees.MERGED}else r=this.trees[t];return r==null?"(empty tree)":_B(r,e)};for(let e in Ei){if(!Ei.hasOwnProperty(e))continue;let t=Ei[e],r=t.toLowerCase();if(Ge.prototype[r])throw new Error("Method already exists: "+r);Ge.prototype[r]=function(n,s,i){return this.on(t,n,s,i)}}Ge.prototype.all=function(e,t,r){this.on(Ei,e,t,r)};uO.exports=Ge;function iO(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Hm(e){return e.replace(/\/\/+/g,"/")}function zm(e){return e.length>1&&e.charCodeAt(e.length-1)===47?e.slice(0,-1):e}function oO(e){return e.charCodeAt(1)===94&&(e=e.slice(0,1)+e.slice(2)),e.charCodeAt(e.length-2)===36&&(e=e.slice(0,e.length-2)+e.slice(e.length-1)),e}function aO(e,t){let r=1;for(;t<e.length;){if(t++,e[t]==="\\"){t++;continue}if(e[t]===")"?r--:e[t]==="("&&r++,!r)return t}throw new TypeError('Invalid regexp expression in "'+e+'"')}function SB(e){return e?e.store?Object.assign({},e.store):{}:{}}});var cO=E((sX,lO)=>{"use strict";function Bm(e,t,r,n){if(r===void 0)return t.header("content-length","0"),n(null,null);if(typeof r.resume=="function")return r.on("error",i=>{t.log.error({err:i},"Error on Stream found for HEAD route")}),r.resume(),n(null,null);let s=""+Buffer.byteLength(r);t.header("content-length",s),n(null,null)}function bB(e){return e==null?Bm:Array.isArray(e)?[...e,Bm]:[e,Bm]}lO.exports={parseHeadOnSendHandlers:bB}});var $O=E((iX,PO)=>{"use strict";var wB=Um(),RB=il(),fO=zc(),{onRequestAbortHookRunner:TB,lifecycleHooks:dO,preParsingHookRunner:PB,onTimeoutHookRunner:$B,onRequestHookRunner:OB}=dn(),{supportedMethods:AB}=gp(),{normalizeSchema:CB}=zi(),{parseHeadOnSendHandlers:IB}=cO(),{FSTDEP007:NB,FSTDEP008:kB,FSTDEP014:hO}=zr(),{compileSchemasForValidation:qB,compileSchemasForSerialization:DB}=Lc(),{FST_ERR_SCH_VALIDATION_BUILD:jB,FST_ERR_SCH_SERIALIZATION_BUILD:xB,FST_ERR_DEFAULT_ROUTE_INVALID_TYPE:LB,FST_ERR_DUPLICATED_ROUTE:FB,FST_ERR_INVALID_URL:MB,FST_ERR_HOOK_INVALID_HANDLER:pO,FST_ERR_ROUTE_OPTIONS_NOT_OBJ:VB,FST_ERR_ROUTE_DUPLICATED_HANDLER:HB,FST_ERR_ROUTE_HANDLER_NOT_FN:mO,FST_ERR_ROUTE_MISSING_HANDLER:zB,FST_ERR_ROUTE_METHOD_NOT_SUPPORTED:UB,FST_ERR_ROUTE_METHOD_INVALID:BB,FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED:GB,FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT:KB,FST_ERR_HOOK_INVALID_ASYNC_HANDLER:Gm}=St(),{kRoutePrefix:YB,kLogLevel:WB,kLogSerializers:yO,kHooks:gO,kSchemaController:JB,kOptions:_O,kReplySerializerDefault:Km,kReplyIsError:XB,kRequestPayloadStream:QB,kDisableRequestLogging:ZB,kSchemaErrorFormatter:eG,kErrorHandler:vO,kHasBeenDecorated:EO,kRequestAcceptVersion:Ym,kRouteByFastify:Wm,kRouteContext:SO}=ct(),{buildErrorHandler:tG}=So(),{createChildLogger:rG}=Vi();function nG(e){let t=wB(e.config),r,n,s,i,o,a,u,c,l,f,d,h,p,y,v=!1;return{setup($,k){r=k.avvio,n=k.fourOhFour,s=k.logger,i=k.hasLogger,o=k.setupResponseListeners,a=k.throwIfAlreadyStarted,p=k.validateHTTPVersion,h=$.exposeHeadRoutes,u=$.genReqId,c=$.disableRequestLogging,l=$.ignoreTrailingSlash,f=$.ignoreDuplicateSlashes,d=Object.prototype.hasOwnProperty.call($,"return503OnClosing")?$.return503OnClosing:!0,y=k.keepAliveConnections},routing:t.lookup.bind(t),route:A,hasRoute:T,prepareRoute:m,getDefaultRoute:function(){return hO(),t.defaultRoute},setDefaultRoute:function($){if(hO(),typeof $!="function")throw new LB;t.defaultRoute=$},routeHandler:b,closeRoutes:()=>{v=!0},printRoutes:t.prettyPrint.bind(t),addConstraintStrategy:_,hasConstraintStrategy:w,isAsyncConstraint:g};function _($){return a("Cannot add constraint strategy!"),t.addConstraintStrategy($)}function w($){return t.hasConstraintStrategy($)}function g(){return t.constrainer.asyncStrategiesInUse.size>0}function m({method:$,url:k,options:R,handler:x,isFastify:j}){if(typeof k!="string")throw new MB(typeof k);if(!x&&typeof R=="function")x=R,R={};else if(x&&typeof x=="function"){if(Object.prototype.toString.call(R)!=="[object Object]")throw new VB($,k);if(R.handler)throw typeof R.handler=="function"?new HB($,k):new mO($,k)}return R=Object.assign({},R,{method:$,url:k,path:k,handler:x||R&&R.handler}),A.call(this,{options:R,isFastify:j})}function T({options:$}){return t.find($.method,$.url||"",$.constraints)!==null}function A({options:$,isFastify:k}){let R={...$},{exposeHeadRoute:x}=R,L=x!=null?x:h,Q=R.method==="GET"||Array.isArray(R.method)&&R.method.includes("GET"),oe=R.method==="HEAD"||Array.isArray(R.method)&&R.method.includes("HEAD"),H=L&&Q?{...$}:null;a("Cannot add route!");let W=R.url||R.path||"";if(Array.isArray(R.method))for(var Oe=0;Oe<R.method.length;++Oe)R.method[Oe]=bO(R.method[Oe]),wO(R.method[Oe],W,R.schema);else R.method=bO(R.method),wO(R.method,W,R.schema);if(!R.handler)throw new zB(R.method,W);if(R.errorHandler!==void 0&&typeof R.errorHandler!="function")throw new mO(R.method,W);TO(R.bodyLimit);let z=this[YB];if(W==="/"&&z.length>0&&R.method!=="HEAD")switch(R.prefixTrailingSlash){case"slash":Ke.call(this,{path:W,isFastify:k});break;case"no-slash":Ke.call(this,{path:"",isFastify:k});break;case"both":default:Ke.call(this,{path:"",isFastify:k}),l!==!0&&(f!==!0||!z.endsWith("/"))&&Ke.call(this,{path:W,prefixing:!0,isFastify:k})}else W[0]==="/"&&z.endsWith("/")?Ke.call(this,{path:W.slice(1),isFastify:k}):Ke.call(this,{path:W,isFastify:k});return this;function Ke({path:Kt,prefixing:Re=!1,isFastify:xr=!1}){let ot=z+Kt;if(R.url=ot,R.path=ot,R.routePath=Kt,R.prefix=z,R.logLevel=R.logLevel||this[WB],(this[yO]||R.logSerializers)&&(R.logSerializers=Object.assign(Object.create(this[yO]),R.logSerializers)),R.attachValidation==null&&(R.attachValidation=!1),Re===!1)for(let Te of this[gO].onRoute)Te.call(this,R);for(let Te of dO)if(R&&Te in R){if(Array.isArray(R[Te]))for(let I of R[Te]){if(typeof I!="function")throw new pO(Te,Object.prototype.toString.call(I));if(Te==="onSend"||Te==="preSerialization"||Te==="onError"||Te==="preParsing"){if(I.constructor.name==="AsyncFunction"&&I.length===4)throw new Gm}else if(Te==="onRequestAbort"){if(I.constructor.name==="AsyncFunction"&&I.length!==1)throw new Gm}else if(I.constructor.name==="AsyncFunction"&&I.length===3)throw new Gm}else if(R[Te]!==void 0&&typeof R[Te]!="function")throw new pO(Te,Object.prototype.toString.call(R[Te]))}let de=R.constraints||{},Ze={...R.config,url:ot,method:R.method},te=new RB({schema:R.schema,handler:R.handler.bind(this),config:Ze,errorHandler:R.errorHandler,childLoggerFactory:R.childLoggerFactory,bodyLimit:R.bodyLimit,logLevel:R.logLevel,logSerializers:R.logSerializers,attachValidation:R.attachValidation,schemaErrorFormatter:R.schemaErrorFormatter,replySerializer:this[Km],validatorCompiler:R.validatorCompiler,serializerCompiler:R.serializerCompiler,exposeHeadRoute:L,prefixTrailingSlash:R.prefixTrailingSlash||"both",server:this,isFastify:xr});R.version&&(kB(),de.version=R.version);let we=t.findRoute("HEAD",R.url,de),Lt=we!==null;oe&&Lt&&!te[Wm]&&we.store[Wm]&&t.off("HEAD",R.url,de);try{t.on(R.method,R.url,{constraints:de},b,te)}catch(Te){if(!te[Wm])throw Te.message.includes(`Method '${R.method}' already declared for route '${R.url}'`)?new FB(R.method,R.url):Te}if(this.after((Te,I)=>{te.errorHandler=R.errorHandler?tG(this[vO],R.errorHandler):this[vO],te._parserOptions.limit=R.bodyLimit||null,te.logLevel=R.logLevel,te.logSerializers=R.logSerializers,te.attachValidation=R.attachValidation,te[Km]=this[Km],te.schemaErrorFormatter=R.schemaErrorFormatter||this[eG]||te.schemaErrorFormatter,r.once("preReady",()=>{for(let q of dO){let V=this[gO][q].concat(R[q]||[]).map(B=>B.bind(this));te[q]=V.length?V:null}for(;!te.Request[EO]&&te.Request.parent;)te.Request=te.Request.parent;for(;!te.Reply[EO]&&te.Reply.parent;)te.Reply=te.Reply.parent;if(n.setContext(this,te),R.schema){te.schema=CB(te.schema,this.initialConfig);let q=this[JB];!R.validatorCompiler&&(R.schema.body||R.schema.headers||R.schema.querystring||R.schema.params)&&q.setupValidator(this[_O]);try{let V=typeof R?.validatorCompiler=="function"||q.isCustomValidatorCompiler;qB(te,R.validatorCompiler||q.validatorCompiler,V)}catch(V){throw new jB(R.method,ot,V.message)}R.schema.response&&!R.serializerCompiler&&q.setupSerializer(this[_O]);try{DB(te,R.serializerCompiler||q.serializerCompiler)}catch(V){throw new xB(R.method,ot,V.message)}}}),I(Te)}),L&&Q&&!oe&&!Lt){let Te=IB(H.onSend);m.call(this,{method:"HEAD",url:Kt,options:{...H,onSend:Te},isFastify:!0})}else Lt&&x&&NB()}}function b($,k,R,x,j){let L=u($),Q={level:x.logLevel};x.logSerializers&&(Q.serializers=x.logSerializers);let oe=rG(x,s,$,L,Q);if(oe[ZB]=c,!p($.httpVersion)){oe.info({res:{statusCode:505}},"request aborted - invalid HTTP version");let z='{"error":"HTTP Version Not Supported","message":"HTTP Version Not Supported","statusCode":505}',Ke={"Content-Type":"application/json","Content-Length":z.length};k.writeHead(505,Ke),k.end(z);return}if(v===!0&&($.httpVersionMajor!==2&&k.setHeader("Connection","close"),d)){let z={"Content-Type":"application/json","Content-Length":"80"};k.writeHead(503,z),k.end('{"error":"Service Unavailable","message":"Service Unavailable","statusCode":503}'),oe.info({res:{statusCode:503}},"request aborted - refusing to accept new requests as server is closing");return}String.prototype.toLowerCase.call($.headers.connection||"")==="keep-alive"&&y.has($.socket)===!1&&(y.add($.socket),$.socket.on("close",oG.bind({keepAliveConnections:y,socket:$.socket}))),$.headers[Ym]!==void 0&&($.headers["accept-version"]=$.headers[Ym],$.headers[Ym]=void 0);let W=new x.Request(L,R,$,j,oe,x),Oe=new x.Reply(k,W,oe);c===!1&&oe.info({req:W},"incoming request"),(i===!0||x.onResponse!==null)&&o(Oe),x.onRequest!==null?OB(x.onRequest,W,Oe,RO):RO(null,W,Oe),x.onRequestAbort!==null&&$.on("close",()=>{$.aborted&&TB(x.onRequestAbort,W,sG.bind(null,Oe))}),x.onTimeout!==null&&(W.raw.socket._meta||W.raw.socket.on("timeout",iG),W.raw.socket._meta={context:x,request:W,reply:Oe})}}function sG(e,t){t&&e.log.error({err:t},"onRequestAborted hook failed")}function iG(){let{context:e,request:t,reply:r}=this._meta;$B(e.onTimeout,t,r,aG)}function bO(e){if(typeof e!="string")throw new BB;if(e=e.toUpperCase(),AB.indexOf(e)===-1)throw new UB(e);return e}function wO(e,t,r){if((e==="GET"||e==="HEAD")&&r&&r.body)throw new GB(e,t)}function TO(e){if(e!==void 0&&(!Number.isInteger(e)||e<=0))throw new KB(e)}function RO(e,t,r){if(r.sent!==!0){if(e!=null){r[XB]=!0,r.send(e);return}t[QB]=t.raw,t[SO].preParsing!==null?PB(t[SO].preParsing,t,r,fO):fO(null,t,r)}}function oG(){this.keepAliveConnections.delete(this.socket)}function aG(){}PO.exports={buildRouting:nG,validateBodyLimitOption:TO}});var kO=E((oX,NO)=>{"use strict";var uG=Um(),OO=Hu(),AO=sl(),lG=il(),{kRoutePrefix:cG,kCanSetNotFoundHandler:ea,kFourOhFourLevelInstance:ta,kFourOhFourContext:Dr,kHooks:fG,kErrorHandler:CO}=ct(),{lifecycleHooks:dG}=dn(),{buildErrorHandler:hG}=So(),{FST_ERR_NOT_FOUND:pG}=St(),{createChildLogger:IO}=Vi();function mG(e){let{logger:t,genReqId:r}=e,n=uG({onBadUrl:a(),defaultRoute:f}),s=null;return{router:n,setNotFoundHandler:c,setContext:u,arrange404:i};function i(d){d[ta]=d,d[ea]=!0,n.onBadUrl=n.onBadUrl.bind(d),n.defaultRoute=n.defaultRoute.bind(d)}function o(d,h){let{url:p,method:y}=d.raw,v=`Route ${y}:${p} not found`;d.log.info(v),h.code(404).send({message:v,error:"Not Found",statusCode:404})}function a(){return function(h,p,y){let v=r(p),_=this[ta][Dr],w=IO(_,t,p,v),g=new AO(v,null,p,null,w,_),m=new OO(y,g,w);s(g,m)}}function u(d,h){let p=Object.assign({},d[Dr]);p.onSend=h.onSend,h[Dr]=p}function c(d,h,p,y){this[ea]===void 0&&(this[ea]=!0),this[Dr]===void 0&&(this[Dr]=null);let v=this,_=this[cG]||"/";if(this[ea]===!1)throw new Error(`Not found handler already set for Fastify instance with prefix: '${_}'`);typeof d=="object"&&(d.preHandler&&(Array.isArray(d.preHandler)?d.preHandler=d.preHandler.map(w=>w.bind(v)):d.preHandler=d.preHandler.bind(v)),d.preValidation&&(Array.isArray(d.preValidation)?d.preValidation=d.preValidation.map(w=>w.bind(v)):d.preValidation=d.preValidation.bind(v))),typeof d=="function"&&(h=d,d=void 0),d=d||{},h?(this[ta][ea]=!1,h=h.bind(this),s=h):(h=o,s=o),this.after((w,g)=>{l.call(this,_,d,h,p,y),g(w)})}function l(d,h,p,y,v){let _=new lG({schema:h.schema,handler:p,config:h.config||{},server:this});if(y.once("preReady",()=>{let w=this[Dr];for(let g of dG){let m=this[fG][g].concat(h[g]||[]).map(T=>T.bind(this));w[g]=m.length?m:null}w.errorHandler=h.errorHandler?hG(this[CO],h.errorHandler):this[CO]}),this[Dr]!==null&&d==="/"){Object.assign(this[Dr],_);return}this[ta][Dr]=_,n.all(d+(d.endsWith("/")?"*":"/*"),v,_),n.all(d,v,_)}function f(d,h){let p=r(d),y=this[ta][Dr],v=IO(y,t,d,p);v.info({req:d},"incoming request");let _=new AO(p,null,d,null,v,y),w=new OO(h,_,v);_.log.warn("the default handler for 404 did not catch this, this is likely a fastify bug, please report it"),_.log.warn(n.prettyPrint()),w.code(404).send(new pG)}}NO.exports=mG});var DO=E((aX,jl)=>{"use strict";jl.exports=be;jl.exports.default=be;var qO={type:"object",additionalProperties:!1,properties:{connectionTimeout:{type:"integer",default:0},keepAliveTimeout:{type:"integer",default:72e3},forceCloseConnections:{oneOf:[{type:"string",pattern:"idle"},{type:"boolean"}]},maxRequestsPerSocket:{type:"integer",default:0,nullable:!0},requestTimeout:{type:"integer",default:0},bodyLimit:{type:"integer",default:1048576},caseSensitive:{type:"boolean",default:!0},allowUnsafeRegex:{type:"boolean",default:!1},http2:{type:"boolean"},https:{if:{not:{oneOf:[{type:"boolean"},{type:"null"},{type:"object",additionalProperties:!1,required:["allowHTTP1"],properties:{allowHTTP1:{type:"boolean"}}}]}},then:{setDefaultValue:!0}},ignoreTrailingSlash:{type:"boolean",default:!1},ignoreDuplicateSlashes:{type:"boolean",default:!1},disableRequestLogging:{type:"boolean",default:!1},jsonShorthand:{type:"boolean",default:!0},maxParamLength:{type:"integer",default:100},onProtoPoisoning:{type:"string",default:"error"},onConstructorPoisoning:{type:"string",default:"error"},pluginTimeout:{type:"integer",default:1e4},requestIdHeader:{anyOf:[{enum:[!1]},{type:"string"}],default:"request-id"},requestIdLogLabel:{type:"string",default:"reqId"},http2SessionTimeout:{type:"integer",default:72e3},exposeHeadRoutes:{type:"boolean",default:!0},versioning:{type:"object",additionalProperties:!0,required:["storage","deriveVersion"],properties:{storage:{},deriveVersion:{}}},constraints:{type:"object",additionalProperties:{type:"object",required:["name","storage","validate","deriveConstraint"],additionalProperties:!0,properties:{name:{type:"string"},storage:{},validate:{},deriveConstraint:{}}}}}},yG=Object.prototype.hasOwnProperty,gG=new RegExp("idle","u");function be(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(o===0)if(e&&typeof e=="object"&&!Array.isArray(e)){e.connectionTimeout===void 0&&(e.connectionTimeout=0),e.keepAliveTimeout===void 0&&(e.keepAliveTimeout=72e3),e.maxRequestsPerSocket===void 0&&(e.maxRequestsPerSocket=0),e.requestTimeout===void 0&&(e.requestTimeout=0),e.bodyLimit===void 0&&(e.bodyLimit=1048576),e.caseSensitive===void 0&&(e.caseSensitive=!0),e.allowUnsafeRegex===void 0&&(e.allowUnsafeRegex=!1),e.ignoreTrailingSlash===void 0&&(e.ignoreTrailingSlash=!1),e.ignoreDuplicateSlashes===void 0&&(e.ignoreDuplicateSlashes=!1),e.disableRequestLogging===void 0&&(e.disableRequestLogging=!1),e.jsonShorthand===void 0&&(e.jsonShorthand=!0),e.maxParamLength===void 0&&(e.maxParamLength=100),e.onProtoPoisoning===void 0&&(e.onProtoPoisoning="error"),e.onConstructorPoisoning===void 0&&(e.onConstructorPoisoning="error"),e.pluginTimeout===void 0&&(e.pluginTimeout=1e4),e.requestIdHeader===void 0&&(e.requestIdHeader="request-id"),e.requestIdLogLabel===void 0&&(e.requestIdLogLabel="reqId"),e.http2SessionTimeout===void 0&&(e.http2SessionTimeout=72e3),e.exposeHeadRoutes===void 0&&(e.exposeHeadRoutes=!0);let p=o;for(let y in e)yG.call(qO.properties,y)||delete e[y];if(p===o){let y=e.connectionTimeout,v=o;if(!(typeof y=="number"&&!(y%1)&&!isNaN(y)&&isFinite(y))){let _=typeof y,w;if(w===void 0)if(_==="boolean"||y===null||_==="string"&&y&&y==+y&&!(y%1))w=+y;else return be.errors=[{instancePath:t+"/connectionTimeout",schemaPath:"#/properties/connectionTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;w!==void 0&&(y=w,e!==void 0&&(e.connectionTimeout=w))}var a=v===o;if(a){let _=e.keepAliveTimeout,w=o;if(!(typeof _=="number"&&!(_%1)&&!isNaN(_)&&isFinite(_))){let m=typeof _,T;if(T===void 0)if(m==="boolean"||_===null||m==="string"&&_&&_==+_&&!(_%1))T=+_;else return be.errors=[{instancePath:t+"/keepAliveTimeout",schemaPath:"#/properties/keepAliveTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;T!==void 0&&(_=T,e!==void 0&&(e.keepAliveTimeout=T))}var a=w===o;if(a){if(e.forceCloseConnections!==void 0){let m=e.forceCloseConnections,T=o,A=o,b=!1,$=null,k=o;if(typeof m!="string"){let j=typeof m,L;if(L===void 0)if(j=="number"||j=="boolean")L=""+m;else if(m===null)L="";else{let Q={instancePath:t+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Q]:i.push(Q),o++}L!==void 0&&(m=L,e!==void 0&&(e.forceCloseConnections=L))}if(o===k&&typeof m=="string"&&!gG.test(m)){let j={instancePath:t+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/0/pattern",keyword:"pattern",params:{pattern:"idle"},message:'must match pattern "idle"'};i===null?i=[j]:i.push(j),o++}var u=k===o;u&&(b=!0,$=0);let R=o;if(typeof m!="boolean"){let j;if(j===void 0)if(m==="false"||m===0||m===null)j=!1;else if(m==="true"||m===1)j=!0;else{let L={instancePath:t+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/1/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};i===null?i=[L]:i.push(L),o++}j!==void 0&&(m=j,e!==void 0&&(e.forceCloseConnections=j))}var u=R===o;if(u&&b?(b=!1,$=[$,1]):u&&(b=!0,$=1),b)o=A,i!==null&&(A?i.length=A:i=null);else{let j={instancePath:t+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf",keyword:"oneOf",params:{passingSchemas:$},message:"must match exactly one schema in oneOf"};return i===null?i=[j]:i.push(j),o++,be.errors=i,!1}var a=T===o}else var a=!0;if(a){let m=e.maxRequestsPerSocket,T=o;if(!(typeof m=="number"&&!(m%1)&&!isNaN(m)&&isFinite(m))&&m!==null){let b=typeof m,$;if($===void 0)if(b==="boolean"||m===null||b==="string"&&m&&m==+m&&!(m%1))$=+m;else if(m===""||m===0||m===!1)$=null;else return be.errors=[{instancePath:t+"/maxRequestsPerSocket",schemaPath:"#/properties/maxRequestsPerSocket/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;$!==void 0&&(m=$,e!==void 0&&(e.maxRequestsPerSocket=$))}var a=T===o;if(a){let b=e.requestTimeout,$=o;if(!(typeof b=="number"&&!(b%1)&&!isNaN(b)&&isFinite(b))){let R=typeof b,x;if(x===void 0)if(R==="boolean"||b===null||R==="string"&&b&&b==+b&&!(b%1))x=+b;else return be.errors=[{instancePath:t+"/requestTimeout",schemaPath:"#/properties/requestTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;x!==void 0&&(b=x,e!==void 0&&(e.requestTimeout=x))}var a=$===o;if(a){let R=e.bodyLimit,x=o;if(!(typeof R=="number"&&!(R%1)&&!isNaN(R)&&isFinite(R))){let L=typeof R,Q;if(Q===void 0)if(L==="boolean"||R===null||L==="string"&&R&&R==+R&&!(R%1))Q=+R;else return be.errors=[{instancePath:t+"/bodyLimit",schemaPath:"#/properties/bodyLimit/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;Q!==void 0&&(R=Q,e!==void 0&&(e.bodyLimit=Q))}var a=x===o;if(a){let L=e.caseSensitive,Q=o;if(typeof L!="boolean"){let H;if(H===void 0)if(L==="false"||L===0||L===null)H=!1;else if(L==="true"||L===1)H=!0;else return be.errors=[{instancePath:t+"/caseSensitive",schemaPath:"#/properties/caseSensitive/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;H!==void 0&&(L=H,e!==void 0&&(e.caseSensitive=H))}var a=Q===o;if(a){let H=e.allowUnsafeRegex,W=o;if(typeof H!="boolean"){let z;if(z===void 0)if(H==="false"||H===0||H===null)z=!1;else if(H==="true"||H===1)z=!0;else return be.errors=[{instancePath:t+"/allowUnsafeRegex",schemaPath:"#/properties/allowUnsafeRegex/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;z!==void 0&&(H=z,e!==void 0&&(e.allowUnsafeRegex=z))}var a=W===o;if(a){if(e.http2!==void 0){let z=e.http2,Ke=o;if(typeof z!="boolean"){let Re;if(Re===void 0)if(z==="false"||z===0||z===null)Re=!1;else if(z==="true"||z===1)Re=!0;else return be.errors=[{instancePath:t+"/http2",schemaPath:"#/properties/http2/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Re!==void 0&&(z=Re,e!==void 0&&(e.http2=Re))}var a=Ke===o}else var a=!0;if(a){if(e.https!==void 0){let z=e.https,Ke=o,Kt=o,Re=!0,xr=o,ot=o,de=o,Ze=o,te=!1,we=null,Lt=o;if(typeof z!="boolean"){let q;if(q===void 0)if(z==="false"||z===0||z===null)q=!1;else if(z==="true"||z===1)q=!0;else{let V={};i===null?i=[V]:i.push(V),o++}q!==void 0&&(z=q,e!==void 0&&(e.https=q))}var c=Lt===o;c&&(te=!0,we=0);let Te=o;if(z!==null){let q;if(q===void 0)if(z===""||z===0||z===!1)q=null;else{let V={};i===null?i=[V]:i.push(V),o++}q!==void 0&&(z=q,e!==void 0&&(e.https=q))}var c=Te===o;if(c&&te)te=!1,we=[we,1];else{c&&(te=!0,we=1);let q=o;if(o===q)if(z&&typeof z=="object"&&!Array.isArray(z)){let B;if(z.allowHTTP1===void 0&&(B="allowHTTP1")){let ae={};i===null?i=[ae]:i.push(ae),o++}else{let ae=o;for(let Z in z)Z!=="allowHTTP1"&&delete z[Z];if(ae===o&&z.allowHTTP1!==void 0){let Z=z.allowHTTP1;if(typeof Z!="boolean"){let ve;if(ve===void 0)if(Z==="false"||Z===0||Z===null)ve=!1;else if(Z==="true"||Z===1)ve=!0;else{let Fe={};i===null?i=[Fe]:i.push(Fe),o++}ve!==void 0&&(Z=ve,z!==void 0&&(z.allowHTTP1=ve))}}}}else{let B={};i===null?i=[B]:i.push(B),o++}var c=q===o;c&&te?(te=!1,we=[we,2]):c&&(te=!0,we=2)}if(te)o=Ze,i!==null&&(Ze?i.length=Ze:i=null);else{let q={};i===null?i=[q]:i.push(q),o++}var l=de===o;if(l){let q={};i===null?i=[q]:i.push(q),o++}else o=ot,i!==null&&(ot?i.length=ot:i=null);var f=xr===o;if(o=Kt,i!==null&&(Kt?i.length=Kt:i=null),f){let q=o;e.https=!0;var f=q===o;Re=f}if(!Re){let q={instancePath:t+"/https",schemaPath:"#/properties/https/if",keyword:"if",params:{failingKeyword:"then"},message:'must match "then" schema'};return i===null?i=[q]:i.push(q),o++,be.errors=i,!1}var a=Ke===o}else var a=!0;if(a){let z=e.ignoreTrailingSlash,Ke=o;if(typeof z!="boolean"){let Re;if(Re===void 0)if(z==="false"||z===0||z===null)Re=!1;else if(z==="true"||z===1)Re=!0;else return be.errors=[{instancePath:t+"/ignoreTrailingSlash",schemaPath:"#/properties/ignoreTrailingSlash/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Re!==void 0&&(z=Re,e!==void 0&&(e.ignoreTrailingSlash=Re))}var a=Ke===o;if(a){let Re=e.ignoreDuplicateSlashes,xr=o;if(typeof Re!="boolean"){let de;if(de===void 0)if(Re==="false"||Re===0||Re===null)de=!1;else if(Re==="true"||Re===1)de=!0;else return be.errors=[{instancePath:t+"/ignoreDuplicateSlashes",schemaPath:"#/properties/ignoreDuplicateSlashes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;de!==void 0&&(Re=de,e!==void 0&&(e.ignoreDuplicateSlashes=de))}var a=xr===o;if(a){let de=e.disableRequestLogging,Ze=o;if(typeof de!="boolean"){let we;if(we===void 0)if(de==="false"||de===0||de===null)we=!1;else if(de==="true"||de===1)we=!0;else return be.errors=[{instancePath:t+"/disableRequestLogging",schemaPath:"#/properties/disableRequestLogging/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;we!==void 0&&(de=we,e!==void 0&&(e.disableRequestLogging=we))}var a=Ze===o;if(a){let we=e.jsonShorthand,Lt=o;if(typeof we!="boolean"){let I;if(I===void 0)if(we==="false"||we===0||we===null)I=!1;else if(we==="true"||we===1)I=!0;else return be.errors=[{instancePath:t+"/jsonShorthand",schemaPath:"#/properties/jsonShorthand/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;I!==void 0&&(we=I,e!==void 0&&(e.jsonShorthand=I))}var a=Lt===o;if(a){let I=e.maxParamLength,q=o;if(!(typeof I=="number"&&!(I%1)&&!isNaN(I)&&isFinite(I))){let B=typeof I,ae;if(ae===void 0)if(B==="boolean"||I===null||B==="string"&&I&&I==+I&&!(I%1))ae=+I;else return be.errors=[{instancePath:t+"/maxParamLength",schemaPath:"#/properties/maxParamLength/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;ae!==void 0&&(I=ae,e!==void 0&&(e.maxParamLength=ae))}var a=q===o;if(a){let B=e.onProtoPoisoning,ae=o;if(typeof B!="string"){let ve=typeof B,Fe;if(Fe===void 0)if(ve=="number"||ve=="boolean")Fe=""+B;else if(B===null)Fe="";else return be.errors=[{instancePath:t+"/onProtoPoisoning",schemaPath:"#/properties/onProtoPoisoning/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Fe!==void 0&&(B=Fe,e!==void 0&&(e.onProtoPoisoning=Fe))}var a=ae===o;if(a){let ve=e.onConstructorPoisoning,Fe=o;if(typeof ve!="string"){let Me=typeof ve,it;if(it===void 0)if(Me=="number"||Me=="boolean")it=""+ve;else if(ve===null)it="";else return be.errors=[{instancePath:t+"/onConstructorPoisoning",schemaPath:"#/properties/onConstructorPoisoning/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;it!==void 0&&(ve=it,e!==void 0&&(e.onConstructorPoisoning=it))}var a=Fe===o;if(a){let Me=e.pluginTimeout,it=o;if(!(typeof Me=="number"&&!(Me%1)&&!isNaN(Me)&&isFinite(Me))){let or=typeof Me,Lr;if(Lr===void 0)if(or==="boolean"||Me===null||or==="string"&&Me&&Me==+Me&&!(Me%1))Lr=+Me;else return be.errors=[{instancePath:t+"/pluginTimeout",schemaPath:"#/properties/pluginTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;Lr!==void 0&&(Me=Lr,e!==void 0&&(e.pluginTimeout=Lr))}var a=it===o;if(a){let or=e.requestIdHeader,Lr=o,Ri=o,un=!1,ar=o;if(or!==!1){let vt={instancePath:t+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf/0/enum",keyword:"enum",params:{allowedValues:qO.properties.requestIdHeader.anyOf[0].enum},message:"must be equal to one of the allowed values"};i===null?i=[vt]:i.push(vt),o++}var d=ar===o;if(un=un||d,!un){let vt=o;if(typeof or!="string"){let ln=typeof or,je;if(je===void 0)if(ln=="number"||ln=="boolean")je=""+or;else if(or===null)je="";else{let Ft={instancePath:t+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Ft]:i.push(Ft),o++}je!==void 0&&(or=je,e!==void 0&&(e.requestIdHeader=je))}var d=vt===o;un=un||d}if(un)o=Ri,i!==null&&(Ri?i.length=Ri:i=null);else{let vt={instancePath:t+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[vt]:i.push(vt),o++,be.errors=i,!1}var a=Lr===o;if(a){let vt=e.requestIdLogLabel,fa=o;if(typeof vt!="string"){let je=typeof vt,Ft;if(Ft===void 0)if(je=="number"||je=="boolean")Ft=""+vt;else if(vt===null)Ft="";else return be.errors=[{instancePath:t+"/requestIdLogLabel",schemaPath:"#/properties/requestIdLogLabel/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Ft!==void 0&&(vt=Ft,e!==void 0&&(e.requestIdLogLabel=Ft))}var a=fa===o;if(a){let je=e.http2SessionTimeout,Ft=o;if(!(typeof je=="number"&&!(je%1)&&!isNaN(je)&&isFinite(je))){let Mt=typeof je,at;if(at===void 0)if(Mt==="boolean"||je===null||Mt==="string"&&je&&je==+je&&!(je%1))at=+je;else return be.errors=[{instancePath:t+"/http2SessionTimeout",schemaPath:"#/properties/http2SessionTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;at!==void 0&&(je=at,e!==void 0&&(e.http2SessionTimeout=at))}var a=Ft===o;if(a){let Mt=e.exposeHeadRoutes,at=o;if(typeof Mt!="boolean"){let et;if(et===void 0)if(Mt==="false"||Mt===0||Mt===null)et=!1;else if(Mt==="true"||Mt===1)et=!0;else return be.errors=[{instancePath:t+"/exposeHeadRoutes",schemaPath:"#/properties/exposeHeadRoutes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;et!==void 0&&(Mt=et,e!==void 0&&(e.exposeHeadRoutes=et))}var a=at===o;if(a){if(e.versioning!==void 0){let et=e.versioning,xn=o;if(o===xn)if(et&&typeof et=="object"&&!Array.isArray(et)){let ur;if(et.storage===void 0&&(ur="storage")||et.deriveVersion===void 0&&(ur="deriveVersion"))return be.errors=[{instancePath:t+"/versioning",schemaPath:"#/properties/versioning/required",keyword:"required",params:{missingProperty:ur},message:"must have required property '"+ur+"'"}],!1}else return be.errors=[{instancePath:t+"/versioning",schemaPath:"#/properties/versioning/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=xn===o}else var a=!0;if(a)if(e.constraints!==void 0){let et=e.constraints,xn=o;if(o===xn)if(et&&typeof et=="object"&&!Array.isArray(et))for(let ur in et){let Vt=et[ur],Fr=o;if(o===Fr)if(Vt&&typeof Vt=="object"&&!Array.isArray(Vt)){let cn;if(Vt.name===void 0&&(cn="name")||Vt.storage===void 0&&(cn="storage")||Vt.validate===void 0&&(cn="validate")||Vt.deriveConstraint===void 0&&(cn="deriveConstraint"))return be.errors=[{instancePath:t+"/constraints/"+ur.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constraints/additionalProperties/required",keyword:"required",params:{missingProperty:cn},message:"must have required property '"+cn+"'"}],!1;if(Vt.name!==void 0){let fn=Vt.name;if(typeof fn!="string"){let da=typeof fn,Er;if(Er===void 0)if(da=="number"||da=="boolean")Er=""+fn;else if(fn===null)Er="";else return be.errors=[{instancePath:t+"/constraints/"+ur.replace(/~/g,"~0").replace(/\//g,"~1")+"/name",schemaPath:"#/properties/constraints/additionalProperties/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Er!==void 0&&(fn=Er,Vt!==void 0&&(Vt.name=Er))}}}else return be.errors=[{instancePath:t+"/constraints/"+ur.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constraints/additionalProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var h=Fr===o;if(!h)break}else return be.errors=[{instancePath:t+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=xn===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}}else return be.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return be.errors=i,o===0}jl.exports.defaultInitOptions={connectionTimeout:0,keepAliveTimeout:72e3,maxRequestsPerSocket:0,requestTimeout:0,bodyLimit:1048576,caseSensitive:!0,allowUnsafeRegex:!1,disableRequestLogging:!1,jsonShorthand:!0,ignoreTrailingSlash:!1,ignoreDuplicateSlashes:!1,maxParamLength:100,onProtoPoisoning:"error",onConstructorPoisoning:"error",pluginTimeout:1e4,requestIdHeader:"request-id",requestIdLogLabel:"reqId",http2SessionTimeout:72e3,exposeHeadRoutes:!0}});var jO=E((uX,Ll)=>{"use strict";var xl=DO(),_G=Hi()({circles:!0,proto:!1}),{FST_ERR_INIT_OPTS_INVALID:vG}=St();function EG(e){let t=_G(e);if(!xl(t)){let r=new vG(JSON.stringify(xl.errors.map(n=>n.message)));throw r.errors=xl.errors,r}return Jm(t)}function Jm(e){let t=Object.getOwnPropertyNames(e);for(let r of t){let n=e[r];ArrayBuffer.isView(n)&&!(n instanceof DataView)||(e[r]=n&&typeof n=="object"?Jm(n):n)}return Object.freeze(e)}Ll.exports=EG;Ll.exports.defaultInitOptions=xl.defaultInitOptions;Ll.exports.utils={deepFreezeObject:Jm}});var BO=E((lX,UO)=>{"use strict";var{kAvvioBoot:SG,kChildren:xO,kRoutePrefix:LO,kLogLevel:FO,kLogSerializers:Xm,kHooks:Qm,kSchemaController:Si,kContentTypeParser:MO,kReply:VO,kRequest:HO,kFourOhFour:bG,kPluginNameChain:zO}=ct(),wG=Hu(),RG=sl(),TG=Rm(),PG=Np(),{buildHooks:$G}=dn(),ra=Cm();UO.exports=function(t,r,n){let s=ra.registerPlugin.call(t,r),i=ra.getPluginName(r)||ra.getFuncPreview(r);if(s)return t[zO].push(i),t;let o=Object.create(t);t[xO].push(o),o.ready=t[SG].bind(o),o[xO]=[],o[VO]=wG.buildReply(o[VO]),o[HO]=RG.buildRequest(o[HO]),o[MO]=PG.helpers.buildContentTypeParser(o[MO]),o[Qm]=$G(o[Qm]),o[LO]=OG(o[LO],n.prefix),o[FO]=n.logLevel||o[FO],o[Si]=TG.buildSchemaController(t[Si]),o.getSchema=o[Si].getSchema.bind(o[Si]),o.getSchemas=o[Si].getSchemas.bind(o[Si]),o[ra.kRegisteredPlugins]=Object.create(o[ra.kRegisteredPlugins]),o[zO]=[i],(o[Xm]||n.logSerializers)&&(o[Xm]=Object.assign(Object.create(o[Xm]),n.logSerializers)),n.prefix&&o[bG].arrange404(o);for(let a of o[Qm].onRegister)a.call(this,o,n);return o};function OG(e,t){return t?(e.endsWith("/")&&t[0]==="/"?t=t.slice(1):t[0]!=="/"&&(t="/"+t),e+t):e}});var KO=E((cX,GO)=>{"use strict";GO.exports=function(){return{[Symbol.iterator]:function*(){},add(){},delete(){},has(){return!0}}}});var YO=E(Zm=>{"use strict";Zm.parse=CG;Zm.serialize=IG;var AG=Object.prototype.toString,Fl=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function CG(e,t){if(typeof e!="string")throw new TypeError("argument str must be a string");for(var r={},n=t||{},s=n.decode||NG,i=0;i<e.length;){var o=e.indexOf("=",i);if(o===-1)break;var a=e.indexOf(";",i);if(a===-1)a=e.length;else if(a<o){i=e.lastIndexOf(";",o-1)+1;continue}var u=e.slice(i,o).trim();if(r[u]===void 0){var c=e.slice(o+1,a).trim();c.charCodeAt(0)===34&&(c=c.slice(1,-1)),r[u]=DG(c,s)}i=a+1}return r}function IG(e,t,r){var n=r||{},s=n.encode||kG;if(typeof s!="function")throw new TypeError("option encode is invalid");if(!Fl.test(e))throw new TypeError("argument name is invalid");var i=s(t);if(i&&!Fl.test(i))throw new TypeError("argument val is invalid");var o=e+"="+i;if(n.maxAge!=null){var a=n.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(a)}if(n.domain){if(!Fl.test(n.domain))throw new TypeError("option domain is invalid");o+="; Domain="+n.domain}if(n.path){if(!Fl.test(n.path))throw new TypeError("option path is invalid");o+="; Path="+n.path}if(n.expires){var u=n.expires;if(!qG(u)||isNaN(u.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+u.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.priority){var c=typeof n.priority=="string"?n.priority.toLowerCase():n.priority;switch(c){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(n.sameSite){var l=typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite;switch(l){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o}function NG(e){return e.indexOf("%")!==-1?decodeURIComponent(e):e}function kG(e){return encodeURIComponent(e)}function qG(e){return AG.call(e)==="[object Date]"||e instanceof Date}function DG(e,t){try{return t(e)}catch{return e}}});var WO=E((dX,Ml)=>{"use strict";var{format:ey}=require("node:util");function ty(){let e={},t=new Map,r=Object.create(null);function n(o,a,u,{unlimited:c=!1}={}){if(!o)throw new Error("Warning name must not be empty");if(!a)throw new Error("Warning code must not be empty");if(!u)throw new Error("Warning message must not be empty");if(typeof c!="boolean")throw new Error("Warning opts.unlimited must be a boolean");if(a=a.toUpperCase(),e[a]!==void 0)throw new Error(`The code '${a}' already exist`);function l(f,d,h){let p;return f&&d&&h?p=ey(u,f,d,h):f&&d?p=ey(u,f,d):f?p=ey(u,f):p=u,{code:a,name:o,message:p}}return Object.assign(r,{unlimited:c}),t.set(a,c),e[a]=l,e[a]}function s(o,a,u={}){return n("DeprecationWarning",o,a,u)}function i(o,a,u,c){if(t.get(o)===!0&&r.unlimited===!1)return;if(e[o]===void 0)throw new Error(`The code '${o}' does not exist`);t.set(o,!0);let l=e[o](a,u,c);process.emitWarning(l.message,l.name,l.code)}return{create:n,createDeprecation:s,emit:i,emitted:t}}Ml.exports=ty;Ml.exports.default=ty;Ml.exports.processWarning=ty});var QO=E((hX,XO)=>{"use strict";var{URL:JO}=require("node:url"),ry="http://localhost";XO.exports=function(t,r){(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]")&&t.startsWith("//")&&(t=ry+t);let n=typeof t=="object"?Object.assign(new JO(ry),t):new JO(t,ry);if(typeof r=="string"){r=new URLSearchParams(r);for(let s of r.keys()){n.searchParams.delete(s);for(let i of r.getAll(s))n.searchParams.append(s,i)}}else{let s=Object.assign({},t.query,r);for(let i in s){let o=s[i];if(Array.isArray(o)){n.searchParams.delete(i);for(let a of o)n.searchParams.append(i,a)}else n.searchParams.set(i,o)}}return n}});var r1=E((pX,Vl)=>{"use strict";var{Readable:ZO,addAbortSignal:jG}=require("node:stream"),sy=require("node:util"),xG=YO(),LG=require("node:assert"),e1=WO()(),FG=QO(),{EventEmitter:MG}=require("node:events");e1.create("FastifyDeprecationLightMyRequest","FST_LIGHTMYREQUEST_DEP01",'You are accessing "request.connection", use "request.socket" instead.');function VG(e){return e.port?e.host:e.hostname+(e.protocol==="https:"?":443":":80")}var ny=class extends MG{constructor(t){super(),this.remoteAddress=t}};function t1(e){return new t(this);function t(r){jr.call(r,{...e,Request:void 0}),Object.assign(this,r);for(let n of Object.keys(jr.prototype))this.constructor.prototype[n]=jr.prototype[n];return sy.inherits(this.constructor,e.Request),this}}function jr(e){ZO.call(this,{autoDestroy:!1});let t=FG(e.url||e.path,e.query);this.url=t.pathname+t.search,this.aborted=!1,this.httpVersionMajor=1,this.httpVersionMinor=1,this.httpVersion="1.1",this.method=e.method?e.method.toUpperCase():"GET",this.headers={},this.rawHeaders=[];let r=e.headers||{};for(let o in r){let a=o.toLowerCase();if((a==="user-agent"||a==="content-type")&&r[o]===void 0){this.headers[a]=void 0;continue}let u=r[o];LG(u!==void 0,'invalid value "undefined" for header '+o),this.headers[a]=""+u}if("user-agent"in this.headers||(this.headers["user-agent"]="lightMyRequest"),this.headers.host=this.headers.host||e.authority||VG(t),e.cookies){let{cookies:o}=e,a=Object.keys(o).map(u=>xG.serialize(u,o[u]));this.headers.cookie&&a.unshift(this.headers.cookie),this.headers.cookie=a.join("; ")}this.socket=new ny(e.remoteAddress||"127.0.0.1"),Object.defineProperty(this,"connection",{get(){return e1.emit("FST_LIGHTMYREQUEST_DEP01"),this.socket},configurable:!0});let n=e.payload||e.body||null,s=n&&typeof n.resume=="function";n&&typeof n!="string"&&!s&&!Buffer.isBuffer(n)&&(n=JSON.stringify(n),"content-type"in this.headers||(this.headers["content-type"]="application/json")),n&&!s&&!Object.prototype.hasOwnProperty.call(this.headers,"content-length")&&(this.headers["content-length"]=(Buffer.isBuffer(n)?n.length:Buffer.byteLength(n)).toString());for(let o of Object.keys(this.headers))this.rawHeaders.push(o,this.headers[o]);this._lightMyRequest={payload:n,isDone:!1,simulate:e.simulate||{}};let i=e.signal;return i&&jG(i,this),this}sy.inherits(jr,ZO);sy.inherits(t1,jr);jr.prototype.prepare=function(e){let t=this._lightMyRequest.payload;if(!t||typeof t.resume!="function")return e();let r=[];t.on("data",n=>r.push(Buffer.from(n))),t.on("end",()=>{let n=Buffer.concat(r);return this.headers["content-length"]=this.headers["content-length"]||""+n.length,this._lightMyRequest.payload=n,e()}),t.resume()};jr.prototype._read=function(e){setImmediate(()=>{if(this._lightMyRequest.isDone){this._lightMyRequest.simulate.end!==!1&&this.push(null);return}this._lightMyRequest.isDone=!0,this._lightMyRequest.payload&&(this._lightMyRequest.simulate.split?(this.push(this._lightMyRequest.payload.slice(0,1)),this.push(this._lightMyRequest.payload.slice(1))):this.push(this._lightMyRequest.payload)),this._lightMyRequest.simulate.error&&this.emit("error",new Error("Simulated")),this._lightMyRequest.simulate.close&&this.emit("close"),this._lightMyRequest.simulate.end!==!1&&this.push(null)})};jr.prototype.destroy=function(e){this.destroyed||this._lightMyRequest.isDone||(this.destroyed=!0,e&&(this._error=!0,process.nextTick(()=>this.emit("error",e))),process.nextTick(()=>this.emit("close")))};Vl.exports=jr;Vl.exports.Request=jr;Vl.exports.CustomRequest=t1});var s1=E((mX,na)=>{"use strict";var bi={decodeValues:!0,map:!1,silent:!1};function iy(e){return typeof e=="string"&&!!e.trim()}function oy(e,t){var r=e.split(";").filter(iy),n=r.shift(),s=HG(n),i=s.name,o=s.value;t=t?Object.assign({},bi,t):bi;try{o=t.decodeValues?decodeURIComponent(o):o}catch(u){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+o+"'. Set options.decodeValues to false to disable this feature.",u)}var a={name:i,value:o};return r.forEach(function(u){var c=u.split("="),l=c.shift().trimLeft().toLowerCase(),f=c.join("=");l==="expires"?a.expires=new Date(f):l==="max-age"?a.maxAge=parseInt(f,10):l==="secure"?a.secure=!0:l==="httponly"?a.httpOnly=!0:l==="samesite"?a.sameSite=f:a[l]=f}),a}function HG(e){var t="",r="",n=e.split("=");return n.length>1?(t=n.shift(),r=n.join("=")):r=e,{name:t,value:r}}function n1(e,t){if(t=t?Object.assign({},bi,t):bi,!e)return t.map?{}:[];if(e.headers)if(typeof e.headers.getSetCookie=="function")e=e.headers.getSetCookie();else if(e.headers["set-cookie"])e=e.headers["set-cookie"];else{var r=e.headers[Object.keys(e.headers).find(function(s){return s.toLowerCase()==="set-cookie"})];!r&&e.headers.cookie&&!t.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),e=r}if(Array.isArray(e)||(e=[e]),t=t?Object.assign({},bi,t):bi,t.map){var n={};return e.filter(iy).reduce(function(s,i){var o=oy(i,t);return s[o.name]=o,s},n)}else return e.filter(iy).map(function(s){return oy(s,t)})}function zG(e){if(Array.isArray(e))return e;if(typeof e!="string")return[];var t=[],r=0,n,s,i,o,a;function u(){for(;r<e.length&&/\s/.test(e.charAt(r));)r+=1;return r<e.length}function c(){return s=e.charAt(r),s!=="="&&s!==";"&&s!==","}for(;r<e.length;){for(n=r,a=!1;u();)if(s=e.charAt(r),s===","){for(i=r,r+=1,u(),o=r;r<e.length&&c();)r+=1;r<e.length&&e.charAt(r)==="="?(a=!0,r=o,t.push(e.substring(n,i)),n=r):r=i+1}else r+=1;(!a||r>=e.length)&&t.push(e.substring(n,e.length))}return t}na.exports=n1;na.exports.parse=n1;na.exports.parseString=oy;na.exports.splitCookiesString=zG});var a1=E((yX,o1)=>{"use strict";var sa=require("node:http"),{Writable:UG}=require("node:stream"),BG=require("node:util"),GG=s1();function qn(e,t,r){sa.ServerResponse.call(this,e),this._lightMyRequest={headers:null,trailers:{},payloadChunks:[]},this.setHeader("foo","bar"),this.removeHeader("foo"),this.assignSocket(YG()),this._promiseCallback=typeof r=="function";let n=!1,s=o=>{if(n=!0,this._promiseCallback)return process.nextTick(()=>t(o));process.nextTick(()=>t(null,o))},i=o=>{if(!n){if(n=!0,this._promiseCallback)return process.nextTick(()=>r(o));process.nextTick(()=>t(o,null))}};this.once("finish",()=>{let o=KG(this);o.raw.req=e,s(o)}),this.connection.once("error",i),this.once("error",i),this.once("close",i)}BG.inherits(qn,sa.ServerResponse);qn.prototype.setTimeout=function(e,t){return this.timeoutHandle=setTimeout(()=>{this.emit("timeout")},e),this.on("timeout",t),this};qn.prototype.writeHead=function(){let e=sa.ServerResponse.prototype.writeHead.apply(this,arguments);return i1(this),e};qn.prototype.write=function(e,t,r){return this.timeoutHandle&&clearTimeout(this.timeoutHandle),sa.ServerResponse.prototype.write.call(this,e,t,r),this._lightMyRequest.payloadChunks.push(Buffer.from(e,t)),!0};qn.prototype.end=function(e,t,r){e&&this.write(e,t),sa.ServerResponse.prototype.end.call(this,r),this.emit("finish"),this.destroy()};qn.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,e&&process.nextTick(()=>this.emit("error",e)),process.nextTick(()=>this.emit("close")))};qn.prototype.addTrailers=function(e){for(let t in e)this._lightMyRequest.trailers[t.toLowerCase().trim()]=e[t].toString().trim()};function KG(e){e._lightMyRequest.headers===null&&i1(e),WG(e);let t={raw:{res:e},headers:e._lightMyRequest.headers,statusCode:e.statusCode,statusMessage:e.statusMessage,trailers:{},get cookies(){return GG.parse(this)}},r=Buffer.concat(e._lightMyRequest.payloadChunks);return t.rawPayload=r,t.payload=r.toString(),t.body=t.payload,t.trailers=e._lightMyRequest.trailers,t.json=function(){return JSON.parse(t.payload)},t}function YG(){return new UG({write(e,t,r){setImmediate(r)}})}function WG(e){let t=e._lightMyRequest.headers;for(let r of Object.keys(t)){let n=t[r];Array.isArray(n)?t[r]=n.map(s=>""+s):t[r]=""+n}}function i1(e){e._lightMyRequest.headers=Object.assign({},e.getHeaders()),["Date","Connection","Transfer-Encoding"].forEach(t=>{let r=new RegExp("\\r\\n"+t+": ([^\\r]*)\\r\\n"),n=e._header.match(r);n&&(e._lightMyRequest.headers[t.toLowerCase()]=n[1])})}o1.exports=qn});var u1=E((gX,ay)=>{"use strict";ay.exports=st;ay.exports.default=st;var JG={type:"object",properties:{url:{oneOf:[{type:"string"},{type:"object",properties:{protocol:{type:"string"},hostname:{type:"string"},pathname:{type:"string"}},additionalProperties:!0,required:["pathname"]}]},path:{oneOf:[{type:"string"},{type:"object",properties:{protocol:{type:"string"},hostname:{type:"string"},pathname:{type:"string"}},additionalProperties:!0,required:["pathname"]}]},cookies:{type:"object",additionalProperties:!0},headers:{type:"object",additionalProperties:!0},query:{anyOf:[{type:"object",additionalProperties:!0},{type:"string"}]},simulate:{type:"object",properties:{end:{type:"boolean"},split:{type:"boolean"},error:{type:"boolean"},close:{type:"boolean"}}},authority:{type:"string"},remoteAddress:{type:"string"},method:{type:"string",enum:["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE","acl","bind","checkout","connect","copy","delete","get","head","link","lock","m-search","merge","mkactivity","mkcalendar","mkcol","move","notify","options","patch","post","propfind","proppatch","purge","put","rebind","report","search","source","subscribe","trace","unbind","unlink","unlock","unsubscribe"]},validate:{type:"boolean"}},additionalProperties:!0,oneOf:[{required:["url"]},{required:["path"]}]};function st(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0,a=o,u=!1,c=null,l=o;if(e&&typeof e=="object"&&!Array.isArray(e)){let m;if(e.url===void 0&&(m="url")){let T={instancePath:t,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:m},message:"must have required property '"+m+"'"};i===null?i=[T]:i.push(T),o++}}var d=l===o;d&&(u=!0,c=0);let f=o;if(e&&typeof e=="object"&&!Array.isArray(e)){let m;if(e.path===void 0&&(m="path")){let T={instancePath:t,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:m},message:"must have required property '"+m+"'"};i===null?i=[T]:i.push(T),o++}}var d=f===o;if(d&&u?(u=!1,c=[c,1]):d&&(u=!0,c=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{let m={instancePath:t,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:c},message:"must match exactly one schema in oneOf"};return i===null?i=[m]:i.push(m),o++,st.errors=i,!1}if(o===0)if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.url!==void 0){let m=e.url,T=o,A=o,b=!1,$=null,k=o;if(typeof m!="string"){let x=typeof m,j;if(j===void 0)if(x=="number"||x=="boolean")j=""+m;else if(m===null)j="";else{let L={instancePath:t+"/url",schemaPath:"#/properties/url/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[L]:i.push(L),o++}j!==void 0&&(m=j,e!==void 0&&(e.url=j))}var p=k===o;p&&(b=!0,$=0);let R=o;if(o===R)if(m&&typeof m=="object"&&!Array.isArray(m)){let x;if(m.pathname===void 0&&(x="pathname")){let j={instancePath:t+"/url",schemaPath:"#/properties/url/oneOf/1/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"};i===null?i=[j]:i.push(j),o++}else{if(m.protocol!==void 0){let j=m.protocol,L=o;if(typeof j!="string"){let Q=typeof j,oe;if(oe===void 0)if(Q=="number"||Q=="boolean")oe=""+j;else if(j===null)oe="";else{let H={instancePath:t+"/url/protocol",schemaPath:"#/properties/url/oneOf/1/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[H]:i.push(H),o++}oe!==void 0&&(j=oe,m!==void 0&&(m.protocol=oe))}var h=L===o}else var h=!0;if(h){if(m.hostname!==void 0){let j=m.hostname,L=o;if(typeof j!="string"){let oe=typeof j,H;if(H===void 0)if(oe=="number"||oe=="boolean")H=""+j;else if(j===null)H="";else{let W={instancePath:t+"/url/hostname",schemaPath:"#/properties/url/oneOf/1/properties/hostname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[W]:i.push(W),o++}H!==void 0&&(j=H,m!==void 0&&(m.hostname=H))}var h=L===o}else var h=!0;if(h)if(m.pathname!==void 0){let j=m.pathname,L=o;if(typeof j!="string"){let oe=typeof j,H;if(H===void 0)if(oe=="number"||oe=="boolean")H=""+j;else if(j===null)H="";else{let W={instancePath:t+"/url/pathname",schemaPath:"#/properties/url/oneOf/1/properties/pathname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[W]:i.push(W),o++}H!==void 0&&(j=H,m!==void 0&&(m.pathname=H))}var h=L===o}else var h=!0}}}else{let x={instancePath:t+"/url",schemaPath:"#/properties/url/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[x]:i.push(x),o++}var p=R===o;if(p&&b?(b=!1,$=[$,1]):p&&(b=!0,$=1),b)o=A,i!==null&&(A?i.length=A:i=null);else{let x={instancePath:t+"/url",schemaPath:"#/properties/url/oneOf",keyword:"oneOf",params:{passingSchemas:$},message:"must match exactly one schema in oneOf"};return i===null?i=[x]:i.push(x),o++,st.errors=i,!1}var y=T===o}else var y=!0;if(y){if(e.path!==void 0){let m=e.path,T=o,A=o,b=!1,$=null,k=o;if(typeof m!="string"){let j=typeof m,L;if(L===void 0)if(j=="number"||j=="boolean")L=""+m;else if(m===null)L="";else{let Q={instancePath:t+"/path",schemaPath:"#/properties/path/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Q]:i.push(Q),o++}L!==void 0&&(m=L,e!==void 0&&(e.path=L))}var _=k===o;_&&(b=!0,$=0);let R=o;if(o===R)if(m&&typeof m=="object"&&!Array.isArray(m)){let j;if(m.pathname===void 0&&(j="pathname")){let L={instancePath:t+"/path",schemaPath:"#/properties/path/oneOf/1/required",keyword:"required",params:{missingProperty:j},message:"must have required property '"+j+"'"};i===null?i=[L]:i.push(L),o++}else{if(m.protocol!==void 0){let L=m.protocol,Q=o;if(typeof L!="string"){let oe=typeof L,H;if(H===void 0)if(oe=="number"||oe=="boolean")H=""+L;else if(L===null)H="";else{let W={instancePath:t+"/path/protocol",schemaPath:"#/properties/path/oneOf/1/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[W]:i.push(W),o++}H!==void 0&&(L=H,m!==void 0&&(m.protocol=H))}var v=Q===o}else var v=!0;if(v){if(m.hostname!==void 0){let L=m.hostname,Q=o;if(typeof L!="string"){let H=typeof L,W;if(W===void 0)if(H=="number"||H=="boolean")W=""+L;else if(L===null)W="";else{let Oe={instancePath:t+"/path/hostname",schemaPath:"#/properties/path/oneOf/1/properties/hostname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Oe]:i.push(Oe),o++}W!==void 0&&(L=W,m!==void 0&&(m.hostname=W))}var v=Q===o}else var v=!0;if(v)if(m.pathname!==void 0){let L=m.pathname,Q=o;if(typeof L!="string"){let H=typeof L,W;if(W===void 0)if(H=="number"||H=="boolean")W=""+L;else if(L===null)W="";else{let Oe={instancePath:t+"/path/pathname",schemaPath:"#/properties/path/oneOf/1/properties/pathname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Oe]:i.push(Oe),o++}W!==void 0&&(L=W,m!==void 0&&(m.pathname=W))}var v=Q===o}else var v=!0}}}else{let j={instancePath:t+"/path",schemaPath:"#/properties/path/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[j]:i.push(j),o++}var _=R===o;if(_&&b?(b=!1,$=[$,1]):_&&(b=!0,$=1),b)o=A,i!==null&&(A?i.length=A:i=null);else{let j={instancePath:t+"/path",schemaPath:"#/properties/path/oneOf",keyword:"oneOf",params:{passingSchemas:$},message:"must match exactly one schema in oneOf"};return i===null?i=[j]:i.push(j),o++,st.errors=i,!1}var y=T===o}else var y=!0;if(y){if(e.cookies!==void 0){let m=e.cookies,T=o;if(o===T&&!(m&&typeof m=="object"&&!Array.isArray(m)))return st.errors=[{instancePath:t+"/cookies",schemaPath:"#/properties/cookies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var y=T===o}else var y=!0;if(y){if(e.headers!==void 0){let m=e.headers,T=o;if(o===T&&!(m&&typeof m=="object"&&!Array.isArray(m)))return st.errors=[{instancePath:t+"/headers",schemaPath:"#/properties/headers/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var y=T===o}else var y=!0;if(y){if(e.query!==void 0){let m=e.query,T=o,A=o,b=!1,$=o;if(o===$&&!(m&&typeof m=="object"&&!Array.isArray(m))){let R={instancePath:t+"/query",schemaPath:"#/properties/query/anyOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[R]:i.push(R),o++}var w=$===o;if(b=b||w,!b){let R=o;if(typeof m!="string"){let j=typeof m,L;if(L===void 0)if(j=="number"||j=="boolean")L=""+m;else if(m===null)L="";else{let Q={instancePath:t+"/query",schemaPath:"#/properties/query/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Q]:i.push(Q),o++}L!==void 0&&(m=L,e!==void 0&&(e.query=L))}var w=R===o;b=b||w}if(b)o=A,i!==null&&(A?i.length=A:i=null);else{let R={instancePath:t+"/query",schemaPath:"#/properties/query/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[R]:i.push(R),o++,st.errors=i,!1}var y=T===o}else var y=!0;if(y){if(e.simulate!==void 0){let m=e.simulate,T=o;if(o===T)if(m&&typeof m=="object"&&!Array.isArray(m)){if(m.end!==void 0){let b=m.end,$=o;if(typeof b!="boolean"){let k;if(k===void 0)if(b==="false"||b===0||b===null)k=!1;else if(b==="true"||b===1)k=!0;else return st.errors=[{instancePath:t+"/simulate/end",schemaPath:"#/properties/simulate/properties/end/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;k!==void 0&&(b=k,m!==void 0&&(m.end=k))}var g=$===o}else var g=!0;if(g){if(m.split!==void 0){let b=m.split,$=o;if(typeof b!="boolean"){let R;if(R===void 0)if(b==="false"||b===0||b===null)R=!1;else if(b==="true"||b===1)R=!0;else return st.errors=[{instancePath:t+"/simulate/split",schemaPath:"#/properties/simulate/properties/split/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;R!==void 0&&(b=R,m!==void 0&&(m.split=R))}var g=$===o}else var g=!0;if(g){if(m.error!==void 0){let b=m.error,$=o;if(typeof b!="boolean"){let R;if(R===void 0)if(b==="false"||b===0||b===null)R=!1;else if(b==="true"||b===1)R=!0;else return st.errors=[{instancePath:t+"/simulate/error",schemaPath:"#/properties/simulate/properties/error/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;R!==void 0&&(b=R,m!==void 0&&(m.error=R))}var g=$===o}else var g=!0;if(g)if(m.close!==void 0){let b=m.close,$=o;if(typeof b!="boolean"){let R;if(R===void 0)if(b==="false"||b===0||b===null)R=!1;else if(b==="true"||b===1)R=!0;else return st.errors=[{instancePath:t+"/simulate/close",schemaPath:"#/properties/simulate/properties/close/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;R!==void 0&&(b=R,m!==void 0&&(m.close=R))}var g=$===o}else var g=!0}}}else return st.errors=[{instancePath:t+"/simulate",schemaPath:"#/properties/simulate/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var y=T===o}else var y=!0;if(y){if(e.authority!==void 0){let m=e.authority,T=o;if(typeof m!="string"){let b=typeof m,$;if($===void 0)if(b=="number"||b=="boolean")$=""+m;else if(m===null)$="";else return st.errors=[{instancePath:t+"/authority",schemaPath:"#/properties/authority/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;$!==void 0&&(m=$,e!==void 0&&(e.authority=$))}var y=T===o}else var y=!0;if(y){if(e.remoteAddress!==void 0){let m=e.remoteAddress,T=o;if(typeof m!="string"){let b=typeof m,$;if($===void 0)if(b=="number"||b=="boolean")$=""+m;else if(m===null)$="";else return st.errors=[{instancePath:t+"/remoteAddress",schemaPath:"#/properties/remoteAddress/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;$!==void 0&&(m=$,e!==void 0&&(e.remoteAddress=$))}var y=T===o}else var y=!0;if(y){if(e.method!==void 0){let m=e.method,T=o;if(typeof m!="string"){let b=typeof m,$;if($===void 0)if(b=="number"||b=="boolean")$=""+m;else if(m===null)$="";else return st.errors=[{instancePath:t+"/method",schemaPath:"#/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;$!==void 0&&(m=$,e!==void 0&&(e.method=$))}if(!(m==="ACL"||m==="BIND"||m==="CHECKOUT"||m==="CONNECT"||m==="COPY"||m==="DELETE"||m==="GET"||m==="HEAD"||m==="LINK"||m==="LOCK"||m==="M-SEARCH"||m==="MERGE"||m==="MKACTIVITY"||m==="MKCALENDAR"||m==="MKCOL"||m==="MOVE"||m==="NOTIFY"||m==="OPTIONS"||m==="PATCH"||m==="POST"||m==="PROPFIND"||m==="PROPPATCH"||m==="PURGE"||m==="PUT"||m==="REBIND"||m==="REPORT"||m==="SEARCH"||m==="SOURCE"||m==="SUBSCRIBE"||m==="TRACE"||m==="UNBIND"||m==="UNLINK"||m==="UNLOCK"||m==="UNSUBSCRIBE"||m==="acl"||m==="bind"||m==="checkout"||m==="connect"||m==="copy"||m==="delete"||m==="get"||m==="head"||m==="link"||m==="lock"||m==="m-search"||m==="merge"||m==="mkactivity"||m==="mkcalendar"||m==="mkcol"||m==="move"||m==="notify"||m==="options"||m==="patch"||m==="post"||m==="propfind"||m==="proppatch"||m==="purge"||m==="put"||m==="rebind"||m==="report"||m==="search"||m==="source"||m==="subscribe"||m==="trace"||m==="unbind"||m==="unlink"||m==="unlock"||m==="unsubscribe"))return st.errors=[{instancePath:t+"/method",schemaPath:"#/properties/method/enum",keyword:"enum",params:{allowedValues:JG.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var y=T===o}else var y=!0;if(y)if(e.validate!==void 0){let m=e.validate,T=o;if(typeof m!="boolean"){let b;if(b===void 0)if(m==="false"||m===0||m===null)b=!1;else if(m==="true"||m===1)b=!0;else return st.errors=[{instancePath:t+"/validate",schemaPath:"#/properties/validate/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;b!==void 0&&(m=b,e!==void 0&&(e.validate=b))}var y=T===o}else var y=!0}}}}}}}}}else return st.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return st.errors=i,o===0}});var f1=E((_X,oa)=>{"use strict";var XG=require("node:assert"),uy=r1(),Hl=a1(),Ul="The dispatch function has already been invoked",l1=u1();function ly(e,t,r){return typeof r>"u"?new ia(e,t):zl(e,t,r)}function c1(e,t,r,n){return r.once("error",function(s){this.destroyed&&n.destroy(s)}),r.once("close",function(){this.destroyed&&!this._error&&n.destroy()}),r.prepare(()=>e.call(t,r,n))}function zl(e,t,r){if(t=typeof t=="string"?{url:t}:t,t.validate!==!1&&(XG(typeof e=="function","dispatchFunc should be a function"),!l1(t)))throw new Error(l1.errors.map(o=>o.message));let n=t.server||{},s=t.Request?uy.CustomRequest:uy;if(e.request&&e.request.app===e&&(Object.setPrototypeOf(Object.getPrototypeOf(e.request),s.prototype),Object.setPrototypeOf(Object.getPrototypeOf(e.response),Hl.prototype)),typeof r=="function"){let i=new s(t),o=new Hl(i,r);return c1(e,n,i,o)}else return new Promise((i,o)=>{let a=new s(t),u=new Hl(a,i,o);c1(e,n,a,u)})}function ia(e,t){typeof t=="string"?this.option={url:t}:this.option=Object.assign({},t),this.dispatch=e,this._hasInvoked=!1,this._promise=null,this.option.autoStart!==!1&&process.nextTick(()=>{this._hasInvoked||this.end()})}var QG=["delete","get","head","options","patch","post","put","trace"];QG.forEach(e=>{ia.prototype[e]=function(t){if(this._hasInvoked===!0||this._promise)throw new Error(Ul);return this.option.url=t,this.option.method=e.toUpperCase(),this}});var ZG=["body","cookies","headers","payload","query"];ZG.forEach(e=>{ia.prototype[e]=function(t){if(this._hasInvoked===!0||this._promise)throw new Error(Ul);return this.option[e]=t,this}});ia.prototype.end=function(e){if(this._hasInvoked===!0||this._promise)throw new Error(Ul);if(this._hasInvoked=!0,typeof e=="function")zl(this.dispatch,this.option,e);else return this._promise=zl(this.dispatch,this.option),this._promise};Object.getOwnPropertyNames(Promise.prototype).forEach(e=>{e!=="constructor"&&(ia.prototype[e]=function(...t){if(!this._promise){if(this._hasInvoked===!0)throw new Error(Ul);this._hasInvoked=!0,this._promise=zl(this.dispatch,this.option)}return this._promise[e](...t)})});function e8(e){return e instanceof uy||e instanceof Hl||e&&e.constructor&&e.constructor.name==="_CustomLMRRequest"}oa.exports=ly;oa.exports.default=ly;oa.exports.inject=ly;oa.exports.isInjection=e8});var T1=E((vX,Yl)=>{"use strict";var t8="4.25.2",r8=Tg(),cy=require("node:http"),aa,{kAvvioBoot:ua,kChildren:fy,kServerBindings:d1,kBodyLimit:n8,kRoutePrefix:h1,kLogLevel:s8,kLogSerializers:i8,kHooks:dy,kSchemaController:Dn,kRequestAcceptVersion:o8,kReplySerializerDefault:p1,kContentTypeParser:a8,kReply:u8,kRequest:l8,kFourOhFour:c8,kState:Qe,kOptions:m1,kPluginNameChain:la,kSchemaErrorFormatter:hy,kErrorHandler:Bl,kKeepAliveConnections:py,kChildLoggerFactory:my}=ct(),{createServer:f8,compileValidateHTTPVersion:d8}=Jg(),ca=Hu(),Gl=sl(),h8=il(),{supportedMethods:p8}=gp(),wi=bp(),ps=Np(),y1=Rm(),{Hooks:m8,hookRunnerApplication:g1,supportedHooks:yy}=dn(),{createLogger:y8,createChildLogger:_1,defaultChildLoggerFactory:g8}=Vi(),v1=Cm(),{reqIdGenFactory:_8}=s$(),{buildRouting:v8,validateBodyLimitOption:E8}=$O(),S8=kO(),R1=jO(),b8=BO(),{FSTDEP009:w8}=zr(),R8=KO(),{appendStackTrace:T8,AVVIO_ERRORS_MAP:E1,...ms}=St(),{defaultInitOptions:Gt}=R1,{FST_ERR_ASYNC_CONSTRAINT:P8,FST_ERR_BAD_URL:$8,FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE:O8,FST_ERR_OPTIONS_NOT_OBJ:A8,FST_ERR_QSP_NOT_FN:C8,FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN:I8,FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ:N8,FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR:k8,FST_ERR_VERSION_CONSTRAINT_NOT_STR:q8,FST_ERR_INSTANCE_ALREADY_LISTENING:D8,FST_ERR_REOPENED_CLOSE_SERVER:j8,FST_ERR_ROUTE_REWRITE_NOT_STR:x8,FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN:S1}=ms,{buildErrorHandler:b1}=So();function L8(e){let t={};return["errorHandler","logLevel","logSerializers"].concat(yy).forEach(n=>{t[n]=e.store[n]}),Object.assign({},t)}function Kl(e){if(e=e||{},typeof e!="object")throw new A8;if(e.querystringParser&&typeof e.querystringParser!="function")throw new C8(typeof e.querystringParser);if(e.schemaController&&e.schemaController.bucket&&typeof e.schemaController.bucket!="function")throw new I8(typeof e.schemaController.bucket);E8(e.bodyLimit);let t=e.requestIdHeader===!1?!1:(e.requestIdHeader||Gt.requestIdHeader).toLowerCase(),r=_8(t,e.genReqId),n=e.requestIdLogLabel||"reqId",s=e.bodyLimit||Gt.bodyLimit,i=e.disableRequestLogging||!1,o=Object.assign({customOptions:{},plugins:[]},e.ajv),a=e.frameworkErrors;if(!o.customOptions||Object.prototype.toString.call(o.customOptions)!=="[object Object]")throw new N8(typeof o.customOptions);if(!o.plugins||!Array.isArray(o.plugins))throw new k8(typeof o.plugins);let{logger:u,hasLogger:c}=y8(e);e.connectionTimeout=e.connectionTimeout||Gt.connectionTimeout,e.keepAliveTimeout=e.keepAliveTimeout||Gt.keepAliveTimeout,e.maxRequestsPerSocket=e.maxRequestsPerSocket||Gt.maxRequestsPerSocket,e.requestTimeout=e.requestTimeout||Gt.requestTimeout,e.logger=u,e.genReqId=r,e.requestIdHeader=t,e.requestIdLogLabel=n,e.disableRequestLogging=i,e.ajv=o,e.clientErrorHandler=e.clientErrorHandler||W;let l=R1(e);e.exposeHeadRoutes=l.exposeHeadRoutes;let f=e.constraints;e.versioning&&(w8(),f={...f,version:{name:"version",mustMatchWhenDerived:!0,storage:e.versioning.storage,deriveConstraint:e.versioning.deriveVersion,validate(I){if(typeof I!="string")throw new q8}}});let d=v8({config:{defaultRoute:Oe,onBadUrl:z,constraints:f,ignoreTrailingSlash:e.ignoreTrailingSlash||Gt.ignoreTrailingSlash,ignoreDuplicateSlashes:e.ignoreDuplicateSlashes||Gt.ignoreDuplicateSlashes,maxParamLength:e.maxParamLength||Gt.maxParamLength,caseSensitive:e.caseSensitive,allowUnsafeRegex:e.allowUnsafeRegex||Gt.allowUnsafeRegex,buildPrettyMeta:L8,querystringParser:e.querystringParser}}),h=S8(e),p=Te(d,e);e.http2SessionTimeout=l.http2SessionTimeout;let{server:y,listen:v}=f8(e,p),_=typeof y.closeAllConnections=="function",w=typeof y.closeIdleConnections=="function",g=e.forceCloseConnections;if(g==="idle"&&!w)throw new O8;typeof g!="boolean"&&(g=w?"idle":!1);let m=!_&&g===!0?new Set:R8(),T=ca.setupResponseListeners,A=y1.buildSchemaController(null,e.schemaController),b={[Qe]:{listening:!1,closing:!1,started:!1,ready:!1,booting:!1,readyPromise:null},[py]:m,[m1]:e,[fy]:[],[d1]:[],[n8]:s,[h1]:"",[s8]:"",[i8]:null,[dy]:new m8,[Dn]:A,[hy]:null,[Bl]:b1(),[my]:g8,[p1]:null,[a8]:new ps(s,e.onProtoPoisoning||Gt.onProtoPoisoning,e.onConstructorPoisoning||Gt.onConstructorPoisoning),[u8]:ca.buildReply(ca),[l8]:Gl.buildRequest(Gl,e.trustProxy),[c8]:h,[v1.kRegisteredPlugins]:[],[la]:["fastify"],[ua]:null,routing:p,getDefaultRoute:d.getDefaultRoute.bind(d),setDefaultRoute:d.setDefaultRoute.bind(d),delete:function(q,V,B){return d.prepareRoute.call(this,{method:"DELETE",url:q,options:V,handler:B})},get:function(q,V,B){return d.prepareRoute.call(this,{method:"GET",url:q,options:V,handler:B})},head:function(q,V,B){return d.prepareRoute.call(this,{method:"HEAD",url:q,options:V,handler:B})},patch:function(q,V,B){return d.prepareRoute.call(this,{method:"PATCH",url:q,options:V,handler:B})},post:function(q,V,B){return d.prepareRoute.call(this,{method:"POST",url:q,options:V,handler:B})},put:function(q,V,B){return d.prepareRoute.call(this,{method:"PUT",url:q,options:V,handler:B})},options:function(q,V,B){return d.prepareRoute.call(this,{method:"OPTIONS",url:q,options:V,handler:B})},all:function(q,V,B){return d.prepareRoute.call(this,{method:p8,url:q,options:V,handler:B})},route:function(q){return d.route.call(this,{options:q})},hasRoute:function(q){return d.hasRoute.call(this,{options:q})},log:u,withTypeProvider:Q,addHook:oe,addSchema:H,getSchema:A.getSchema.bind(A),getSchemas:A.getSchemas.bind(A),setValidatorCompiler:Re,setSerializerCompiler:ot,setSchemaController:de,setReplySerializer:Ze,setSchemaErrorFormatter:xr,addContentTypeParser:ps.helpers.addContentTypeParser,hasContentTypeParser:ps.helpers.hasContentTypeParser,getDefaultJsonParser:ps.defaultParsers.getDefaultJsonParser,defaultTextParser:ps.defaultParsers.defaultTextParser,removeContentTypeParser:ps.helpers.removeContentTypeParser,removeAllContentTypeParsers:ps.helpers.removeAllContentTypeParsers,register:null,after:null,ready:null,onClose:null,close:null,printPlugins:null,hasPlugin:function(I){return this[v1.kRegisteredPlugins].includes(I)||this[la].includes(I)},listen:v,server:y,addresses:function(){let I=this[d1].map(q=>q.address());return I.push(this.server.address()),I.filter(q=>q)},decorate:wi.add,hasDecorator:wi.exist,decorateReply:wi.decorateReply,decorateRequest:wi.decorateRequest,hasRequestDecorator:wi.existRequest,hasReplyDecorator:wi.existReply,inject:j,printRoutes:Lt,setNotFoundHandler:Kt,setErrorHandler:te,setChildLoggerFactory:we,initialConfig:l,addConstraintStrategy:d.addConstraintStrategy.bind(d),hasConstraintStrategy:d.hasConstraintStrategy.bind(d)};Object.defineProperties(b,{listeningOrigin:{get(){let I=this.addresses().slice(-1).pop();if(typeof I=="string")return I;let q=I.family==="IPv6"?`[${I.address}]`:I.address;return`${this[m1].https?"https":"http"}://${q}:${I.port}`}},pluginName:{configurable:!0,get(){return this[la].length>1?this[la].join(" -> "):this[la][0]}},prefix:{configurable:!0,get(){return this[h1]}},validatorCompiler:{configurable:!0,get(){return this[Dn].getValidatorCompiler()}},serializerCompiler:{configurable:!0,get(){return this[Dn].getSerializerCompiler()}},childLoggerFactory:{configurable:!0,get(){return this[my]}},version:{configurable:!0,get(){return t8}},errorHandler:{configurable:!0,get(){return this[Bl].func}}}),e.schemaErrorFormatter&&(w1(e.schemaErrorFormatter),b[hy]=e.schemaErrorFormatter.bind(b));let $=Number(e.pluginTimeout),k=r8(b,{autostart:!1,timeout:isNaN($)===!1?$:Gt.pluginTimeout,expose:{use:"register"}});k.override=b8,k.on("start",()=>b[Qe].started=!0),b[ua]=b.ready,b.ready=L,b.printPlugins=k.prettyPrint.bind(k),k.once("preReady",()=>{b.onClose((I,q)=>{b[Qe].closing=!0,d.closeRoutes(),g1("preClose",b[ua],b,function(){if(b[Qe].listening){if(g==="idle")I.server.closeIdleConnections();else if(_&&g)I.server.closeAllConnections();else if(g===!0)for(let V of b[py])V.destroy(),b[py].delete(V)}!e.serverFactory||b[Qe].listening?I.server.close(function(V){V&&V.code!=="ERR_SERVER_NOT_RUNNING"?q(null):q()}):process.nextTick(q,null)})})});let R=new h8({server:b,config:{}});b.setNotFoundHandler(),h.arrange404(b),d.setup(e,{avvio:k,fourOhFour:h,logger:u,hasLogger:c,setupResponseListeners:T,throwIfAlreadyStarted:x,validateHTTPVersion:d8(e),keepAliveConnections:m}),y.on("clientError",e.clientErrorHandler.bind(b));try{let q=require("node:diagnostics_channel").channel("fastify.initialization");q.hasSubscribers&&q.publish({fastify:b})}catch{}return"asyncDispose"in Symbol&&(b[Symbol.asyncDispose]=function(){return b.close()}),b;function x(I){if(b[Qe].started)throw new D8(I)}function j(I,q){if(aa===void 0&&(aa=f1()),b[Qe].started){if(b[Qe].closing){let V=new j8;if(q){q(V);return}else return Promise.reject(V)}return aa(p,I,q)}if(q)this.ready(V=>{V?q(V,null):aa(p,I,q)});else return aa((V,B)=>{this.ready(function(ae){if(ae){B.emit("error",ae);return}p(V,B)})},I)}function L(I){if(this[Qe].readyPromise!==null){if(I!=null){this[Qe].readyPromise.then(()=>I(null,b),I);return}return this[Qe].readyPromise}let q,V;if(process.nextTick(B),this[Qe].readyPromise=new Promise(function(Z,ve){q=Z,V=ve}),I)this[Qe].readyPromise.then(()=>I(null,b),I);else return this[Qe].readyPromise;function B(){b[ua]((Z,ve)=>{Z||b[Qe].started||b[Qe].ready||b[Qe].booting?ae(Z):(b[Qe].booting=!0,g1("onReady",b[ua],b,ae)),ve()})}function ae(Z){if(Z=Z!=null&&E1[Z.code]!=null?T8(Z,new E1[Z.code](Z.message)):Z,Z)return V(Z);q(b),b[Qe].booting=!1,b[Qe].ready=!0,b[Qe].promise=null}}function Q(){return this}function oe(I,q){if(x('Cannot call "addHook"!'),q==null)throw new ms.FST_ERR_HOOK_INVALID_HANDLER(I,q);if(I==="onSend"||I==="preSerialization"||I==="onError"||I==="preParsing"){if(q.constructor.name==="AsyncFunction"&&q.length===4)throw new ms.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(I==="onReady"||I==="onListen"){if(q.constructor.name==="AsyncFunction"&&q.length!==0)throw new ms.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(I==="onRequestAbort"){if(q.constructor.name==="AsyncFunction"&&q.length!==1)throw new ms.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(q.constructor.name==="AsyncFunction"&&q.length===3)throw new ms.FST_ERR_HOOK_INVALID_ASYNC_HANDLER;return I==="onClose"?this.onClose(q):I==="onReady"||I==="onListen"||I==="onRoute"?this[dy].add(I,q):this.after((B,ae)=>{V.call(this,I,q),ae(B)}),this;function V(B,ae){this[dy].add(B,ae),this[fy].forEach(Z=>V.call(Z,B,ae))}}function H(I){return x('Cannot call "addSchema"!'),this[Dn].add(I),this[fy].forEach(q=>q.addSchema(I)),this}function W(I,q){if(I.code==="ECONNRESET"||q.destroyed)return;let V,B,ae,Z;I.code==="ERR_HTTP_REQUEST_TIMEOUT"?(B="408",ae=cy.STATUS_CODES[B],V=`{"error":"${ae}","message":"Client Timeout","statusCode":408}`,Z="timeout"):I.code==="HPE_HEADER_OVERFLOW"?(B="431",ae=cy.STATUS_CODES[B],V=`{"error":"${ae}","message":"Exceeded maximum allowed HTTP header size","statusCode":431}`,Z="header_overflow"):(B="400",ae=cy.STATUS_CODES[B],V=`{"error":"${ae}","message":"Client Error","statusCode":400}`,Z="error"),this.log.trace({err:I},`client ${Z}`),q.writable&&q.write(`HTTP/1.1 ${B} ${ae}\r
Content-Length: ${V.length}\r
Content-Type: application/json\r
\r
${V}`),q.destroy(I)}function Oe(I,q){I.headers["accept-version"]!==void 0&&(I.headers[o8]=I.headers["accept-version"],I.headers["accept-version"]=void 0),h.router.lookup(I,q)}function z(I,q,V){if(a){let ae=r(q),Z=_1(R,u,q,ae),ve=new Gl(ae,null,q,null,Z,R),Fe=new ca(V,ve,Z);return i===!1&&Z.info({req:ve},"incoming request"),a(new $8(I),ve,Fe)}let B=`{"error":"Bad Request","code":"FST_ERR_BAD_URL","message":"'${I}' is not a valid url component","statusCode":400}`;V.writeHead(400,{"Content-Type":"application/json","Content-Length":B.length}),V.end(B)}function Ke(I,q,V){if(I!==!1)return function(ae){if(ae){if(a){let ve=r(q),Fe=_1(R,u,q,ve),jn=new Gl(ve,null,q,null,Fe,R),Me=new ca(V,jn,Fe);return i===!1&&Fe.info({req:jn},"incoming request"),a(new P8,jn,Me)}let Z='{"error":"Internal Server Error","message":"Unexpected error from async constraint","statusCode":500}';V.writeHead(500,{"Content-Type":"application/json","Content-Length":Z.length}),V.end(Z)}}}function Kt(I,q){return x('Cannot call "setNotFoundHandler"!'),h.setNotFoundHandler.call(this,I,q,k,d.routeHandler),this}function Re(I){return x('Cannot call "setValidatorCompiler"!'),this[Dn].setValidatorCompiler(I),this}function xr(I){return x('Cannot call "setSchemaErrorFormatter"!'),w1(I),this[hy]=I.bind(this),this}function ot(I){return x('Cannot call "setSerializerCompiler"!'),this[Dn].setSerializerCompiler(I),this}function de(I){x('Cannot call "setSchemaController"!');let q=this[Dn],V=y1.buildSchemaController(q,Object.assign({},q.opts,I));return this[Dn]=V,this.getSchema=V.getSchema.bind(V),this.getSchemas=V.getSchemas.bind(V),this}function Ze(I){return x('Cannot call "setReplySerializer"!'),this[p1]=I,this}function te(I){return x('Cannot call "setErrorHandler"!'),this[Bl]=b1(this[Bl],I.bind(this)),this}function we(I){return x('Cannot call "setChildLoggerFactory"!'),this[my]=I,this}function Lt(I={}){return I.includeMeta=I.includeHooks?I.includeMeta?yy.concat(I.includeMeta):yy:I.includeMeta,d.printRoutes(I)}function Te(I,{rewriteUrl:q,logger:V}){let B;return function(Z,ve){if(B===void 0&&(B=I.isAsyncConstraint()),q){Z.originalUrl=Z.url;let Fe=q.call(b,Z);if(typeof Fe=="string")Z.url=Fe;else{let jn=new x8(Z.url,typeof Fe);Z.destroy(jn)}}I.routing(Z,ve,Ke(B,Z,ve))}}}Kl.errorCodes=ms;function w1(e){if(typeof e!="function")throw new S1(typeof e);if(e.constructor.name==="AsyncFunction")throw new S1("AsyncFunction")}Yl.exports=Kl;Yl.exports.fastify=Kl;Yl.exports.default=Kl});var P1=E((EX,F8)=>{F8.exports={name:"dotenv",version:"16.3.2",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard","lint-readme":"standard-markdown",pretest:"npm run lint && npm run dts-check",test:"tap tests/*.js --100 -Rspec",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},funding:"https://github.com/motdotla/dotenv?sponsor=1",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@definitelytyped/dtslint":"^0.0.133","@types/node":"^18.11.3",decache:"^4.6.1",sinon:"^14.0.1",standard:"^17.0.0","standard-markdown":"^7.1.0","standard-version":"^9.5.0",tap:"^16.3.0",tar:"^6.1.11",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var C1=E((SX,an)=>{var $1=require("fs"),gy=require("path"),M8=require("os"),V8=require("crypto"),H8=P1(),_y=H8.version,z8=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function U8(e){let t={},r=e.toString();r=r.replace(/\r\n?/mg,`
`);let n;for(;(n=z8.exec(r))!=null;){let s=n[1],i=n[2]||"";i=i.trim();let o=i[0];i=i.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),o==='"'&&(i=i.replace(/\\n/g,`
`),i=i.replace(/\\r/g,"\r")),t[s]=i}return t}function B8(e){let t=A1(e),r=ht.configDotenv({path:t});if(!r.parsed)throw new Error(`MISSING_DATA: Cannot parse ${t} for an unknown reason`);let n=O1(e).split(","),s=n.length,i;for(let o=0;o<s;o++)try{let a=n[o].trim(),u=Y8(r,a);i=ht.decrypt(u.ciphertext,u.key);break}catch(a){if(o+1>=s)throw a}return ht.parse(i)}function G8(e){console.log(`[dotenv@${_y}][INFO] ${e}`)}function K8(e){console.log(`[dotenv@${_y}][WARN] ${e}`)}function Wl(e){console.log(`[dotenv@${_y}][DEBUG] ${e}`)}function O1(e){return e&&e.DOTENV_KEY&&e.DOTENV_KEY.length>0?e.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function Y8(e,t){let r;try{r=new URL(t)}catch(a){throw a.code==="ERR_INVALID_URL"?new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenv.org/vault/.env.vault?environment=development"):a}let n=r.password;if(!n)throw new Error("INVALID_DOTENV_KEY: Missing key part");let s=r.searchParams.get("environment");if(!s)throw new Error("INVALID_DOTENV_KEY: Missing environment part");let i=`DOTENV_VAULT_${s.toUpperCase()}`,o=e.parsed[i];if(!o)throw new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${i} in your .env.vault file.`);return{ciphertext:o,key:n}}function A1(e){let t=gy.resolve(process.cwd(),".env");return e&&e.path&&e.path.length>0&&(t=e.path),t.endsWith(".vault")?t:`${t}.vault`}function W8(e){return e[0]==="~"?gy.join(M8.homedir(),e.slice(1)):e}function J8(e){G8("Loading env from encrypted .env.vault");let t=ht._parseVault(e),r=process.env;return e&&e.processEnv!=null&&(r=e.processEnv),ht.populate(r,t,e),{parsed:t}}function X8(e){let t=gy.resolve(process.cwd(),".env"),r="utf8",n=!!(e&&e.debug);e&&(e.path!=null&&(t=W8(e.path)),e.encoding!=null?r=e.encoding:n&&Wl("No encoding is specified. UTF-8 is used by default"));try{let s=ht.parse($1.readFileSync(t,{encoding:r})),i=process.env;return e&&e.processEnv!=null&&(i=e.processEnv),ht.populate(i,s,e),{parsed:s}}catch(s){return n&&Wl(`Failed to load ${t} ${s.message}`),{error:s}}}function Q8(e){let t=A1(e);return O1(e).length===0?ht.configDotenv(e):$1.existsSync(t)?ht._configVault(e):(K8(`You set DOTENV_KEY but you are missing a .env.vault file at ${t}. Did you forget to build it?`),ht.configDotenv(e))}function Z8(e,t){let r=Buffer.from(t.slice(-64),"hex"),n=Buffer.from(e,"base64"),s=n.subarray(0,12),i=n.subarray(-16);n=n.subarray(12,-16);try{let o=V8.createDecipheriv("aes-256-gcm",r,s);return o.setAuthTag(i),`${o.update(n)}${o.final()}`}catch(o){let a=o instanceof RangeError,u=o.message==="Invalid key length",c=o.message==="Unsupported state or unable to authenticate data";if(a||u){let l="INVALID_DOTENV_KEY: It must be 64 characters long (or more)";throw new Error(l)}else if(c){let l="DECRYPTION_FAILED: Please check your DOTENV_KEY";throw new Error(l)}else throw console.error("Error: ",o.code),console.error("Error: ",o.message),o}}function eK(e,t,r={}){let n=!!(r&&r.debug),s=!!(r&&r.override);if(typeof t!="object")throw new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");for(let i of Object.keys(t))Object.prototype.hasOwnProperty.call(e,i)?(s===!0&&(e[i]=t[i]),n&&Wl(s===!0?`"${i}" is already defined and WAS overwritten`:`"${i}" is already defined and was NOT overwritten`)):e[i]=t[i]}var ht={configDotenv:X8,_configVault:J8,_parseVault:B8,config:Q8,decrypt:Z8,parse:U8,populate:eK};an.exports.configDotenv=ht.configDotenv;an.exports._configVault=ht._configVault;an.exports._parseVault=ht._parseVault;an.exports.config=ht.config;an.exports.decrypt=ht.decrypt;an.exports.parse=ht.parse;an.exports.populate=ht.populate;an.exports=ht});var nK={};X1(nK,{FastifyAdapter:()=>vy,default:()=>rK});module.exports=Q1(nK);(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="f061040e-fef9-4434-8c28-8bb84b457133",e._sentryDebugIdIdentifier="sentry-dbid-f061040e-fef9-4434-8c28-8bb84b457133")}catch{}})();var N1=ec(Xy()),k1=ec(T1());var I1=ec(C1());I1.default.config({path:`${__dirname}/../../../.env`});var tK=["NODE_ENV","LOG_LEVEL","MONGO_URL","AWS_REGION","AWS_COGNITO_CLIENT_ID","AWS_COGNITO_USER_POOL_ID","PUBLIC_IMAGES_BUCKET_NAME","TOPIC_ARN"],Jl=class{configValues={};constructor(){tK.forEach(t=>{let r=process.env[t];if(!r)throw new Error(`ENV_NOT_DEFINED_OR_MISSING: ${t}`);this.configValues[t]=r})}getValue(t){let r=this.configValues[t];if(!r)throw new Error(`ENV_NOT_DEFINED_OR_MISSING: ${t}`);return r}isLocal(){let t=this.getValue("NODE_ENV");return["LOCAL"].includes(t.toUpperCase())}isProduction(){let t=this.getValue("NODE_ENV");return["PRD","PROD","PRODUCTION"].includes(t.toUpperCase())}};var Xl=class e extends Error{constructor(r,n,s,i=500){super(r);this.message=r;this.data=n;this.stack=s;this.statusCode=i;this.name="HttpError",Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace(this,e)}};var vy=class{app;appConfig;constructor(){this.app=(0,k1.default)(),this.app.register(N1.default),this.appConfig=new Jl}route(t,r,n){this.app.route({method:t,url:r,handler:async(s,i)=>{let o={status:204},a={headers:s.headers||{},body:s.body||{},query:s.query||{},params:s.params||{}},u=await n.handle(a);return o.status=u.statusCode,u instanceof Xl?o.error={name:u.name,message:u.message,code:u.data,stack:this.appConfig.isLocal()?u.stack:void 0}:o.data=u.body,i.code(o.status),o}})}async run(t){try{return await this.app.listen({port:t,listenTextResolver:()=>`server is running on port: ${t}`}),this.app}catch(r){this.app.log.error(r),process.exit(1)}}async close(){try{await this.app.close(),this.app.log.info("server was closed")}catch(t){this.app.log.error(t),process.exit(1)}}getInstance(){return this.app}};var rK=void 0;0&&(module.exports={FastifyAdapter});
/*! Bundled license information:

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)

forwarded/index.js:
  (*!
   * forwarded
   * Copyright(c) 2014-2017 Douglas Christopher Wilson
   * MIT Licensed
   *)

proxy-addr/index.js:
  (*!
   * proxy-addr
   * Copyright(c) 2014-2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

toad-cache/dist/toad-cache.cjs:
  (**
   * toad-cache
   *
   * @copyright 2023 Igor Savin <kibertoad@gmail.com>
   * @license MIT
   * @version 3.4.1
   *)

cookie/index.js:
  (*!
   * cookie
   * Copyright(c) 2012-2014 Roman Shtylman
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)
*/
//# sourceMappingURL=FastifyAdapter.js.map
