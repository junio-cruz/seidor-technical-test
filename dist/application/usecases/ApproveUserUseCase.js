var u=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var _=Object.prototype.hasOwnProperty;var g=(r,e)=>{for(var s in e)u(r,s,{get:e[s],enumerable:!0})},y=(r,e,s,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of f(e))!_.call(r,o)&&o!==s&&u(r,o,{get:()=>e[o],enumerable:!(t=m(e,o))||t.enumerable});return r};var I=r=>y(u({},"__esModule",{value:!0}),r);var R={};g(R,{ApproveUserUseCase:()=>U,default:()=>b});module.exports=I(R);(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[e]="fb732a9c-60f5-4ed3-b8a4-05ad00af4a90",r._sentryDebugIdIdentifier="sentry-dbid-fb732a9c-60f5-4ed3-b8a4-05ad00af4a90")}catch{}})();var d=class{constructor(e){this.entityModel=e;this.clientSession=e}clientSession;start(){return this.clientSession=[],!!this.clientSession}getSession(){if(this.clientSession)return this.clientSession;throw new Error("START_DATABASE_ERROR")}updateSession(e){return this.clientSession=e,this.clientSession}},p=new d([]);var a=class{async execute(e){return p.getSession().find(t=>t.user_id===e.user_id||t.auth_token===e.user_id||t.email===e.user_id)||null}};var n=class{async execute(e){let s,t=p.getSession(),o=t.find(i=>i.user_id===e.user_id||e.user_id===i.email)||null;if(!o)return o;let c=t.map(i=>i.user_id===e.user_id&&i.user_id===e.user_id?(s={user_id:e.user_id,...e.to_update,email:i.email,created_at:i.created_at},s):i);return p.updateSession(c),s}};var U=class{constructor(e,s,t=new a,o=new n){this.logger=e;this.appConfig=s;this.getUserRepository=t;this.updateUserRepository=o;this.logger=this.logger.getChild("ApproveUserUseCase")}async execute(e){this.logger.debug("execute input",JSON.stringify(e));let s=await this.getUserRepository.execute({user_id:e.admin_id});if(!s)throw new Error("ADMIN_USER_NOT_FOUND");if(s.role!=="Admin")throw new Error("ADMIN_USER_NOT_AUTHORIZED");let t=this.updateUserRepository.execute({user_id:e.user_id,to_update:{approved_at:new Date}});return this.logger.debug("update user repository response",t),t&&(this.logger.debug("execute output",t),t)}};var b=void 0;0&&(module.exports={ApproveUserUseCase});
//# sourceMappingURL=ApproveUserUseCase.js.map
